\doxysection{button\+Event.\+cxx}
\hypertarget{buttonEvent_8cxx_source}{}\label{buttonEvent_8cxx_source}\index{panda/src/event/buttonEvent.cxx@{panda/src/event/buttonEvent.cxx}}
\mbox{\hyperlink{buttonEvent_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{buttonEvent_8h}{buttonEvent.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{buttonRegistry_8h}{buttonRegistry.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textEncoder_8h}{textEncoder.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00023\ \textcolor{keywordtype}{void}\ ButtonEvent::}
\DoxyCodeLine{00024\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{switch}\ (\_type)\ \{}
\DoxyCodeLine{00026\ \ \ \textcolor{keywordflow}{case}\ T\_down:}
\DoxyCodeLine{00027\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ down"{}};}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{case}\ T\_resume\_down:}
\DoxyCodeLine{00031\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ resume\ down"{}};}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{case}\ T\_up:}
\DoxyCodeLine{00035\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ up"{}};}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{case}\ T\_repeat:}
\DoxyCodeLine{00039\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ repeat"{}};}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{case}\ T\_keystroke:}
\DoxyCodeLine{00043\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}keystroke\ "{}}\ <<\ \_keycode;}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{keywordflow}{case}\ T\_candidate:}
\DoxyCodeLine{00047\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}candidate\ "{}}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ <<\ TextEncoder::encode\_wtext(\_candidate\_string,}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TextEncoder::get\_default\_encoding());}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{case}\ T\_move:}
\DoxyCodeLine{00053\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}move"{}};}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_down:}
\DoxyCodeLine{00057\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}raw\ button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ down"{}};}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_up:}
\DoxyCodeLine{00061\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}raw\ button\ "{}}\ <<\ \_button\ <<\ \textcolor{stringliteral}{"{}\ up"{}};}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00069\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classButtonEvent_af0060b052277f9ac2cb741c6037657ab}{ButtonEvent::}}}
\DoxyCodeLine{00070\ \mbox{\hyperlink{classButtonEvent_af0060b052277f9ac2cb741c6037657ab}{write\_datagram}}(\mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00071\ \ \ dg.add\_uint8(\_type);}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{switch}\ (\_type)\ \{}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{case}\ T\_down:}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{case}\ T\_resume\_down:}
\DoxyCodeLine{00075\ \ \ \textcolor{keywordflow}{case}\ T\_up:}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{case}\ T\_repeat:}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_down:}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_up:}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ We\ write\ the\ button\ name.\ \ This\ is\ not\ particularly\ compact,\ but}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ presumably\ we\ don't\ get\ thousands\ of\ button\ events\ per\ frame,\ and\ it\ is}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ robust\ as\ the\ button\ index\ may\ change\ between\ sessions\ but\ the\ button}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ name\ will\ not.}}
\DoxyCodeLine{00083\ \ \ \ \ dg.add\_string(\_button.get\_name());}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{case}\ T\_keystroke:}
\DoxyCodeLine{00087\ \ \ \ \ dg.add\_uint16(\_keycode);}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordflow}{case}\ T\_candidate:}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ We\ should\ probably\ store\ the\ wtext\ directly\ in\ the\ datagram\ rather\ than}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ encoding\ it,\ but\ I\ don't\ feel\ like\ adding\ add\_wstring()\ to\ datagram}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{comment}{//\ right\ now.}}
\DoxyCodeLine{00094\ \ \ \ \ dg.add\_string(TextEncoder::encode\_wtext(\_candidate\_string,}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TextEncoder::get\_default\_encoding()));}
\DoxyCodeLine{00096\ \ \ \ \ dg.add\_uint16(\_highlight\_start);}
\DoxyCodeLine{00097\ \ \ \ \ dg.add\_uint16(\_highlight\_end);}
\DoxyCodeLine{00098\ \ \ \ \ dg.add\_uint16(\_cursor\_pos);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keywordflow}{case}\ T\_move:}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classButtonEvent_a0fee4debfa3d337d92200d875c4c0ef4}{ButtonEvent::}}}
\DoxyCodeLine{00109\ \mbox{\hyperlink{classButtonEvent_a0fee4debfa3d337d92200d875c4c0ef4}{read\_datagram}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan)\ \{}
\DoxyCodeLine{00110\ \ \ \_type\ =\ (Type)scan.get\_uint8();}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{switch}\ (\_type)\ \{}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{case}\ T\_down:}
\DoxyCodeLine{00113\ \ \ \textcolor{keywordflow}{case}\ T\_resume\_down:}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{case}\ T\_up:}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordflow}{case}\ T\_repeat:}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_down:}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{case}\ T\_raw\_up:}
\DoxyCodeLine{00118\ \ \ \ \ \_button\ =\ ButtonRegistry::ptr()-\/>get\_button(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}());}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{case}\ T\_keystroke:}
\DoxyCodeLine{00122\ \ \ \ \ \_keycode\ =\ scan.get\_uint16();}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{case}\ T\_candidate:}
\DoxyCodeLine{00126\ \ \ \ \ \_candidate\_string\ =\ TextEncoder::decode\_text(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}(),}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TextEncoder::get\_default\_encoding());}
\DoxyCodeLine{00128\ \ \ \ \ \_highlight\_start\ =\ scan.get\_uint16();}
\DoxyCodeLine{00129\ \ \ \ \ \_highlight\_end\ =\ scan.get\_uint16();}
\DoxyCodeLine{00130\ \ \ \ \ \_cursor\_pos\ =\ scan.get\_uint16();}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{case}\ T\_move:}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00134\ \ \ \}}
\DoxyCodeLine{00135\ \}}

\end{DoxyCode}

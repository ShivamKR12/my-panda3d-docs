\doxysection{win\+Stats\+Monitor.\+cxx}
\hypertarget{winStatsMonitor_8cxx_source}{}\label{winStatsMonitor_8cxx_source}\index{pandatool/src/win-\/stats/winStatsMonitor.cxx@{pandatool/src/win-\/stats/winStatsMonitor.cxx}}
\mbox{\hyperlink{winStatsMonitor_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMonitor_8h}{winStatsMonitor.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsServer_8h}{winStatsServer.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsStripChart_8h}{winStatsStripChart.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsPianoRoll_8h}{winStatsPianoRoll.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsFlameGraph_8h}{winStatsFlameGraph.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsTimeline_8h}{winStatsTimeline.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsChartMenu_8h}{winStatsChartMenu.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMenuId_8h}{winStatsMenuId.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatFrameData_8h}{pStatFrameData.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatGraph_8h}{pStatGraph.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{convert__srgb_8h}{convert\_srgb.h}}"{}}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <commctrl.h>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <commdlg.h>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <uxtheme.h>}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00037\ WinStatsMonitor::}
\DoxyCodeLine{00038\ WinStatsMonitor(\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *server)\ :\ \mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}(server)\ \{}
\DoxyCodeLine{00039\ \ \ \_window\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_ab1a1edc7e6ff8d9c2bfbbef3bacb22dc}{get\_window}}();}
\DoxyCodeLine{00040\ \ \ \_menu\_bar\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_a10ca1d49ddcc1a8d154aa5e0ebed4562}{get\_menu\_bar}}();}
\DoxyCodeLine{00041\ \ \ \_status\_bar\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_a8929a18e67c371bf2c8cdb676ecfa169}{get\_status\_bar}}();}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ These\ will\ be\ filled\ in\ later\ when\ the\ menu\ is\ created.}}
\DoxyCodeLine{00044\ \ \ \_scroll\_speed\ =\ 0.0;}
\DoxyCodeLine{00045\ \ \ \_pause\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ setup\_speed\_menu();}
\DoxyCodeLine{00048\ \ \ setup\_frame\_rate\_label();}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00054\ WinStatsMonitor::}
\DoxyCodeLine{00055\ \string~WinStatsMonitor()\ \{}
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{classWinStatsMonitor_abcfeeec7e249e60254973893c4332359}{close}}();}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00062\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_abcfeeec7e249e60254973893c4332359}{WinStatsMonitor::}}}
\DoxyCodeLine{00063\ \mbox{\hyperlink{classWinStatsMonitor_abcfeeec7e249e60254973893c4332359}{close}}()\ \{}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{PStatMonitor::close}}();}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a51486f844e392d205c5bde18e3ac158e}{remove\_all\_graphs}}();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ RemoveMenu(\_menu\_bar,\ 2,\ MF\_BYPOSITION);}
\DoxyCodeLine{00069\ \ \ RemoveMenu(\_menu\_bar,\ 2,\ MF\_BYPOSITION);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsChartMenu}{WinStatsChartMenu}}\ *chart\_menu\ :\ \_chart\_menus)\ \{}
\DoxyCodeLine{00072\ \ \ \ \ RemoveMenu(\_menu\_bar,\ 2,\ MF\_BYPOSITION);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{delete}\ chart\_menu;}
\DoxyCodeLine{00074\ \ \ \}}
\DoxyCodeLine{00075\ \ \ \_chart\_menus.clear();}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ DrawMenuBar(\_window);}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00084\ std::string\ \mbox{\hyperlink{classWinStatsMonitor_a6e438663a75ebdfd34396400b20ba95a}{WinStatsMonitor::}}}
\DoxyCodeLine{00085\ \mbox{\hyperlink{classWinStatsMonitor_a6e438663a75ebdfd34396400b20ba95a}{get\_monitor\_name}}()\ \{}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}WinStats"{}};}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a9b99970b3ec417a1aa35c56e3026a6b1}{WinStatsMonitor::}}}
\DoxyCodeLine{00097\ \mbox{\hyperlink{classWinStatsMonitor_a9b99970b3ec417a1aa35c56e3026a6b1}{initialized}}()\ \{}
\DoxyCodeLine{00098\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00104\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a4f05896cc19376ba35013f51c3d00aa0}{WinStatsMonitor::}}}
\DoxyCodeLine{00105\ \mbox{\hyperlink{classWinStatsMonitor_a4f05896cc19376ba35013f51c3d00aa0}{got\_hello}}()\ \{}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00115\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a850b76594a964c51c40941fd8951620e}{WinStatsMonitor::}}}
\DoxyCodeLine{00116\ \mbox{\hyperlink{classWinStatsMonitor_a850b76594a964c51c40941fd8951620e}{got\_bad\_version}}(\textcolor{keywordtype}{int}\ client\_major,\ \textcolor{keywordtype}{int}\ client\_minor,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ server\_major,\ \textcolor{keywordtype}{int}\ server\_minor)\ \{}
\DoxyCodeLine{00118\ \ \ \mbox{\hyperlink{classstd_1_1ostringstream}{std::ostringstream}}\ str;}
\DoxyCodeLine{00119\ \ \ str\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ honor\ connection\ attempt\ from\ "{}}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ <<\ get\_client\_progname()\ <<\ \textcolor{stringliteral}{"{}\ on\ "{}}\ <<\ get\_client\_hostname()}
\DoxyCodeLine{00121\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}:\ unsupported\ PStats\ version\ "{}}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ <<\ client\_major\ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ client\_minor;}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{keywordflow}{if}\ (server\_minor\ ==\ 0)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ str\ <<\ \textcolor{stringliteral}{"{}\ (server\ understands\ version\ "{}}\ <<\ server\_major}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ server\_minor\ <<\ \textcolor{stringliteral}{"{}\ only)."{}};}
\DoxyCodeLine{00127\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00128\ \ \ \ \ str\ <<\ \textcolor{stringliteral}{"{}\ (server\ understands\ versions\ "{}}\ <<\ server\_major}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}.0\ through\ "{}}\ <<\ server\_major\ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ server\_minor\ <<\ \textcolor{stringliteral}{"{})."{}};}
\DoxyCodeLine{00130\ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ std::string\ message\ =\ str.str();}
\DoxyCodeLine{00133\ \ \ MessageBox(\textcolor{keyword}{nullptr},\ message.c\_str(),\ \textcolor{stringliteral}{"{}Bad\ version"{}},}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ MB\_OK\ |\ MB\_ICONINFORMATION\ |\ MB\_SETFOREGROUND);}
\DoxyCodeLine{00135\ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00144\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_aaccc06eb2e03422e1d256054c5d36f41}{WinStatsMonitor::}}}
\DoxyCodeLine{00145\ \mbox{\hyperlink{classWinStatsMonitor_aaccc06eb2e03422e1d256054c5d36f41}{new\_collector}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ graph-\/>new\_collector(collector\_index);}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00158\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_ab179db391d97cb4b266f002d5bbe537c}{WinStatsMonitor::}}}
\DoxyCodeLine{00159\ \mbox{\hyperlink{classWinStatsMonitor_ab179db391d97cb4b266f002d5bbe537c}{new\_thread}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classWinStatsChartMenu}{WinStatsChartMenu}}\ *chart\_menu\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classWinStatsChartMenu}{WinStatsChartMenu}}(\textcolor{keyword}{this},\ thread\_index);}
\DoxyCodeLine{00161\ \ \ chart\_menu-\/>\mbox{\hyperlink{classWinStatsChartMenu_a1487f23f3e7a7cdae8c010c17f3df8e8}{add\_to\_menu\_bar}}(\_menu\_bar,\ MI\_frame\_rate\_label);}
\DoxyCodeLine{00162\ \ \ \_chart\_menus.push\_back(chart\_menu);}
\DoxyCodeLine{00163\ \ \ DrawMenuBar(\_window);}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00166\ \ \ \ \ update\_status\_bar();}
\DoxyCodeLine{00167\ \ \ \}}
\DoxyCodeLine{00168\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00173\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_aaf557accf56950630eb2f22ec1763b7b}{WinStatsMonitor::}}}
\DoxyCodeLine{00174\ \mbox{\hyperlink{classWinStatsMonitor_aaf557accf56950630eb2f22ec1763b7b}{remove\_thread}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordflow}{for}\ (ChartMenus::iterator\ it\ =\ \_chart\_menus.begin();\ it\ !=\ \_chart\_menus.end();\ ++it)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{classWinStatsChartMenu}{WinStatsChartMenu}}\ *chart\_menu\ =\ *it;}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{if}\ (chart\_menu-\/>get\_thread\_index()\ ==\ thread\_index)\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ chart\_menu-\/>remove\_from\_menu\_bar(\_menu\_bar);}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ chart\_menu;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \_chart\_menus.erase(it);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \}}
\DoxyCodeLine{00184\ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00192\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a8bc35222c21c7d46697e02f88526e5df}{WinStatsMonitor::}}}
\DoxyCodeLine{00193\ \mbox{\hyperlink{classWinStatsMonitor_a8bc35222c21c7d46697e02f88526e5df}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00194\ \ \ \mbox{\hyperlink{classPStatMonitor_a4bc7717cc967e0e4eb861979210b3aba}{PStatMonitor::new\_data}}(thread\_index,\ frame\_number);}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00197\ \ \ \ \ graph-\/>new\_data(thread\_index,\ frame\_number);}
\DoxyCodeLine{00198\ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ update\_status\_bar();}
\DoxyCodeLine{00202\ \ \ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{if}\ (!\_have\_data)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}();}
\DoxyCodeLine{00206\ \ \ \ \ \_have\_data\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00207\ \ \ \}}
\DoxyCodeLine{00208\ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00215\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_afd457f8b6173ae85fcca0513f43cb258}{WinStatsMonitor::}}}
\DoxyCodeLine{00216\ \mbox{\hyperlink{classWinStatsMonitor_afd457f8b6173ae85fcca0513f43cb258}{lost\_connection}}()\ \{}
\DoxyCodeLine{00217\ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Lost\ connection\ to\ "{}}\ <<\ get\_client\_hostname()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00218\ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00224\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a57b5a553a0b738c72ba3feae624903a4}{WinStatsMonitor::}}}
\DoxyCodeLine{00225\ \mbox{\hyperlink{classWinStatsMonitor_a57b5a553a0b738c72ba3feae624903a4}{idle}}()\ \{}
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ Check\ if\ any\ of\ our\ chart\ menus\ need\ updating.}}
\DoxyCodeLine{00227\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsChartMenu}{WinStatsChartMenu}}\ *chart\_menu\ :\ \_chart\_menus)\ \{}
\DoxyCodeLine{00228\ \ \ \ \ chart\_menu-\/>check\_update();}
\DoxyCodeLine{00229\ \ \ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \textcolor{comment}{//\ Update\ the\ frame\ rate\ label\ from\ the\ main\ thread\ (thread\ 0).}}
\DoxyCodeLine{00232\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ get\_client\_data()-\/>\mbox{\hyperlink{classPStatClientData_a46e69042db6f96f3c5eb00990c904dc8}{get\_thread\_data}}(0);}
\DoxyCodeLine{00233\ \ \ \textcolor{keywordtype}{double}\ frame\_rate\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a36bd71263c50a364e3f44627ec9c4606}{get\_frame\_rate}}();}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{if}\ (frame\_rate\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{comment}{//\ The\ leading\ tab\ centers\ the\ text\ in\ the\ status\ bar.}}
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[128];}
\DoxyCodeLine{00237\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\(\backslash\)t\%0.1f\ ms\ /\ \%0.1f\ Hz"{}},\ 1000.0f\ /\ frame\_rate,\ frame\_rate);}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00240\ \ \ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00241\ \ \ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00242\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING;}
\DoxyCodeLine{00243\ \ \ \ \ mii.dwTypeData\ =\ buffer\ +\ 1;\ \textcolor{comment}{//\ chop\ off\ leading\ tab}}
\DoxyCodeLine{00244\ \ \ \ \ SetMenuItemInfo(\_menu\_bar,\ MI\_frame\_rate\_label,\ FALSE,\ \&mii);}
\DoxyCodeLine{00245\ \ \ \ \ DrawMenuBar(\_window);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_status\_bar)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ SendMessage(\_status\_bar,\ WM\_SETTEXT,\ 0,\ (LPARAM)buffer);}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \}}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00257\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classWinStatsMonitor_a0205e0445dfab7290ec7eda7017f19da}{WinStatsMonitor::}}}
\DoxyCodeLine{00258\ \mbox{\hyperlink{classWinStatsMonitor_a0205e0445dfab7290ec7eda7017f19da}{has\_idle}}()\ \{}
\DoxyCodeLine{00259\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00260\ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00265\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a61ab0aa4b55e73cbfcf798ffeb2b99db}{WinStatsMonitor::}}}
\DoxyCodeLine{00266\ \mbox{\hyperlink{classWinStatsMonitor_a61ab0aa4b55e73cbfcf798ffeb2b99db}{user\_guide\_bars\_changed}}()\ \{}
\DoxyCodeLine{00267\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ graph-\/>user\_guide\_bars\_changed();}
\DoxyCodeLine{00269\ \ \ \}}
\DoxyCodeLine{00270\ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00275\ HWND\ \mbox{\hyperlink{classWinStatsMonitor_a7dedbb3501ec146b51bc5219eaa4d01f}{WinStatsMonitor::}}}
\DoxyCodeLine{00276\ \mbox{\hyperlink{classWinStatsMonitor_a7dedbb3501ec146b51bc5219eaa4d01f}{get\_window}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00277\ \ \ \textcolor{keywordflow}{return}\ \_window;}
\DoxyCodeLine{00278\ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00283\ HFONT\ \mbox{\hyperlink{classWinStatsMonitor_aee985f04392e70bbe4b9ec00573f2047}{WinStatsMonitor::}}}
\DoxyCodeLine{00284\ \mbox{\hyperlink{classWinStatsMonitor_aee985f04392e70bbe4b9ec00573f2047}{get\_font}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00285\ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_server)-\/>get\_font();}
\DoxyCodeLine{00286\ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00291\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classWinStatsMonitor_a9b876aa25df0e63d81ed95d2c37c90b5}{WinStatsMonitor::}}}
\DoxyCodeLine{00292\ \mbox{\hyperlink{classWinStatsMonitor_a9b876aa25df0e63d81ed95d2c37c90b5}{get\_pixel\_scale}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_server)-\/>get\_pixel\_scale();}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00299\ POINT\ \mbox{\hyperlink{classWinStatsMonitor_a2f0a1a79cadac41d2e0d9722c80ca0dd}{WinStatsMonitor::}}}
\DoxyCodeLine{00300\ \mbox{\hyperlink{classWinStatsMonitor_a2f0a1a79cadac41d2e0d9722c80ca0dd}{get\_new\_window\_pos}}()\ \{}
\DoxyCodeLine{00301\ \ \ \mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *server\ =\ (\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_server;}
\DoxyCodeLine{00302\ \ \ \textcolor{keywordtype}{int}\ offset\ =\ \_graphs.size()\ *\ 10\ *\ server-\/>\mbox{\hyperlink{classWinStatsServer_a24e79fddb659f2e70802a9788b5aeec5}{get\_pixel\_scale}}();}
\DoxyCodeLine{00303\ \ \ POINT\ client\_origin\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_a1f92e6832505808b8cb817e95b1f1436}{get\_client\_origin}}();}
\DoxyCodeLine{00304\ \ \ POINT\ pt;}
\DoxyCodeLine{00305\ \ \ pt.x\ =\ offset\ +\ client\_origin.x;}
\DoxyCodeLine{00306\ \ \ pt.y\ =\ offset\ +\ client\_origin.y;}
\DoxyCodeLine{00307\ \ \ \textcolor{keywordflow}{return}\ pt;}
\DoxyCodeLine{00308\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00313\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classWinStatsMonitor_a63d0b1c254400a404b6c8e21b34c0a75}{WinStatsMonitor::}}}
\DoxyCodeLine{00314\ \mbox{\hyperlink{classWinStatsMonitor_a63d0b1c254400a404b6c8e21b34c0a75}{open\_timeline}}()\ \{}
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{classWinStatsTimeline}{WinStatsTimeline}}\ *graph\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classWinStatsTimeline}{WinStatsTimeline}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00316\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{add\_graph}}(graph);}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00318\ \}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00323\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{WinStatsMonitor::}}}
\DoxyCodeLine{00324\ \mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level)\ \{}
\DoxyCodeLine{00325\ \ \ \mbox{\hyperlink{classWinStatsStripChart}{WinStatsStripChart}}\ *graph\ =}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{classWinStatsStripChart}{WinStatsStripChart}}(\textcolor{keyword}{this},\ thread\_index,\ collector\_index,\ show\_level);}
\DoxyCodeLine{00327\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{add\_graph}}(graph);}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00329\ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00334\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classWinStatsMonitor_a19a5f72039f430ce2b33a559c183f5b0}{WinStatsMonitor::}}}
\DoxyCodeLine{00335\ \mbox{\hyperlink{classWinStatsMonitor_a19a5f72039f430ce2b33a559c183f5b0}{open\_flame\_graph}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00336\ \ \ \mbox{\hyperlink{classWinStatsFlameGraph}{WinStatsFlameGraph}}\ *graph\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classWinStatsFlameGraph}{WinStatsFlameGraph}}(\textcolor{keyword}{this},\ thread\_index,\ collector\_index,\ frame\_number);}
\DoxyCodeLine{00337\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{add\_graph}}(graph);}
\DoxyCodeLine{00338\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00339\ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00344\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classWinStatsMonitor_a92573dca4aeb9832588518f0193cd143}{WinStatsMonitor::}}}
\DoxyCodeLine{00345\ \mbox{\hyperlink{classWinStatsMonitor_a92573dca4aeb9832588518f0193cd143}{open\_piano\_roll}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00346\ \ \ \mbox{\hyperlink{classWinStatsPianoRoll}{WinStatsPianoRoll}}\ *graph\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classWinStatsPianoRoll}{WinStatsPianoRoll}}(\textcolor{keyword}{this},\ thread\_index);}
\DoxyCodeLine{00347\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{add\_graph}}(graph);}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00349\ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00354\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_aa0bc0a0c7e4117e72da204b54debe60f}{WinStatsMonitor::}}}
\DoxyCodeLine{00355\ \mbox{\hyperlink{classWinStatsMonitor_aa0bc0a0c7e4117e72da204b54debe60f}{choose\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00356\ \ \ \textcolor{keyword}{const}\ LRGBColor\ \&current\ =\ \mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{get\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00357\ \ \ \textcolor{keyword}{static}\ COLORREF\ custom\_colors[16]\ =\ \{0\};}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ CHOOSECOLORA\ cc\ =\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keyword}{sizeof}(CHOOSECOLORA),}
\DoxyCodeLine{00361\ \ \ \ \ \_window,}
\DoxyCodeLine{00362\ \ \ \ \ 0,}
\DoxyCodeLine{00363\ \ \ \ \ RGB(encode\_sRGB\_uchar((\textcolor{keywordtype}{float})current[0]),}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ encode\_sRGB\_uchar((\textcolor{keywordtype}{float})current[1]),}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ encode\_sRGB\_uchar((\textcolor{keywordtype}{float})current[2])),}
\DoxyCodeLine{00366\ \ \ \ \ (LPDWORD)custom\_colors,}
\DoxyCodeLine{00367\ \ \ \ \ CC\_FULLOPEN\ |\ CC\_RGBINIT,}
\DoxyCodeLine{00368\ \ \ \ \ 0,}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00370\ \ \ \ \ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00371\ \ \ \};}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \textcolor{keywordflow}{if}\ (ChooseColorA(\&cc))\ \{}
\DoxyCodeLine{00374\ \ \ \ \ LRGBColor\ result(}
\DoxyCodeLine{00375\ \ \ \ \ \ \ decode\_sRGB\_float(GetRValue(cc.rgbResult)),}
\DoxyCodeLine{00376\ \ \ \ \ \ \ decode\_sRGB\_float(GetGValue(cc.rgbResult)),}
\DoxyCodeLine{00377\ \ \ \ \ \ \ decode\_sRGB\_float(GetBValue(cc.rgbResult)));}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a9f50836f722b9738e258b90a65402855}{set\_collector\_color}}(collector\_index,\ result);}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ graph-\/>reset\_collector\_color(collector\_index);}
\DoxyCodeLine{00383\ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \}}
\DoxyCodeLine{00385\ \}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00390\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a7d1d9acd32503d2aebd77c86c5ad42b5}{WinStatsMonitor::}}}
\DoxyCodeLine{00391\ \mbox{\hyperlink{classWinStatsMonitor_a7d1d9acd32503d2aebd77c86c5ad42b5}{reset\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00392\ \ \ \mbox{\hyperlink{classPStatMonitor_a5bb70f1407a516074a7fa71a724c9137}{clear\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00395\ \ \ \ \ graph-\/>reset\_collector\_color(collector\_index);}
\DoxyCodeLine{00396\ \ \ \}}
\DoxyCodeLine{00397\ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00403\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ \&\mbox{\hyperlink{classWinStatsMonitor_aed68293327521dfc9d8f21f6f0c28763}{WinStatsMonitor::}}}
\DoxyCodeLine{00404\ \mbox{\hyperlink{classWinStatsMonitor_aed68293327521dfc9d8f21f6f0c28763}{lookup\_menu}}(\textcolor{keywordtype}{int}\ menu\_id)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00405\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{MenuDef}}\ invalid(0,\ 0,\ CT\_strip\_chart,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00406\ \ \ \textcolor{keywordtype}{int}\ menu\_index\ =\ menu\_id\ -\/\ MI\_new\_chart;}
\DoxyCodeLine{00407\ \ \ nassertr(menu\_index\ >=\ 0\ \&\&\ menu\_index\ <\ (\textcolor{keywordtype}{int})\_menu\_by\_id.size(),\ invalid);}
\DoxyCodeLine{00408\ \ \ \textcolor{keywordflow}{return}\ \_menu\_by\_id[menu\_index];}
\DoxyCodeLine{00409\ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00416\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{WinStatsMonitor::}}}
\DoxyCodeLine{00417\ \mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{MenuDef}}\ \&menu\_def)\ \{}
\DoxyCodeLine{00418\ \ \ MenuByDef::iterator\ mi;}
\DoxyCodeLine{00419\ \ \ mi\ =\ \_menu\_by\_def.find(menu\_def);}
\DoxyCodeLine{00420\ \ \ \textcolor{keywordflow}{if}\ (mi\ !=\ \_menu\_by\_def.end())\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{return}\ (*mi).second;}
\DoxyCodeLine{00422\ \ \ \}}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \ \ \textcolor{comment}{//\ Slot\ a\ new\ id.}}
\DoxyCodeLine{00425\ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ (int)\_menu\_by\_id.size()\ +\ MI\_new\_chart;}
\DoxyCodeLine{00426\ \ \ \_menu\_by\_id.push\_back(menu\_def);}
\DoxyCodeLine{00427\ \ \ \_menu\_by\_def[menu\_def]\ =\ menu\_id;}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \textcolor{keywordflow}{return}\ menu\_id;}
\DoxyCodeLine{00430\ \}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00437\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_ab5f8f16aae10bd0c37ff1fee34ee768a}{WinStatsMonitor::}}}
\DoxyCodeLine{00438\ \mbox{\hyperlink{classWinStatsMonitor_ab5f8f16aae10bd0c37ff1fee34ee768a}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00439\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00440\ \ \ \ \ graph-\/>set\_time\_units(unit\_mask);}
\DoxyCodeLine{00441\ \ \ \}}
\DoxyCodeLine{00442\ \}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00448\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{WinStatsMonitor::}}}
\DoxyCodeLine{00449\ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00450\ \ \ \_scroll\_speed\ =\ scroll\_speed;}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \textcolor{comment}{//\ First,\ change\ all\ of\ the\ open\ graphs\ appropriately.}}
\DoxyCodeLine{00453\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00454\ \ \ \ \ graph-\/>set\_scroll\_speed(\_scroll\_speed);}
\DoxyCodeLine{00455\ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \textcolor{comment}{//\ Now\ change\ the\ checkmark\ on\ the\ pulldown\ menu.}}
\DoxyCodeLine{00458\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00459\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00460\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00461\ \ \ mii.fMask\ =\ MIIM\_STATE;}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ mii.fState\ =\ IS\_THRESHOLD\_EQUAL(\_scroll\_speed,\ 1.0,\ 0.1)\ ?}
\DoxyCodeLine{00464\ \ \ \ \ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00465\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_speed\_1,\ FALSE,\ \&mii);}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ mii.fState\ =\ IS\_THRESHOLD\_EQUAL(\_scroll\_speed,\ 2.0,\ 0.1)\ ?}
\DoxyCodeLine{00468\ \ \ \ \ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00469\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_speed\_2,\ FALSE,\ \&mii);}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ mii.fState\ =\ IS\_THRESHOLD\_EQUAL(\_scroll\_speed,\ 3.0,\ 0.1)\ ?}
\DoxyCodeLine{00472\ \ \ \ \ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00473\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_speed\_3,\ FALSE,\ \&mii);}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ mii.fState\ =\ IS\_THRESHOLD\_EQUAL(\_scroll\_speed,\ 6.0,\ 0.1)\ ?}
\DoxyCodeLine{00476\ \ \ \ \ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00477\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_speed\_6,\ FALSE,\ \&mii);}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ mii.fState\ =\ IS\_THRESHOLD\_EQUAL(\_scroll\_speed,\ 12.0,\ 0.1)\ ?}
\DoxyCodeLine{00480\ \ \ \ \ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00481\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_speed\_12,\ FALSE,\ \&mii);}
\DoxyCodeLine{00482\ \}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00487\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a1b9df82760e481688773f07d821361fb}{WinStatsMonitor::}}}
\DoxyCodeLine{00488\ \mbox{\hyperlink{classWinStatsMonitor_a1b9df82760e481688773f07d821361fb}{set\_pause}}(\textcolor{keywordtype}{bool}\ pause)\ \{}
\DoxyCodeLine{00489\ \ \ \_pause\ =\ pause;}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \textcolor{comment}{//\ First,\ change\ all\ of\ the\ open\ graphs\ appropriately.}}
\DoxyCodeLine{00492\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00493\ \ \ \ \ graph-\/>set\_pause(\_pause);}
\DoxyCodeLine{00494\ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \textcolor{comment}{//\ Now\ change\ the\ checkmark\ on\ the\ pulldown\ menu.}}
\DoxyCodeLine{00497\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00498\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00499\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00500\ \ \ mii.fMask\ =\ MIIM\_STATE;}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ mii.fState\ =\ \_pause\ ?\ MFS\_CHECKED\ :\ MFS\_UNCHECKED;}
\DoxyCodeLine{00503\ \ \ SetMenuItemInfo(\_speed\_menu,\ MI\_pause,\ FALSE,\ \&mii);}
\DoxyCodeLine{00504\ \}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00509\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{WinStatsMonitor::}}}
\DoxyCodeLine{00510\ \mbox{\hyperlink{classWinStatsMonitor_a6b332c6559a78a404e767f42f84cca9e}{add\_graph}}(\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph)\ \{}
\DoxyCodeLine{00511\ \ \ \_graphs.insert(graph);}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ graph-\/>\mbox{\hyperlink{classWinStatsGraph_a34152fa836e9bdf03848ff66f6d1af34}{set\_time\_units}}(((\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_server)-\/>get\_time\_units());}
\DoxyCodeLine{00514\ \ \ graph-\/>\mbox{\hyperlink{classWinStatsGraph_a13dca094434d17ba4a8d6227d050a225}{set\_scroll\_speed}}(\_scroll\_speed);}
\DoxyCodeLine{00515\ \ \ graph-\/>\mbox{\hyperlink{classWinStatsGraph_a0e6c130af2d0846c9195f291e324e8b4}{set\_pause}}(\_pause);}
\DoxyCodeLine{00516\ \}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00521\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a5879cbab0eee67f882b752a3387e891e}{WinStatsMonitor::}}}
\DoxyCodeLine{00522\ \mbox{\hyperlink{classWinStatsMonitor_a5879cbab0eee67f882b752a3387e891e}{remove\_graph}}(\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph)\ \{}
\DoxyCodeLine{00523\ \ \ Graphs::iterator\ gi\ =\ \_graphs.find(graph);}
\DoxyCodeLine{00524\ \ \ \textcolor{keywordflow}{if}\ (gi\ !=\ \_graphs.end())\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \_graphs.erase(gi);}
\DoxyCodeLine{00526\ \ \ \ \ \textcolor{keyword}{delete}\ graph;}
\DoxyCodeLine{00527\ \ \ \}}
\DoxyCodeLine{00528\ \}}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00533\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsMonitor_a51486f844e392d205c5bde18e3ac158e}{WinStatsMonitor::}}}
\DoxyCodeLine{00534\ \mbox{\hyperlink{classWinStatsMonitor_a51486f844e392d205c5bde18e3ac158e}{remove\_all\_graphs}}()\ \{}
\DoxyCodeLine{00535\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keyword}{delete}\ graph;}
\DoxyCodeLine{00537\ \ \ \}}
\DoxyCodeLine{00538\ \ \ \_graphs.clear();}
\DoxyCodeLine{00539\ \}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00544\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00545\ setup\_speed\_menu()\ \{}
\DoxyCodeLine{00546\ \ \ \_speed\_menu\ =\ CreatePopupMenu();}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00549\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00550\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_SUBMENU;}
\DoxyCodeLine{00553\ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00554\ \ \ mii.hSubMenu\ =\ \_speed\_menu;}
\DoxyCodeLine{00555\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Speed"{}};}
\DoxyCodeLine{00556\ \ \ InsertMenuItem(\_menu\_bar,\ GetMenuItemCount(\_menu\_bar),\ TRUE,\ \&mii);}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID\ |\ MIIM\_CHECKMARKS\ |\ MIIM\_STATE;}
\DoxyCodeLine{00560\ \ \ mii.fType\ =\ MFT\_STRING\ |\ MFT\_RADIOCHECK;}
\DoxyCodeLine{00561\ \ \ mii.hbmpChecked\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00562\ \ \ mii.hbmpUnchecked\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00563\ \ \ mii.fState\ =\ MFS\_UNCHECKED;}
\DoxyCodeLine{00564\ \ \ mii.wID\ =\ MI\_speed\_1;}
\DoxyCodeLine{00565\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}1"{}};}
\DoxyCodeLine{00566\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ mii.wID\ =\ MI\_speed\_2;}
\DoxyCodeLine{00569\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}2"{}};}
\DoxyCodeLine{00570\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ mii.wID\ =\ MI\_speed\_3;}
\DoxyCodeLine{00573\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}3"{}};}
\DoxyCodeLine{00574\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ mii.wID\ =\ MI\_speed\_6;}
\DoxyCodeLine{00577\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}6"{}};}
\DoxyCodeLine{00578\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ mii.wID\ =\ MI\_speed\_12;}
\DoxyCodeLine{00581\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}12"{}};}
\DoxyCodeLine{00582\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ mii.fMask\ =\ MIIM\_FTYPE;}
\DoxyCodeLine{00585\ \ \ mii.fType\ =\ MFT\_SEPARATOR;}
\DoxyCodeLine{00586\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID\ |\ MIIM\_CHECKMARKS\ |\ MIIM\_STATE;}
\DoxyCodeLine{00589\ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00590\ \ \ mii.wID\ =\ MI\_pause;}
\DoxyCodeLine{00591\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}pause"{}};}
\DoxyCodeLine{00592\ \ \ InsertMenuItem(\_speed\_menu,\ GetMenuItemCount(\_speed\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(3);}
\DoxyCodeLine{00595\ \ \ \mbox{\hyperlink{classWinStatsMonitor_a1b9df82760e481688773f07d821361fb}{set\_pause}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00596\ \}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00604\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00605\ setup\_frame\_rate\_label()\ \{}
\DoxyCodeLine{00606\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00607\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00608\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00611\ \ \ mii.fType\ =\ MFT\_STRING\ |\ MFT\_RIGHTJUSTIFY;}
\DoxyCodeLine{00612\ \ \ mii.wID\ =\ MI\_frame\_rate\_label;}
\DoxyCodeLine{00613\ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00614\ \ \ InsertMenuItem(\_menu\_bar,\ GetMenuItemCount(\_menu\_bar),\ TRUE,\ \&mii);}
\DoxyCodeLine{00615\ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00620\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00621\ update\_status\_bar()\ \{}
\DoxyCodeLine{00622\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ get\_client\_data();}
\DoxyCodeLine{00623\ \ \ \textcolor{keywordflow}{if}\ (client\_data\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00624\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00625\ \ \ \}}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ get\_client\_data()-\/>\mbox{\hyperlink{classPStatClientData_a46e69042db6f96f3c5eb00990c904dc8}{get\_thread\_data}}(0);}
\DoxyCodeLine{00628\ \ \ \textcolor{keywordflow}{if}\ (thread\_data\ ==\ \textcolor{keyword}{nullptr}\ ||\ thread\_data-\/>is\_empty())\ \{}
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00630\ \ \ \}}
\DoxyCodeLine{00631\ \ \ \textcolor{keywordtype}{int}\ frame\_number\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a69bcce3d1e7df55590225f42c70d815c}{get\_latest\_frame\_number}}();}
\DoxyCodeLine{00632\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatFrameData}{PStatFrameData}}\ \&frame\_data\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a418fd8083999201fe9601b35e607999c}{get\_latest\_frame}}();}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \textcolor{comment}{//\ Gather\ the\ top-\/level\ collector\ list.}}
\DoxyCodeLine{00635\ \ \ \mbox{\hyperlink{classpvector}{pvector<std::string>}}\ parts;}
\DoxyCodeLine{00636\ \ \ \mbox{\hyperlink{classpvector}{pvector<int>}}\ collectors;}
\DoxyCodeLine{00637\ \ \ \textcolor{keywordtype}{size\_t}\ total\_chars\ =\ 0;}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \textcolor{keywordtype}{int}\ num\_toplevel\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a86cbac0fa6c4d9c66ff2d24f001c3148}{get\_num\_toplevel\_collectors}}();}
\DoxyCodeLine{00640\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ tc\ =\ 0;\ tc\ <\ num\_toplevel\_collectors;\ tc++)\ \{}
\DoxyCodeLine{00641\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_abce44a655ded672baee4aa5b2463169f}{get\_toplevel\_collector}}(tc);}
\DoxyCodeLine{00642\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector)\ \&\&}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_acb68b1772c25759dfffd96795a1da39d}{get\_collector\_has\_level}}(collector,\ 0))\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ 0);}
\DoxyCodeLine{00645\ \ \ \ \ \ \ view.\mbox{\hyperlink{classPStatView_a58673e539f32b9df52b690e82a8fddbb}{set\_to\_frame}}(frame\_data);}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ value\ =\ view.\mbox{\hyperlink{classPStatView_a2dcc2465a2515c85d8993b34c80e00ef}{get\_net\_value}}();}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (value\ ==\ 0.0)\ \{}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Don't\ include\ it\ unless\ we've\ included\ it\ before.}}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::find(\_status\_bar\_collectors.begin(),\ \_status\_bar\_collectors.end(),\ collector)\ ==\ \_status\_bar\_collectors.end())\ \{}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00653\ }
\DoxyCodeLine{00654\ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ the\ value\ for\ other\ threads\ that\ have\ this\ collector.}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ thread\_index\ =\ 1;\ thread\_index\ <\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a37f031ee8fbaaa8c139ada02d19a1926}{get\_num\_threads}}();\ ++thread\_index)\ \{}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ thread\_index);}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ view.\mbox{\hyperlink{classPStatView_a58673e539f32b9df52b690e82a8fddbb}{set\_to\_frame}}(frame\_number);}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ value\ +=\ view.\mbox{\hyperlink{classPStatView_a2dcc2465a2515c85d8993b34c80e00ef}{get\_net\_value}}();}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ }
\DoxyCodeLine{00661\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}}\ \&def\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a24e17a5885214596815115a8bb768e2a}{get\_collector\_def}}(collector);}
\DoxyCodeLine{00662\ \ \ \ \ \ \ std::string\ text\ =\ \textcolor{stringliteral}{"{}\(\backslash\)t"{}}\ +\ def.\_name;}
\DoxyCodeLine{00663\ \ \ \ \ \ \ text\ +=\ \textcolor{stringliteral}{"{}:\ "{}}\ +\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{PStatGraph::format\_number}}(value,\ PStatGraph::GBU\_named\ |\ PStatGraph::GBU\_show\_units,\ def.\_level\_units);}
\DoxyCodeLine{00664\ \ \ \ \ \ \ total\_chars\ +=\ text.size();}
\DoxyCodeLine{00665\ \ \ \ \ \ \ parts.push\_back(text);}
\DoxyCodeLine{00666\ \ \ \ \ \ \ collectors.push\_back(collector);}
\DoxyCodeLine{00667\ \ \ \ \ \}}
\DoxyCodeLine{00668\ \ \ \}}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \ \ \textcolor{keywordtype}{size\_t}\ cur\_size\ =\ \_status\_bar\_collectors.size();}
\DoxyCodeLine{00671\ \ \ \_status\_bar\_collectors\ =\ std::move(collectors);}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \textcolor{comment}{//\ Allocate\ an\ array\ for\ holding\ the\ right\ edge\ coordinates.}}
\DoxyCodeLine{00674\ \ \ HLOCAL\ hloc\ =\ LocalAlloc(LHND,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})\ *\ (parts.size()\ +\ 1));}
\DoxyCodeLine{00675\ \ \ PINT\ sizes\ =\ (PINT)LocalLock(hloc);}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \ \ \textcolor{keywordtype}{int}\ pixel\_scale\ =\ \mbox{\hyperlink{classWinStatsMonitor_a9b876aa25df0e63d81ed95d2c37c90b5}{get\_pixel\_scale}}();}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \textcolor{comment}{//\ Allocate\ the\ left-\/most\ slot\ for\ the\ framerate\ indicator.}}
\DoxyCodeLine{00680\ \ \ \textcolor{keywordtype}{double}\ offset\ =\ 28.0\ *\ pixel\_scale;}
\DoxyCodeLine{00681\ \ \ sizes[0]\ =\ (int)(offset\ +\ 0.5);}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \textcolor{keywordflow}{if}\ (!parts.empty())\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \textcolor{comment}{//\ Distribute\ the\ sizes\ roughly\ based\ on\ the\ number\ of\ characters.\ \ It's\ not}}
\DoxyCodeLine{00685\ \ \ \ \ \textcolor{comment}{//\ as\ good\ as\ measuring\ the\ text,\ but\ it's\ good\ enough.}}
\DoxyCodeLine{00686\ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00687\ \ \ \ \ \textcolor{keywordtype}{double}\ width\_per\_char\ =\ 0;}
\DoxyCodeLine{00688\ \ \ \ \ GetClientRect(\_status\_bar,\ \&rect);}
\DoxyCodeLine{00689\ \ \ \ \ \textcolor{comment}{//\ Leave\ room\ for\ the\ grip.}}
\DoxyCodeLine{00690\ \ \ \ \ rect.right\ -\/=\ pixel\_scale\ *\ 4;}
\DoxyCodeLine{00691\ \ \ \ \ width\_per\_char\ =\ (rect.right\ -\/\ rect.left\ -\/\ offset)\ /\ (\textcolor{keywordtype}{double})total\_chars;}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{comment}{//\ If\ we\ get\ below\ a\ minimum\ width,\ start\ chopping\ parts\ off.}}
\DoxyCodeLine{00694\ \ \ \ \ \textcolor{keywordflow}{while}\ (!parts.empty()\ \&\&\ width\_per\_char\ <\ pixel\_scale\ *\ 1.5)\ \{}
\DoxyCodeLine{00695\ \ \ \ \ \ \ total\_chars\ -\/=\ parts.back().size();}
\DoxyCodeLine{00696\ \ \ \ \ \ \ parts.pop\_back();}
\DoxyCodeLine{00697\ \ \ \ \ \ \ width\_per\_char\ =\ (rect.right\ -\/\ rect.left\ -\/\ offset)\ /\ (\textcolor{keywordtype}{double})total\_chars;}
\DoxyCodeLine{00698\ \ \ \ \ \}}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \ \ \ \ \textcolor{keywordflow}{if}\ (!parts.empty())\ \{}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ parts.size();\ ++i)\ \{}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ offset\ +=\ (parts[i].size())\ *\ width\_per\_char;}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ sizes[i\ +\ 1]\ =\ (int)(offset\ +\ 0.5);}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00705\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \textcolor{comment}{//\ No\ room\ for\ any\ collectors;\ the\ framerate\ can\ take\ up\ the\ whole\ width.}}
\DoxyCodeLine{00707\ \ \ \ \ \ \ sizes[0]\ =\ rect.right\ -\/\ rect.left;}
\DoxyCodeLine{00708\ \ \ \ \ \}}
\DoxyCodeLine{00709\ \ \ \}}
\DoxyCodeLine{00710\ }
\DoxyCodeLine{00711\ \ \ SendMessage(\_status\_bar,\ SB\_SETPARTS,\ (WPARAM)(parts.size()\ +\ 1),\ (LPARAM)sizes);}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ LocalUnlock(hloc);}
\DoxyCodeLine{00714\ \ \ LocalFree(hloc);}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00716\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ parts.size();\ ++i)\ \{}
\DoxyCodeLine{00717\ \ \ \ \ SendMessage(\_status\_bar,\ SB\_SETTEXT,\ i\ +\ 1,\ (LPARAM)parts[i].c\_str());}
\DoxyCodeLine{00718\ \ \ \}}
\DoxyCodeLine{00719\ \}}
\DoxyCodeLine{00720\ }
\DoxyCodeLine{00724\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00725\ show\_popup\_menu(\textcolor{keywordtype}{int}\ collector)\ \{}
\DoxyCodeLine{00726\ \ \ POINT\ point;}
\DoxyCodeLine{00727\ \ \ \textcolor{keywordflow}{if}\ (!GetCursorPos(\&point))\ \{}
\DoxyCodeLine{00728\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00729\ \ \ \}}
\DoxyCodeLine{00730\ }
\DoxyCodeLine{00731\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ get\_client\_data();}
\DoxyCodeLine{00732\ \ \ \textcolor{keywordflow}{if}\ (client\_data\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00733\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00734\ \ \ \}}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&level\_view\ =\ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ 0);}
\DoxyCodeLine{00737\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level\ =\ level\_view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}();}
\DoxyCodeLine{00738\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();}
\DoxyCodeLine{00739\ \ \ \textcolor{keywordflow}{if}\ (num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00740\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00741\ \ \ \}}
\DoxyCodeLine{00742\ }
\DoxyCodeLine{00743\ \ \ HMENU\ popup\ =\ CreatePopupMenu();}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \textcolor{comment}{//\ Reverse\ the\ order\ since\ the\ menus\ are\ listed\ from\ the\ top\ down;\ we\ want}}
\DoxyCodeLine{00746\ \ \ \textcolor{comment}{//\ to\ be\ visually\ consistent\ with\ the\ graphs,\ which\ list\ these\ labels\ from}}
\DoxyCodeLine{00747\ \ \ \textcolor{comment}{//\ the\ bottom\ up.}}
\DoxyCodeLine{00748\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ num\_children\ -\/\ 1;\ c\ >=\ 0;\ c-\/-\/)\ \{}
\DoxyCodeLine{00749\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *child\_level\ =\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c);}
\DoxyCodeLine{00750\ }
\DoxyCodeLine{00751\ \ \ \ \ \textcolor{keywordtype}{int}\ child\_collector\ =\ child\_level-\/>get\_collector();}
\DoxyCodeLine{00752\ \ \ \ \ MenuDef\ menu\_def(0,\ child\_collector,\ CT\_strip\_chart,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{keywordtype}{double}\ value\ =\ child\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a61c1a360fcbe9512164e7190647a6d}{get\_net\_value}}();}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}}\ \&def\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a24e17a5885214596815115a8bb768e2a}{get\_collector\_def}}(child\_collector);}
\DoxyCodeLine{00758\ \ \ \ \ std::string\ text\ =\ def.\_name;}
\DoxyCodeLine{00759\ \ \ \ \ text\ +=\ \textcolor{stringliteral}{"{}:\ "{}}\ +\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{PStatGraph::format\_number}}(value,\ PStatGraph::GBU\_named\ |\ PStatGraph::GBU\_show\_units,\ def.\_level\_units);}
\DoxyCodeLine{00760\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ menu\_id,\ text.c\_str());}
\DoxyCodeLine{00761\ \ \ \}}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ \ \ TrackPopupMenu(popup,\ TPM\_LEFTBUTTON,\ point.x,\ point.y,\ 0,\ \_window,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00764\ \}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00769\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00770\ calc\_iconic\_graph\_window\_pos(\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *moved\_graph,\ \textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y)\ \{}
\DoxyCodeLine{00771\ \ \ MINIMIZEDMETRICS\ metrics;}
\DoxyCodeLine{00772\ \ \ metrics.cbSize\ =\ \textcolor{keyword}{sizeof}(metrics);}
\DoxyCodeLine{00773\ \ \ SystemParametersInfoA(SPI\_GETMINIMIZEDMETRICS,\ 0,\ \&metrics,\ 0);}
\DoxyCodeLine{00774\ }
\DoxyCodeLine{00775\ \ \ \textcolor{keywordtype}{int}\ height\ =\ GetThemeSysSize(\textcolor{keyword}{nullptr},\ SM\_CYSIZE)\ +\ GetThemeSysSize(\textcolor{keyword}{nullptr},\ SM\_CXPADDEDBORDER)\ *\ 2;}
\DoxyCodeLine{00776\ }
\DoxyCodeLine{00777\ \ \ RECT\ client\_rect;}
\DoxyCodeLine{00778\ \ \ GetClientRect(\_window,\ \&client\_rect);}
\DoxyCodeLine{00779\ \ \ MapWindowPoints(\_window,\ \textcolor{keyword}{nullptr},\ (POINT\ *)\&client\_rect,\ 2);}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \textcolor{comment}{//\ Remove\ the\ status\ bar\ from\ the\ client\ rectangle.}}
\DoxyCodeLine{00782\ \ \ RECT\ status\_bar\_rect;}
\DoxyCodeLine{00783\ \ \ GetWindowRect(\_status\_bar,\ \&status\_bar\_rect);}
\DoxyCodeLine{00784\ \ \ client\_rect.bottom\ -\/=\ (status\_bar\_rect.bottom\ -\/\ status\_bar\_rect.top);}
\DoxyCodeLine{00785\ }
\DoxyCodeLine{00786\ \ \ \textcolor{keywordtype}{int}\ iconic\_offset\ =\ 0;}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00789\ \ \ \ \ RECT\ child\_rect;}
\DoxyCodeLine{00790\ \ \ \ \ HWND\ window\ =\ graph-\/>get\_window();}
\DoxyCodeLine{00791\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\ ==\ moved\_graph)\ \{}
\DoxyCodeLine{00792\ \ \ \ \ \ \ x\ =\ client\_rect.left\ +\ iconic\_offset;}
\DoxyCodeLine{00793\ \ \ \ \ \ \ y\ =\ client\_rect.bottom\ -\/\ height;}
\DoxyCodeLine{00794\ \ \ \ \ \ \ iconic\_offset\ +=\ metrics.iWidth\ +\ metrics.iHorzGap;}
\DoxyCodeLine{00795\ \ \ \ \ \}}
\DoxyCodeLine{00796\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (IsIconic(window)\ \&\&\ GetWindowRect(window,\ \&child\_rect))\ \{}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \textcolor{comment}{//\ Keep\ it\ glued\ to\ the\ bottom-\/left\ corner\ of\ the\ parent\ window.}}
\DoxyCodeLine{00798\ \ \ \ \ \ \ child\_rect.left\ =\ client\_rect.left\ +\ iconic\_offset;}
\DoxyCodeLine{00799\ \ \ \ \ \ \ child\_rect.top\ =\ client\_rect.bottom\ -\/\ height;}
\DoxyCodeLine{00800\ \ \ \ \ \ \ iconic\_offset\ +=\ metrics.iWidth\ +\ metrics.iHorzGap;}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \ \ \ \ \ \ SetWindowPos(window,\ 0,\ child\_rect.left,\ child\_rect.top,\ 0,\ 0,}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SWP\_NOOWNERZORDER\ |\ SWP\_NOZORDER\ |\ SWP\_NOSIZE\ |\ SWP\_NOACTIVATE\ |\ SWP\_NOSENDCHANGING);}
\DoxyCodeLine{00804\ \ \ \ \ \}}
\DoxyCodeLine{00805\ \ \ \}}
\DoxyCodeLine{00806\ \}}
\DoxyCodeLine{00807\ }
\DoxyCodeLine{00811\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00812\ handle\_window\_moved(\textcolor{keyword}{const}\ RECT\ \&client\_rect,\ \textcolor{keywordtype}{int}\ delta\_x,\ \textcolor{keywordtype}{int}\ delta\_y)\ \{}
\DoxyCodeLine{00813\ \ \ \textcolor{keywordflow}{if}\ (\_graphs.empty())\ \{}
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00815\ \ \ \}}
\DoxyCodeLine{00816\ }
\DoxyCodeLine{00817\ \ \ MINIMIZEDMETRICS\ metrics;}
\DoxyCodeLine{00818\ \ \ metrics.cbSize\ =\ \textcolor{keyword}{sizeof}(metrics);}
\DoxyCodeLine{00819\ \ \ SystemParametersInfoA(SPI\_GETMINIMIZEDMETRICS,\ 0,\ \&metrics,\ 0);}
\DoxyCodeLine{00820\ }
\DoxyCodeLine{00821\ \ \ \textcolor{keywordtype}{int}\ height\ =\ GetThemeSysSize(\textcolor{keyword}{nullptr},\ SM\_CYSIZE)\ +\ GetThemeSysSize(\textcolor{keyword}{nullptr},\ SM\_CXPADDEDBORDER)\ *\ 2;}
\DoxyCodeLine{00822\ }
\DoxyCodeLine{00823\ \ \ \textcolor{keywordtype}{int}\ iconic\_offset\ =\ 0;}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00826\ \ \ \ \ WINDOWPLACEMENT\ wp;}
\DoxyCodeLine{00827\ \ \ \ \ HWND\ window\ =\ graph-\/>get\_window();}
\DoxyCodeLine{00828\ \ \ \ \ \textcolor{keywordflow}{if}\ (GetWindowPlacement(window,\ \&wp))\ \{}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (wp.showCmd\ ==\ SW\_SHOWMINIMIZED)\ \{}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Keep\ the\ minimized\ window\ title\ bar\ glued\ to\ the\ bottom-\/left}}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ corner\ of\ the\ parent\ window.}}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ wp.flags\ |=\ WPF\_SETMINPOSITION;}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ wp.ptMinPosition.x\ =\ client\_rect.left\ +\ iconic\_offset;}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ wp.ptMinPosition.y\ =\ client\_rect.bottom\ -\/\ height;}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ iconic\_offset\ +=\ metrics.iWidth\ +\ metrics.iHorzGap;}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ the\ "{}restored"{}\ window\ (even\ when\ it's\ currently\ min/maximized).}}
\DoxyCodeLine{00839\ \ \ \ \ \ \ wp.rcNormalPosition.left\ +=\ delta\_x;}
\DoxyCodeLine{00840\ \ \ \ \ \ \ wp.rcNormalPosition.top\ +=\ delta\_y;}
\DoxyCodeLine{00841\ \ \ \ \ \ \ wp.rcNormalPosition.right\ +=\ delta\_x;}
\DoxyCodeLine{00842\ \ \ \ \ \ \ wp.rcNormalPosition.bottom\ +=\ delta\_y;}
\DoxyCodeLine{00843\ \ \ \ \ \ \ SetWindowPlacement(window,\ \&wp);}
\DoxyCodeLine{00844\ \ \ \ \ \}}
\DoxyCodeLine{00845\ \ \ \}}
\DoxyCodeLine{00846\ \}}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00851\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00852\ handle\_menu\_command(\textcolor{keywordtype}{int}\ menu\_id)\ \{}
\DoxyCodeLine{00853\ \ \ \textcolor{keywordflow}{switch}\ (menu\_id)\ \{}
\DoxyCodeLine{00854\ \ \ \textcolor{keywordflow}{case}\ MI\_none:}
\DoxyCodeLine{00855\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \textcolor{keywordflow}{case}\ MI\_speed\_1:}
\DoxyCodeLine{00858\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(1);}
\DoxyCodeLine{00859\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00860\ }
\DoxyCodeLine{00861\ \ \ \textcolor{keywordflow}{case}\ MI\_speed\_2:}
\DoxyCodeLine{00862\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(2);}
\DoxyCodeLine{00863\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00864\ }
\DoxyCodeLine{00865\ \ \ \textcolor{keywordflow}{case}\ MI\_speed\_3:}
\DoxyCodeLine{00866\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(3);}
\DoxyCodeLine{00867\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \textcolor{keywordflow}{case}\ MI\_speed\_6:}
\DoxyCodeLine{00870\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(6);}
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \ \ \textcolor{keywordflow}{case}\ MI\_speed\_12:}
\DoxyCodeLine{00874\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_ab8416b331506a6f030970e1fc534840c}{set\_scroll\_speed}}(12);}
\DoxyCodeLine{00875\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00876\ }
\DoxyCodeLine{00877\ \ \ \textcolor{keywordflow}{case}\ MI\_pause:}
\DoxyCodeLine{00878\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a1b9df82760e481688773f07d821361fb}{set\_pause}}(!\_pause);}
\DoxyCodeLine{00879\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \ \ \textcolor{keywordflow}{case}\ MI\_graphs\_close\_all:}
\DoxyCodeLine{00882\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a51486f844e392d205c5bde18e3ac158e}{remove\_all\_graphs}}();}
\DoxyCodeLine{00883\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ \textcolor{keywordflow}{case}\ MI\_graphs\_reopen\_default:}
\DoxyCodeLine{00886\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a51486f844e392d205c5bde18e3ac158e}{remove\_all\_graphs}}();}
\DoxyCodeLine{00887\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}();}
\DoxyCodeLine{00888\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \textcolor{keywordflow}{case}\ MI\_graphs\_save\_default:}
\DoxyCodeLine{00891\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a002afbd26111ae231bc865c1873a5aff}{save\_default\_graphs}}();}
\DoxyCodeLine{00892\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00893\ }
\DoxyCodeLine{00894\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00895\ \ \ \ \ \textcolor{keywordflow}{if}\ (menu\_id\ >=\ MI\_new\_chart)\ \{}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \textcolor{keyword}{const}\ MenuDef\ \&menu\_def\ =\ \mbox{\hyperlink{classWinStatsMonitor_aed68293327521dfc9d8f21f6f0c28763}{lookup\_menu}}(menu\_id);}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (menu\_def.\_chart\_type)\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CT\_timeline:}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a63d0b1c254400a404b6c8e21b34c0a75}{open\_timeline}}();}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CT\_strip\_chart:}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(menu\_def.\_thread\_index,\ menu\_def.\_collector\_index,}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ menu\_def.\_show\_level);}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CT\_flame\_graph:}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a19a5f72039f430ce2b33a559c183f5b0}{open\_flame\_graph}}(menu\_def.\_thread\_index,\ menu\_def.\_collector\_index);}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ CT\_piano\_roll:}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a92573dca4aeb9832588518f0193cd143}{open\_piano\_roll}}(menu\_def.\_thread\_index);}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00915\ \ \ \ \ \}}
\DoxyCodeLine{00916\ \ \ \}}
\DoxyCodeLine{00917\ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00922\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00923\ handle\_status\_bar\_click(\textcolor{keywordtype}{int}\ item)\ \{}
\DoxyCodeLine{00924\ \ \ \textcolor{keywordflow}{if}\ (item\ ==\ 0)\ \{}
\DoxyCodeLine{00925\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00926\ \ \ \}}
\DoxyCodeLine{00927\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (item\ >=\ 1\ \&\&\ item\ <=\ \_status\_bar\_collectors.size())\ \{}
\DoxyCodeLine{00928\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ \_status\_bar\_collectors[item\ -\/\ 1];}
\DoxyCodeLine{00929\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(0,\ collector,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00930\ }
\DoxyCodeLine{00931\ \ \ \ \ \textcolor{comment}{//\ Also\ open\ a\ strip\ chart\ for\ other\ threads\ with\ data\ for\ this}}
\DoxyCodeLine{00932\ \ \ \ \ \textcolor{comment}{//\ collector.}}
\DoxyCodeLine{00933\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ get\_client\_data();}
\DoxyCodeLine{00934\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ thread\_index\ =\ 1;\ thread\_index\ <\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a37f031ee8fbaaa8c139ada02d19a1926}{get\_num\_threads}}();\ ++thread\_index)\ \{}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ thread\_index);}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (view.\mbox{\hyperlink{classPStatView_a2dcc2465a2515c85d8993b34c80e00ef}{get\_net\_value}}()\ >\ 0.0)\ \{}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(thread\_index,\ collector,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00938\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00939\ \ \ \ \ \}}
\DoxyCodeLine{00940\ \ \ \}}
\DoxyCodeLine{00941\ \}}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00946\ \textcolor{keywordtype}{void}\ WinStatsMonitor::}
\DoxyCodeLine{00947\ handle\_status\_bar\_popup(\textcolor{keywordtype}{int}\ item)\ \{}
\DoxyCodeLine{00948\ \ \ \textcolor{keywordflow}{if}\ (item\ >=\ 1\ \&\&\ item\ <=\ \_status\_bar\_collectors.size())\ \{}
\DoxyCodeLine{00949\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ \_status\_bar\_collectors[item\ -\/\ 1];}
\DoxyCodeLine{00950\ \ \ \ \ show\_popup\_menu(collector);}
\DoxyCodeLine{00951\ \ \ \}}
\DoxyCodeLine{00952\ \}}

\end{DoxyCode}

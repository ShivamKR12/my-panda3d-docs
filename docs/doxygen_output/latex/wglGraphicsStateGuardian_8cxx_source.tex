\doxysection{wgl\+Graphics\+State\+Guardian.\+cxx}
\hypertarget{wglGraphicsStateGuardian_8cxx_source}{}\label{wglGraphicsStateGuardian_8cxx_source}\index{panda/src/wgldisplay/wglGraphicsStateGuardian.cxx@{panda/src/wgldisplay/wglGraphicsStateGuardian.cxx}}
\mbox{\hyperlink{wglGraphicsStateGuardian_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wglGraphicsStateGuardian_8h}{wglGraphicsStateGuardian.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__wgldisplay_8h}{config\_wgldisplay.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wglGraphicsBuffer_8h}{wglGraphicsBuffer.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wglGraphicsPipe_8h}{wglGraphicsPipe.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__utils_8h}{string\_utils.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ wglGraphicsStateGuardian::\_type\_handle;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ \textcolor{keyword}{const}\ wglGraphicsStateGuardian::\_twindow\_class\_name\ =\ \textcolor{stringliteral}{"{}wglGraphicsStateGuardian"{}};}
\DoxyCodeLine{00024\ \textcolor{keywordtype}{bool}\ wglGraphicsStateGuardian::\_twindow\_class\_registered\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00029\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00030\ wglGraphicsStateGuardian(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}}\ *pipe,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwglGraphicsStateGuardian}{wglGraphicsStateGuardian}}\ *share\_with)\ :}
\DoxyCodeLine{00032\ \ \ GLGraphicsStateGuardian(engine,\ pipe),}
\DoxyCodeLine{00033\ \ \ \_share\_with(share\_with)}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ \_made\_context\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00036\ \ \ \_context\ =\ (HGLRC)\textcolor{keyword}{nullptr};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \_twindow\ =\ (HWND)0;}
\DoxyCodeLine{00039\ \ \ \_twindow\_dc\ =\ (HDC)0;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \_pfnum\ =\ -\/1;}
\DoxyCodeLine{00042\ \ \ \_pfnum\_supports\_pbuffer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00043\ \ \ \_pfnum\_properties.clear();}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \_supports\_pbuffer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00046\ \ \ \_supports\_pixel\_format\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00047\ \ \ \_supports\_wgl\_multisample\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00048\ \ \ \_supports\_wgl\_render\_texture\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \_wglCreateContextAttribsARB\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ get\_gamma\_table();}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00058\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00059\ \string~wglGraphicsStateGuardian()\ \{}
\DoxyCodeLine{00060\ \ \ release\_twindow();}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{if}\ (\_context\ !=\ (HGLRC)\textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00062\ \ \ \ \ wglDeleteContext(\_context);}
\DoxyCodeLine{00063\ \ \ \ \ \_context\ =\ (HGLRC)\textcolor{keyword}{nullptr};}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00080\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_ae84fc1bbbec2ad6669a3841c665ccb2f}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00081\ \mbox{\hyperlink{classwglGraphicsStateGuardian_ae84fc1bbbec2ad6669a3841c665ccb2f}{fail\_pfnum}}()\ \{}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{if}\ (\_pfnum\ ==\ \_pre\_pfnum)\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \_pfnum\ =\ \_pre\_pfnum;}
\DoxyCodeLine{00087\ \ \ \_pfnum\_supports\_pbuffer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00088\ \ \ \_pfnum\_properties\ =\ \_pre\_pfnum\_properties;}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a61a430a1b7d38268af472b40316ff5c7}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00097\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a61a430a1b7d38268af472b40316ff5c7}{get\_properties}}(\mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ \&properties,\ HDC\ hdc,\ \textcolor{keywordtype}{int}\ pfnum)\ \{}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ PIXELFORMATDESCRIPTOR\ pfd;}
\DoxyCodeLine{00100\ \ \ ZeroMemory(\&pfd,\textcolor{keyword}{sizeof}(PIXELFORMATDESCRIPTOR));}
\DoxyCodeLine{00101\ \ \ pfd.nSize\ =\ \textcolor{keyword}{sizeof}(PIXELFORMATDESCRIPTOR);}
\DoxyCodeLine{00102\ \ \ pfd.nVersion\ =\ 1;}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ DescribePixelFormat(hdc,\ pfnum,\ \textcolor{keyword}{sizeof}(PIXELFORMATDESCRIPTOR),\ \&pfd);}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ properties.clear();}
\DoxyCodeLine{00107\ \ \ properties.set\_all\_specified();}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{if}\ (((pfd.dwFlags\ \&\ PFD\_SUPPORT\_OPENGL)\ ==\ 0)||}
\DoxyCodeLine{00110\ \ \ \ \ \ \ ((pfd.dwFlags\ \&\ PFD\_DRAW\_TO\_WINDOW)\ ==\ 0))\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ Return\ without\ setting\ either\ RGB\ or\ Indexed\ Color.\ \ This\ indicates\ a}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ window\ that\ can't\ do\ anything\ at\ all.}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{if}\ (pfd.iPixelType\ ==\ PFD\_TYPE\_COLORINDEX)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ properties.set\_indexed\_color(1);}
\DoxyCodeLine{00118\ \ \ \ \ properties.set\_color\_bits(pfd.cColorBits);}
\DoxyCodeLine{00119\ \ \ \ \ properties.set\_alpha\_bits(pfd.cAlphaBits);}
\DoxyCodeLine{00120\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00121\ \ \ \ \ properties.set\_rgb\_color(1);}
\DoxyCodeLine{00122\ \ \ \ \ properties.set\_rgba\_bits(pfd.cRedBits,\ pfd.cGreenBits,}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pfd.cBlueBits,\ pfd.cAlphaBits);}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{if}\ (pfd.dwFlags\ \&\ PFD\_DOUBLEBUFFER)\ \{}
\DoxyCodeLine{00127\ \ \ \ \ properties.set\_back\_buffers(1);}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{if}\ (pfd.dwFlags\ \&\ PFD\_STEREO)\ \{}
\DoxyCodeLine{00130\ \ \ \ \ properties.set\_stereo(1);}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{if}\ (pfd.dwFlags\ \&\ PFD\_GENERIC\_FORMAT)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ properties.set\_force\_software(1);}
\DoxyCodeLine{00134\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00135\ \ \ \ \ properties.set\_force\_hardware(1);}
\DoxyCodeLine{00136\ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \textcolor{keywordflow}{if}\ (pfd.cDepthBits\ !=\ 0)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ properties.set\_depth\_bits(pfd.cDepthBits);}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{if}\ (pfd.cStencilBits\ !=\ 0)\ \{}
\DoxyCodeLine{00142\ \ \ \ \ properties.set\_stencil\_bits(pfd.cStencilBits);}
\DoxyCodeLine{00143\ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ The\ basic\ API\ doesn't\ do\ accum\ or\ multisample.}}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00152\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a7fcba359582d862b470a890accadbbac}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00153\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a7fcba359582d862b470a890accadbbac}{get\_properties\_advanced}}(\mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ \&properties,}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HDC\ window\_dc,\ \textcolor{keywordtype}{int}\ pfnum)\ \{}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_attrib\_list\ =\ 32;}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordtype}{int}\ iattrib\_list[max\_attrib\_list];}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{int}\ ivalue\_list[max\_attrib\_list];}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{int}\ ni\ =\ 0;}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{keywordtype}{int}\ acceleration\_i,\ pixel\_type\_i,\ double\_buffer\_i,\ stereo\_i,}
\DoxyCodeLine{00162\ \ \ \ \ color\_bits\_i,\ red\_bits\_i,\ green\_bits\_i,\ blue\_bits\_i,\ alpha\_bits\_i,}
\DoxyCodeLine{00163\ \ \ \ \ accum\_bits\_i,\ depth\_bits\_i,\ stencil\_bits\_i,\ multisamples\_i,}
\DoxyCodeLine{00164\ \ \ \ \ srgb\_capable\_i;}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ iattrib\_list[acceleration\_i\ =\ ni++]\ =\ WGL\_ACCELERATION\_ARB;}
\DoxyCodeLine{00167\ \ \ iattrib\_list[pixel\_type\_i\ =\ ni++]\ =\ WGL\_PIXEL\_TYPE\_ARB;}
\DoxyCodeLine{00168\ \ \ iattrib\_list[double\_buffer\_i\ =\ ni++]\ =\ WGL\_DOUBLE\_BUFFER\_ARB;}
\DoxyCodeLine{00169\ \ \ iattrib\_list[stereo\_i\ =\ ni++]\ =\ WGL\_STEREO\_ARB;}
\DoxyCodeLine{00170\ \ \ iattrib\_list[color\_bits\_i\ =\ ni++]\ =\ WGL\_COLOR\_BITS\_ARB;}
\DoxyCodeLine{00171\ \ \ iattrib\_list[red\_bits\_i\ =\ ni++]\ =\ WGL\_RED\_BITS\_ARB;}
\DoxyCodeLine{00172\ \ \ iattrib\_list[green\_bits\_i\ =\ ni++]\ =\ WGL\_GREEN\_BITS\_ARB;}
\DoxyCodeLine{00173\ \ \ iattrib\_list[blue\_bits\_i\ =\ ni++]\ =\ WGL\_BLUE\_BITS\_ARB;}
\DoxyCodeLine{00174\ \ \ iattrib\_list[alpha\_bits\_i\ =\ ni++]\ =\ WGL\_ALPHA\_BITS\_ARB;}
\DoxyCodeLine{00175\ \ \ iattrib\_list[accum\_bits\_i\ =\ ni++]\ =\ WGL\_ACCUM\_BITS\_ARB;}
\DoxyCodeLine{00176\ \ \ iattrib\_list[depth\_bits\_i\ =\ ni++]\ =\ WGL\_DEPTH\_BITS\_ARB;}
\DoxyCodeLine{00177\ \ \ iattrib\_list[stencil\_bits\_i\ =\ ni++]\ =\ WGL\_STENCIL\_BITS\_ARB;}
\DoxyCodeLine{00178\ \ \ iattrib\_list[srgb\_capable\_i\ =\ ni++]\ =\ WGL\_FRAMEBUFFER\_SRGB\_CAPABLE\_ARB;}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_wgl\_multisample)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ iattrib\_list[multisamples\_i\ =\ ni++]\ =\ WGL\_SAMPLES\_ARB;}
\DoxyCodeLine{00182\ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ Terminate\ the\ list.}}
\DoxyCodeLine{00185\ \ \ nassertr(ni\ <=\ max\_attrib\_list,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{if}\ (!\_wglGetPixelFormatAttribivARB(window\_dc,\ pfnum,\ 0,}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ni,\ iattrib\_list,\ ivalue\_list))\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00190\ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ properties.clear();}
\DoxyCodeLine{00193\ \ \ properties.set\_all\_specified();}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[acceleration\_i]\ ==\ WGL\_NO\_ACCELERATION\_ARB)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ properties.set\_force\_software(\textcolor{keyword}{true});}
\DoxyCodeLine{00197\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00198\ \ \ \ \ properties.set\_force\_hardware(\textcolor{keyword}{true});}
\DoxyCodeLine{00199\ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[pixel\_type\_i]\ ==\ WGL\_TYPE\_COLORINDEX\_ARB)\ \{}
\DoxyCodeLine{00202\ \ \ \ \ properties.set\_indexed\_color(\textcolor{keyword}{true});}
\DoxyCodeLine{00203\ \ \ \ \ properties.set\_color\_bits(ivalue\_list[color\_bits\_i]);}
\DoxyCodeLine{00204\ \ \ \ \ properties.set\_alpha\_bits(ivalue\_list[alpha\_bits\_i]);}
\DoxyCodeLine{00205\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00206\ \ \ \ \ properties.set\_rgb\_color(\textcolor{keyword}{true});}
\DoxyCodeLine{00207\ \ \ \ \ properties.set\_rgba\_bits(ivalue\_list[red\_bits\_i],}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ivalue\_list[green\_bits\_i],}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ivalue\_list[blue\_bits\_i],}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ivalue\_list[alpha\_bits\_i]);}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[pixel\_type\_i]\ ==\ WGL\_TYPE\_RGBA\_FLOAT\_ARB)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ properties.set\_float\_color(\textcolor{keyword}{true});}
\DoxyCodeLine{00214\ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[double\_buffer\_i])\ \{}
\DoxyCodeLine{00218\ \ \ \ \ properties.set\_back\_buffers(1);}
\DoxyCodeLine{00219\ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[stereo\_i])\ \{}
\DoxyCodeLine{00222\ \ \ \ \ properties.set\_stereo(\textcolor{keyword}{true});}
\DoxyCodeLine{00223\ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[srgb\_capable\_i])\ \{}
\DoxyCodeLine{00226\ \ \ \ \ properties.set\_srgb\_color(\textcolor{keyword}{true});}
\DoxyCodeLine{00227\ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[accum\_bits\_i]\ !=\ 0)\ \{}
\DoxyCodeLine{00230\ \ \ \ \ properties.set\_accum\_bits(ivalue\_list[accum\_bits\_i]);}
\DoxyCodeLine{00231\ \ \ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[depth\_bits\_i]\ !=\ 0)\ \{}
\DoxyCodeLine{00234\ \ \ \ \ properties.set\_depth\_bits(ivalue\_list[depth\_bits\_i]);}
\DoxyCodeLine{00235\ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[stencil\_bits\_i]\ !=\ 0)\ \{}
\DoxyCodeLine{00238\ \ \ \ \ properties.set\_stencil\_bits(ivalue\_list[stencil\_bits\_i]);}
\DoxyCodeLine{00239\ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_wgl\_multisample)\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordflow}{if}\ (ivalue\_list[multisamples\_i]\ !=\ 0)\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ properties.set\_multisamples(ivalue\_list[multisamples\_i]);}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00253\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a7cc33ab8c6f003969f020eb80450ff26}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00254\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a7cc33ab8c6f003969f020eb80450ff26}{choose\_pixel\_format}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ \&properties,}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ need\_pbuffer)\ \{}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ Choose\ best\ format\ available\ using\ DescribePixelFormat.\ \ In\ the\ process,}}
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ we\ need\ a\ DC\ to\ examine\ the\ available\ pixel\ formats.\ \ We'll\ use\ the}}
\DoxyCodeLine{00259\ \ \ \textcolor{comment}{//\ screen\ DC.}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{if}\ (gl\_force\_pixfmt.has\_value())\ \{}
\DoxyCodeLine{00262\ \ \ \ \ wgldisplay\_cat.info()}
\DoxyCodeLine{00263\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}overriding\ pixfmt\ choice\ with\ gl-\/force-\/pixfmt("{}}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ <<\ gl\_force\_pixfmt\ <<\ \textcolor{stringliteral}{"{})\(\backslash\)n"{}};}
\DoxyCodeLine{00265\ \ \ \ \ \_pfnum\ =\ gl\_force\_pixfmt;}
\DoxyCodeLine{00266\ \ \ \ \ \_pfnum\_properties\ =\ properties;}
\DoxyCodeLine{00267\ \ \ \ \ \_pfnum\_supports\_pbuffer\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00269\ \ \ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keywordtype}{int}\ \ best\_pfnum\ =\ 0;}
\DoxyCodeLine{00272\ \ \ \textcolor{keywordtype}{int}\ \ best\_quality\ =\ 0;}
\DoxyCodeLine{00273\ \ \ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ best\_prop;}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ HDC\ hdc\ =\ GetDC(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \textcolor{keywordtype}{int}\ max\_pfnum\ =\ DescribePixelFormat(hdc,\ 1,\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ pfnum\ =\ 0;\ pfnum<max\_pfnum;\ ++pfnum)\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ pfprop;}
\DoxyCodeLine{00281\ \ \ \ \ \mbox{\hyperlink{classwglGraphicsStateGuardian_a61a430a1b7d38268af472b40316ff5c7}{get\_properties}}(pfprop,\ hdc,\ pfnum);}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{int}\ quality\ =\ pfprop.get\_quality(properties);}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordflow}{if}\ (quality\ >\ best\_quality)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ best\_pfnum\ =\ pfnum;}
\DoxyCodeLine{00285\ \ \ \ \ \ \ best\_quality\ =\ quality;}
\DoxyCodeLine{00286\ \ \ \ \ \ \ best\_prop\ =\ pfprop;}
\DoxyCodeLine{00287\ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ ReleaseDC(\textcolor{keyword}{nullptr},\ hdc);}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \_pfnum\ =\ best\_pfnum;}
\DoxyCodeLine{00293\ \ \ \_pfnum\_supports\_pbuffer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00294\ \ \ \_pfnum\_properties\ =\ best\_prop;}
\DoxyCodeLine{00295\ \ \ \_pre\_pfnum\ =\ \_pfnum;}
\DoxyCodeLine{00296\ \ \ \_pre\_pfnum\_properties\ =\ \_pfnum\_properties;}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \textcolor{keywordflow}{if}\ (best\_quality\ ==\ 0)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00300\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Could\ not\ find\ a\ usable\ pixel\ format.\(\backslash\)n"{}};}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00302\ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \textcolor{keywordflow}{if}\ (wgldisplay\_cat.is\_debug())\ \{}
\DoxyCodeLine{00305\ \ \ \ \ wgldisplay\_cat.debug()}
\DoxyCodeLine{00306\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Preliminary\ pixfmt\ \#"{}}\ <<\ \_pfnum\ <<\ \textcolor{stringliteral}{"{}\ =\ "{}}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ <<\ \_pfnum\_properties\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00308\ \ \ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{//\ See\ whether\ or\ not\ the\ wgl\ extensions\ are\ available.\ \ This\ routine\ is}}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{//\ called\ before\ "{}reset"{}.\ \ So\ the\ extensions\ list\ is\ empty.\ \ We\ need\ to}}
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{//\ create\ a\ twindow,\ make\ it\ current,\ fetch\ the\ extensions\ temporarily,\ get}}
\DoxyCodeLine{00313\ \ \ \textcolor{comment}{//\ the\ few\ extensions\ we\ need,\ then\ clear\ the\ extensions\ list\ again\ in}}
\DoxyCodeLine{00314\ \ \ \textcolor{comment}{//\ preparation\ for\ the\ reset.}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ HDC\ twindow\_dc\ =\ get\_twindow\_dc();}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordflow}{if}\ (twindow\_dc\ ==\ 0)\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00319\ \ \ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ HGLRC\ twindow\_ctx\ =\ wglCreateContext(twindow\_dc);}
\DoxyCodeLine{00322\ \ \ \textcolor{keywordflow}{if}\ (twindow\_ctx\ ==\ 0)\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00324\ \ \ \}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{keywordflow}{if}\ (!wglGraphicsPipe::wgl\_make\_current(twindow\_dc,\ twindow\_ctx,\ \textcolor{keyword}{nullptr}))\ \{}
\DoxyCodeLine{00327\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00328\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Failed\ to\ make\ WGL\ context\ current.\(\backslash\)n"{}};}
\DoxyCodeLine{00329\ \ \ \ \ wglDeleteContext(twindow\_ctx);}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \_extensions.clear();}
\DoxyCodeLine{00334\ \ \ save\_extensions((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)GLP(GetString)(GL\_EXTENSIONS));}
\DoxyCodeLine{00335\ \ \ \mbox{\hyperlink{classwglGraphicsStateGuardian_a88cf4be2d47c55f24b1e98f048ef9661}{get\_extra\_extensions}}();}
\DoxyCodeLine{00336\ \ \ \_supports\_pixel\_format\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_pixel\_format"{}});}
\DoxyCodeLine{00337\ \ \ \_supports\_wgl\_multisample\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_multisample"{}});}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \textcolor{keywordtype}{bool}\ supports\_pixel\_format\_float\ =\ \_supports\_pixel\_format\ \&\&\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_pixel\_format\_float"{}});}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \textcolor{keywordflow}{if}\ (has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_create\_context"{}}))\ \{}
\DoxyCodeLine{00342\ \ \ \ \ \_wglCreateContextAttribsARB\ =}
\DoxyCodeLine{00343\ \ \ \ \ \ \ (PFNWGLCREATECONTEXTATTRIBSARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglCreateContextAttribsARB"{}});}
\DoxyCodeLine{00344\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \_wglCreateContextAttribsARB\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \_extensions.clear();}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{if}\ (!\_supports\_pixel\_format)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ wglDeleteContext(twindow\_ctx);}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00353\ \ \ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \_wglGetPixelFormatAttribivARB\ =}
\DoxyCodeLine{00356\ \ \ \ \ (PFNWGLGETPIXELFORMATATTRIBIVARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetPixelFormatAttribivARB"{}});}
\DoxyCodeLine{00357\ \ \ \_wglGetPixelFormatAttribfvARB\ =}
\DoxyCodeLine{00358\ \ \ \ \ (PFNWGLGETPIXELFORMATATTRIBFVARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetPixelFormatAttribfvARB"{}});}
\DoxyCodeLine{00359\ \ \ \_wglChoosePixelFormatARB\ =}
\DoxyCodeLine{00360\ \ \ \ \ (PFNWGLCHOOSEPIXELFORMATARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglChoosePixelFormatARB"{}});}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \textcolor{keywordflow}{if}\ (\_wglGetPixelFormatAttribivARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \_wglGetPixelFormatAttribfvARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \_wglChoosePixelFormatARB\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00365\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00366\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Driver\ claims\ to\ support\ WGL\_ARB\_pixel\_format\ extension,\ but\ does\ not\ define\ all\ functions.\(\backslash\)n"{}};}
\DoxyCodeLine{00367\ \ \ \ \ wglDeleteContext(twindow\_ctx);}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ Use\ the\ wgl\ extensions\ to\ find\ a\ better\ format.}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_attrib\_list\ =\ 64;}
\DoxyCodeLine{00374\ \ \ \textcolor{keywordtype}{int}\ iattrib\_list[max\_attrib\_list];}
\DoxyCodeLine{00375\ \ \ \textcolor{keywordtype}{float}\ fattrib\_list[max\_attrib\_list];}
\DoxyCodeLine{00376\ \ \ \textcolor{keywordtype}{int}\ ni\ =\ 0;}
\DoxyCodeLine{00377\ \ \ \textcolor{keywordtype}{int}\ nf\ =\ 0;}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ iattrib\_list[ni++]\ =\ WGL\_SUPPORT\_OPENGL\_ARB;}
\DoxyCodeLine{00380\ \ \ iattrib\_list[ni++]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \textcolor{keywordflow}{if}\ (!properties.get\_float\_color())\ \{}
\DoxyCodeLine{00383\ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_PIXEL\_TYPE\_ARB;}
\DoxyCodeLine{00384\ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_TYPE\_RGBA\_ARB;}
\DoxyCodeLine{00385\ \ \ \}}
\DoxyCodeLine{00386\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (supports\_pixel\_format\_float)\ \{}
\DoxyCodeLine{00387\ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_PIXEL\_TYPE\_ARB;}
\DoxyCodeLine{00388\ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_TYPE\_RGBA\_FLOAT\_ARB;}
\DoxyCodeLine{00389\ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \textcolor{keywordflow}{if}\ (need\_pbuffer)\ \{}
\DoxyCodeLine{00392\ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_DRAW\_TO\_PBUFFER\_ARB;}
\DoxyCodeLine{00393\ \ \ \ \ iattrib\_list[ni++]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_pfnum\_properties.get\_alpha\_bits())\ \{}
\DoxyCodeLine{00395\ \ \ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_BIND\_TO\_TEXTURE\_RGBA\_ARB;}
\DoxyCodeLine{00396\ \ \ \ \ \ \ iattrib\_list[ni++]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00397\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ iattrib\_list[ni++]\ =\ WGL\_BIND\_TO\_TEXTURE\_RGB\_ARB;}
\DoxyCodeLine{00399\ \ \ \ \ \ \ iattrib\_list[ni++]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00400\ \ \ \ \ \}}
\DoxyCodeLine{00401\ \ \ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ nassertv(ni\ <\ max\_attrib\_list\ \&\&\ nf\ <\ max\_attrib\_list);}
\DoxyCodeLine{00404\ \ \ iattrib\_list[ni]\ =\ 0;}
\DoxyCodeLine{00405\ \ \ fattrib\_list[nf]\ =\ 0;}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_pformats\ =\ 1024;}
\DoxyCodeLine{00408\ \ \ \textcolor{keywordtype}{int}\ pformat[max\_pformats];}
\DoxyCodeLine{00409\ \ \ memset(pformat,\ 0,\ \textcolor{keyword}{sizeof}(pformat));}
\DoxyCodeLine{00410\ \ \ \textcolor{keywordtype}{int}\ nformats\ =\ 0;}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \ \ \textcolor{keywordflow}{if}\ (!\_wglChoosePixelFormatARB(twindow\_dc,\ iattrib\_list,\ fattrib\_list,}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max\_pformats,\ pformat,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ *)\&nformats))\ \{}
\DoxyCodeLine{00414\ \ \ \ \ nformats\ =\ 0;}
\DoxyCodeLine{00415\ \ \ \}}
\DoxyCodeLine{00416\ \ \ nformats\ =\ std::min(nformats,\ max\_pformats);}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \textcolor{keywordflow}{if}\ (wgldisplay\_cat.is\_debug())\ \{}
\DoxyCodeLine{00419\ \ \ \ \ wgldisplay\_cat.debug()}
\DoxyCodeLine{00420\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Found\ "{}}\ <<\ nformats\ <<\ \textcolor{stringliteral}{"{}\ advanced\ formats:\ ["{}};}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nformats;\ i++)\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ wgldisplay\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ pformat[i];}
\DoxyCodeLine{00424\ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ wgldisplay\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00426\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ ]\(\backslash\)n"{}};}
\DoxyCodeLine{00427\ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \textcolor{keywordflow}{if}\ (nformats\ >\ 0)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keywordflow}{if}\ (need\_pbuffer)\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ best\_quality\ =\ 0;}
\DoxyCodeLine{00432\ \ \ \ \ \}}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ nformats;\ i++)\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ pfprop;}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classwglGraphicsStateGuardian_a7fcba359582d862b470a890accadbbac}{get\_properties\_advanced}}(pfprop,\ twindow\_dc,\ pformat[i]))\ \{}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ quality\ =\ pfprop.get\_quality(properties);}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quality\ >\ best\_quality)\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ best\_pfnum\ =\ pformat[i];}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ best\_quality\ =\ quality;}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ best\_prop\ =\ pfprop;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00444\ \ \ \ \ \}}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keywordflow}{if}\ (!properties.get\_srgb\_color())\ \{}
\DoxyCodeLine{00447\ \ \ \ \ \ \ best\_prop.set\_srgb\_color(\textcolor{keyword}{false});}
\DoxyCodeLine{00448\ \ \ \ \ \}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \_pfnum\ =\ best\_pfnum;}
\DoxyCodeLine{00451\ \ \ \ \ \_pfnum\_supports\_pbuffer\ =\ need\_pbuffer;}
\DoxyCodeLine{00452\ \ \ \ \ \_pfnum\_properties\ =\ best\_prop;}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{if}\ (wgldisplay\_cat.is\_debug())\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ wgldisplay\_cat.debug()}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Selected\ advanced\ pixfmt\ \#"{}}\ <<\ \_pfnum\ <<\ \textcolor{stringliteral}{"{}\ =\ "{}}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ <<\ \_pfnum\_properties\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00458\ \ \ \ \ \}}
\DoxyCodeLine{00459\ \ \ \}}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ wglDeleteContext(twindow\_ctx);}
\DoxyCodeLine{00462\ \ \ release\_twindow();}
\DoxyCodeLine{00463\ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00468\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a43ce05703027418c241450a1e35319f4}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00469\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a43ce05703027418c241450a1e35319f4}{reset}}()\ \{}
\DoxyCodeLine{00470\ \ \ GLGraphicsStateGuardian::reset();}
\DoxyCodeLine{00471\ }
\DoxyCodeLine{00472\ \ \ \_supports\_swap\_control\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_EXT\_swap\_control"{}});}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_swap\_control)\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \_wglSwapIntervalEXT\ =}
\DoxyCodeLine{00476\ \ \ \ \ \ \ (PFNWGLSWAPINTERVALEXTPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglSwapIntervalEXT"{}});}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_wglSwapIntervalEXT\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Driver\ claims\ to\ support\ WGL\_EXT\_swap\_control\ extension,\ but\ does\ not\ define\ all\ functions.\(\backslash\)n"{}};}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \_supports\_swap\_control\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00481\ \ \ \ \ \}}
\DoxyCodeLine{00482\ \ \ \}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_swap\_control)\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ video-\/sync\ setting\ up\ front,\ if\ we\ have\ the\ extension\ that}}
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{comment}{//\ supports\ it.}}
\DoxyCodeLine{00487\ \ \ \ \ \_wglSwapIntervalEXT(sync\_video\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00488\ \ \ \}}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00490\ \ \ \_supports\_pbuffer\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_pbuffer"{}});}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_pbuffer)\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \_wglCreatePbufferARB\ =}
\DoxyCodeLine{00494\ \ \ \ \ \ \ (PFNWGLCREATEPBUFFERARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglCreatePbufferARB"{}});}
\DoxyCodeLine{00495\ \ \ \ \ \_wglGetPbufferDCARB\ =}
\DoxyCodeLine{00496\ \ \ \ \ \ \ (PFNWGLGETPBUFFERDCARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetPbufferDCARB"{}});}
\DoxyCodeLine{00497\ \ \ \ \ \_wglReleasePbufferDCARB\ =}
\DoxyCodeLine{00498\ \ \ \ \ \ \ (PFNWGLRELEASEPBUFFERDCARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglReleasePbufferDCARB"{}});}
\DoxyCodeLine{00499\ \ \ \ \ \_wglDestroyPbufferARB\ =}
\DoxyCodeLine{00500\ \ \ \ \ \ \ (PFNWGLDESTROYPBUFFERARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglDestroyPbufferARB"{}});}
\DoxyCodeLine{00501\ \ \ \ \ \_wglQueryPbufferARB\ =}
\DoxyCodeLine{00502\ \ \ \ \ \ \ (PFNWGLQUERYPBUFFERARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglQueryPbufferARB"{}});}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_wglCreatePbufferARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \_wglGetPbufferDCARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \_wglReleasePbufferDCARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \_wglDestroyPbufferARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \_wglQueryPbufferARB\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00509\ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Driver\ claims\ to\ support\ WGL\_ARB\_pbuffer\ extension,\ but\ does\ not\ define\ all\ functions.\(\backslash\)n"{}};}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \_supports\_pbuffer\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00512\ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \_supports\_pixel\_format\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_pixel\_format"{}});}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00517\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_pixel\_format)\ \{}
\DoxyCodeLine{00518\ \ \ \ \ \_wglGetPixelFormatAttribivARB\ =}
\DoxyCodeLine{00519\ \ \ \ \ \ \ (PFNWGLGETPIXELFORMATATTRIBIVARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetPixelFormatAttribivARB"{}});}
\DoxyCodeLine{00520\ \ \ \ \ \_wglGetPixelFormatAttribfvARB\ =}
\DoxyCodeLine{00521\ \ \ \ \ \ \ (PFNWGLGETPIXELFORMATATTRIBFVARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetPixelFormatAttribfvARB"{}});}
\DoxyCodeLine{00522\ \ \ \ \ \_wglChoosePixelFormatARB\ =}
\DoxyCodeLine{00523\ \ \ \ \ \ \ (PFNWGLCHOOSEPIXELFORMATARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglChoosePixelFormatARB"{}});}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_wglGetPixelFormatAttribivARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \_wglGetPixelFormatAttribfvARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \_wglChoosePixelFormatARB\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Driver\ claims\ to\ support\ WGL\_ARB\_pixel\_format\ extension,\ but\ does\ not\ define\ all\ functions.\(\backslash\)n"{}};}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \_supports\_pixel\_format\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00531\ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \_supports\_wgl\_multisample\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_multisample"{}});}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ \ \ \_supports\_wgl\_render\_texture\ =\ has\_extension(\textcolor{stringliteral}{"{}WGL\_ARB\_render\_texture"{}});}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \textcolor{keywordflow}{if}\ (\_supports\_wgl\_render\_texture)\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \_wglBindTexImageARB\ =}
\DoxyCodeLine{00540\ \ \ \ \ \ \ (PFNWGLBINDTEXIMAGEARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglBindTexImageARB"{}});}
\DoxyCodeLine{00541\ \ \ \ \ \_wglReleaseTexImageARB\ =}
\DoxyCodeLine{00542\ \ \ \ \ \ \ (PFNWGLRELEASETEXIMAGEARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglReleaseTexImageARB"{}});}
\DoxyCodeLine{00543\ \ \ \ \ \_wglSetPbufferAttribARB\ =}
\DoxyCodeLine{00544\ \ \ \ \ \ \ (PFNWGLSETPBUFFERATTRIBARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglSetPbufferAttribARB"{}});}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_wglBindTexImageARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \_wglReleaseTexImageARB\ ==\ \textcolor{keyword}{nullptr}\ ||}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \_wglSetPbufferAttribARB\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Driver\ claims\ to\ support\ WGL\_ARB\_render\_texture,\ but\ does\ not\ define\ all\ functions.\(\backslash\)n"{}};}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \_supports\_wgl\_render\_texture\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \}}
\DoxyCodeLine{00553\ \}}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00560\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a88cf4be2d47c55f24b1e98f048ef9661}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00561\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a88cf4be2d47c55f24b1e98f048ef9661}{get\_extra\_extensions}}()\ \{}
\DoxyCodeLine{00562\ \ \ \textcolor{comment}{//\ This\ is\ a\ little\ bit\ tricky,\ since\ the\ query\ function\ is\ itself\ an}}
\DoxyCodeLine{00563\ \ \ \textcolor{comment}{//\ extension.}}
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00565\ \ \ \textcolor{comment}{//\ Look\ for\ the\ ARB\ flavor\ first,\ which\ wants\ one\ parameter,\ the\ HDC\ of\ the}}
\DoxyCodeLine{00566\ \ \ \textcolor{comment}{//\ drawing\ context.}}
\DoxyCodeLine{00567\ \ \ PFNWGLGETEXTENSIONSSTRINGARBPROC\ wglGetExtensionsStringARB\ =}
\DoxyCodeLine{00568\ \ \ \ \ (PFNWGLGETEXTENSIONSSTRINGARBPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetExtensionsStringARB"{}});}
\DoxyCodeLine{00569\ \ \ \textcolor{keywordflow}{if}\ (wglGetExtensionsStringARB\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00570\ \ \ \ \ HDC\ hdc\ =\ wglGetCurrentDC();}
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{keywordflow}{if}\ (hdc\ !=\ 0)\ \{}
\DoxyCodeLine{00572\ \ \ \ \ \ \ save\_extensions((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)wglGetExtensionsStringARB(hdc));}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00574\ \ \ \ \ \}}
\DoxyCodeLine{00575\ \ \ \}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \textcolor{comment}{//\ If\ that\ failed,\ look\ for\ the\ EXT\ flavor,\ which\ wants\ no\ parameters.}}
\DoxyCodeLine{00578\ \ \ PFNWGLGETEXTENSIONSSTRINGEXTPROC\ wglGetExtensionsStringEXT\ =}
\DoxyCodeLine{00579\ \ \ \ \ (PFNWGLGETEXTENSIONSSTRINGEXTPROC)wglGetProcAddress(\textcolor{stringliteral}{"{}wglGetExtensionsStringEXT"{}});}
\DoxyCodeLine{00580\ \ \ \textcolor{keywordflow}{if}\ (wglGetExtensionsStringEXT\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00581\ \ \ \ \ save\_extensions((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)wglGetExtensionsStringEXT());}
\DoxyCodeLine{00582\ \ \ \}}
\DoxyCodeLine{00583\ \}}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00591\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classwglGraphicsStateGuardian_a7e9635d20a8beec1fc9dc86058d3eeaa}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00592\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a7e9635d20a8beec1fc9dc86058d3eeaa}{do\_get\_extension\_func}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name)\ \{}
\DoxyCodeLine{00593\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{void}*)\ wglGetProcAddress(name);}
\DoxyCodeLine{00594\ \}}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00600\ \textcolor{keywordtype}{void}\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00601\ make\_context(HDC\ hdc)\ \{}
\DoxyCodeLine{00602\ \ \ \textcolor{comment}{//\ We\ should\ only\ call\ this\ once\ for\ a\ particular\ GSG.}}
\DoxyCodeLine{00603\ \ \ nassertv(!\_made\_context);}
\DoxyCodeLine{00604\ }
\DoxyCodeLine{00605\ \ \ \_made\_context\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \textcolor{comment}{//\ Attempt\ to\ create\ a\ context.}}
\DoxyCodeLine{00608\ \ \ wglGraphicsPipe::\_current\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \textcolor{keywordflow}{if}\ (\_wglCreateContextAttribsARB\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{comment}{//\ We\ have\ a\ fancier\ version\ of\ wglCreateContext\ that\ allows\ us\ to\ specify}}
\DoxyCodeLine{00612\ \ \ \ \ \textcolor{comment}{//\ what\ kind\ of\ OpenGL\ context\ we\ would\ like.}}
\DoxyCodeLine{00613\ \ \ \ \ \textcolor{keywordtype}{int}\ attrib\_list[32];}
\DoxyCodeLine{00614\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ 0;}
\DoxyCodeLine{00615\ \ \ \ \ attrib\_list[0]\ =\ 0;}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \ \textcolor{keywordflow}{if}\ (gl\_version.get\_num\_words()\ >\ 0)\ \{}
\DoxyCodeLine{00618\ \ \ \ \ \ \ attrib\_list[n++]\ =\ WGL\_CONTEXT\_MAJOR\_VERSION\_ARB;}
\DoxyCodeLine{00619\ \ \ \ \ \ \ attrib\_list[n++]\ =\ gl\_version[0];}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (gl\_version.get\_num\_words()\ >\ 1)\ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ attrib\_list[n++]\ =\ WGL\_CONTEXT\_MINOR\_VERSION\_ARB;}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ attrib\_list[n++]\ =\ gl\_version[1];}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00624\ \ \ \ \ \}}
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{keywordtype}{int}\ flags\ =\ 0;}
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{keywordflow}{if}\ (gl\_debug)\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ flags\ |=\ WGL\_CONTEXT\_DEBUG\_BIT\_ARB;}
\DoxyCodeLine{00628\ \ \ \ \ \}}
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keywordflow}{if}\ (gl\_forward\_compatible)\ \{}
\DoxyCodeLine{00630\ \ \ \ \ \ \ flags\ |=\ WGL\_CONTEXT\_FORWARD\_COMPATIBLE\_BIT\_ARB;}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (gl\_version.get\_num\_words()\ ==\ 0\ ||\ gl\_version[0]\ <\ 2)\ \{}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}gl-\/forward-\/compatible\ requires\ gl-\/version\ >=\ 3\ 0\(\backslash\)n"{}};}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00635\ \ \ \ \ \}}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{keywordflow}{if}\ (flags\ !=\ 0)\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \ \ attrib\_list[n++]\ =\ WGL\_CONTEXT\_FLAGS\_ARB;}
\DoxyCodeLine{00638\ \ \ \ \ \ \ attrib\_list[n++]\ =\ flags;}
\DoxyCodeLine{00639\ \ \ \ \ \}}
\DoxyCodeLine{00640\ \textcolor{preprocessor}{\#ifndef\ SUPPORT\_FIXED\_FUNCTION}}
\DoxyCodeLine{00641\ \ \ \ \ attrib\_list[n++]\ =\ WGL\_CONTEXT\_PROFILE\_MASK\_ARB;}
\DoxyCodeLine{00642\ \ \ \ \ attrib\_list[n++]\ =\ WGL\_CONTEXT\_CORE\_PROFILE\_BIT\_ARB;}
\DoxyCodeLine{00643\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00644\ \ \ \ \ attrib\_list[n]\ =\ 0;}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \ \ \_context\ =\ \_wglCreateContextAttribsARB(hdc,\ 0,\ attrib\_list);}
\DoxyCodeLine{00647\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00648\ \ \ \ \ \_context\ =\ wglCreateContext(hdc);}
\DoxyCodeLine{00649\ \ \ \}}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \textcolor{keywordflow}{if}\ (\_context\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00652\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00653\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Could\ not\ create\ GL\ context.\(\backslash\)n"{}};}
\DoxyCodeLine{00654\ \ \ \ \ \_is\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00655\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00656\ \ \ \}}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ \ \ \textcolor{comment}{//\ Now\ share\ texture\ context\ with\ the\ indicated\ GSG.}}
\DoxyCodeLine{00659\ \ \ \textcolor{keywordflow}{if}\ (\_share\_with\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00660\ \ \ \ \ HGLRC\ share\_context\ =\ \_share\_with-\/>get\_share\_context();}
\DoxyCodeLine{00661\ \ \ \ \ \textcolor{keywordflow}{if}\ (share\_context\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \textcolor{comment}{//\ Whoops,\ the\ target\ context\ hasn't\ yet\ made\ its\ own\ context.\ \ In\ that}}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \textcolor{comment}{//\ case,\ it\ will\ share\ context\ with\ us.}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \_share\_with-\/>redirect\_share\_pool(\textcolor{keyword}{this});}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!wglShareLists(share\_context,\ \_context))\ \{}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Could\ not\ share\ texture\ contexts\ between\ wglGraphicsStateGuardians.\(\backslash\)n"{}};}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Too\ bad\ we\ couldn't\ detect\ this\ error\ sooner.\ \ Now\ there's\ really}}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ way\ to\ tell\ the\ application\ it's\ hosed.}}
\DoxyCodeLine{00672\ \ \ \_is\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \_prepared\_objects\ =\ \_share\_with-\/>get\_prepared\_objects();}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00677\ \ \ \ \ \}}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \ \ \_share\_with\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00680\ \ \ \}}
\DoxyCodeLine{00681\ \}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00690\ HGLRC\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00691\ get\_share\_context()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00692\ \ \ \textcolor{keywordflow}{if}\ (\_made\_context)\ \{}
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{keywordflow}{return}\ \_context;}
\DoxyCodeLine{00694\ \ \ \}}
\DoxyCodeLine{00695\ \ \ \textcolor{keywordflow}{if}\ (\_share\_with\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00696\ \ \ \ \ \textcolor{keywordflow}{return}\ \_share\_with-\/>get\_share\_context();}
\DoxyCodeLine{00697\ \ \ \}}
\DoxyCodeLine{00698\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00699\ \}}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00709\ \textcolor{keywordtype}{void}\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00710\ redirect\_share\_pool(\mbox{\hyperlink{classwglGraphicsStateGuardian}{wglGraphicsStateGuardian}}\ *share\_with)\ \{}
\DoxyCodeLine{00711\ \ \ nassertv(!\_made\_context);}
\DoxyCodeLine{00712\ \ \ \textcolor{keywordflow}{if}\ (\_share\_with\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00713\ \ \ \ \ \_share\_with-\/>redirect\_share\_pool(share\_with);}
\DoxyCodeLine{00714\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00715\ \ \ \ \ \_share\_with\ =\ share\_with;}
\DoxyCodeLine{00716\ \ \ \}}
\DoxyCodeLine{00717\ \}}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00725\ \textcolor{keywordtype}{bool}\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00726\ make\_twindow()\ \{}
\DoxyCodeLine{00727\ \ \ release\_twindow();}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ DWORD\ window\_style\ =\ 0;}
\DoxyCodeLine{00730\ }
\DoxyCodeLine{00731\ \ \ register\_twindow\_class();}
\DoxyCodeLine{00732\ \ \ HINSTANCE\ hinstance\ =\ GetModuleHandle(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00733\ \ \ \_twindow\ =\ CreateWindow(\_twindow\_class\_name,\ \textcolor{stringliteral}{"{}twindow"{}},\ window\_style,}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 0,\ 1,\ 1,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr},\ hinstance,\ 0);}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \textcolor{keywordflow}{if}\ (!\_twindow)\ \{}
\DoxyCodeLine{00737\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00738\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}CreateWindow()\ failed!"{}}\ <<\ std::endl;}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00740\ \ \ \}}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ ShowWindow(\_twindow,\ SW\_HIDE);}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \ \ \_twindow\_dc\ =\ GetDC(\_twindow);}
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ PIXELFORMATDESCRIPTOR\ pixelformat;}
\DoxyCodeLine{00747\ \ \ \textcolor{keywordflow}{if}\ (!SetPixelFormat(\_twindow\_dc,\ \_pfnum,\ \&pixelformat))\ \{}
\DoxyCodeLine{00748\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00749\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}SetPixelFormat("{}}\ <<\ \_pfnum\ <<\ \textcolor{stringliteral}{"{})\ failed\ after\ window\ create\(\backslash\)n"{}};}
\DoxyCodeLine{00750\ \ \ \ \ release\_twindow();}
\DoxyCodeLine{00751\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00752\ \ \ \}}
\DoxyCodeLine{00753\ }
\DoxyCodeLine{00754\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00755\ \}}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00761\ \textcolor{keywordtype}{void}\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00762\ release\_twindow()\ \{}
\DoxyCodeLine{00763\ \ \ \textcolor{keywordflow}{if}\ (\_twindow\_dc)\ \{}
\DoxyCodeLine{00764\ \ \ \ \ ReleaseDC(\_twindow,\ \_twindow\_dc);}
\DoxyCodeLine{00765\ \ \ \ \ \_twindow\_dc\ =\ 0;}
\DoxyCodeLine{00766\ \ \ \}}
\DoxyCodeLine{00767\ \ \ \textcolor{keywordflow}{if}\ (\_twindow)\ \{}
\DoxyCodeLine{00768\ \ \ \ \ DestroyWindow(\_twindow);}
\DoxyCodeLine{00769\ \ \ \ \ \_twindow\ =\ 0;}
\DoxyCodeLine{00770\ \ \ \}}
\DoxyCodeLine{00771\ \}}
\DoxyCodeLine{00772\ }
\DoxyCodeLine{00777\ \textcolor{keywordtype}{void}\ wglGraphicsStateGuardian::}
\DoxyCodeLine{00778\ register\_twindow\_class()\ \{}
\DoxyCodeLine{00779\ \ \ \textcolor{keywordflow}{if}\ (\_twindow\_class\_registered)\ \{}
\DoxyCodeLine{00780\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00781\ \ \ \}}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ WNDCLASS\ wc;}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ HINSTANCE\ instance\ =\ GetModuleHandle(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \textcolor{comment}{//\ Clear\ before\ filling\ in\ window\ structure!}}
\DoxyCodeLine{00788\ \ \ ZeroMemory(\&wc,\ \textcolor{keyword}{sizeof}(WNDCLASS));}
\DoxyCodeLine{00789\ \ \ wc.style\ =\ CS\_OWNDC;}
\DoxyCodeLine{00790\ \ \ wc.lpfnWndProc\ =\ DefWindowProc;}
\DoxyCodeLine{00791\ \ \ wc.hInstance\ =\ instance;}
\DoxyCodeLine{00792\ \ \ wc.lpszClassName\ =\ \_twindow\_class\_name;}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ \ \ \textcolor{keywordflow}{if}\ (!RegisterClass(\&wc))\ \{}
\DoxyCodeLine{00795\ \ \ \ \ wgldisplay\_cat.error()}
\DoxyCodeLine{00796\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}could\ not\ register\ window\ class!"{}}\ <<\ std::endl;}
\DoxyCodeLine{00797\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00798\ \ \ \}}
\DoxyCodeLine{00799\ \ \ \_twindow\_class\_registered\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00800\ \}}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \textcolor{preprocessor}{\#define\ GAMMA\_1\ (255.0\ *\ 256.0)}}
\DoxyCodeLine{00803\ }
\DoxyCodeLine{00804\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_gamma\_table\_initialized\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00805\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \_original\_gamma\_table\ [256\ *\ 3];}
\DoxyCodeLine{00806\ }
\DoxyCodeLine{00807\ \textcolor{keywordtype}{void}\ \_create\_gamma\_table\_wgl\ (PN\_stdfloat\ gamma,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *original\_red\_table,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *original\_green\_table,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *original\_blue\_table,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *red\_table,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *green\_table,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ *blue\_table)\ \{}
\DoxyCodeLine{00808\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00809\ \ \ \textcolor{keywordtype}{double}\ gamma\_correction;}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \ \ \textcolor{keywordflow}{if}\ (gamma\ <=\ 0.0)\ \{}
\DoxyCodeLine{00812\ \ \ \ \ \textcolor{comment}{//\ avoid\ divide\ by\ zero\ and\ negative\ exponents}}
\DoxyCodeLine{00813\ \ \ \ \ gamma\ =\ 1.0;}
\DoxyCodeLine{00814\ \ \ \}}
\DoxyCodeLine{00815\ \ \ gamma\_correction\ =\ 1.0\ /\ (double)\ gamma;}
\DoxyCodeLine{00816\ }
\DoxyCodeLine{00817\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 256;\ i++)\ \{}
\DoxyCodeLine{00818\ \ \ \ \ \textcolor{keywordtype}{double}\ r;}
\DoxyCodeLine{00819\ \ \ \ \ \textcolor{keywordtype}{double}\ g;}
\DoxyCodeLine{00820\ \ \ \ \ \textcolor{keywordtype}{double}\ b;}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ \textcolor{keywordflow}{if}\ (original\_red\_table)\ \{}
\DoxyCodeLine{00823\ \ \ \ \ \ \ r\ =\ (double)\ original\_red\_table\ [i]\ /\ GAMMA\_1;}
\DoxyCodeLine{00824\ \ \ \ \ \ \ g\ =\ (double)\ original\_green\_table\ [i]\ /\ GAMMA\_1;}
\DoxyCodeLine{00825\ \ \ \ \ \ \ b\ =\ (double)\ original\_blue\_table\ [i]\ /\ GAMMA\_1;}
\DoxyCodeLine{00826\ \ \ \ \ \}}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00828\ \ \ \ \ \ \ r\ =\ ((double)\ i\ /\ 255.0);}
\DoxyCodeLine{00829\ \ \ \ \ \ \ g\ =\ r;}
\DoxyCodeLine{00830\ \ \ \ \ \ \ b\ =\ r;}
\DoxyCodeLine{00831\ \ \ \ \ \}}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \ \ \ \ r\ =\ pow\ (r,\ gamma\_correction);}
\DoxyCodeLine{00834\ \ \ \ \ g\ =\ pow\ (g,\ gamma\_correction);}
\DoxyCodeLine{00835\ \ \ \ \ b\ =\ pow\ (b,\ gamma\_correction);}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ >\ 1.00)\ \{}
\DoxyCodeLine{00838\ \ \ \ \ \ \ r\ =\ 1.0;}
\DoxyCodeLine{00839\ \ \ \ \ \}}
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{keywordflow}{if}\ (g\ >\ 1.00)\ \{}
\DoxyCodeLine{00841\ \ \ \ \ \ \ g\ =\ 1.0;}
\DoxyCodeLine{00842\ \ \ \ \ \}}
\DoxyCodeLine{00843\ \ \ \ \ \textcolor{keywordflow}{if}\ (b\ >\ 1.00)\ \{}
\DoxyCodeLine{00844\ \ \ \ \ \ \ b\ =\ 1.0;}
\DoxyCodeLine{00845\ \ \ \ \ \}}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ \ \ r\ =\ r\ *\ GAMMA\_1;}
\DoxyCodeLine{00848\ \ \ \ \ g\ =\ g\ *\ GAMMA\_1;}
\DoxyCodeLine{00849\ \ \ \ \ b\ =\ b\ *\ GAMMA\_1;}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \ \ \ \ red\_table\ [i]\ =\ r;}
\DoxyCodeLine{00852\ \ \ \ \ green\_table\ [i]\ =\ g;}
\DoxyCodeLine{00853\ \ \ \ \ blue\_table\ [i]\ =\ b;}
\DoxyCodeLine{00854\ \ \ \}}
\DoxyCodeLine{00855\ \}}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00860\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a916ee5230f9042a639444e7ce12c8430}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00861\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a916ee5230f9042a639444e7ce12c8430}{get\_gamma\_table}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00862\ \ \ \textcolor{keywordtype}{bool}\ get;}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ \ \ get\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00865\ \ \ \textcolor{keywordflow}{if}\ (\_gamma\_table\_initialized\ ==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00866\ \ \ \ \ HDC\ hdc\ =\ GetDC(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00867\ }
\DoxyCodeLine{00868\ \ \ \ \ \textcolor{keywordflow}{if}\ (hdc)\ \{}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (GetDeviceGammaRamp\ (hdc,\ (LPVOID)\ \_original\_gamma\_table))\ \{}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \_gamma\_table\_initialized\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ get\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ \ \ \ \ \ \ ReleaseDC\ (\textcolor{keyword}{nullptr},\ hdc);}
\DoxyCodeLine{00875\ \ \ \ \ \}}
\DoxyCodeLine{00876\ \ \ \}}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00878\ \ \ \textcolor{keywordflow}{return}\ get;}
\DoxyCodeLine{00879\ \}}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00884\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a87d7cf48ce90f13241e28b5512f8cb48}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00885\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a87d7cf48ce90f13241e28b5512f8cb48}{static\_set\_gamma}}(\textcolor{keywordtype}{bool}\ restore,\ PN\_stdfloat\ gamma)\ \{}
\DoxyCodeLine{00886\ \ \ \textcolor{keywordtype}{bool}\ set;}
\DoxyCodeLine{00887\ \ \ HDC\ hdc\ =\ GetDC(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00888\ }
\DoxyCodeLine{00889\ \ \ set\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00890\ \ \ \textcolor{keywordflow}{if}\ (hdc)\ \{}
\DoxyCodeLine{00891\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ ramp\ [256\ *\ 3];}
\DoxyCodeLine{00892\ }
\DoxyCodeLine{00893\ \ \ \ \ \textcolor{keywordflow}{if}\ (restore\ \&\&\ \_gamma\_table\_initialized)\ \{}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \_create\_gamma\_table\_wgl\ (gamma,\ \&\_original\_gamma\_table\ [0],\ \&\_original\_gamma\_table\ [256],\ \&\_original\_gamma\_table\ [512],\ \&ramp\ [0],\ \&ramp\ [256],\ \&ramp\ [512]);}
\DoxyCodeLine{00895\ \ \ \ \ \}}
\DoxyCodeLine{00896\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \_create\_gamma\_table\_wgl\ (gamma,\ 0,\ 0,\ 0,\ \&ramp\ [0],\ \&ramp\ [256],\ \&ramp\ [512]);}
\DoxyCodeLine{00898\ \ \ \ \ \}}
\DoxyCodeLine{00899\ }
\DoxyCodeLine{00900\ \ \ \ \ \textcolor{keywordflow}{if}\ (SetDeviceGammaRamp\ (hdc,\ ramp))\ \{}
\DoxyCodeLine{00901\ \ \ \ \ \ \ set\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00902\ }
\DoxyCodeLine{00903\ \ \ \ \ \ \ \textcolor{comment}{//\ Register\ an\ atexit\ handler}}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::atomic\_flag\ gamma\_modified\ =\ ATOMIC\_FLAG\_INIT;}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!gamma\_modified.test\_and\_set())\ \{}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ atexit(\mbox{\hyperlink{classwglGraphicsStateGuardian_abf2bf218feec4976f1dac7e10010b8e2}{atexit\_function}});}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00908\ \ \ \ \ \}}
\DoxyCodeLine{00909\ }
\DoxyCodeLine{00910\ \ \ \ \ ReleaseDC\ (\textcolor{keyword}{nullptr},\ hdc);}
\DoxyCodeLine{00911\ \ \ \}}
\DoxyCodeLine{00912\ }
\DoxyCodeLine{00913\ \ \ \textcolor{keywordflow}{return}\ set;}
\DoxyCodeLine{00914\ \}}
\DoxyCodeLine{00915\ }
\DoxyCodeLine{00919\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a2eee4abf567a2b2129067dbca259ef50}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00920\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a2eee4abf567a2b2129067dbca259ef50}{set\_gamma}}(PN\_stdfloat\ gamma)\ \{}
\DoxyCodeLine{00921\ \ \ \textcolor{keywordtype}{bool}\ set;}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ \ \ set\ =\ \mbox{\hyperlink{classwglGraphicsStateGuardian_a87d7cf48ce90f13241e28b5512f8cb48}{static\_set\_gamma}}(\textcolor{keyword}{false},\ gamma);}
\DoxyCodeLine{00924\ \ \ \textcolor{keywordflow}{if}\ (set)\ \{}
\DoxyCodeLine{00925\ \ \ \ \ \_gamma\ =\ gamma;}
\DoxyCodeLine{00926\ \ \ \}}
\DoxyCodeLine{00927\ }
\DoxyCodeLine{00928\ \ \ \textcolor{keywordflow}{return}\ set;}
\DoxyCodeLine{00929\ \}}
\DoxyCodeLine{00930\ }
\DoxyCodeLine{00934\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_ad6f67de8508ae52896fc2586755923cc}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00935\ \mbox{\hyperlink{classwglGraphicsStateGuardian_ad6f67de8508ae52896fc2586755923cc}{restore\_gamma}}()\ \{}
\DoxyCodeLine{00936\ \ \ \mbox{\hyperlink{classwglGraphicsStateGuardian_a87d7cf48ce90f13241e28b5512f8cb48}{static\_set\_gamma}}(\textcolor{keyword}{true},\ 1.0f);}
\DoxyCodeLine{00937\ \}}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00942\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwglGraphicsStateGuardian_abf2bf218feec4976f1dac7e10010b8e2}{wglGraphicsStateGuardian::}}}
\DoxyCodeLine{00943\ \mbox{\hyperlink{classwglGraphicsStateGuardian_abf2bf218feec4976f1dac7e10010b8e2}{atexit\_function}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{00944\ \ \ \mbox{\hyperlink{classwglGraphicsStateGuardian_a87d7cf48ce90f13241e28b5512f8cb48}{static\_set\_gamma}}(\textcolor{keyword}{true},\ 1.0);}
\DoxyCodeLine{00945\ \}}

\end{DoxyCode}

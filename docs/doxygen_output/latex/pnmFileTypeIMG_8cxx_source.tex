\doxysection{pnm\+File\+Type\+IMG.\+cxx}
\hypertarget{pnmFileTypeIMG_8cxx_source}{}\label{pnmFileTypeIMG_8cxx_source}\index{panda/src/pnmimagetypes/pnmFileTypeIMG.cxx@{panda/src/pnmimagetypes/pnmFileTypeIMG.cxx}}
\mbox{\hyperlink{pnmFileTypeIMG_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnmFileTypeIMG_8h}{pnmFileTypeIMG.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifdef\ HAVE\_IMG}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__pnmimagetypes_8h}{config\_pnmimagetypes.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnmFileTypeRegistry_8h}{pnmFileTypeRegistry.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{//\ Since\ raw\ image\ files\ don't\ have\ a\ magic\ number,\ we'll\ make\ a\ little\ sanity}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ check\ on\ the\ size\ of\ the\ image.\ \ If\ either\ the\ width\ or\ height\ is\ larger}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ than\ this,\ it\ must\ be\ bogus.}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ INSANE\_SIZE\ 20000}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{using\ }std::istream;}
\DoxyCodeLine{00029\ \textcolor{keyword}{using\ }std::ostream;}
\DoxyCodeLine{00030\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ \textcolor{keyword}{const}\ extensions\_img[]\ =\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{stringliteral}{"{}img"{}}}
\DoxyCodeLine{00034\ \};}
\DoxyCodeLine{00035\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ num\_extensions\_img\ =\ \textcolor{keyword}{sizeof}(extensions\_img)\ /\ \textcolor{keyword}{sizeof}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ PNMFileTypeIMG::\_type\_handle;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00042\ PNMFileTypeIMG::}
\DoxyCodeLine{00043\ PNMFileTypeIMG()\ \{}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00049\ \textcolor{keywordtype}{string}\ PNMFileTypeIMG::}
\DoxyCodeLine{00050\ get\_name()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Raw\ binary\ RGB"{}};}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00058\ \textcolor{keywordtype}{int}\ PNMFileTypeIMG::}
\DoxyCodeLine{00059\ get\_num\_extensions()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{return}\ num\_extensions\_img;}
\DoxyCodeLine{00061\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{string}\ PNMFileTypeIMG::}
\DoxyCodeLine{00068\ get\_extension(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00069\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ num\_extensions\_img,\ \textcolor{keywordtype}{string}());}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{return}\ extensions\_img[n];}
\DoxyCodeLine{00071\ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00077\ \textcolor{keywordtype}{string}\ PNMFileTypeIMG::}
\DoxyCodeLine{00078\ get\_suggested\_extension()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}img"{}};}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00087\ \mbox{\hyperlink{classPNMReader}{PNMReader}}\ *PNMFileTypeIMG::}
\DoxyCodeLine{00088\ make\_reader(istream\ *file,\ \textcolor{keywordtype}{bool}\ owns\_file,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&magic\_number)\ \{}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ Reader(\textcolor{keyword}{this},\ file,\ owns\_file,\ magic\_number);}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00097\ \mbox{\hyperlink{classPNMWriter}{PNMWriter}}\ *PNMFileTypeIMG::}
\DoxyCodeLine{00098\ make\_writer(ostream\ *file,\ \textcolor{keywordtype}{bool}\ owns\_file)\ \{}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ Writer(\textcolor{keyword}{this},\ file,\ owns\_file);}
\DoxyCodeLine{00100\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}}
\DoxyCodeLine{00104\ read\_ulong(istream\ *file)\ \{}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ x;}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{return}\ pm\_readbiglong(file,\ (\textcolor{keywordtype}{long}\ *)\&x)==0\ ?\ x\ :\ 0;}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}}
\DoxyCodeLine{00110\ read\_ushort\_IMG(istream\ *file)\ \{}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ x;}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{return}\ pm\_readbigshort(file,\ (\textcolor{keywordtype}{short}\ *)\&x)==0\ ?\ x\ :\ 0;}
\DoxyCodeLine{00113\ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}}
\DoxyCodeLine{00116\ read\_uchar\_IMG(istream\ *file)\ \{}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00118\ \ \ x\ =\ file-\/>get();}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{return}\ (x!=EOF)\ ?\ (\textcolor{keywordtype}{unsigned}\ char)x\ :\ 0;}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00123\ write\_ulong(ostream\ *file,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ x)\ \{}
\DoxyCodeLine{00124\ \ \ pm\_writebiglong(file,\ (\textcolor{keywordtype}{long})x);}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00128\ write\_ushort\_IMG(ostream\ *file,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ x)\ \{}
\DoxyCodeLine{00129\ \ \ pm\_writebigshort(file,\ (\textcolor{keywordtype}{short})(\textcolor{keywordtype}{long})x);}
\DoxyCodeLine{00130\ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00133\ write\_uchar\_IMG(ostream\ *file,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ x)\ \{}
\DoxyCodeLine{00134\ \ \ file-\/>put(x);}
\DoxyCodeLine{00135\ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00140\ PNMFileTypeIMG::Reader::}
\DoxyCodeLine{00141\ Reader(\mbox{\hyperlink{classPNMFileType}{PNMFileType}}\ *type,\ istream\ *file,\ \textcolor{keywordtype}{bool}\ owns\_file,\ \textcolor{keywordtype}{string}\ magic\_number)\ :}
\DoxyCodeLine{00142\ \ \ \mbox{\hyperlink{classPNMReader}{PNMReader}}(type,\ file,\ owns\_file)}
\DoxyCodeLine{00143\ \{}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{if}\ (img\_header\_type\ ==\ IHT\_long)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{if}\ (!read\_magic\_number(\_file,\ magic\_number,\ 8))\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \textcolor{comment}{//\ Although\ raw\ IMG\ files\ have\ no\ magic\ number,\ they\ may\ have\ a\ pair\ of}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \textcolor{comment}{//\ ushorts\ or\ ulongs\ at\ the\ beginning\ to\ indicate\ the\ file\ size.}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pnmimage\_img\_cat.is\_debug())\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ pnmimage\_img\_cat.debug()}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}IMG\ image\ file\ appears\ to\ be\ empty.\(\backslash\)n"{}};}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \_is\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \_x\_size\ =}
\DoxyCodeLine{00157\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[0]\ <<\ 24)\ |}
\DoxyCodeLine{00158\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[1]\ <<\ 16)\ |}
\DoxyCodeLine{00159\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[2]\ <<\ 8)\ |}
\DoxyCodeLine{00160\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[3]);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \_y\_size\ =}
\DoxyCodeLine{00163\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[4]\ <<\ 24)\ |}
\DoxyCodeLine{00164\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[5]\ <<\ 16)\ |}
\DoxyCodeLine{00165\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[6]\ <<\ 8)\ |}
\DoxyCodeLine{00166\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[7]);}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img\_header\_type\ ==\ IHT\_short)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}\ (!read\_magic\_number(\_file,\ magic\_number,\ 4))\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pnmimage\_img\_cat.is\_debug())\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ pnmimage\_img\_cat.debug()}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}IMG\ image\ file\ appears\ to\ be\ empty.\(\backslash\)n"{}};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \_is\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \_x\_size\ =}
\DoxyCodeLine{00179\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[0]\ <<\ 8)\ |}
\DoxyCodeLine{00180\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[1]);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \_y\_size\ =}
\DoxyCodeLine{00183\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[2]\ <<\ 8)\ |}
\DoxyCodeLine{00184\ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ char)magic\_number[3]);}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \_x\_size\ =\ img\_size[0];}
\DoxyCodeLine{00188\ \ \ \ \ \_y\_size\ =\ img\_size[1];}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{keywordflow}{if}\ (\_x\_size\ ==\ 0\ ||\ \_y\_size\ ==\ 0\ ||}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \_x\_size\ >\ INSANE\_SIZE\ ||\ \_y\_size\ >\ INSANE\_SIZE)\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \_is\_valid\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{if}\ (img\_header\_type\ ==\ IHT\_none)\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ pnmimage\_img\_cat.error()}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Must\ specify\ img-\/xsize\ and\ img-\/ysize\ to\ load\ headerless\ raw\ files.\(\backslash\)n"{}};}
\DoxyCodeLine{00197\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ pnmimage\_img\_cat.debug()}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}IMG\ file\ does\ not\ have\ a\ valid\ xsize,ysize\ header.\(\backslash\)n"{}};}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00202\ \ \ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \_maxval\ =\ 255;}
\DoxyCodeLine{00205\ \ \ \_num\_channels\ =\ 3;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \textcolor{keywordflow}{if}\ (pnmimage\_img\_cat.is\_debug())\ \{}
\DoxyCodeLine{00208\ \ \ \ \ pnmimage\_img\_cat.debug()}
\DoxyCodeLine{00209\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Reading\ IMG\ "{}}\ <<\ *\textcolor{keyword}{this}\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00210\ \ \ \}}
\DoxyCodeLine{00211\ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00219\ \textcolor{keywordtype}{bool}\ PNMFileTypeIMG::Reader::}
\DoxyCodeLine{00220\ supports\_read\_row()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00222\ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00230\ \textcolor{keywordtype}{bool}\ PNMFileTypeIMG::Reader::}
\DoxyCodeLine{00231\ read\_row(\mbox{\hyperlink{structpixel}{xel}}\ *row\_data,\ xelval\ *,\ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00233\ \ \ xelval\ red,\ grn,\ blu;}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ x\_size;\ x++)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ red\ =\ read\_uchar\_IMG(\_file);}
\DoxyCodeLine{00236\ \ \ \ \ grn\ =\ read\_uchar\_IMG(\_file);}
\DoxyCodeLine{00237\ \ \ \ \ blu\ =\ read\_uchar\_IMG(\_file);}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ PPM\_ASSIGN(row\_data[x],\ red,\ grn,\ blu);}
\DoxyCodeLine{00240\ \ \ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00243\ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00248\ PNMFileTypeIMG::Writer::}
\DoxyCodeLine{00249\ Writer(\mbox{\hyperlink{classPNMFileType}{PNMFileType}}\ *type,\ ostream\ *file,\ \textcolor{keywordtype}{bool}\ owns\_file)\ :}
\DoxyCodeLine{00250\ \ \ \mbox{\hyperlink{classPNMWriter}{PNMWriter}}(type,\ file,\ owns\_file)}
\DoxyCodeLine{00251\ \{}
\DoxyCodeLine{00252\ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00260\ \textcolor{keywordtype}{bool}\ PNMFileTypeIMG::Writer::}
\DoxyCodeLine{00261\ supports\_write\_row()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00263\ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00275\ \textcolor{keywordtype}{bool}\ PNMFileTypeIMG::Writer::}
\DoxyCodeLine{00276\ write\_header()\ \{}
\DoxyCodeLine{00277\ \ \ \textcolor{keywordflow}{if}\ (img\_header\_type\ ==\ IHT\_long)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ write\_ulong(\_file,\ \_x\_size);}
\DoxyCodeLine{00279\ \ \ \ \ write\_ulong(\_file,\ \_y\_size);}
\DoxyCodeLine{00280\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img\_header\_type\ ==\ IHT\_short)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ write\_ushort\_IMG(\_file,\ \_x\_size);}
\DoxyCodeLine{00282\ \ \ \ \ write\_ushort\_IMG(\_file,\ \_y\_size);}
\DoxyCodeLine{00283\ \ \ \}}
\DoxyCodeLine{00284\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00285\ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00298\ \textcolor{keywordtype}{bool}\ PNMFileTypeIMG::Writer::}
\DoxyCodeLine{00299\ write\_row(\mbox{\hyperlink{structpixel}{xel}}\ *row\_data,\ xelval\ *)\ \{}
\DoxyCodeLine{00300\ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00301\ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ \_x\_size;\ x++)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ write\_uchar\_IMG(\_file,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(255*PPM\_GETR(row\_data[x])/\_maxval));}
\DoxyCodeLine{00303\ \ \ \ \ write\_uchar\_IMG(\_file,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(255*PPM\_GETG(row\_data[x])/\_maxval));}
\DoxyCodeLine{00304\ \ \ \ \ write\_uchar\_IMG(\_file,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(255*PPM\_GETB(row\_data[x])/\_maxval));}
\DoxyCodeLine{00305\ \ \ \}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00308\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00315\ \textcolor{keywordtype}{void}\ PNMFileTypeIMG::}
\DoxyCodeLine{00316\ register\_with\_read\_factory()\ \{}
\DoxyCodeLine{00317\ \ \ BamReader::get\_factory()-\/>}
\DoxyCodeLine{00318\ \ \ \ \ register\_factory(get\_class\_type(),\ make\_from\_bam);}
\DoxyCodeLine{00319\ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00329\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *PNMFileTypeIMG::}
\DoxyCodeLine{00330\ make\_from\_bam(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00331\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPNMFileTypeRegistry_a83617b215ff0b0482e86e463b43f22cf}{PNMFileTypeRegistry::get\_global\_ptr}}()-\/>\mbox{\hyperlink{classPNMFileTypeRegistry_a77cfb63495edef614b8ebf0c0d501843}{get\_type\_by\_handle}}(get\_class\_type());}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_IMG}}

\end{DoxyCode}

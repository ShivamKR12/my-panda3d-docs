\doxysection{egg\+Nurbs\+Curve.\+cxx}
\hypertarget{eggNurbsCurve_8cxx_source}{}\label{eggNurbsCurve_8cxx_source}\index{panda/src/egg/eggNurbsCurve.cxx@{panda/src/egg/eggNurbsCurve.cxx}}
\mbox{\hyperlink{eggNurbsCurve_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggNurbsCurve_8h}{eggNurbsCurve.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ EggNurbsCurve::\_type\_handle;}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00023\ \mbox{\hyperlink{classEggNurbsCurve}{EggNurbsCurve}}\ *EggNurbsCurve::}
\DoxyCodeLine{00024\ make\_copy()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggNurbsCurve}{EggNurbsCurve}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00034\ \textcolor{keywordtype}{void}\ EggNurbsCurve::}
\DoxyCodeLine{00035\ setup(\textcolor{keywordtype}{int}\ order,\ \textcolor{keywordtype}{int}\ num\_knots)\ \{}
\DoxyCodeLine{00036\ \ \ \_order\ =\ order;}
\DoxyCodeLine{00037\ \ \ \_knots.clear();}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00040\ \ \ \_knots.reserve(num\_knots);}
\DoxyCodeLine{00041\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_knots;\ i++)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \_knots.push\_back((\textcolor{keywordtype}{double})i);}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00053\ \textcolor{keywordtype}{void}\ EggNurbsCurve::}
\DoxyCodeLine{00054\ set\_num\_knots(\textcolor{keywordtype}{int}\ num)\ \{}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{int})\_knots.size()\ >=\ num)\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ Truncate\ knot\ values\ at\ the\ end.}}
\DoxyCodeLine{00057\ \ \ \ \ \_knots.erase(\_knots.begin()\ +\ num,\ \_knots.end());}
\DoxyCodeLine{00058\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Append\ knot\ values\ to\ the\ end.}}
\DoxyCodeLine{00060\ \ \ \ \ \_knots.reserve(num);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ \_knots.size();\ i\ <\ num;\ i++)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \_knots.push\_back(0.0);}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00072\ \textcolor{keywordtype}{bool}\ EggNurbsCurve::}
\DoxyCodeLine{00073\ is\_valid()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (\_order\ <\ 1\ ||\ \_order\ >\ 4)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ Invalid\ order.}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_cvs()\ !=\ (\textcolor{keywordtype}{int})size())\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ Wrong\ number\ of\ CV's.}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00082\ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ Do\ all\ the\ knot\ values\ monotonically\ increase?}}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 1;\ i\ <\ get\_num\_knots();\ i++)\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_knot(i)\ <\ get\_knot(i\ -\/\ 1))\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{//\ Everything's\ looking\ good!}}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00094\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00101\ \textcolor{keywordtype}{bool}\ EggNurbsCurve::}
\DoxyCodeLine{00102\ is\_closed()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{//\ Technically,\ the\ curve\ is\ closed\ if\ the\ CV's\ at\ the\ end\ are\ repeated\ from}}
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ the\ beginning.\ \ We'll\ do\ a\ cheesy\ test\ for\ expediency's\ sake:\ the\ curve}}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{//\ is\ closed\ if\ the\ first\ n\ knots\ are\ not\ repeated.\ \ I\ think\ this\ will\ catch}}
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ all\ the\ normal\ curves\ we're\ likely\ to\ see.}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 1;\ i\ <\ get\_order();\ i++)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_knot(i)\ !=\ get\_knot(i-\/1))\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00120\ \textcolor{keywordtype}{void}\ EggNurbsCurve::}
\DoxyCodeLine{00121\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00122\ \ \ \mbox{\hyperlink{classEggNamedObject_a3bff8c19c95cf7a74710555c987d6172}{write\_header}}(out,\ indent\_level,\ \textcolor{stringliteral}{"{}<NurbsCurve>"{}});}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{keywordflow}{if}\ (get\_curve\_type()\ !=\ CT\_none)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00126\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Char*>\ type\ \{\ "{}}\ <<\ get\_curve\_type()\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{00127\ \ \ \}}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{if}\ (get\_subdiv()\ !=\ 0)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00130\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Scalar>\ subdiv\ \{\ "{}}\ <<\ get\_subdiv()\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00133\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Order>\ \{\ "{}}\ <<\ get\_order()\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{00134\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00135\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Knots>\ \{\(\backslash\)n"{}};}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{indent_8h_a25cf046258c218e427e0b834e5c08f97}{write\_long\_list}}(out,\ indent\_level+4,\ \_knots.begin(),\ \_knots.end(),\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}},\ 72);}
\DoxyCodeLine{00138\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00139\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \mbox{\hyperlink{classEggPrimitive_a4ccee13cbd16252ccae2c44cfe5af2a3}{write\_body}}(out,\ indent\_level+2);}
\DoxyCodeLine{00142\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{00143\ \}}

\end{DoxyCode}

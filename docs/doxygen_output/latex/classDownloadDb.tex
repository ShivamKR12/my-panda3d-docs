\doxysection{Download\+Db Class Reference}
\hypertarget{classDownloadDb}{}\label{classDownloadDb}\index{DownloadDb@{DownloadDb}}


{\ttfamily \#include $<$download\+Db.\+h$>$}

\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classDownloadDb_1_1Db}{Db}}
\item 
class \mbox{\hyperlink{classDownloadDb_1_1FileRecord}{File\+Record}}
\item 
class \mbox{\hyperlink{classDownloadDb_1_1MultifileRecord}{Multifile\+Record}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_a15d1f555c677ec2f9fcf0d5a815bbc73}\label{classDownloadDb_a15d1f555c677ec2f9fcf0d5a815bbc73} 
typedef \mbox{\hyperlink{classpvector}{pvector}}$<$ PT(\mbox{\hyperlink{classDownloadDb_1_1FileRecord}{File\+Record}}) $>$ {\bfseries File\+Records}
\item 
\Hypertarget{classDownloadDb_abe2357544bf0063f4ea0f89e9552112d}\label{classDownloadDb_abe2357544bf0063f4ea0f89e9552112d} 
typedef \mbox{\hyperlink{classpvector}{pvector}}$<$ PT(\mbox{\hyperlink{classDownloadDb_1_1MultifileRecord}{Multifile\+Record}}) $>$ {\bfseries Multifile\+Records}
\item 
\Hypertarget{classDownloadDb_a563576e7fad5590f4815e9b9e3552f15}\label{classDownloadDb_a563576e7fad5590f4815e9b9e3552f15} 
typedef \mbox{\hyperlink{classpvector}{pvector}}$<$ \mbox{\hyperlink{classHashVal}{Hash\+Val}} $>$ {\bfseries Vector\+Hash}
\item 
\Hypertarget{classDownloadDb_a7e25c60df7be65e157ac0bce39e0fd3f}\label{classDownloadDb_a7e25c60df7be65e157ac0bce39e0fd3f} 
typedef \mbox{\hyperlink{classpmap}{pmap}}$<$ \mbox{\hyperlink{classFilename}{Filename}}, \mbox{\hyperlink{classpvector}{Vector\+Hash}} $>$ {\bfseries Version\+Map}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_a2f64854dcba7cbfdcad61ac7d31020f0}\label{classDownloadDb_a2f64854dcba7cbfdcad61ac7d31020f0} 
\mbox{\hyperlink{classDownloadDb_1_1Db}{Db}} {\bfseries read\+\_\+db} (\mbox{\hyperlink{classRamfile}{Ramfile}} \&file, bool want\+\_\+server\+\_\+info)
\item 
\Hypertarget{classDownloadDb_a22e95033fea31591edb548a7ed418307}\label{classDownloadDb_a22e95033fea31591edb548a7ed418307} 
bool {\bfseries write\+\_\+db} (\mbox{\hyperlink{classFilename}{Filename}} \&file, \mbox{\hyperlink{classDownloadDb_1_1Db}{Db}} db, bool want\+\_\+server\+\_\+info)
\item 
void \mbox{\hyperlink{classDownloadDb_a65fe47fc497a719b5012e83d9ca67122}{insert\+\_\+new\+\_\+version}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name, const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \&hash)
\item 
bool \mbox{\hyperlink{classDownloadDb_a56b5c3b0e264dc0e7eadcf42470f4327}{has\+\_\+version}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name) const
\item 
int \mbox{\hyperlink{classDownloadDb_ae4fd6965ce027b032a10ebd96f15eb9c}{get\+\_\+num\+\_\+versions}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name) const
\item 
void \mbox{\hyperlink{classDownloadDb_ac7ecced5520c763643b7ec71e9e6bc9d}{set\+\_\+num\+\_\+versions}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name, int num\+\_\+versions)
\item 
int \mbox{\hyperlink{classDownloadDb_a532218531e297d2a4ff1adcf056bf348}{get\+\_\+version}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name, const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \&hash) const
\item 
const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \& \mbox{\hyperlink{classDownloadDb_a1b635d3ebc08ec1e7fbbf1cccfd8dba6}{get\+\_\+hash}} (const \mbox{\hyperlink{classFilename}{Filename}} \&name, int version) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_ab2740619004a4d1544c18548dda43fec}\label{classDownloadDb_ab2740619004a4d1544c18548dda43fec} 
PUBLISHED \+: \mbox{\hyperlink{classDownloadDb_1_1Db}{Db}} read\+\_\+db(\mbox{\hyperlink{classFilename}{Filename}} \&file
\item 
\Hypertarget{classDownloadDb_a60a9c0ef5e65aa965c9006f5669213ef}\label{classDownloadDb_a60a9c0ef5e65aa965c9006f5669213ef} 
PUBLISHED bool {\bfseries want\+\_\+server\+\_\+info}
\item 
\Hypertarget{classDownloadDb_ac86e3683fbe372ce4562cf29bf14c16e}\label{classDownloadDb_ac86e3683fbe372ce4562cf29bf14c16e} 
\mbox{\hyperlink{classDownloadDb_1_1Db}{Db}} {\bfseries \+\_\+client\+\_\+db}
\item 
\Hypertarget{classDownloadDb_a76b3f2abce1312d0b0b62ffcb7cc54a7}\label{classDownloadDb_a76b3f2abce1312d0b0b62ffcb7cc54a7} 
\mbox{\hyperlink{classDownloadDb_1_1Db}{Db}} {\bfseries \+\_\+server\+\_\+db}
\item 
\Hypertarget{classDownloadDb_a5ef7f7c6d5fe5f4105090e69a703b542}\label{classDownloadDb_a5ef7f7c6d5fe5f4105090e69a703b542} 
PUBLISHED \+: void add\+\_\+version(const \mbox{\hyperlink{classFilename}{Filename}} \&name
\item 
\Hypertarget{classDownloadDb_aadb202a3d6534a0fce66aa095272d6c3}\label{classDownloadDb_aadb202a3d6534a0fce66aa095272d6c3} 
PUBLISHED const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \& {\bfseries hash}
\item 
\Hypertarget{classDownloadDb_a05aeda0a43d26a566c739ccf88f9b3ed}\label{classDownloadDb_a05aeda0a43d26a566c739ccf88f9b3ed} 
PUBLISHED const \mbox{\hyperlink{classHashVal}{Hash\+Val}} int {\bfseries version}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_a89a98e7673350075750f1792030a8c7e}\label{classDownloadDb_a89a98e7673350075750f1792030a8c7e} 
static uint32\+\_\+t {\bfseries \+\_\+magic\+\_\+number} = 0xfeedfeed
\item 
\Hypertarget{classDownloadDb_adb0d87522d1d13ffbf57252ad9173421}\label{classDownloadDb_adb0d87522d1d13ffbf57252ad9173421} 
static uint32\+\_\+t {\bfseries \+\_\+bogus\+\_\+magic\+\_\+number} = 0x11111111
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_a7d23173dfc41f44ac2cb9d1cdf4f001c}\label{classDownloadDb_a7d23173dfc41f44ac2cb9d1cdf4f001c} 
void {\bfseries write\+\_\+version\+\_\+map} (\mbox{\hyperlink{classStreamWriter}{Stream\+Writer}} \&sw)
\item 
\Hypertarget{classDownloadDb_afc68c7da6a1c2a60836b486847a2b6bd}\label{classDownloadDb_afc68c7da6a1c2a60836b486847a2b6bd} 
bool {\bfseries read\+\_\+version\+\_\+map} (\mbox{\hyperlink{classStreamReader}{Stream\+Reader}} \&sr)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classDownloadDb_a57f940f2ecbca77ebff75be0fd014e74}\label{classDownloadDb_a57f940f2ecbca77ebff75be0fd014e74} 
\mbox{\hyperlink{classpmap}{Version\+Map}} {\bfseries \+\_\+versions}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A listing of files within multifiles for management of client-\/side synchronization with a server-\/provided set of files.

This class manages one copy of the database for the client, representing the files on the client system, and another copy for the server, representing the files the server has available. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classDownloadDb_a1b635d3ebc08ec1e7fbbf1cccfd8dba6}\label{classDownloadDb_a1b635d3ebc08ec1e7fbbf1cccfd8dba6} 
\index{DownloadDb@{DownloadDb}!get\_hash@{get\_hash}}
\index{get\_hash@{get\_hash}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{get\_hash()}{get\_hash()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \& Download\+Db\+::get\+\_\+hash (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name,  }\item[{int}]{version }\end{DoxyParamCaption}) const}

Returns the MD5 hash associated with the indicated version of the indicated file. \Hypertarget{classDownloadDb_ae4fd6965ce027b032a10ebd96f15eb9c}\label{classDownloadDb_ae4fd6965ce027b032a10ebd96f15eb9c} 
\index{DownloadDb@{DownloadDb}!get\_num\_versions@{get\_num\_versions}}
\index{get\_num\_versions@{get\_num\_versions}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{get\_num\_versions()}{get\_num\_versions()}}
{\footnotesize\ttfamily int Download\+Db\+::get\+\_\+num\+\_\+versions (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name }\end{DoxyParamCaption}) const}

Returns the number of versions stored for the indicated file. \Hypertarget{classDownloadDb_a532218531e297d2a4ff1adcf056bf348}\label{classDownloadDb_a532218531e297d2a4ff1adcf056bf348} 
\index{DownloadDb@{DownloadDb}!get\_version@{get\_version}}
\index{get\_version@{get\_version}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{get\_version()}{get\_version()}}
{\footnotesize\ttfamily int Download\+Db\+::get\+\_\+version (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name,  }\item[{const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \&}]{hash }\end{DoxyParamCaption}) const}

Returns the version number of this particular file, determined by looking up the hash generated from the file. Returns -\/1 if the version number cannot be determined. \Hypertarget{classDownloadDb_a56b5c3b0e264dc0e7eadcf42470f4327}\label{classDownloadDb_a56b5c3b0e264dc0e7eadcf42470f4327} 
\index{DownloadDb@{DownloadDb}!has\_version@{has\_version}}
\index{has\_version@{has\_version}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{has\_version()}{has\_version()}}
{\footnotesize\ttfamily bool Download\+Db\+::has\+\_\+version (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name }\end{DoxyParamCaption}) const}

Returns true if the indicated file has version information, false otherwise. Some files recorded in the database may not bother to track versions. \Hypertarget{classDownloadDb_a65fe47fc497a719b5012e83d9ca67122}\label{classDownloadDb_a65fe47fc497a719b5012e83d9ca67122} 
\index{DownloadDb@{DownloadDb}!insert\_new\_version@{insert\_new\_version}}
\index{insert\_new\_version@{insert\_new\_version}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{insert\_new\_version()}{insert\_new\_version()}}
{\footnotesize\ttfamily void Download\+Db\+::insert\+\_\+new\+\_\+version (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name,  }\item[{const \mbox{\hyperlink{classHashVal}{Hash\+Val}} \&}]{hash }\end{DoxyParamCaption})}

Inserts a new version 1 copy of the file, sliding all the other versions up by one. \Hypertarget{classDownloadDb_ac7ecced5520c763643b7ec71e9e6bc9d}\label{classDownloadDb_ac7ecced5520c763643b7ec71e9e6bc9d} 
\index{DownloadDb@{DownloadDb}!set\_num\_versions@{set\_num\_versions}}
\index{set\_num\_versions@{set\_num\_versions}!DownloadDb@{DownloadDb}}
\doxysubsubsection{\texorpdfstring{set\_num\_versions()}{set\_num\_versions()}}
{\footnotesize\ttfamily void Download\+Db\+::set\+\_\+num\+\_\+versions (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{name,  }\item[{int}]{num\+\_\+versions }\end{DoxyParamCaption})}

Reduces the number of versions of a particular file stored in the ddb by throwing away all versions higher than the indicated index. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/downloader/\mbox{\hyperlink{downloadDb_8h}{download\+Db.\+h}}\item 
panda/src/downloader/\mbox{\hyperlink{downloadDb_8cxx}{download\+Db.\+cxx}}\end{DoxyCompactItemize}

\doxysection{texture\+Collection.\+cxx}
\hypertarget{textureCollection_8cxx_source}{}\label{textureCollection_8cxx_source}\index{panda/src/gobj/textureCollection.cxx@{panda/src/gobj/textureCollection.cxx}}
\mbox{\hyperlink{textureCollection_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textureCollection_8h}{textureCollection.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00020\ TextureCollection::}
\DoxyCodeLine{00021\ TextureCollection()\ \{}
\DoxyCodeLine{00022\ \}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ TextureCollection::}
\DoxyCodeLine{00028\ TextureCollection(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureCollection}{TextureCollection}}\ \&copy)\ :}
\DoxyCodeLine{00029\ \ \ \_textures(copy.\_textures)}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00036\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00037\ operator\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureCollection}{TextureCollection}}\ \&copy)\ \{}
\DoxyCodeLine{00038\ \ \ \_textures\ =\ copy.\_textures;}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00045\ add\_texture(\mbox{\hyperlink{classTexture}{Texture}}\ *texture)\ \{}
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ If\ the\ pointer\ to\ our\ internal\ array\ is\ shared\ by\ any\ other}}
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{//\ TextureCollections,\ we\ have\ to\ copy\ the\ array\ now\ so\ we\ won't}}
\DoxyCodeLine{00048\ \ \ \textcolor{comment}{//\ inadvertently\ modify\ any\ of\ our\ brethren\ TextureCollection\ objects.}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (\_textures.get\_ref\_count()\ >\ 1)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ Textures\ old\_textures\ =\ \_textures;}
\DoxyCodeLine{00052\ \ \ \ \ \_textures\ =\ Textures::empty\_array(0);}
\DoxyCodeLine{00053\ \ \ \ \ \_textures.v()\ =\ old\_textures.v();}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \_textures.push\_back(texture);}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00063\ \textcolor{keywordtype}{bool}\ TextureCollection::}
\DoxyCodeLine{00064\ remove\_texture(\mbox{\hyperlink{classTexture}{Texture}}\ *texture)\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{int}\ texture\_index\ =\ -\/1;}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ texture\_index\ ==\ -\/1\ \&\&\ i\ <\ (int)\_textures.size();\ i++)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_textures[i]\ ==\ texture)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ texture\_index\ =\ i;}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{if}\ (texture\_index\ ==\ -\/1)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ The\ indicated\ texture\ was\ not\ a\ member\ of\ the\ collection.}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00075\ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ If\ the\ pointer\ to\ our\ internal\ array\ is\ shared\ by\ any\ other}}
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{//\ TextureCollections,\ we\ have\ to\ copy\ the\ array\ now\ so\ we\ won't}}
\DoxyCodeLine{00079\ \ \ \textcolor{comment}{//\ inadvertently\ modify\ any\ of\ our\ brethren\ TextureCollection\ objects.}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{if}\ (\_textures.get\_ref\_count()\ >\ 1)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ Textures\ old\_textures\ =\ \_textures;}
\DoxyCodeLine{00083\ \ \ \ \ \_textures\ =\ Textures::empty\_array(0);}
\DoxyCodeLine{00084\ \ \ \ \ \_textures.v()\ =\ old\_textures.v();}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \_textures.erase(\_textures.begin()\ +\ texture\_index);}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00097\ add\_textures\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureCollection}{TextureCollection}}\ \&other)\ \{}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordtype}{int}\ other\_num\_textures\ =\ other.get\_num\_textures();}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ other\_num\_textures;\ i++)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ add\_texture(other.get\_texture(i));}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00110\ remove\_textures\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureCollection}{TextureCollection}}\ \&other)\ \{}
\DoxyCodeLine{00111\ \ \ Textures\ new\_textures;}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{int}\ num\_textures\ =\ get\_num\_textures();}
\DoxyCodeLine{00113\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_textures;\ i++)\ \{}
\DoxyCodeLine{00114\ \ \ \ \ PT(\mbox{\hyperlink{classTexture}{Texture}})\ texture\ =\ get\_texture(i);}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{if}\ (!other.has\_texture(texture))\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ new\_textures.push\_back(texture);}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \}}
\DoxyCodeLine{00119\ \ \ \_textures\ =\ new\_textures;}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00127\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00128\ remove\_duplicate\_textures()\ \{}
\DoxyCodeLine{00129\ \ \ Textures\ new\_textures;}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{int}\ num\_textures\ =\ get\_num\_textures();}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_textures;\ i++)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ PT(\mbox{\hyperlink{classTexture}{Texture}})\ texture\ =\ get\_texture(i);}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordtype}{bool}\ duplicated\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ i\ \&\&\ !duplicated;\ j++)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ duplicated\ =\ (texture\ ==\ get\_texture(j));}
\DoxyCodeLine{00138\ \ \ \ \ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{if}\ (!duplicated)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ new\_textures.push\_back(texture);}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \_textures\ =\ new\_textures;}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00152\ \textcolor{keywordtype}{bool}\ TextureCollection::}
\DoxyCodeLine{00153\ has\_texture(\mbox{\hyperlink{classTexture}{Texture}}\ *texture)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00154\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_textures();\ i++)\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{if}\ (texture\ ==\ get\_texture(i))\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00157\ \ \ \ \ \}}
\DoxyCodeLine{00158\ \ \ \}}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00160\ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00165\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00166\ clear()\ \{}
\DoxyCodeLine{00167\ \ \ \_textures.clear();}
\DoxyCodeLine{00168\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00174\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00175\ reserve(\textcolor{keywordtype}{size\_t}\ num)\ \{}
\DoxyCodeLine{00176\ \ \ \_textures.reserve(num);}
\DoxyCodeLine{00177\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00183\ \mbox{\hyperlink{classTexture}{Texture}}\ *TextureCollection::}
\DoxyCodeLine{00184\ find\_texture(\textcolor{keyword}{const}\ std::string\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{int}\ num\_textures\ =\ get\_num\_textures();}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_textures;\ i++)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classTexture}{Texture}}\ *texture\ =\ get\_texture(i);}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{if}\ (texture-\/>get\_name()\ ==\ name)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ texture;}
\DoxyCodeLine{00190\ \ \ \ \ \}}
\DoxyCodeLine{00191\ \ \ \}}
\DoxyCodeLine{00192\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00198\ \textcolor{keywordtype}{int}\ TextureCollection::}
\DoxyCodeLine{00199\ get\_num\_textures()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{return}\ \_textures.size();}
\DoxyCodeLine{00201\ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00206\ \mbox{\hyperlink{classTexture}{Texture}}\ *TextureCollection::}
\DoxyCodeLine{00207\ get\_texture(\textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00208\ \ \ nassertr(index\ >=\ 0\ \&\&\ index\ <\ (\textcolor{keywordtype}{int})\_textures.size(),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{return}\ \_textures[index];}
\DoxyCodeLine{00211\ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00217\ \mbox{\hyperlink{classTexture}{Texture}}\ *TextureCollection::}
\DoxyCodeLine{00218\ operator\ []\ (\textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00219\ \ \ nassertr(index\ >=\ 0\ \&\&\ index\ <\ (\textcolor{keywordtype}{int})\_textures.size(),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{return}\ \_textures[index];}
\DoxyCodeLine{00222\ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00228\ \textcolor{keywordtype}{int}\ TextureCollection::}
\DoxyCodeLine{00229\ size()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{return}\ \_textures.size();}
\DoxyCodeLine{00231\ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00237\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00238\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_textures()\ ==\ 1)\ \{}
\DoxyCodeLine{00240\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}1\ Texture"{}};}
\DoxyCodeLine{00241\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00242\ \ \ \ \ out\ <<\ get\_num\_textures()\ <<\ \textcolor{stringliteral}{"{}\ Textures"{}};}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00250\ \textcolor{keywordtype}{void}\ TextureCollection::}
\DoxyCodeLine{00251\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_textures();\ i++)\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ *get\_texture(i)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00254\ \ \ \}}
\DoxyCodeLine{00255\ \}}

\end{DoxyCode}

\doxysection{z\+Stream\+Buf.\+h}
\hypertarget{zStreamBuf_8h_source}{}\label{zStreamBuf_8h_source}\index{panda/src/express/zStreamBuf.h@{panda/src/express/zStreamBuf.h}}
\mbox{\hyperlink{zStreamBuf_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ ZSTREAMBUF\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ ZSTREAMBUF\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{comment}{//\ This\ module\ is\ not\ compiled\ if\ zlib\ is\ not\ available.}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#ifdef\ HAVE\_ZLIB}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{zlib_8h}{zlib.h}}>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_EXPRESS\ ZStreamBuf\ :\ \textcolor{keyword}{public}\ std::streambuf\ \{}
\DoxyCodeLine{00028\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00029\ \ \ ZStreamBuf();}
\DoxyCodeLine{00030\ \ \ \textcolor{keyword}{virtual}\ \string~ZStreamBuf();}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \textcolor{keywordtype}{void}\ open\_read(std::istream\ *source,\ \textcolor{keywordtype}{bool}\ owns\_source,\ std::streamsize\ source\_length=-\/1,\ \textcolor{keywordtype}{bool}\ header=\textcolor{keyword}{true});}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{void}\ close\_read();}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \textcolor{keywordtype}{void}\ open\_write(std::ostream\ *dest,\ \textcolor{keywordtype}{bool}\ owns\_dest,\ \textcolor{keywordtype}{int}\ compression\_level,\ \textcolor{keywordtype}{bool}\ header=\textcolor{keyword}{true});}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordtype}{void}\ close\_write();}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{virtual}\ std::streampos\ seekoff(std::streamoff\ off,\ ios\_seekdir\ dir,\ ios\_openmode\ which);}
\DoxyCodeLine{00039\ \ \ \textcolor{keyword}{virtual}\ std::streampos\ seekpos(std::streampos\ pos,\ ios\_openmode\ which);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ overflow(\textcolor{keywordtype}{int}\ c);}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ sync();}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ underflow();}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{size\_t}\ read\_chars(\textcolor{keywordtype}{char}\ *start,\ \textcolor{keywordtype}{size\_t}\ length);}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{void}\ write\_chars(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *start,\ \textcolor{keywordtype}{size\_t}\ length,\ \textcolor{keywordtype}{int}\ flush);}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{void}\ show\_zlib\_error(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *function,\ \textcolor{keywordtype}{int}\ error\_code,\ z\_stream\ \&z);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00052\ \ \ std::istream\ *\_source;}
\DoxyCodeLine{00053\ \ \ std::streamsize\ \_source\_bytes\_left\ =\ -\/1;}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{bool}\ \_owns\_source;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ std::ostream\ *\_dest;}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{bool}\ \_owns\_dest;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ z\_stream\ \_z\_source;}
\DoxyCodeLine{00060\ \ \ z\_stream\ \_z\_dest;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keywordtype}{char}\ *\_buffer;}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ We\ need\ to\ store\ the\ decompression\ buffer\ on\ the\ class\ object,\ because}}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ zlib\ might\ not\ consume\ all\ of\ the\ input\ characters\ at\ each\ call\ to}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ inflate().\ \ This\ isn't\ a\ problem\ on\ output\ because\ in\ that\ case\ we\ can}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ afford\ to\ wait\ until\ it\ does\ consume\ all\ of\ the\ characters\ we\ give\ it.}}
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ It's\ not\ clear\ how\ large\ or\ small\ this\ buffer\ ought\ to\ be.\ \ It\ doesn't}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ seem\ to\ matter\ much,\ especially\ since\ this\ is\ just\ a\ temporary\ holding}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ area\ before\ getting\ copied\ into\ zlib's\ own\ internal\ buffers.}}
\DoxyCodeLine{00072\ \ \ \ \ decompress\_buffer\_size\ =\ 128}
\DoxyCodeLine{00073\ \ \ \};}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{char}\ decompress\_buffer[decompress\_buffer\_size];}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_ZLIB}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

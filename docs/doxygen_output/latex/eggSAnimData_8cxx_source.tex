\doxysection{egg\+SAnim\+Data.\+cxx}
\hypertarget{eggSAnimData_8cxx_source}{}\label{eggSAnimData_8cxx_source}\index{panda/src/egg/eggSAnimData.cxx@{panda/src/egg/eggSAnimData.cxx}}
\mbox{\hyperlink{eggSAnimData_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggSAnimData_8h}{eggSAnimData.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggMiscFuncs_8h}{eggMiscFuncs.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggParameters_8h}{eggParameters.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{math_8h}{math.h}}>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ EggSAnimData::\_type\_handle;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00028\ \textcolor{keywordtype}{void}\ EggSAnimData::}
\DoxyCodeLine{00029\ optimize()\ \{}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_rows()\ >\ 1)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{double}\ value\ =\ get\_value(0);}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ row\ =\ 1;\ row\ <\ get\_num\_rows();\ row++)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fabs(get\_value(row)\ -\/\ value)\ >\ egg\_parameters-\/>\_table\_threshold)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ Ok,\ all\ the\ rows\ had\ the\ same\ value.\ \ Collapse\ them.}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ We\ have\ to\ use\ the\ call\ to\ v()\ to\ work\ around\ an\ apparent\ compiler\ bug}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ with\ Win64.}}
\DoxyCodeLine{00042\ \ \ \ \ \_data.v().erase(\_data.v().begin()\ +\ 1,\ \_data.v().end());}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00050\ \textcolor{keywordtype}{void}\ EggSAnimData::}
\DoxyCodeLine{00051\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_rows()\ <=\ 1)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ We\ get\ a\ lot\ of\ these\ little\ tiny\ tables.\ \ For\ brevity,\ we'll\ write}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ these\ all\ on\ one\ line,\ because\ we\ can.\ \ This\ just\ makes\ it\ easier\ for\ a}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ human\ to\ scan\ the\ egg\ file.}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ \textcolor{stringliteral}{"{}<S\$Anim>\ "{}};}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_name())\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \mbox{\hyperlink{eggMiscFuncs_8cxx_a73e722dc3ab4aa52ab2b9c9021c6869f}{enquote\_string}}(out,\ get\_name())\ <<\ \textcolor{stringliteral}{"{}\ \{"{}};}
\DoxyCodeLine{00060\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\{"{}};}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_fps())\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ <Scalar>\ fps\ \{\ "{}}\ <<\ get\_fps()\ <<\ \textcolor{stringliteral}{"{}\ \}"{}};}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_num\_rows()\ ==\ 1)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ <V>\ \{\ "{}}\ <<\ get\_value(0)\ <<\ \textcolor{stringliteral}{"{}\ \}"{}};}
\DoxyCodeLine{00070\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ <V>\ \{\ \}"{}};}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ If\ there\ are\ at\ least\ two\ values\ in\ the\ table,\ we'll\ write\ it\ out\ over}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ multiple\ lines.}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{classEggNamedObject_a3bff8c19c95cf7a74710555c987d6172}{write\_header}}(out,\ indent\_level,\ \textcolor{stringliteral}{"{}<S\$Anim>"{}});}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_fps())\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Scalar>\ fps\ \{\ "{}}\ <<\ get\_fps()\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n"{}};}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}<V>\ \{\(\backslash\)n"{}};}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{indent_8h_a25cf046258c218e427e0b834e5c08f97}{write\_long\_list}}(out,\ indent\_level\ +\ 4,\ \_data.begin(),\ \_data.end(),}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}"{}},\ 72);}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{00091\ \ \ \}}
\DoxyCodeLine{00092\ \}}

\end{DoxyCode}

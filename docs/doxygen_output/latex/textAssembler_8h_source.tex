\doxysection{text\+Assembler.\+h}
\hypertarget{textAssembler_8h_source}{}\label{textAssembler_8h_source}\index{panda/src/text/textAssembler.h@{panda/src/text/textAssembler.h}}
\mbox{\hyperlink{textAssembler_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ TEXTASSEMBLER\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ TEXTASSEMBLER\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textProperties_8h}{textProperties.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textFont_8h}{textFont.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{unicodeLatinMap_8h}{unicodeLatinMap.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomNode_8h}{geomNode.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomTextGlyph_8h}{geomTextGlyph.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textPropertiesManager_8h}{textPropertiesManager.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textEncoder_8h}{textEncoder.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomVertexRewriter_8h}{geomVertexRewriter.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{epvector_8h}{epvector.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }hb\_buffer\_t\ hb\_buffer\_t;}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTextEncoder}{TextEncoder}};}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTextGraphic}{TextGraphic}};}
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTextAssembler}{TextAssembler}};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_TEXT\ \mbox{\hyperlink{classTextAssembler}{TextAssembler}}\ \{}
\DoxyCodeLine{00044\ PUBLISHED:}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classTextAssembler}{TextAssembler}}(\mbox{\hyperlink{classTextEncoder}{TextEncoder}}\ *encoder);}
\DoxyCodeLine{00046\ \ \ \mbox{\hyperlink{classTextAssembler}{TextAssembler}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextAssembler}{TextAssembler}}\ \&copy);}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{void}\ operator\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextAssembler}{TextAssembler}}\ \&copy);}
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{classTextAssembler}{\string~TextAssembler}}();}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_usage\_hint(Geom::UsageHint\ usage\_hint);}
\DoxyCodeLine{00053\ \ \ INLINE\ Geom::UsageHint\ get\_usage\_hint()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_max\_rows(\textcolor{keywordtype}{int}\ max\_rows);}
\DoxyCodeLine{00056\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_max\_rows()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_dynamic\_merge(\textcolor{keywordtype}{bool}\ dynamic\_merge);}
\DoxyCodeLine{00059\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_dynamic\_merge()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_multiline\_mode(\textcolor{keywordtype}{bool}\ flag);}
\DoxyCodeLine{00062\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_multiline\_mode()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_properties(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00065\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&get\_properties()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{bool}\ set\_wtext(\textcolor{keyword}{const}\ std::wstring\ \&wtext);}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{bool}\ set\_wsubstr(\textcolor{keyword}{const}\ std::wstring\ \&wtext,\ \textcolor{keywordtype}{int}\ start,\ \textcolor{keywordtype}{int}\ count);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ std::wstring\ get\_plain\_wtext()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ \ \ std::wstring\ get\_wordwrapped\_plain\_wtext()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00072\ \ \ std::wstring\ get\_wtext()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00073\ \ \ std::wstring\ get\_wordwrapped\_wtext()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keywordtype}{bool}\ calc\_r\_c(\textcolor{keywordtype}{int}\ \&r,\ \textcolor{keywordtype}{int}\ \&c,\ \textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00076\ \ \ INLINE\ \textcolor{keywordtype}{int}\ calc\_r(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ INLINE\ \textcolor{keywordtype}{int}\ calc\_c(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordtype}{int}\ calc\_index(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_num\_characters()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00081\ \ \ INLINE\ \textcolor{keywordtype}{char32\_t}\ get\_character(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00082\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextGraphic}{TextGraphic}}\ *get\_graphic(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00083\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&get\_properties(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ \ \ INLINE\ PN\_stdfloat\ get\_width(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_num\_rows()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00087\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_num\_cols(\textcolor{keywordtype}{int}\ r)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00088\ \ \ INLINE\ \textcolor{keywordtype}{char32\_t}\ get\_character(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00089\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextGraphic}{TextGraphic}}\ *get\_graphic(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00090\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&get\_properties(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00091\ \ \ INLINE\ PN\_stdfloat\ get\_width(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00092\ \ \ PN\_stdfloat\ get\_xpos(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00093\ \ \ INLINE\ PN\_stdfloat\ get\_ypos(\textcolor{keywordtype}{int}\ r,\ \textcolor{keywordtype}{int}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ PT(\mbox{\hyperlink{classPandaNode}{PandaNode}})\ assemble\_text();}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ INLINE\ \textcolor{keyword}{const}\ LVector2\ \&get\_ul()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00098\ \ \ INLINE\ \textcolor{keyword}{const}\ LVector2\ \&get\_lr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{static}\ PN\_stdfloat\ calc\_width(\textcolor{keywordtype}{wchar\_t}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{static}\ PN\_stdfloat\ calc\_width(\textcolor{keywordtype}{char32\_t}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00102\ \ \ \textcolor{keyword}{static}\ PN\_stdfloat\ calc\_width(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextGraphic}{TextGraphic}}\ *graphic,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ has\_exact\_character(\textcolor{keywordtype}{wchar\_t}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00105\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ has\_character(\textcolor{keywordtype}{wchar\_t}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_whitespace(\textcolor{keywordtype}{wchar\_t}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ PUBLISHED:}
\DoxyCodeLine{00109\ \ \ MAKE\_PROPERTY(usage\_hint,\ get\_usage\_hint,\ set\_usage\_hint);}
\DoxyCodeLine{00110\ \ \ MAKE\_PROPERTY(max\_rows,\ get\_max\_rows,\ set\_max\_rows);}
\DoxyCodeLine{00111\ \ \ MAKE\_PROPERTY(dynamic\_merge,\ get\_dynamic\_merge,\ set\_dynamic\_merge);}
\DoxyCodeLine{00112\ \ \ MAKE\_PROPERTY(multiline\_mode,\ get\_multiline\_mode,\ set\_multiline\_mode);}
\DoxyCodeLine{00113\ \ \ MAKE\_PROPERTY(properties,\ get\_properties,\ set\_properties);}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00116\ \ \ \textcolor{keyword}{class\ }ComputedProperties\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ \{}
\DoxyCodeLine{00117\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00118\ \ \ \ \ INLINE\ ComputedProperties(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&orig\_properties);}
\DoxyCodeLine{00119\ \ \ \ \ INLINE\ ComputedProperties(ComputedProperties\ *based\_on,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::wstring\ \&wname,\ \mbox{\hyperlink{classTextEncoder}{TextEncoder}}\ *encoder);}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{void}\ append\_delta(std::wstring\ \&wtext,\ ComputedProperties\ *other);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ PT(ComputedProperties)\ \_based\_on;}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{int}\ \_depth;}
\DoxyCodeLine{00125\ \ \ \ \ std::wstring\ \_wname;}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \_properties;}
\DoxyCodeLine{00127\ \ \ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{comment}{//\ These\ structures\ are\ built\ up\ and\ operated\ on\ by\ scan\_wtext()\ and}}
\DoxyCodeLine{00130\ \ \ \textcolor{comment}{//\ wordwrap\_text().\ \ It\ represents\ the\ unrolling\ of\ the\ embedded\ \(\backslash\)1\ ..\ \(\backslash\)2}}
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{//\ sequences\ embedded\ in\ the\ string\ into\ a\ TextProperties\ pointer\ associated}}
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ with\ each\ character.}}
\DoxyCodeLine{00133\ \ \ \textcolor{keyword}{class\ }TextCharacter\ \{}
\DoxyCodeLine{00134\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00135\ \ \ \ \ INLINE\ TextCharacter(\textcolor{keywordtype}{wchar\_t}\ character,\ ComputedProperties\ *cprops);}
\DoxyCodeLine{00136\ \ \ \ \ INLINE\ TextCharacter(\textcolor{keywordtype}{char32\_t}\ character,\ ComputedProperties\ *cprops);}
\DoxyCodeLine{00137\ \ \ \ \ INLINE\ TextCharacter(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextGraphic}{TextGraphic}}\ *graphic,}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::wstring\ \&graphic\_wname,}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ComputedProperties\ *cprops);}
\DoxyCodeLine{00140\ \ \ \ \ INLINE\ TextCharacter(\textcolor{keyword}{const}\ TextCharacter\ \&copy);}
\DoxyCodeLine{00141\ \ \ \ \ INLINE\ \textcolor{keywordtype}{void}\ operator\ =\ (\textcolor{keyword}{const}\ TextCharacter\ \&copy);}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{char32\_t}\ \_character;}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextGraphic}{TextGraphic}}\ *\_graphic;}
\DoxyCodeLine{00145\ \ \ \ \ std::wstring\ \_graphic\_wname;}
\DoxyCodeLine{00146\ \ \ \ \ PT(ComputedProperties)\ \_cprops;}
\DoxyCodeLine{00147\ \ \ \};}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<TextCharacter>}}\ \mbox{\hyperlink{classpvector}{TextString}};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \textcolor{keyword}{class\ }TextRow\ \{}
\DoxyCodeLine{00151\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00152\ \ \ \ \ INLINE\ TextRow(\textcolor{keywordtype}{int}\ row\_start);}
\DoxyCodeLine{00153\ \ \ \ \ INLINE\ TextRow(\textcolor{keyword}{const}\ TextRow\ \&copy);}
\DoxyCodeLine{00154\ \ \ \ \ INLINE\ \textcolor{keywordtype}{void}\ operator\ =\ (\textcolor{keyword}{const}\ TextRow\ \&copy);}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{classpvector}{TextString}}\ \_string;}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{int}\ \_row\_start;}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordtype}{bool}\ \_got\_soft\_hyphens;}
\DoxyCodeLine{00159\ \ \ \ \ PN\_stdfloat\ \_xpos;}
\DoxyCodeLine{00160\ \ \ \ \ PN\_stdfloat\ \_ypos;}
\DoxyCodeLine{00161\ \ \ \ \ PT(ComputedProperties)\ \_eol\_cprops;}
\DoxyCodeLine{00162\ \ \ \};}
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<TextRow>}}\ \mbox{\hyperlink{classpvector}{TextBlock}};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ PT(ComputedProperties)\ \_initial\_cprops;}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \textcolor{comment}{//\ This\ is\ the\ string,\ unwordwrapped.}}
\DoxyCodeLine{00168\ \ \ \mbox{\hyperlink{classpvector}{TextString}}\ \_text\_string;}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \textcolor{comment}{//\ And\ here\ it\ is,\ wordwrapped.}}
\DoxyCodeLine{00171\ \ \ \mbox{\hyperlink{classpvector}{TextBlock}}\ \_text\_block;}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \textcolor{keywordtype}{void}\ scan\_wtext(\mbox{\hyperlink{classpvector}{TextString}}\ \&output\_string,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::wstring::const\_iterator\ \&si,}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::wstring::const\_iterator\ \&send,}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ComputedProperties\ *current\_cprops);}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \textcolor{keywordtype}{bool}\ wordwrap\_text();}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ INLINE\ \textcolor{keyword}{static}\ PN\_stdfloat\ calc\_width(\textcolor{keyword}{const}\ TextCharacter\ \&tch);}
\DoxyCodeLine{00181\ \ \ \textcolor{keyword}{static}\ PN\_stdfloat\ calc\_hyphen\_width(\textcolor{keyword}{const}\ TextCharacter\ \&tch);}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//\ These\ structures\ are\ built\ up\ by\ assemble\_paragraph()\ and\ assemble\_row().}}
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ They\ represent\ the\ actual\ Geoms\ as\ laid\ out\ in\ a\ paragraph.}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \textcolor{keyword}{class\ }GeomCollectorKey\ \{}
\DoxyCodeLine{00187\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00188\ \ \ \ \ INLINE\ GeomCollectorKey(\textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomVertexFormat}{GeomVertexFormat}}\ *format);}
\DoxyCodeLine{00189\ \ \ \ \ INLINE\ \textcolor{keywordtype}{bool}\ operator\ <\ (\textcolor{keyword}{const}\ GeomCollectorKey\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ \_state;}
\DoxyCodeLine{00192\ \ \ \ \ CPT(\mbox{\hyperlink{classGeomVertexFormat}{GeomVertexFormat}})\ \_format;}
\DoxyCodeLine{00193\ \ \ \};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<int,\ int>}}\ \mbox{\hyperlink{classpmap}{VertexIndexMap}};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keyword}{class\ }GeomCollector\ \{}
\DoxyCodeLine{00198\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00199\ \ \ \ \ GeomCollector(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomVertexFormat}{GeomVertexFormat}}\ *format);}
\DoxyCodeLine{00200\ \ \ \ \ GeomCollector(\textcolor{keyword}{const}\ GeomCollector\ \&copy);}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ INLINE\ \textcolor{keywordtype}{void}\ count\_geom(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGeom}{Geom}}\ *geom);}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}}\ *get\_primitive(\mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ prim\_type);}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordtype}{int}\ append\_vertex(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomVertexData}{GeomVertexData}}\ *orig\_vdata,\ \textcolor{keywordtype}{int}\ orig\_row,}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LMatrix4\ \&xform);}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{void}\ append\_geom(\mbox{\hyperlink{classGeomNode}{GeomNode}}\ *geom\_node,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state);}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00209\ \ \ \ \ PT(\mbox{\hyperlink{classGeomVertexData}{GeomVertexData}})\ \_vdata;}
\DoxyCodeLine{00210\ \ \ \ \ PT(\mbox{\hyperlink{classGeomTextGlyph}{GeomTextGlyph}})\ \_geom;}
\DoxyCodeLine{00211\ \ \ \ \ PT(\mbox{\hyperlink{classGeomTriangles}{GeomTriangles}})\ \_triangles;}
\DoxyCodeLine{00212\ \ \ \ \ PT(\mbox{\hyperlink{classGeomLines}{GeomLines}})\ \_lines;}
\DoxyCodeLine{00213\ \ \ \ \ PT(\mbox{\hyperlink{classGeomPoints}{GeomPoints}})\ \_points;}
\DoxyCodeLine{00214\ \ \ \};}
\DoxyCodeLine{00215\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<GeomCollectorKey,\ GeomCollector>}}\ \mbox{\hyperlink{classpmap}{GeomCollectorMap}};}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \textcolor{keyword}{struct\ }QuadDef\ \{}
\DoxyCodeLine{00218\ \ \ \ \ LVecBase4\ \_dimensions;}
\DoxyCodeLine{00219\ \ \ \ \ LVecBase4\ \_uvs;}
\DoxyCodeLine{00220\ \ \ \ \ PN\_stdfloat\ \_slantl,\ \_slanth;}
\DoxyCodeLine{00221\ \ \ \ \ CPT(\mbox{\hyperlink{classTextGlyph}{TextGlyph}})\ \_glyph;}
\DoxyCodeLine{00222\ \ \ \};}
\DoxyCodeLine{00223\ \ \ \textcolor{keyword}{typedef}\ epvector<QuadDef>\ QuadDefs;}
\DoxyCodeLine{00224\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap}}<CPT(\mbox{\hyperlink{classRenderState}{RenderState}}),\ QuadDefs>\ \mbox{\hyperlink{classpmap}{QuadMap}};}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \textcolor{keywordtype}{void}\ generate\_quads(\mbox{\hyperlink{classGeomNode}{GeomNode}}\ *geom\_node,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classpmap}{QuadMap}}\ \&quad\_map);}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \textcolor{keyword}{class\ }GlyphPlacement\ \{}
\DoxyCodeLine{00229\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{void}\ assign\_to(\mbox{\hyperlink{classGeomNode}{GeomNode}}\ *geom\_node,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state,}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector2\ \&offset\ =\ LVector2::zero())\ \textcolor{keyword}{const};}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordtype}{void}\ assign\_append\_to(\mbox{\hyperlink{classpmap}{GeomCollectorMap}}\ \&geom\_collector\_map,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state,}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector2\ \&offset\ =\ LVector2::zero())\ \textcolor{keyword}{const};}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{void}\ assign\_quad\_to(\mbox{\hyperlink{classpmap}{QuadMap}}\ \&quad\_map,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state,}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector2\ \&offset\ =\ LVector2::zero())\ \textcolor{keyword}{const};}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordtype}{void}\ copy\_graphic\_to(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ CPT(\mbox{\hyperlink{classTextGlyph}{TextGlyph}})\ \_glyph;}
\DoxyCodeLine{00240\ \ \ \ \ PT(\mbox{\hyperlink{classPandaNode}{PandaNode}})\ \_graphic\_model;}
\DoxyCodeLine{00241\ \ \ \ \ PN\_stdfloat\ \_xpos,\ \_ypos;}
\DoxyCodeLine{00242\ \ \ \ \ PN\_stdfloat\ \_scale,\ \_slant;}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ *\_properties;}
\DoxyCodeLine{00244\ \ \ \};}
\DoxyCodeLine{00245\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<GlyphPlacement>}}\ \mbox{\hyperlink{classpvector}{PlacedGlyphs}};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{keywordtype}{void}\ assemble\_paragraph(\mbox{\hyperlink{classpvector}{PlacedGlyphs}}\ \&placed\_glyphs);}
\DoxyCodeLine{00248\ \ \ \textcolor{keywordtype}{void}\ assemble\_row(TextRow\ \&row,}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpvector}{PlacedGlyphs}}\ \&row\_placed\_glyphs,}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ \&row\_width,\ PN\_stdfloat\ \&line\_height,}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TextProperties::Alignment\ \&align,\ PN\_stdfloat\ \&wordwrap);}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \textcolor{keywordtype}{void}\ shape\_buffer(hb\_buffer\_t\ *buf,\ \mbox{\hyperlink{classpvector}{PlacedGlyphs}}\ \&glyphs,\ PN\_stdfloat\ \&xpos,}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ \&properties);}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ These\ interfaces\ are\ for\ implementing\ cheesy\ accent\ marks\ and\ ligatures}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ when\ the\ font\ doesn't\ support\ them.}}
\DoxyCodeLine{00258\ \ \ \textcolor{keyword}{enum}\ CheesyPosition\ \{}
\DoxyCodeLine{00259\ \ \ \ \ CP\_above,}
\DoxyCodeLine{00260\ \ \ \ \ CP\_below,}
\DoxyCodeLine{00261\ \ \ \ \ CP\_top,}
\DoxyCodeLine{00262\ \ \ \ \ CP\_bottom,}
\DoxyCodeLine{00263\ \ \ \ \ CP\_within,}
\DoxyCodeLine{00264\ \ \ \};}
\DoxyCodeLine{00265\ \ \ \textcolor{keyword}{enum}\ CheesyTransform\ \{}
\DoxyCodeLine{00266\ \ \ \ \ CT\_none,}
\DoxyCodeLine{00267\ \ \ \ \ CT\_mirror\_x,}
\DoxyCodeLine{00268\ \ \ \ \ CT\_mirror\_y,}
\DoxyCodeLine{00269\ \ \ \ \ CT\_rotate\_90,}
\DoxyCodeLine{00270\ \ \ \ \ CT\_rotate\_180,}
\DoxyCodeLine{00271\ \ \ \ \ CT\_rotate\_270,}
\DoxyCodeLine{00272\ \ \ \ \ CT\_squash,}
\DoxyCodeLine{00273\ \ \ \ \ CT\_squash\_mirror\_y,}
\DoxyCodeLine{00274\ \ \ \ \ CT\_squash\_mirror\_diag,}
\DoxyCodeLine{00275\ \ \ \ \ CT\_small\_squash,}
\DoxyCodeLine{00276\ \ \ \ \ CT\_small\_squash\_mirror\_y,}
\DoxyCodeLine{00277\ \ \ \ \ CT\_small\_squash\_mirror\_diag,}
\DoxyCodeLine{00278\ \ \ \ \ CT\_small,}
\DoxyCodeLine{00279\ \ \ \ \ CT\_small\_rotate\_270,}
\DoxyCodeLine{00280\ \ \ \ \ CT\_tiny,}
\DoxyCodeLine{00281\ \ \ \ \ CT\_tiny\_mirror\_x,}
\DoxyCodeLine{00282\ \ \ \ \ CT\_tiny\_rotate\_270,}
\DoxyCodeLine{00283\ \ \ \};}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00286\ \ \ draw\_underscore(\mbox{\hyperlink{classpvector}{TextAssembler::PlacedGlyphs}}\ \&row\_placed\_glyphs,}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ underscore\_start,\ PN\_stdfloat\ underscore\_end,}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ *underscore\_properties);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00291\ \ \ get\_character\_glyphs(\textcolor{keywordtype}{int}\ character,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ *properties,}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&got\_glyph,\ CPT(\mbox{\hyperlink{classTextGlyph}{TextGlyph}})\ \&glyph,}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CPT(\mbox{\hyperlink{classTextGlyph}{TextGlyph}})\ \&second\_glyph,}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ UnicodeLatinMap::AccentType\ \&accent\_type,}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \&additional\_flags,}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ \&glyph\_scale,\ PN\_stdfloat\ \&advance\_scale);}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00299\ \ \ tack\_on\_accent(UnicodeLatinMap::AccentType\ accent\_type,}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&min\_vert,\ \textcolor{keyword}{const}\ LPoint3\ \&max\_vert,}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&centroid,}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ *properties,\ GlyphPlacement\ \&placement)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00303\ \ \ \textcolor{keywordtype}{bool}}
\DoxyCodeLine{00304\ \ \ tack\_on\_accent(\textcolor{keywordtype}{wchar\_t}\ accent\_mark,\ CheesyPosition\ position,}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CheesyTransform\ transform,}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&min\_vert,\ \textcolor{keyword}{const}\ LPoint3\ \&max\_vert,}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&centroid,}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextProperties}{TextProperties}}\ *properties,\ GlyphPlacement\ \&placement)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{//\ These\ are\ filled\ in\ by\ assemble\_paragraph().}}
\DoxyCodeLine{00311\ \ \ LVector2\ \_ul;}
\DoxyCodeLine{00312\ \ \ LVector2\ \_lr;}
\DoxyCodeLine{00313\ \ \ PN\_stdfloat\ \_next\_row\_ypos;}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{classTextEncoder}{TextEncoder}}\ *\_encoder;}
\DoxyCodeLine{00316\ \ \ Geom::UsageHint\ \_usage\_hint;}
\DoxyCodeLine{00317\ \ \ \textcolor{keywordtype}{int}\ \_max\_rows;}
\DoxyCodeLine{00318\ \ \ \textcolor{keywordtype}{bool}\ \_dynamic\_merge;}
\DoxyCodeLine{00319\ \ \ \textcolor{keywordtype}{bool}\ \_multiline\_mode;}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \textcolor{preprocessor}{\#include\ "{}textAssembler.I"{}}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

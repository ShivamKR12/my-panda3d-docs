\doxysection{ode\+Util\+\_\+ext.\+cxx}
\hypertarget{odeUtil__ext_8cxx_source}{}\label{odeUtil__ext_8cxx_source}\index{panda/src/ode/odeUtil\_ext.cxx@{panda/src/ode/odeUtil\_ext.cxx}}
\mbox{\hyperlink{odeUtil__ext_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{odeUtil__ext_8h}{odeUtil\_ext.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__ode_8h}{config\_ode.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{odeGeom_8h}{odeGeom.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{odeGeom__ext_8h}{odeGeom\_ext.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#ifdef\ HAVE\_PYTHON}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ PyObject\ *\mbox{\hyperlink{classExtension}{Extension<OdeUtil>::\_python\_callback}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00027\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classExtension}{Extension<OdeUtil>::}}}
\DoxyCodeLine{00028\ \mbox{\hyperlink{classExtension}{collide2}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classOdeGeom}{OdeGeom}}\ \&geom1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classOdeGeom}{OdeGeom}}\ \&geom2,\ PyObject*\ arg,\ PyObject*\ callback)\ \{}
\DoxyCodeLine{00029\ \ \ nassertr(callback\ !=\ \textcolor{keyword}{nullptr},\ -\/1);}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{if}\ (!PyCallable\_Check(callback))\ \{}
\DoxyCodeLine{00031\ \ \ \ \ PyErr\_Format(PyExc\_TypeError,\ \textcolor{stringliteral}{"{}'\%s'\ object\ is\ not\ callable"{}},\ Py\_TYPE(callback)-\/>tp\_name);}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00033\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \_python\_callback\ =\ Py\_XNewRef(callback);}
\DoxyCodeLine{00035\ \ \ \ \ dSpaceCollide2(geom1.get\_id(),\ geom2.get\_id(),\ (\textcolor{keywordtype}{void}*)\ arg,\ \&near\_callback);}
\DoxyCodeLine{00036\ \ \ \ \ Py\_CLEAR(\_python\_callback);}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classExtension}{Extension<OdeUtil>::}}}
\DoxyCodeLine{00042\ \mbox{\hyperlink{classExtension}{near\_callback}}(\textcolor{keywordtype}{void}\ *data,\ dGeomID\ o1,\ dGeomID\ o2)\ \{}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{if}\ (ode\_cat.is\_spam())\ \{}
\DoxyCodeLine{00044\ \ \ \ \ ode\_cat.spam()}
\DoxyCodeLine{00045\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}near\_callback\ called,\ data:\ "{}}\ <<\ data\ <<\ \textcolor{stringliteral}{"{},\ dGeomID1:\ "{}}\ <<\ o1\ <<\ \textcolor{stringliteral}{"{},\ dGeomID2:\ "{}}\ <<\ o2\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00046\ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{classOdeGeom}{OdeGeom}}\ g1\ (o1);}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classOdeGeom}{OdeGeom}}\ g2\ (o2);}
\DoxyCodeLine{00050\ \ \ PyObject*\ p1\ =\ \mbox{\hyperlink{extension_8h_a529cfb9a4ffc54461b6562c168c11824}{invoke\_extension}}(\&g1).convert();}
\DoxyCodeLine{00051\ \ \ PyObject*\ p2\ =\ \mbox{\hyperlink{extension_8h_a529cfb9a4ffc54461b6562c168c11824}{invoke\_extension}}(\&g2).convert();}
\DoxyCodeLine{00052\ \ \ PyObject*\ result\ =\ PyObject\_CallFunctionObjArgs(\_python\_callback,\ (PyObject*)\ data,\ p1,\ p2,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{if}\ (!result)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ ode\_cat.error()\ <<\ \textcolor{stringliteral}{"{}An\ error\ occurred\ while\ calling\ python\ function!\(\backslash\)n"{}};}
\DoxyCodeLine{00055\ \ \ \ \ PyErr\_Print();}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ \ \ Py\_XDECREF(p1);}
\DoxyCodeLine{00058\ \ \ Py\_XDECREF(p2);}
\DoxyCodeLine{00059\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_PYTHON}}

\end{DoxyCode}

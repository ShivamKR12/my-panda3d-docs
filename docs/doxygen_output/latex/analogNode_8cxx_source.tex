\doxysection{analog\+Node.\+cxx}
\hypertarget{analogNode_8cxx_source}{}\label{analogNode_8cxx_source}\index{panda/src/device/analogNode.cxx@{panda/src/device/analogNode.cxx}}
\mbox{\hyperlink{analogNode_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{analogNode_8h}{analogNode.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__device_8h}{config\_device.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dataNodeTransmit_8h}{dataNodeTransmit.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dcast_8h}{dcast.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ AnalogNode::\_type\_handle;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00025\ AnalogNode::}
\DoxyCodeLine{00026\ AnalogNode(\mbox{\hyperlink{classClientBase}{ClientBase}}\ *client,\ \textcolor{keyword}{const}\ std::string\ \&device\_name)\ :}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{classDataNode}{DataNode}}(device\_name)}
\DoxyCodeLine{00028\ \{}
\DoxyCodeLine{00029\ \ \ \_xy\_output\ =\ define\_output(\textcolor{stringliteral}{"{}xy"{}},\ EventStoreVec2::get\_class\_type());}
\DoxyCodeLine{00030\ \ \ \_xy\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classParamValue}{EventStoreVec2}}(LPoint2(0));}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ nassertv(client\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00033\ \ \ PT(\mbox{\hyperlink{classClientDevice}{ClientDevice}})\ device\ =}
\DoxyCodeLine{00034\ \ \ \ \ client-\/>get\_device(ClientAnalogDevice::get\_class\_type(),\ device\_name);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{if}\ (device\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00037\ \ \ \ \ device\_cat.warning()}
\DoxyCodeLine{00038\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Unable\ to\ open\ analog\ device\ "{}}\ <<\ device\_name\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{if}\ (!device-\/>is\_of\_type(ClientAnalogDevice::get\_class\_type()))\ \{}
\DoxyCodeLine{00043\ \ \ \ \ device\_cat.error()}
\DoxyCodeLine{00044\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Inappropriate\ device\ type\ "{}}\ <<\ device-\/>get\_type()}
\DoxyCodeLine{00045\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ created;\ expected\ a\ ClientAnalogDevice.\(\backslash\)n"{}};}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00047\ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \_analog\ =\ device;}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ AnalogNode::}
\DoxyCodeLine{00056\ AnalogNode(\mbox{\hyperlink{classInputDevice}{InputDevice}}\ *device)\ :}
\DoxyCodeLine{00057\ \ \ \mbox{\hyperlink{classDataNode}{DataNode}}(device-\/>get\_name()),}
\DoxyCodeLine{00058\ \ \ \_analog(device)}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \_xy\_output\ =\ define\_output(\textcolor{stringliteral}{"{}xy"{}},\ EventStoreVec2::get\_class\_type());}
\DoxyCodeLine{00061\ \ \ \_xy\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classParamValue}{EventStoreVec2}}(LPoint2(0));}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ nassertv(device\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00069\ AnalogNode::}
\DoxyCodeLine{00070\ \string~AnalogNode()\ \{}
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ When\ the\ \_analog\ pointer\ destructs,\ the\ ClientAnalogDevice\ disconnects}}
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ itself\ from\ the\ ClientBase,\ and\ everything\ that\ needs\ to\ get\ turned\ off}}
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ does.\ \ Magic.}}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00079\ \textcolor{keywordtype}{void}\ AnalogNode::}
\DoxyCodeLine{00080\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00081\ \ \ DataNode::write(out,\ indent\_level);}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{if}\ (\_analog\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \_analog-\/>write\_axes(out,\ indent\_level\ +\ 2);}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classAnalogNode_aa0120c0438ceb267aa0b15a6c2ec20ad}{AnalogNode::}}}
\DoxyCodeLine{00097\ \mbox{\hyperlink{classAnalogNode_aa0120c0438ceb267aa0b15a6c2ec20ad}{do\_transmit\_data}}(\mbox{\hyperlink{classDataGraphTraverser}{DataGraphTraverser}}\ *,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classDataNodeTransmit}{DataNodeTransmit}}\ \&,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDataNodeTransmit}{DataNodeTransmit}}\ \&output)\ \{}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{if}\ (is\_valid())\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \_analog-\/>poll();}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ LPoint2\ out(0.0f,\ 0.0f);}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ max\_outputs;\ i++)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_outputs[i].\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ InputDevice::AxisState\ state\ =\ \_analog-\/>get\_axis(\_outputs[i].\_index);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (state.known)\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_outputs[i].\_flip)\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ out[i]\ =\ -\/state.value;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ out[i]\ =\ state.value;}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \}}
\DoxyCodeLine{00115\ \ \ \ \ \_xy-\/>set\_value(out);}
\DoxyCodeLine{00116\ \ \ \ \ output.set\_data(\_xy\_output,\ \mbox{\hyperlink{classEventParameter}{EventParameter}}(\_xy));}
\DoxyCodeLine{00117\ \ \ \}}
\DoxyCodeLine{00118\ \}}

\end{DoxyCode}

\doxysection{anim\+Channel\+Scalar\+Dynamic.\+cxx}
\hypertarget{animChannelScalarDynamic_8cxx_source}{}\label{animChannelScalarDynamic_8cxx_source}\index{panda/src/chan/animChannelScalarDynamic.cxx@{panda/src/chan/animChannelScalarDynamic.cxx}}
\mbox{\hyperlink{animChannelScalarDynamic_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{animChannelScalarDynamic_8h}{animChannelScalarDynamic.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{animBundle_8h}{animBundle.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__chan_8h}{config\_chan.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{transformState_8h}{transformState.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandaNode_8h}{pandaNode.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ AnimChannelScalarDynamic::\_type\_handle;}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00030\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00031\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic}}()\ \{}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00039\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00040\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic}}(\mbox{\hyperlink{classAnimGroup}{AnimGroup}}\ *parent,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classAnimChannelScalarDynamic}{AnimChannelScalarDynamic}}\ \&copy)\ :}
\DoxyCodeLine{00041\ \ \ \mbox{\hyperlink{classAnimChannel}{AnimChannelScalar}}(parent,\ copy),}
\DoxyCodeLine{00042\ \ \ \_value\_node(copy.\_value\_node),}
\DoxyCodeLine{00043\ \ \ \_value(copy.\_value),}
\DoxyCodeLine{00044\ \ \ \_last\_value(nullptr),}
\DoxyCodeLine{00045\ \ \ \_value\_changed(true),}
\DoxyCodeLine{00046\ \ \ \_float\_value(copy.\_float\_value)}
\DoxyCodeLine{00047\ \{}
\DoxyCodeLine{00048\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00053\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00054\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic}}(\textcolor{keyword}{const}\ std::string\ \&name)}
\DoxyCodeLine{00055\ \ \ :\ \mbox{\hyperlink{classAnimChannel}{AnimChannelScalar}}(name)}
\DoxyCodeLine{00056\ \{}
\DoxyCodeLine{00057\ \ \ \_last\_value\ =\ \_value\ =\ TransformState::make\_identity();}
\DoxyCodeLine{00058\ \ \ \_value\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00059\ \ \ \_float\_value\ =\ 0.0;}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00068\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{has\_changed}}(\textcolor{keywordtype}{int},\ \textcolor{keywordtype}{double},\ \textcolor{keywordtype}{int},\ \textcolor{keywordtype}{double})\ \{}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordflow}{if}\ (\_value\_node\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \_value\ =\ \_value\_node-\/>get\_transform();}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{has\_changed}}\ =\ (\_value\ !=\ \_last\_value);}
\DoxyCodeLine{00072\ \ \ \ \ \_last\_value\ =\ \_value;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{has\_changed}};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{has\_changed}}\ =\ \_value\_changed;}
\DoxyCodeLine{00077\ \ \ \ \ \_value\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ad2fd181be97e609d8e5d4a2383b753e2}{has\_changed}};}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00085\ \textcolor{keywordtype}{void}\ AnimChannelScalarDynamic::}
\DoxyCodeLine{00086\ get\_value(\textcolor{keywordtype}{int},\ PN\_stdfloat\ \&value)\ \{}
\DoxyCodeLine{00087\ \ \ value\ =\ \mbox{\hyperlink{classAnimChannelScalarDynamic_ae8bed138e837c8dda23ab8fe8c6171ca}{get\_value}}();}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00094\ \textcolor{keywordtype}{void}\ AnimChannelScalarDynamic::}
\DoxyCodeLine{00095\ set\_value(PN\_stdfloat\ value)\ \{}
\DoxyCodeLine{00096\ \ \ \_float\_value\ =\ value;}
\DoxyCodeLine{00097\ \ \ \_value\_node.clear();}
\DoxyCodeLine{00098\ \ \ \_value\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00106\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a70ebf7d50211510fed5d6bab3fd93b96}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00107\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a70ebf7d50211510fed5d6bab3fd93b96}{set\_value\_node}}(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *value\_node)\ \{}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{if}\ (\_value\_node\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \_last\_value\ =\ TransformState::make\_pos(LVecBase3(\_float\_value,\ 0.0f,\ 0.0f));}
\DoxyCodeLine{00110\ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \_value\_node\ =\ value\_node;}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{if}\ (\_value\_node\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \_value\ =\ \_value\_node-\/>get\_transform();}
\DoxyCodeLine{00116\ \ \ \}}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00124\ \mbox{\hyperlink{classAnimGroup}{AnimGroup}}\ *\mbox{\hyperlink{classAnimChannelScalarDynamic_a373bb762bd729483bfdfd33a73ec08f0}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00125\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a373bb762bd729483bfdfd33a73ec08f0}{make\_copy}}(\mbox{\hyperlink{classAnimGroup}{AnimGroup}}\ *parent)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic}}(parent,\ *\textcolor{keyword}{this});}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00134\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_aa625b0b646d57fedfabd201b77d9e25c}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00135\ \mbox{\hyperlink{classAnimChannelScalarDynamic_aa625b0b646d57fedfabd201b77d9e25c}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\ \{}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classAnimChannelBase_a3fe5cec86bcb87e3f3cd8c5274db094a}{AnimChannelScalar::write\_datagram}}(manager,\ dg);}
\DoxyCodeLine{00137\ \ \ manager-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(dg,\ \_value\_node);}
\DoxyCodeLine{00138\ \ \ manager-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(dg,\ \_value);}
\DoxyCodeLine{00139\ \ \ dg.add\_stdfloat(\_float\_value);}
\DoxyCodeLine{00140\ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00146\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a24f1b0693f520fdf369976a7df9ccd8e}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00147\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a24f1b0693f520fdf369976a7df9ccd8e}{complete\_pointers}}(\mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ **p\_list,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{int}\ pi\ =\ \mbox{\hyperlink{classAnimGroup_a52b2a38b2c521ee0ef2819d0e0956850}{AnimChannelScalar::complete\_pointers}}(p\_list,\ manager);}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \textcolor{comment}{//\ Get\ the\ \_value\_node\ and\ \_value\ pointers.}}
\DoxyCodeLine{00151\ \ \ \_value\_node\ =\ DCAST(\mbox{\hyperlink{classPandaNode}{PandaNode}},\ p\_list[pi++]);}
\DoxyCodeLine{00152\ \ \ \_value\ =\ DCAST(\mbox{\hyperlink{classTransformState}{TransformState}},\ p\_list[pi++]);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{keywordflow}{return}\ pi;}
\DoxyCodeLine{00155\ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00162\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a1a440094ca816db02a7250d5b16280c0}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00163\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a1a440094ca816db02a7250d5b16280c0}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00164\ \ \ \mbox{\hyperlink{classAnimChannelBase_a83cbae12fb62fcde4d2e90ed3f483489}{AnimChannelScalar::fillin}}(scan,\ manager);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ Read\ the\ \_value\_node\ and\ \_value\ pointers.}}
\DoxyCodeLine{00167\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_ac0ecc0609d9c6de514145777b3336435}{read\_pointer}}(scan);}
\DoxyCodeLine{00168\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_ac0ecc0609d9c6de514145777b3336435}{read\_pointer}}(scan);}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \_float\_value\ =\ scan.get\_stdfloat();}
\DoxyCodeLine{00171\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00176\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classAnimChannelScalarDynamic_abeb07be4c515beaf49954256ceaaf6ce}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00177\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abeb07be4c515beaf49954256ceaaf6ce}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00178\ \ \ \mbox{\hyperlink{classAnimChannelScalarDynamic}{AnimChannelScalarDynamic}}\ *me\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abaa3413b29d30165f128b27b44d49c3a}{AnimChannelScalarDynamic}};}
\DoxyCodeLine{00179\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00180\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00183\ \ \ me-\/>\mbox{\hyperlink{classAnimChannelScalarDynamic_a1a440094ca816db02a7250d5b16280c0}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{return}\ me;}
\DoxyCodeLine{00185\ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00190\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a5e76fbe183d80081d32c31e7bb884289}{AnimChannelScalarDynamic::}}}
\DoxyCodeLine{00191\ \mbox{\hyperlink{classAnimChannelScalarDynamic_a5e76fbe183d80081d32c31e7bb884289}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00192\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classAnimChannelScalarDynamic_abeb07be4c515beaf49954256ceaaf6ce}{make\_from\_bam}});}
\DoxyCodeLine{00193\ \}}

\end{DoxyCode}

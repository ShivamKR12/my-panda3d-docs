\doxysection{linear\+Friction\+Force.\+cxx}
\hypertarget{linearFrictionForce_8cxx_source}{}\label{linearFrictionForce_8cxx_source}\index{panda/src/physics/linearFrictionForce.cxx@{panda/src/physics/linearFrictionForce.cxx}}
\mbox{\hyperlink{linearFrictionForce_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{linearFrictionForce_8h}{linearFrictionForce.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__physics_8h}{config\_physics.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ LinearFrictionForce::\_type\_handle;}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ LinearFrictionForce::}
\DoxyCodeLine{00023\ LinearFrictionForce(PN\_stdfloat\ coef,\ PN\_stdfloat\ a,\ \textcolor{keywordtype}{bool}\ m)\ :}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{classLinearForce}{LinearForce}}(a,\ m)\ \{}
\DoxyCodeLine{00025\ \ \ set\_coef(coef);}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00031\ LinearFrictionForce::}
\DoxyCodeLine{00032\ LinearFrictionForce(\textcolor{keyword}{const}\ \mbox{\hyperlink{classLinearFrictionForce}{LinearFrictionForce}}\ \&copy)\ :}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{classLinearForce}{LinearForce}}(copy)\ \{}
\DoxyCodeLine{00034\ \ \ \_coef\ =\ copy.\_coef;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00040\ LinearFrictionForce::}
\DoxyCodeLine{00041\ \string~LinearFrictionForce()\ \{}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00047\ \mbox{\hyperlink{classLinearForce}{LinearForce}}\ *LinearFrictionForce::}
\DoxyCodeLine{00048\ make\_copy()\ \{}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classLinearFrictionForce}{LinearFrictionForce}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ LVector3\ LinearFrictionForce::}
\DoxyCodeLine{00056\ get\_child\_vector(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPhysicsObject}{PhysicsObject}}*\ po)\ \{}
\DoxyCodeLine{00057\ \ \ LVector3\ v\ =\ po-\/>get\_velocity();}
\DoxyCodeLine{00058\ \ \ assert(\_coef>=0.0f\ \&\&\ \_coef<=1.0f);}
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//\ Create\ a\ force\ vector\ in\ the\ opposite\ direction\ of\ v:}}
\DoxyCodeLine{00060\ \ \ LVector3\ friction\ =\ v\ *\ -\/\_coef;}
\DoxyCodeLine{00061\ \ \ physics\_debug(\textcolor{stringliteral}{"{}\ v\ "{}}<<v<<\textcolor{stringliteral}{"{}\ len\ "{}}<<v.length()}
\DoxyCodeLine{00062\ \ \ \ \ \ \ <<\textcolor{stringliteral}{"{}\ friction\ "{}}<<friction<<\textcolor{stringliteral}{"{}\ len\ "{}}<<friction.length()}
\DoxyCodeLine{00063\ \ \ \ \ \ \ <<\textcolor{stringliteral}{"{}\ dot\ "{}}<<(normalize(v).dot(normalize(friction))));}
\DoxyCodeLine{00064\ \ \ assert(friction.almost\_equal(LVector3::zero())\ ||\ v.dot(friction)\ <\ 0.0f);}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ cary\ said\ to\ cap\ this\ at\ zero\ so\ that\ friction\ can't\ reverse\ your}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ direction,\ but\ it\ seems\ to\ me\ that\ if\ you're\ computing:\ v\ +\ (-\/v\ *\ \_coef),}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ \_coef\ in\ [0,\ 1]\ that\ this\ will\ always\ be\ greater\ than\ or\ equal\ to\ zero.}}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{return}\ friction;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00074\ \textcolor{keywordtype}{void}\ LinearFrictionForce::}
\DoxyCodeLine{00075\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\ \ \#ifndef\ NDEBUG\ }\textcolor{comment}{//[}}
\DoxyCodeLine{00077\ \ \ out<<\textcolor{stringliteral}{"{}LinearFrictionForce"{}};}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\ \ \#endif\ }\textcolor{comment}{//]\ NDEBUG}}
\DoxyCodeLine{00079\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00084\ \textcolor{keywordtype}{void}\ LinearFrictionForce::}
\DoxyCodeLine{00085\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\ \ \#ifndef\ NDEBUG\ }\textcolor{comment}{//[}}
\DoxyCodeLine{00087\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}});\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}LinearFrictionForce:\(\backslash\)n"{}};}
\DoxyCodeLine{00088\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_coef\ "{}}<<\_coef<<\textcolor{stringliteral}{"{}:\(\backslash\)n"{}};}
\DoxyCodeLine{00089\ \ \ LinearForce::write(out,\ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\ \ \#endif\ }\textcolor{comment}{//]\ NDEBUG}}
\DoxyCodeLine{00091\ \}}

\end{DoxyCode}

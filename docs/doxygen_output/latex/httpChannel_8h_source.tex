\doxysection{http\+Channel.\+h}
\hypertarget{httpChannel_8h_source}{}\label{httpChannel_8h_source}\index{panda/src/downloader/httpChannel.h@{panda/src/downloader/httpChannel.h}}
\mbox{\hyperlink{httpChannel_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ HTTPCHANNEL\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ HTTPCHANNEL\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{comment}{//\ This\ module\ requires\ OpenSSL\ to\ compile,\ even\ if\ you\ do\ not\ intend\ to\ use}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ this\ to\ establish\ https\ connections;\ this\ is\ because\ it\ uses\ the\ OpenSSL}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ library\ to\ portably\ handle\ all\ of\ the\ socket\ communications.}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifdef\ HAVE\_OPENSSL}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{httpClient_8h}{httpClient.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{httpEnum_8h}{httpEnum.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{urlSpec_8h}{urlSpec.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{documentSpec_8h}{documentSpec.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bioPtr_8h}{bioPtr.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bioStreamPtr_8h}{bioStreamPtr.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pvector_8h}{pvector.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__downloader_8h}{config\_downloader.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filename_8h}{filename.h}}"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{typedReferenceCount_8h}{typedReferenceCount.h}}"{}}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }bio\_st\ BIO;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classRamfile}{Ramfile}};}
\DoxyCodeLine{00041\ \textcolor{keyword}{class\ }HTTPClient;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_DOWNLOADER\ HTTPChannel\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classTypedReferenceCount}{TypedReferenceCount}}\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ HTTPChannel(HTTPClient\ *client);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{virtual}\ \string~HTTPChannel();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ PUBLISHED:}
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ get\_status\_code()\ will\ either\ return\ an\ HTTP-\/style\ status\ code\ >=\ 100}}
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ (e.g.\ \ 404),\ or\ one\ of\ the\ following\ values.\ \ In\ general,\ these\ are}}
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ ordered\ from\ less-\/successful\ to\ more-\/successful.}}
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{enum}\ StatusCode\ \{}
\DoxyCodeLine{00066\ \ \ \ \ SC\_incomplete\ =\ 0,}
\DoxyCodeLine{00067\ \ \ \ \ SC\_internal\_error,}
\DoxyCodeLine{00068\ \ \ \ \ SC\_no\_connection,}
\DoxyCodeLine{00069\ \ \ \ \ SC\_timeout,}
\DoxyCodeLine{00070\ \ \ \ \ SC\_lost\_connection,}
\DoxyCodeLine{00071\ \ \ \ \ SC\_non\_http\_response,}
\DoxyCodeLine{00072\ \ \ \ \ SC\_invalid\_http,}
\DoxyCodeLine{00073\ \ \ \ \ SC\_socks\_invalid\_version,}
\DoxyCodeLine{00074\ \ \ \ \ SC\_socks\_no\_acceptable\_login\_method,}
\DoxyCodeLine{00075\ \ \ \ \ SC\_socks\_refused,}
\DoxyCodeLine{00076\ \ \ \ \ SC\_socks\_no\_connection,}
\DoxyCodeLine{00077\ \ \ \ \ SC\_ssl\_internal\_failure,}
\DoxyCodeLine{00078\ \ \ \ \ SC\_ssl\_no\_handshake,}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ No\ one\ returns\ this\ code,\ but\ StatusCode\ values\ higher\ than\ this\ are}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ deemed\ more\ successful\ than\ any\ generic\ HTTP\ response.}}
\DoxyCodeLine{00082\ \ \ \ \ SC\_http\_error\_watermark,}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ SC\_ssl\_invalid\_server\_certificate,}
\DoxyCodeLine{00085\ \ \ \ \ SC\_ssl\_self\_signed\_server\_certificate,}
\DoxyCodeLine{00086\ \ \ \ \ SC\_ssl\_unexpected\_server,}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ These\ errors\ are\ only\ generated\ after\ a\ download\_to\_*()\ call\ been}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ issued.}}
\DoxyCodeLine{00090\ \ \ \ \ SC\_download\_open\_error,}
\DoxyCodeLine{00091\ \ \ \ \ SC\_download\_write\_error,}
\DoxyCodeLine{00092\ \ \ \ \ SC\_download\_invalid\_range,}
\DoxyCodeLine{00093\ \ \ \};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ INLINE\ HTTPClient\ *get\_client()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_valid()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00098\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_connection\_ready()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \&get\_url()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00101\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&get\_document\_spec()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00102\ \ \ INLINE\ HTTPEnum::HTTPVersion\ get\_http\_version()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00103\ \ \ INLINE\ \textcolor{keyword}{const}\ std::string\ \&get\_http\_version\_string()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00104\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_status\_code()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00105\ \ \ std::string\ get\_status\_string()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ \ \ INLINE\ \textcolor{keyword}{const}\ std::string\ \&get\_www\_realm()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00107\ \ \ INLINE\ \textcolor{keyword}{const}\ std::string\ \&get\_proxy\_realm()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00108\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \&get\_redirect()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00109\ \ \ std::string\ get\_header\_value(\textcolor{keyword}{const}\ std::string\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_num\_redirect\_steps()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00112\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \&get\_redirect\_step(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00113\ \ \ MAKE\_SEQ(get\_redirect\_steps,\ get\_num\_redirect\_steps,\ get\_redirect\_step);}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_persistent\_connection(\textcolor{keywordtype}{bool}\ persistent\_connection);}
\DoxyCodeLine{00116\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_persistent\_connection()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{bool}\ will\_close\_connection()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_allow\_proxy(\textcolor{keywordtype}{bool}\ allow\_proxy);}
\DoxyCodeLine{00120\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_allow\_proxy()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00121\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_proxy\_tunnel(\textcolor{keywordtype}{bool}\ proxy\_tunnel);}
\DoxyCodeLine{00122\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_proxy\_tunnel()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_connect\_timeout(\textcolor{keywordtype}{double}\ timeout\_seconds);}
\DoxyCodeLine{00125\ \ \ INLINE\ \textcolor{keywordtype}{double}\ get\_connect\_timeout()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00126\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_blocking\_connect(\textcolor{keywordtype}{bool}\ blocking\_connect);}
\DoxyCodeLine{00127\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_blocking\_connect()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_http\_timeout(\textcolor{keywordtype}{double}\ timeout\_seconds);}
\DoxyCodeLine{00130\ \ \ INLINE\ \textcolor{keywordtype}{double}\ get\_http\_timeout()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_skip\_body\_size(\textcolor{keywordtype}{size\_t}\ skip\_body\_size);}
\DoxyCodeLine{00133\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_skip\_body\_size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00134\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_idle\_timeout(\textcolor{keywordtype}{double}\ idle\_timeout);}
\DoxyCodeLine{00135\ \ \ INLINE\ \textcolor{keywordtype}{double}\ get\_idle\_timeout()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_download\_throttle(\textcolor{keywordtype}{bool}\ download\_throttle);}
\DoxyCodeLine{00138\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_download\_throttle()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_max\_bytes\_per\_second(\textcolor{keywordtype}{double}\ max\_bytes\_per\_second);}
\DoxyCodeLine{00141\ \ \ INLINE\ \textcolor{keywordtype}{double}\ get\_max\_bytes\_per\_second()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_max\_updates\_per\_second(\textcolor{keywordtype}{double}\ max\_updates\_per\_second);}
\DoxyCodeLine{00144\ \ \ INLINE\ \textcolor{keywordtype}{double}\ get\_max\_updates\_per\_second()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_content\_type(std::string\ content\_type);}
\DoxyCodeLine{00147\ \ \ INLINE\ std::string\ get\_content\_type()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_expected\_file\_size(\textcolor{keywordtype}{size\_t}\ file\_size);}
\DoxyCodeLine{00150\ \ \ std::streamsize\ get\_file\_size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_file\_size\_known()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_first\_byte\_requested()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00154\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_last\_byte\_requested()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00155\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_first\_byte\_delivered()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00156\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_last\_byte\_delivered()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ write\_headers(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ INLINE\ \textcolor{keywordtype}{void}\ reset();}
\DoxyCodeLine{00161\ \ \ INLINE\ \textcolor{keywordtype}{void}\ preserve\_status();}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ INLINE\ \textcolor{keywordtype}{void}\ clear\_extra\_headers();}
\DoxyCodeLine{00164\ \ \ INLINE\ \textcolor{keywordtype}{void}\ send\_extra\_header(\textcolor{keyword}{const}\ std::string\ \&key,\ \textcolor{keyword}{const}\ std::string\ \&value);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ get\_document(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00167\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ get\_subdocument(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ first\_byte,\ \textcolor{keywordtype}{size\_t}\ last\_byte);}
\DoxyCodeLine{00169\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ get\_header(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00170\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ post\_form(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,\ \textcolor{keyword}{const}\ std::string\ \&body);}
\DoxyCodeLine{00171\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ put\_document(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,\ \textcolor{keyword}{const}\ std::string\ \&body);}
\DoxyCodeLine{00172\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ delete\_document(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00173\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ get\_trace(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00174\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ connect\_to(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00175\ \ \ BLOCKING\ INLINE\ \textcolor{keywordtype}{bool}\ get\_options(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ INLINE\ \textcolor{keywordtype}{void}\ begin\_get\_document(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00178\ \ \ INLINE\ \textcolor{keywordtype}{void}\ begin\_get\_subdocument(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ first\_byte,\ \textcolor{keywordtype}{size\_t}\ last\_byte);}
\DoxyCodeLine{00180\ \ \ INLINE\ \textcolor{keywordtype}{void}\ begin\_get\_header(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00181\ \ \ INLINE\ \textcolor{keywordtype}{void}\ begin\_post\_form(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,\ \textcolor{keyword}{const}\ std::string\ \&body);}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordtype}{bool}\ run();}
\DoxyCodeLine{00183\ \ \ INLINE\ \textcolor{keywordtype}{void}\ begin\_connect\_to(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ std::istream\ *open\_read\_body();}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordtype}{void}\ close\_read\_body(std::istream\ *stream)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ BLOCKING\ \textcolor{keywordtype}{bool}\ download\_to\_file(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&filename,\ \textcolor{keywordtype}{bool}\ subdocument\_resumes\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00189\ \ \ BLOCKING\ \textcolor{keywordtype}{bool}\ download\_to\_ram(\mbox{\hyperlink{classRamfile}{Ramfile}}\ *ramfile,\ \textcolor{keywordtype}{bool}\ subdocument\_resumes\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00190\ \ \ BLOCKING\ \textcolor{keywordtype}{bool}\ download\_to\_stream(std::ostream\ *strm,\ \textcolor{keywordtype}{bool}\ subdocument\_resumes\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00191\ \ \ SocketStream\ *get\_connection();}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_bytes\_downloaded()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00194\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_bytes\_requested()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00195\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_download\_complete()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordtype}{void}\ body\_stream\_destructs(ISocketStream\ *stream);}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{bool}\ reached\_done\_state();}
\DoxyCodeLine{00202\ \ \ \textcolor{keywordtype}{bool}\ run\_try\_next\_proxy();}
\DoxyCodeLine{00203\ \ \ \textcolor{keywordtype}{bool}\ run\_connecting();}
\DoxyCodeLine{00204\ \ \ \textcolor{keywordtype}{bool}\ run\_connecting\_wait();}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{bool}\ run\_http\_proxy\_ready();}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordtype}{bool}\ run\_http\_proxy\_request\_sent();}
\DoxyCodeLine{00207\ \ \ \textcolor{keywordtype}{bool}\ run\_http\_proxy\_reading\_header();}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordtype}{bool}\ run\_socks\_proxy\_greet();}
\DoxyCodeLine{00209\ \ \ \textcolor{keywordtype}{bool}\ run\_socks\_proxy\_greet\_reply();}
\DoxyCodeLine{00210\ \ \ \textcolor{keywordtype}{bool}\ run\_socks\_proxy\_connect();}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordtype}{bool}\ run\_socks\_proxy\_connect\_reply();}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordtype}{bool}\ run\_setup\_ssl();}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordtype}{bool}\ run\_ssl\_handshake();}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordtype}{bool}\ run\_ready();}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordtype}{bool}\ run\_request\_sent();}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordtype}{bool}\ run\_reading\_header();}
\DoxyCodeLine{00217\ \ \ \textcolor{keywordtype}{bool}\ run\_start\_direct\_file\_read();}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordtype}{bool}\ run\_read\_header();}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordtype}{bool}\ run\_begin\_body();}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordtype}{bool}\ run\_reading\_body();}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordtype}{bool}\ run\_read\_body();}
\DoxyCodeLine{00222\ \ \ \textcolor{keywordtype}{bool}\ run\_read\_trailer();}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{keywordtype}{bool}\ run\_download\_to\_file();}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordtype}{bool}\ run\_download\_to\_ram();}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordtype}{bool}\ run\_download\_to\_stream();}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \textcolor{keywordtype}{void}\ begin\_request(HTTPEnum::Method\ method,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \&url,}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&body,\ \textcolor{keywordtype}{bool}\ nonblocking,}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ first\_byte,\ \textcolor{keywordtype}{size\_t}\ last\_byte);}
\DoxyCodeLine{00231\ \ \ \textcolor{keywordtype}{void}\ reconsider\_proxy();}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordtype}{void}\ reset\_for\_new\_request();}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \textcolor{keywordtype}{void}\ finished\_body(\textcolor{keywordtype}{bool}\ has\_trailer);}
\DoxyCodeLine{00235\ \ \ \textcolor{keywordtype}{bool}\ open\_download\_file();}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \textcolor{keywordtype}{bool}\ server\_getline(std::string\ \&str);}
\DoxyCodeLine{00238\ \ \ \textcolor{keywordtype}{bool}\ server\_getline\_failsafe(std::string\ \&str);}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordtype}{bool}\ server\_get(std::string\ \&str,\ \textcolor{keywordtype}{size\_t}\ num\_bytes);}
\DoxyCodeLine{00240\ \ \ \textcolor{keywordtype}{bool}\ server\_get\_failsafe(std::string\ \&str,\ \textcolor{keywordtype}{size\_t}\ num\_bytes);}
\DoxyCodeLine{00241\ \ \ \textcolor{keywordtype}{bool}\ server\_send(\textcolor{keyword}{const}\ std::string\ \&str,\ \textcolor{keywordtype}{bool}\ secret);}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordtype}{bool}\ parse\_http\_response(\textcolor{keyword}{const}\ std::string\ \&line);}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordtype}{bool}\ parse\_http\_header();}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordtype}{bool}\ parse\_content\_range(\textcolor{keyword}{const}\ std::string\ \&content\_range);}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \textcolor{keywordtype}{void}\ check\_socket();}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \textcolor{keywordtype}{void}\ check\_preapproved\_server\_certificate(X509\ *cert,\ \textcolor{keywordtype}{bool}\ \&cert\_preapproved,}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&cert\_name\_preapproved)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordtype}{bool}\ validate\_server\_name(X509\ *cert);}
\DoxyCodeLine{00251\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ match\_cert\_name(\textcolor{keyword}{const}\ std::string\ \&cert\_name,\ \textcolor{keyword}{const}\ std::string\ \&hostname);}
\DoxyCodeLine{00252\ \ \ \textcolor{keyword}{static}\ std::string\ get\_x509\_name\_component(X509\_NAME\ *name,\ \textcolor{keywordtype}{int}\ nid);}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \textcolor{keywordtype}{void}\ make\_header();}
\DoxyCodeLine{00255\ \ \ \textcolor{keywordtype}{void}\ make\_proxy\_request\_text();}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordtype}{void}\ make\_request\_text();}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \textcolor{keywordtype}{void}\ reset\_url(\textcolor{keyword}{const}\ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \&old\_url,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \&new\_url);}
\DoxyCodeLine{00259\ \ \ \textcolor{keywordtype}{void}\ store\_header\_field(\textcolor{keyword}{const}\ std::string\ \&field\_name,\ \textcolor{keyword}{const}\ std::string\ \&field\_value);}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00262\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_send(\textcolor{keyword}{const}\ std::string\ \&message);}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \textcolor{keywordtype}{void}\ reset\_download\_to();}
\DoxyCodeLine{00266\ \ \ \textcolor{keywordtype}{void}\ close\_download\_stream();}
\DoxyCodeLine{00267\ \ \ \textcolor{keywordtype}{void}\ reset\_to\_new();}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordtype}{void}\ reset\_body\_stream();}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordtype}{void}\ close\_connection();}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ more\_useful\_status\_code(\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b);}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00274\ \ \ \textcolor{comment}{//\ This\ is\ declared\ public\ solely\ so\ we\ can\ make\ an\ ostream\ operator\ for\ it.}}
\DoxyCodeLine{00275\ \ \ \textcolor{keyword}{enum}\ State\ \{}
\DoxyCodeLine{00276\ \ \ \ \ S\_new,}
\DoxyCodeLine{00277\ \ \ \ \ S\_try\_next\_proxy,}
\DoxyCodeLine{00278\ \ \ \ \ S\_connecting,}
\DoxyCodeLine{00279\ \ \ \ \ S\_connecting\_wait,}
\DoxyCodeLine{00280\ \ \ \ \ S\_http\_proxy\_ready,}
\DoxyCodeLine{00281\ \ \ \ \ S\_http\_proxy\_request\_sent,}
\DoxyCodeLine{00282\ \ \ \ \ S\_http\_proxy\_reading\_header,}
\DoxyCodeLine{00283\ \ \ \ \ S\_socks\_proxy\_greet,}
\DoxyCodeLine{00284\ \ \ \ \ S\_socks\_proxy\_greet\_reply,}
\DoxyCodeLine{00285\ \ \ \ \ S\_socks\_proxy\_connect,}
\DoxyCodeLine{00286\ \ \ \ \ S\_socks\_proxy\_connect\_reply,}
\DoxyCodeLine{00287\ \ \ \ \ S\_setup\_ssl,}
\DoxyCodeLine{00288\ \ \ \ \ S\_ssl\_handshake,}
\DoxyCodeLine{00289\ \ \ \ \ S\_ready,}
\DoxyCodeLine{00290\ \ \ \ \ S\_request\_sent,}
\DoxyCodeLine{00291\ \ \ \ \ S\_reading\_header,}
\DoxyCodeLine{00292\ \ \ \ \ S\_start\_direct\_file\_read,}
\DoxyCodeLine{00293\ \ \ \ \ S\_read\_header,}
\DoxyCodeLine{00294\ \ \ \ \ S\_begin\_body,}
\DoxyCodeLine{00295\ \ \ \ \ S\_reading\_body,}
\DoxyCodeLine{00296\ \ \ \ \ S\_read\_body,}
\DoxyCodeLine{00297\ \ \ \ \ S\_read\_trailer,}
\DoxyCodeLine{00298\ \ \ \ \ S\_failure}
\DoxyCodeLine{00299\ \ \ \};}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00302\ \ \ \textcolor{keyword}{class\ }StatusEntry\ \{}
\DoxyCodeLine{00303\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00304\ \ \ \ \ INLINE\ StatusEntry();}
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordtype}{int}\ \_status\_code;}
\DoxyCodeLine{00306\ \ \ \ \ std::string\ \_status\_string;}
\DoxyCodeLine{00307\ \ \ \};}
\DoxyCodeLine{00308\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<URLSpec>}}\ Proxies;}
\DoxyCodeLine{00309\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<StatusEntry>}}\ StatusList;}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ HTTPClient\ *\_client;}
\DoxyCodeLine{00312\ \ \ Proxies\ \_proxies;}
\DoxyCodeLine{00313\ \ \ \textcolor{keywordtype}{size\_t}\ \_proxy\_next\_index;}
\DoxyCodeLine{00314\ \ \ StatusList\ \_status\_list;}
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \_proxy;}
\DoxyCodeLine{00316\ \ \ PT(BioPtr)\ \_bio;}
\DoxyCodeLine{00317\ \ \ PT(BioStreamPtr)\ \_source;}
\DoxyCodeLine{00318\ \ \ \textcolor{keywordtype}{bool}\ \_persistent\_connection;}
\DoxyCodeLine{00319\ \ \ \textcolor{keywordtype}{bool}\ \_allow\_proxy;}
\DoxyCodeLine{00320\ \ \ \textcolor{keywordtype}{bool}\ \_proxy\_tunnel;}
\DoxyCodeLine{00321\ \ \ \textcolor{keywordtype}{double}\ \_connect\_timeout;}
\DoxyCodeLine{00322\ \ \ \textcolor{keywordtype}{double}\ \_http\_timeout;}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordtype}{size\_t}\ \_skip\_body\_size;}
\DoxyCodeLine{00324\ \ \ \textcolor{keywordtype}{double}\ \_idle\_timeout;}
\DoxyCodeLine{00325\ \ \ \textcolor{keywordtype}{bool}\ \_blocking\_connect;}
\DoxyCodeLine{00326\ \ \ \textcolor{keywordtype}{bool}\ \_download\_throttle;}
\DoxyCodeLine{00327\ \ \ \textcolor{keywordtype}{double}\ \_max\_bytes\_per\_second;}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordtype}{double}\ \_max\_updates\_per\_second;}
\DoxyCodeLine{00329\ \ \ \textcolor{keywordtype}{double}\ \_seconds\_per\_update;}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordtype}{int}\ \_bytes\_per\_update;}
\DoxyCodeLine{00331\ \ \ \textcolor{keywordtype}{bool}\ \_nonblocking;}
\DoxyCodeLine{00332\ \ \ \textcolor{keywordtype}{bool}\ \_wanted\_nonblocking;}
\DoxyCodeLine{00333\ \ \ std::string\ \_send\_extra\_headers;}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \_document\_spec;}
\DoxyCodeLine{00336\ \ \ \mbox{\hyperlink{classDocumentSpec}{DocumentSpec}}\ \_request;}
\DoxyCodeLine{00337\ \ \ HTTPEnum::Method\ \_method;}
\DoxyCodeLine{00338\ \ \ std::string\ \_header;}
\DoxyCodeLine{00339\ \ \ std::string\ \_body;}
\DoxyCodeLine{00340\ \ \ std::string\ \_content\_type;}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordtype}{bool}\ \_want\_ssl;}
\DoxyCodeLine{00342\ \ \ \textcolor{keywordtype}{bool}\ \_proxy\_serves\_document;}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordtype}{bool}\ \_proxy\_tunnel\_now;}
\DoxyCodeLine{00344\ \ \ \textcolor{keywordtype}{bool}\ \_server\_response\_has\_no\_body;}
\DoxyCodeLine{00345\ \ \ \textcolor{keywordtype}{size\_t}\ \_first\_byte\_requested;}
\DoxyCodeLine{00346\ \ \ \textcolor{keywordtype}{size\_t}\ \_last\_byte\_requested;}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordtype}{size\_t}\ \_first\_byte\_delivered;}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordtype}{size\_t}\ \_last\_byte\_delivered;}
\DoxyCodeLine{00349\ \ \ \textcolor{keywordtype}{int}\ \_connect\_count;}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \textcolor{keyword}{enum}\ DownloadDest\ \{}
\DoxyCodeLine{00352\ \ \ \ \ DD\_none,}
\DoxyCodeLine{00353\ \ \ \ \ DD\_file,}
\DoxyCodeLine{00354\ \ \ \ \ DD\_ram,}
\DoxyCodeLine{00355\ \ \ \ \ DD\_stream,}
\DoxyCodeLine{00356\ \ \ \};}
\DoxyCodeLine{00357\ \ \ DownloadDest\ \_download\_dest;}
\DoxyCodeLine{00358\ \ \ \textcolor{keywordtype}{bool}\ \_subdocument\_resumes;}
\DoxyCodeLine{00359\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ \_download\_to\_filename;}
\DoxyCodeLine{00360\ \ \ \mbox{\hyperlink{classRamfile}{Ramfile}}\ *\_download\_to\_ramfile;}
\DoxyCodeLine{00361\ \ \ std::ostream\ *\_download\_to\_stream;}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \textcolor{keywordtype}{int}\ \_read\_index;}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ HTTPEnum::HTTPVersion\ \_http\_version;}
\DoxyCodeLine{00366\ \ \ std::string\ \_http\_version\_string;}
\DoxyCodeLine{00367\ \ \ StatusEntry\ \_status\_entry;}
\DoxyCodeLine{00368\ \ \ \mbox{\hyperlink{classURLSpec}{URLSpec}}\ \_redirect;}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ std::string\ \_proxy\_realm;}
\DoxyCodeLine{00371\ \ \ std::string\ \_proxy\_username;}
\DoxyCodeLine{00372\ \ \ PT(HTTPAuthorization)\ \_proxy\_auth;}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ std::string\ \_www\_realm;}
\DoxyCodeLine{00375\ \ \ std::string\ \_www\_username;}
\DoxyCodeLine{00376\ \ \ PT(HTTPAuthorization)\ \_www\_auth;}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \textcolor{comment}{//\ What\ type\ of\ response\ do\ we\ get\ to\ our\ HTTP\ request?}}
\DoxyCodeLine{00379\ \ \ \textcolor{keyword}{enum}\ ResponseType\ \{}
\DoxyCodeLine{00380\ \ \ \ \ RT\_none,}
\DoxyCodeLine{00381\ \ \ \ \ RT\_hangup,\ \ \ \ \ \ \ \textcolor{comment}{//\ immediately\ lost\ connection}}
\DoxyCodeLine{00382\ \ \ \ \ RT\_non\_http,\ \ \ \ \ \textcolor{comment}{//\ something\ that\ wasn't\ an\ expected\ HTTP\ response}}
\DoxyCodeLine{00383\ \ \ \ \ RT\_http\_hangup,\ \ \textcolor{comment}{//\ the\ start\ of\ an\ HTTP\ response,\ then\ a\ lost\ connection}}
\DoxyCodeLine{00384\ \ \ \ \ RT\_http\_complete\ \textcolor{comment}{//\ a\ valid\ HTTP\ response\ completed}}
\DoxyCodeLine{00385\ \ \ \};}
\DoxyCodeLine{00386\ \ \ ResponseType\ \_response\_type;}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \textcolor{comment}{//\ Not\ a\ phash\_map,\ to\ maintain\ sorted\ order.}}
\DoxyCodeLine{00389\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<std::string,\ std::string>}}\ Headers;}
\DoxyCodeLine{00390\ \ \ Headers\ \_headers;}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \textcolor{keywordtype}{size\_t}\ \_expected\_file\_size;}
\DoxyCodeLine{00393\ \ \ \textcolor{keywordtype}{size\_t}\ \_file\_size;}
\DoxyCodeLine{00394\ \ \ \textcolor{keywordtype}{size\_t}\ \_transfer\_file\_size;}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordtype}{size\_t}\ \_bytes\_downloaded;}
\DoxyCodeLine{00396\ \ \ \textcolor{keywordtype}{size\_t}\ \_bytes\_requested;}
\DoxyCodeLine{00397\ \ \ \textcolor{keywordtype}{bool}\ \_got\_expected\_file\_size;}
\DoxyCodeLine{00398\ \ \ \textcolor{keywordtype}{bool}\ \_got\_file\_size;}
\DoxyCodeLine{00399\ \ \ \textcolor{keywordtype}{bool}\ \_got\_transfer\_file\_size;}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \textcolor{comment}{//\ These\ members\ are\ used\ to\ maintain\ the\ current\ state\ while\ communicating}}
\DoxyCodeLine{00402\ \ \ \textcolor{comment}{//\ with\ the\ server.\ \ We\ need\ to\ store\ everything\ in\ the\ class\ object\ instead}}
\DoxyCodeLine{00403\ \ \ \textcolor{comment}{//\ of\ using\ local\ variables\ because\ in\ the\ case\ of\ nonblocking\ IO\ we\ have\ to}}
\DoxyCodeLine{00404\ \ \ \textcolor{comment}{//\ be\ able\ to\ return\ to\ the\ caller\ after\ any\ IO\ operation\ and\ resume\ later}}
\DoxyCodeLine{00405\ \ \ \textcolor{comment}{//\ where\ we\ left\ off.}}
\DoxyCodeLine{00406\ \ \ State\ \_state;}
\DoxyCodeLine{00407\ \ \ State\ \_done\_state;}
\DoxyCodeLine{00408\ \ \ \textcolor{keywordtype}{double}\ \_started\_connecting\_time;}
\DoxyCodeLine{00409\ \ \ \textcolor{keywordtype}{double}\ \_sent\_request\_time;}
\DoxyCodeLine{00410\ \ \ \textcolor{keywordtype}{bool}\ \_started\_download;}
\DoxyCodeLine{00411\ \ \ std::string\ \_proxy\_header;}
\DoxyCodeLine{00412\ \ \ std::string\ \_proxy\_request\_text;}
\DoxyCodeLine{00413\ \ \ std::string\ \_request\_text;}
\DoxyCodeLine{00414\ \ \ std::string\ \_working\_get;}
\DoxyCodeLine{00415\ \ \ \textcolor{keywordtype}{size\_t}\ \_sent\_so\_far;}
\DoxyCodeLine{00416\ \ \ std::string\ \_current\_field\_name;}
\DoxyCodeLine{00417\ \ \ std::string\ \_current\_field\_value;}
\DoxyCodeLine{00418\ \ \ ISocketStream\ *\_body\_socket\_stream;}
\DoxyCodeLine{00419\ \ \ std::istream\ *\_body\_stream;}
\DoxyCodeLine{00420\ \ \ \textcolor{keywordtype}{bool}\ \_owns\_body\_stream;}
\DoxyCodeLine{00421\ \ \ BIO\ *\_sbio;}
\DoxyCodeLine{00422\ \ \ std::string\ \_cipher\_list;}
\DoxyCodeLine{00423\ \ \ \mbox{\hyperlink{classpvector}{pvector<URLSpec>}}\ \_redirect\_trail;}
\DoxyCodeLine{00424\ \ \ \textcolor{keywordtype}{int}\ \_last\_status\_code;}
\DoxyCodeLine{00425\ \ \ \textcolor{keywordtype}{double}\ \_last\_run\_time;}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \textcolor{comment}{//\ RAU\ we\ find\ that\ we\ may\ need\ a\ little\ more\ time\ for\ the\ ssl\ handshake}}
\DoxyCodeLine{00428\ \ \ \textcolor{comment}{//\ when\ the\ phase\ files\ are\ downloading}}
\DoxyCodeLine{00429\ \ \ \textcolor{keywordtype}{double}\ \_extra\_ssl\_handshake\_time;}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00432\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00434\ \ \ \}}
\DoxyCodeLine{00435\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ force\_init\_type()\ \{init\_type();\ \textcolor{keywordflow}{return}\ get\_class\_type();\}}
\DoxyCodeLine{00436\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00438\ \ \ \}}
\DoxyCodeLine{00439\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00440\ \ \ \ \ TypedReferenceCount::init\_type();}
\DoxyCodeLine{00441\ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}HTTPChannel"{}},}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TypedReferenceCount::get\_class\_type());}
\DoxyCodeLine{00443\ \ \ \}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00446\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00447\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }ChunkedStreamBuf;}
\DoxyCodeLine{00448\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }IdentityStreamBuf;}
\DoxyCodeLine{00449\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }HTTPClient;}
\DoxyCodeLine{00450\ \};}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ HTTPChannel::State\ state);}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \textcolor{preprocessor}{\#include\ "{}httpChannel.I"{}}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \textcolor{preprocessor}{\#elif\ defined(\_\_EMSCRIPTEN\_\_)}}
\DoxyCodeLine{00457\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{httpChannel__emscripten_8h}{httpChannel\_emscripten.h}}"{}}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_OPENSSL}}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

\doxysection{win\+Stats\+Chart\+Menu.\+cxx}
\hypertarget{winStatsChartMenu_8cxx_source}{}\label{winStatsChartMenu_8cxx_source}\index{pandatool/src/win-\/stats/winStatsChartMenu.cxx@{pandatool/src/win-\/stats/winStatsChartMenu.cxx}}
\mbox{\hyperlink{winStatsChartMenu_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsChartMenu_8h}{winStatsChartMenu.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMenuId_8h}{winStatsMenuId.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMonitor_8h}{winStatsMonitor.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00021\ WinStatsChartMenu::}
\DoxyCodeLine{00022\ WinStatsChartMenu(\mbox{\hyperlink{classWinStatsMonitor}{WinStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index)\ :}
\DoxyCodeLine{00023\ \ \ \_monitor(monitor),}
\DoxyCodeLine{00024\ \ \ \_thread\_index(thread\_index)}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \_menu\ =\ CreatePopupMenu();}
\DoxyCodeLine{00027\ \ \ do\_update();}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00033\ WinStatsChartMenu::}
\DoxyCodeLine{00034\ \string~WinStatsChartMenu()\ \{}
\DoxyCodeLine{00035\ \ \ DestroyMenu(\_menu);}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00041\ HMENU\ \mbox{\hyperlink{classWinStatsChartMenu_aab5362fa2100093d0373bbc618cdc4ae}{WinStatsChartMenu::}}}
\DoxyCodeLine{00042\ \mbox{\hyperlink{classWinStatsChartMenu_aab5362fa2100093d0373bbc618cdc4ae}{get\_menu\_handle}}()\ \{}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{return}\ \_menu;}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00049\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsChartMenu_a1487f23f3e7a7cdae8c010c17f3df8e8}{WinStatsChartMenu::}}}
\DoxyCodeLine{00050\ \mbox{\hyperlink{classWinStatsChartMenu_a1487f23f3e7a7cdae8c010c17f3df8e8}{add\_to\_menu\_bar}}(HMENU\ menu\_bar,\ \textcolor{keywordtype}{int}\ before\_menu\_id)\ \{}
\DoxyCodeLine{00051\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00052\ \ \ std::string\ thread\_name;}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ A\ special\ case\ for\ the\ main\ thread.}}
\DoxyCodeLine{00055\ \ \ \ \ thread\_name\ =\ \textcolor{stringliteral}{"{}Graphs"{}};}
\DoxyCodeLine{00056\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00057\ \ \ \ \ thread\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a5b905293fa940d70742612a4ec5a87f6}{get\_thread\_name}}(\_thread\_index);}
\DoxyCodeLine{00058\ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00061\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00062\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_SUBMENU\ |\ MIIM\_ID;}
\DoxyCodeLine{00065\ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00066\ \ \ mii.wID\ =\ 1000\ |\ \_thread\_index;}
\DoxyCodeLine{00067\ \ \ mii.hSubMenu\ =\ \_menu;}
\DoxyCodeLine{00068\ \ \ mii.dwTypeData\ =\ (\textcolor{keywordtype}{char}\ *)thread\_name.c\_str();}
\DoxyCodeLine{00069\ \ \ InsertMenuItem(menu\_bar,\ before\_menu\_id,\ FALSE,\ \&mii);}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{void}\ WinStatsChartMenu::}
\DoxyCodeLine{00076\ remove\_from\_menu\_bar(HMENU\ menu\_bar)\ \{}
\DoxyCodeLine{00077\ \ \ RemoveMenu(menu\_bar,\ 1000\ |\ \_thread\_index,\ MF\_BYCOMMAND);}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00084\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsChartMenu_a594534eb1f632f9531be4e770ffd55b5}{WinStatsChartMenu::}}}
\DoxyCodeLine{00085\ \mbox{\hyperlink{classWinStatsChartMenu_a594534eb1f632f9531be4e770ffd55b5}{check\_update}}()\ \{}
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{if}\ (view.get\_level\_index()\ !=\ \_last\_level\_index)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{classWinStatsChartMenu_ac9bb55f99f9265f6520bbc91c80a2839}{do\_update}}();}
\DoxyCodeLine{00089\ \ \ \}}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00095\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsChartMenu_ac9bb55f99f9265f6520bbc91c80a2839}{WinStatsChartMenu::}}}
\DoxyCodeLine{00096\ \mbox{\hyperlink{classWinStatsChartMenu_ac9bb55f99f9265f6520bbc91c80a2839}{do\_update}}()\ \{}
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00098\ \ \ \_last\_level\_index\ =\ view.get\_level\_index();}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ First,\ remove\ all\ of\ the\ old\ entries\ from\ the\ menu.}}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordtype}{int}\ num\_items\ =\ GetMenuItemCount(\_menu);}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ num\_items\ -\/\ 1;\ i\ >=\ 0;\ i-\/-\/)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ DeleteMenu(\_menu,\ i,\ MF\_BYPOSITION);}
\DoxyCodeLine{00104\ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ Now\ rebuild\ the\ menu\ with\ the\ new\ set\ of\ entries.}}
\DoxyCodeLine{00107\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00108\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00109\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ Timeline\ goes\ first.}}
\DoxyCodeLine{00113\ \ \ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ menu\_def(\_thread\_index,\ -\/1,\ WinStatsMonitor::CT\_timeline,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00119\ \ \ \ \ \ \ mii.wID\ =\ menu\_id;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Timeline"{}};}
\DoxyCodeLine{00121\ \ \ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ And\ the\ piano\ roll\ (even\ though\ it's\ not\ very\ useful\ nowadays)}}
\DoxyCodeLine{00125\ \ \ \ \ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ menu\_def(\_thread\_index,\ -\/1,\ WinStatsMonitor::CT\_piano\_roll,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ mii.wID\ =\ menu\_id;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Piano\ Roll"{}};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ mii.fMask\ =\ MIIM\_FTYPE;}
\DoxyCodeLine{00137\ \ \ \ \ mii.fType\ =\ MFT\_SEPARATOR;}
\DoxyCodeLine{00138\ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00139\ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{comment}{//\ The\ menu\ item(s)\ for\ the\ thread's\ frame\ time\ goes\ second.}}
\DoxyCodeLine{00142\ \ \ add\_view(\_menu,\ view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{bool}\ needs\_separator\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \textcolor{comment}{//\ And\ then\ the\ menu\ item(s)\ for\ each\ of\ the\ level\ values.}}
\DoxyCodeLine{00147\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{int}\ num\_toplevel\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a86cbac0fa6c4d9c66ff2d24f001c3148}{get\_num\_toplevel\_collectors}}();}
\DoxyCodeLine{00149\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ tc\ =\ 0;\ tc\ <\ num\_toplevel\_collectors;\ tc++)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_abce44a655ded672baee4aa5b2463169f}{get\_toplevel\_collector}}(tc);}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector)\ \&\&}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_acb68b1772c25759dfffd96795a1da39d}{get\_collector\_has\_level}}(collector,\ \_thread\_index))\ \{}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ put\ a\ separator\ between\ the\ above\ frame\ collector\ and\ the\ first}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \textcolor{comment}{//\ level\ collector.}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (needs\_separator)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ mii.fMask\ =\ MIIM\_FTYPE;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ mii.fType\ =\ MFT\_SEPARATOR;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ needs\_separator\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&level\_view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ \_thread\_index);}
\DoxyCodeLine{00165\ \ \ \ \ \ \ add\_view(\_menu,\ level\_view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}(),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{//\ For\ the\ main\ thread\ menu,\ also\ some\ options\ relating\ to\ all\ graph\ windows.}}
\DoxyCodeLine{00170\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ mii.fMask\ =\ MIIM\_FTYPE;}
\DoxyCodeLine{00172\ \ \ \ \ mii.fType\ =\ MFT\_SEPARATOR;}
\DoxyCodeLine{00173\ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00176\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00177\ \ \ \ \ mii.wID\ =\ MI\_graphs\_close\_all;}
\DoxyCodeLine{00178\ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Close\ All\ Graphs"{}};}
\DoxyCodeLine{00179\ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00182\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00183\ \ \ \ \ mii.wID\ =\ MI\_graphs\_reopen\_default;}
\DoxyCodeLine{00184\ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Reopen\ Default\ Graphs"{}};}
\DoxyCodeLine{00185\ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00188\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00189\ \ \ \ \ mii.wID\ =\ MI\_graphs\_save\_default;}
\DoxyCodeLine{00190\ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Save\ Current\ Layout\ as\ Default"{}};}
\DoxyCodeLine{00191\ \ \ \ \ InsertMenuItem(\_menu,\ GetMenuItemCount(\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00199\ \textcolor{keywordtype}{void}\ WinStatsChartMenu::}
\DoxyCodeLine{00200\ add\_view(HMENU\ parent\_menu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level,\ \textcolor{keywordtype}{bool}\ show\_level)\ \{}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{int}\ collector\ =\ view\_level-\/>get\_collector();}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00204\ \ \ std::string\ collector\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_ae5c6475096900ee0f29eff74e6919b31}{get\_collector\_name}}(collector);}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ MENUITEMINFO\ mii;}
\DoxyCodeLine{00207\ \ \ memset(\&mii,\ 0,\ \textcolor{keyword}{sizeof}(mii));}
\DoxyCodeLine{00208\ \ \ mii.cbSize\ =\ \textcolor{keyword}{sizeof}(mii);}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{if}\ (show\_level\ \&\&\ num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{//\ For\ a\ level\ collector\ without\ children,\ no\ point\ in\ making\ a\ submenu.}}
\DoxyCodeLine{00213\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ menu\_def(\_thread\_index,\ collector,\ WinStatsMonitor::CT\_strip\_chart,\ show\_level);}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00217\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00218\ \ \ \ \ mii.wID\ =\ menu\_id;}
\DoxyCodeLine{00219\ \ \ \ \ mii.dwTypeData\ =\ (\textcolor{keywordtype}{char}\ *)collector\_name.c\_str();}
\DoxyCodeLine{00220\ \ \ \ \ InsertMenuItem(parent\_menu,\ GetMenuItemCount(parent\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00222\ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ HMENU\ menu;}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{if}\ (!show\_level\ \&\&\ collector\ ==\ 0\ \&\&\ num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{comment}{//\ Root\ collector\ without\ children,\ just\ add\ the\ options\ directly\ to\ the}}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{comment}{//\ parent\ menu.}}
\DoxyCodeLine{00228\ \ \ \ \ menu\ =\ parent\_menu;}
\DoxyCodeLine{00229\ \ \ \}}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ Create\ a\ submenu.}}
\DoxyCodeLine{00232\ \ \ \ \ menu\ =\ CreatePopupMenu();}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_SUBMENU;}
\DoxyCodeLine{00235\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00236\ \ \ \ \ mii.hSubMenu\ =\ menu;}
\DoxyCodeLine{00237\ \ \ \ \ mii.dwTypeData\ =\ (\textcolor{keywordtype}{char}\ *)collector\_name.c\_str();}
\DoxyCodeLine{00238\ \ \ \ \ InsertMenuItem(parent\_menu,\ GetMenuItemCount(parent\_menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00239\ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \{}
\DoxyCodeLine{00242\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ menu\_def(\_thread\_index,\ collector,\ WinStatsMonitor::CT\_strip\_chart,\ show\_level);}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00246\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00247\ \ \ \ \ mii.wID\ =\ menu\_id;}
\DoxyCodeLine{00248\ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}};}
\DoxyCodeLine{00249\ \ \ \ \ InsertMenuItem(menu,\ GetMenuItemCount(menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00250\ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{if}\ (!show\_level)\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\ ==\ 0\ \&\&\ num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ collector\ =\ -\/1;}
\DoxyCodeLine{00255\ \ \ \ \ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{classWinStatsMonitor_1_1MenuDef}{WinStatsMonitor::MenuDef}}\ menu\_def(\_thread\_index,\ collector,\ WinStatsMonitor::CT\_flame\_graph);}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{int}\ menu\_id\ =\ \_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a1378100509a601276660070eeb236ad5}{get\_menu\_id}}(menu\_def);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ mii.fMask\ =\ MIIM\_STRING\ |\ MIIM\_FTYPE\ |\ MIIM\_ID;}
\DoxyCodeLine{00261\ \ \ \ \ mii.fType\ =\ MFT\_STRING;}
\DoxyCodeLine{00262\ \ \ \ \ mii.wID\ =\ menu\_id;}
\DoxyCodeLine{00263\ \ \ \ \ mii.dwTypeData\ =\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}};}
\DoxyCodeLine{00264\ \ \ \ \ InsertMenuItem(menu,\ GetMenuItemCount(menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00265\ \ \ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \textcolor{keywordflow}{if}\ (num\_children\ >\ 0)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ mii.fMask\ =\ MIIM\_FTYPE;}
\DoxyCodeLine{00269\ \ \ \ \ mii.fType\ =\ MFT\_SEPARATOR;}
\DoxyCodeLine{00270\ \ \ \ \ InsertMenuItem(menu,\ GetMenuItemCount(menu),\ TRUE,\ \&mii);}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{comment}{//\ Reverse\ the\ order\ since\ the\ menus\ are\ listed\ from\ the\ top\ down;\ we\ want}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{comment}{//\ to\ be\ visually\ consistent\ with\ the\ graphs,\ which\ list\ these\ labels\ from}}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ the\ bottom\ up.}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ num\_children\ -\/\ 1;\ c\ >=\ 0;\ c-\/-\/)\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ add\_view(menu,\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c),\ show\_level);}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \}}
\DoxyCodeLine{00279\ \}}

\end{DoxyCode}

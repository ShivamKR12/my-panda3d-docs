\doxysection{vector\+\_\+src.\+h}
\hypertarget{vector__src_8h_source}{}\label{vector__src_8h_source}\index{dtool/src/dtoolutil/vector\_src.h@{dtool/src/dtoolutil/vector\_src.h}}
\mbox{\hyperlink{vector__src_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{comment}{/*}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ This\ file\ defines\ the\ interface\ to\ declare\ and\ export\ from\ the\ DLL\ an\ STL}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ vector\ of\ some\ type.\ \ To\ use\ this\ file\ you\ must\ \#define\ a\ number\ of\ symbols}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ and\ then\ \#include\ it\ from\ a\ .h\ file.\ \ You\ also\ must\ do\ the\ same\ thing\ with}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ vector\_something\_src.cxx\ from\ a\ .cxx\ file.\ \ This\ is\ necessary\ because\ of}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ the\ complexity\ involved\ in\ exporting\ a\ vector\ class\ from\ a\ DLL.\ \ If\ we\ are}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ using\ the\ Dinkumware\ STL\ implementation,\ it\ is\ even\ more\ complex.\ \ However,}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ all\ this\ complexity\ is\ only\ needed\ to\ support\ Windows\ builds;\ Unix\ shared}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ libraries\ are\ able\ to\ export\ symbols\ (including\ templates)\ without\ any}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ *\ special\ syntax.}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{/*}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ *\ The\ following\ variables\ should\ be\ defined\ prior\ to\ including\ this\ file:}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ *\ EXPCL\ -\/\ the\ appropriate\ EXPCL\_*\ symbol\ for\ this\ DLL.\ EXPTP\ -\/\ the}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ *\ appropriate\ EXPTP\_*\ symbol\ for\ this\ DLL.\ TYPE\ -\/\ the\ type\ of\ thing\ we\ are}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ *\ building\ a\ vector\ on.\ \ NAME\ -\/\ The\ name\ of\ the\ resulting\ vector\ typedef,}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ *\ e.g.\ \ vector\_int.\ \ They\ will\ automatically\ be\ undefined\ at\ the\ end\ of\ the}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ file.}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pvector_8h}{pvector.h}}"{}}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ !defined(CPPPARSER)}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\ \ \#ifdef\ HAVE\_DINKUM}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ With\ the\ Dinkum\ library,\ we\ must\ first\ export\ the\ base\ class,\ \_Vector\_val.}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ \ \ \#define\ VV\_BASE\ std::\_Vector\_val<TYPE,\ pallocator\_array<TYPE>\ >}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#pragma\ warning\ (disable\ :\ 4231)}}
\DoxyCodeLine{00043\ EXPORT\_TEMPLATE\_CLASS(EXPCL,\ EXPTP,\ VV\_BASE)}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{preprocessor}{\#undef\ VV\_BASE}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{comment}{//\ Now\ we\ can\ export\ the\ vector\ class.}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#pragma\ warning\ (disable\ :\ 4231)}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#ifndef\ USE\_STL\_ALLOCATOR}}
\DoxyCodeLine{00051\ EXPORT\_TEMPLATE\_CLASS(EXPCL,\ EXPTP,\ std::vector<TYPE>)}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#define\ STD\_VECTOR\ std::vector<TYPE,\ pallocator\_array<TYPE>\ >}}
\DoxyCodeLine{00054\ EXPORT\_TEMPLATE\_CLASS(EXPCL,\ EXPTP,\ STD\_VECTOR)}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#undef\ STD\_VECTOR}}
\DoxyCodeLine{00056\ EXPORT\_TEMPLATE\_CLASS(EXPCL,\ EXPTP,\ \mbox{\hyperlink{classpvector}{pvector<TYPE>}})}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{comment}{//\ Now\ make\ a\ typedef\ for\ the\ vector.}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#ifndef\ USE\_STL\_ALLOCATOR}}
\DoxyCodeLine{00064\ \textcolor{keyword}{typedef}\ std::vector<TYPE>\ NAME;}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00066\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<TYPE>}}\ NAME;}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{comment}{//\ Finally,\ we\ must\ define\ a\ non-\/inline\ function\ that\ performs\ the\ insert}}
\DoxyCodeLine{00070\ \ \ \textcolor{comment}{//\ operation\ given\ a\ range\ of\ pointers.\ \ We\ do\ this\ because\ the\ Dinkum\ STL}}
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ implementation\ uses\ member\ templates\ to\ handle\ this,\ but\ we\ cannot\ export}}
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ the\ member\ templates\ from\ the\ DLL.}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{comment}{/*}}
\DoxyCodeLine{00075\ \textcolor{comment}{extern\ EXPCL\ void}}
\DoxyCodeLine{00076\ \textcolor{comment}{insert\_into\_vector(NAME\ \&vec,\ NAME::iterator\ where,}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ TYPE\ *begin,\ const\ TYPE\ *end);}}
\DoxyCodeLine{00078\ \textcolor{comment}{*/}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#undef\ EXPCL}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#undef\ EXPTP}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#undef\ TYPE}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#undef\ NAME}}

\end{DoxyCode}

\doxysection{egg\+Character\+Filter.\+cxx}
\hypertarget{eggCharacterFilter_8cxx_source}{}\label{eggCharacterFilter_8cxx_source}\index{pandatool/src/eggcharbase/eggCharacterFilter.cxx@{pandatool/src/eggcharbase/eggCharacterFilter.cxx}}
\mbox{\hyperlink{eggCharacterFilter_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterFilter_8h}{eggCharacterFilter.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterCollection_8h}{eggCharacterCollection.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterData_8h}{eggCharacterData.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ EggCharacterFilter::}
\DoxyCodeLine{00023\ EggCharacterFilter()\ :\ \mbox{\hyperlink{classEggMultiFilter}{EggMultiFilter}}(false)\ \{}
\DoxyCodeLine{00024\ \ \ \_collection\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \_force\_initial\_rest\_frame\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00027\ \}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00032\ EggCharacterFilter::}
\DoxyCodeLine{00033\ \string~EggCharacterFilter()\ \{}
\DoxyCodeLine{00034\ \ \ \textcolor{keyword}{delete}\ \_collection;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00040\ \textcolor{keywordtype}{void}\ EggCharacterFilter::}
\DoxyCodeLine{00041\ add\_fixrest\_option()\ \{}
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{classProgramBase_a8be57a7c862cd8c30b5950e9ee9e037b}{add\_option}}}
\DoxyCodeLine{00043\ \ \ \ \ (\textcolor{stringliteral}{"{}fixrest"{}},\ \textcolor{stringliteral}{"{}"{}},\ 30,}
\DoxyCodeLine{00044\ \ \ \ \ \ \textcolor{stringliteral}{"{}Specify\ this\ to\ force\ all\ the\ initial\ rest\ frames\ of\ the\ various\ "{}}}
\DoxyCodeLine{00045\ \ \ \ \ \ \textcolor{stringliteral}{"{}model\ files\ to\ the\ same\ value\ as\ the\ first\ model\ specified.\ \ This\ "{}}}
\DoxyCodeLine{00046\ \ \ \ \ \ \textcolor{stringliteral}{"{}is\ a\ fairly\ drastic\ way\ to\ repair\ models\ whose\ initial\ rest\ frame\ "{}}}
\DoxyCodeLine{00047\ \ \ \ \ \ \textcolor{stringliteral}{"{}values\ are\ completely\ bogus,\ but\ should\ not\ be\ performed\ when\ the\ "{}}}
\DoxyCodeLine{00048\ \ \ \ \ \ \textcolor{stringliteral}{"{}input\ models\ are\ correct."{}},}
\DoxyCodeLine{00049\ \ \ \ \ \ \&\mbox{\hyperlink{classProgramBase_adee8119b08abbc9fe0645d79e1a6031b}{EggCharacterFilter::dispatch\_none}},\ \&\_force\_initial\_rest\_frame);}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00056\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEggCharacterFilter_a593cfd76bf2b36b5c42fc74c1749de58}{EggCharacterFilter::}}}
\DoxyCodeLine{00057\ \mbox{\hyperlink{classEggCharacterFilter_a593cfd76bf2b36b5c42fc74c1749de58}{post\_command\_line}}()\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordflow}{if}\ (\_collection\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \_collection\ =\ \mbox{\hyperlink{classEggCharacterFilter_a2d4e7c2f1a8cfb95a125e4f197311897}{make\_collection}}();}
\DoxyCodeLine{00060\ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classEggMultiFilter_acc6c08794b6ba1cd46b431548ecdf82c}{EggMultiFilter::post\_command\_line}}())\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ Eggs::iterator\ ei;}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{for}\ (ei\ =\ \_eggs.begin();\ ei\ !=\ \_eggs.end();\ ++ei)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classEggData}{EggData}}\ *data\ =\ (*ei);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_collection-\/>\mbox{\hyperlink{classEggCharacterCollection_a463c75bd1fa7dafd1917c56021c8b569}{add\_egg}}(data)\ <\ 0)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ nout\ <<\ data-\/>get\_egg\_filename().get\_basename()}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ does\ not\ contain\ a\ character\ model\ or\ animation\ channel.\(\backslash\)n"{}};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \_collection-\/>\mbox{\hyperlink{classEggCharacterCollection_a7566f919cdce093d7dcc7d6fbbb923b8}{check\_errors}}(nout,\ \_force\_initial\_rest\_frame);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00087\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggCharacterFilter_af82d11b2b1f05f74c0cd999e7f7acac9}{EggCharacterFilter::}}}
\DoxyCodeLine{00088\ \mbox{\hyperlink{classEggCharacterFilter_af82d11b2b1f05f74c0cd999e7f7acac9}{write\_eggs}}()\ \{}
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ Optimize\ (that\ is,\ collapse\ redudant\ nodes)\ in\ all\ of\ the\ characters'}}
\DoxyCodeLine{00090\ \ \ \textcolor{comment}{//\ joint\ tables\ before\ writing\ them\ out.}}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordtype}{int}\ num\_characters\ =\ \_collection-\/>get\_num\_characters();}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_characters;\ i++)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ \_collection-\/>get\_character(i);}
\DoxyCodeLine{00094\ \ \ \ \ char\_data-\/>get\_root\_joint()-\/>\mbox{\hyperlink{classEggJointData_a385dc1267d3145dce95aeb6e53d1f4e0}{optimize}}();}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{classEggMultiFilter_ab81e770d60a7b293bdf44a289adf7ed1}{EggMultiFilter::write\_eggs}}();}
\DoxyCodeLine{00098\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00105\ \mbox{\hyperlink{classEggCharacterCollection}{EggCharacterCollection}}\ *\mbox{\hyperlink{classEggCharacterFilter_a2d4e7c2f1a8cfb95a125e4f197311897}{EggCharacterFilter::}}}
\DoxyCodeLine{00106\ \mbox{\hyperlink{classEggCharacterFilter_a2d4e7c2f1a8cfb95a125e4f197311897}{make\_collection}}()\ \{}
\DoxyCodeLine{00107\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggCharacterCollection}{EggCharacterCollection}};}
\DoxyCodeLine{00108\ \}}

\end{DoxyCode}

\doxysection{texture\+Peeker.\+cxx}
\hypertarget{texturePeeker_8cxx_source}{}\label{texturePeeker_8cxx_source}\index{panda/src/gobj/texturePeeker.cxx@{panda/src/gobj/texturePeeker.cxx}}
\mbox{\hyperlink{texturePeeker_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{texturePeeker_8h}{texturePeeker.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_unsigned\_byte\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00018\ \ \ \textcolor{keywordflow}{return}\ *p++;}
\DoxyCodeLine{00019\ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_signed\_byte\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00022\ \ \ \textcolor{keywordflow}{return}\ *(\textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{char}\ *)p++;}
\DoxyCodeLine{00023\ \}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_unsigned\_short\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00026\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ us;}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ uc[2];}
\DoxyCodeLine{00029\ \ \ \}\ v;}
\DoxyCodeLine{00030\ \ \ v.uc[0]\ =\ (*p++);}
\DoxyCodeLine{00031\ \ \ v.uc[1]\ =\ (*p++);}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{double})v.us;}
\DoxyCodeLine{00033\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_signed\_short\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{short}\ ss;}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ uc[2];}
\DoxyCodeLine{00039\ \ \ \}\ v;}
\DoxyCodeLine{00040\ \ \ v.uc[0]\ =\ (*p++);}
\DoxyCodeLine{00041\ \ \ v.uc[1]\ =\ (*p++);}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{double})v.ss;}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_unsigned\_int\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00046\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ui;}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ uc[4];}
\DoxyCodeLine{00049\ \ \ \}\ v;}
\DoxyCodeLine{00050\ \ \ v.uc[0]\ =\ (*p++);}
\DoxyCodeLine{00051\ \ \ v.uc[1]\ =\ (*p++);}
\DoxyCodeLine{00052\ \ \ v.uc[2]\ =\ (*p++);}
\DoxyCodeLine{00053\ \ \ v.uc[3]\ =\ (*p++);}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{double})v.ui;}
\DoxyCodeLine{00055\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_signed\_int\_i(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p)\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{int}\ si;}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ uc[4];}
\DoxyCodeLine{00061\ \ \ \}\ v;}
\DoxyCodeLine{00062\ \ \ v.uc[0]\ =\ (*p++);}
\DoxyCodeLine{00063\ \ \ v.uc[1]\ =\ (*p++);}
\DoxyCodeLine{00064\ \ \ v.uc[2]\ =\ (*p++);}
\DoxyCodeLine{00065\ \ \ v.uc[3]\ =\ (*p++);}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{double})v.si;}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00075\ TexturePeeker::}
\DoxyCodeLine{00076\ TexturePeeker(\mbox{\hyperlink{classTexture}{Texture}}\ *tex,\ \mbox{\hyperlink{classTexture_1_1CData}{Texture::CData}}\ *cdata)\ \{}
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ Simple\ ram\ images\ are\ possible\ if\ it\ is\ a\ 2-\/d\ texture.}}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordflow}{if}\ (tex-\/>\mbox{\hyperlink{classTexture_a93353bf248b8cf6ddb72909ad514f689}{do\_has\_ram\_image}}(cdata)\ \&\&\ cdata-\/>\_ram\_image\_compression\ ==\ Texture::CM\_off)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ regular\ RAM\ image\ if\ it\ is\ available.}}
\DoxyCodeLine{00080\ \ \ \ \ \_image\ =\ tex-\/>do\_get\_ram\_image(cdata);}
\DoxyCodeLine{00081\ \ \ \ \ \_x\_size\ =\ cdata-\/>\_x\_size;}
\DoxyCodeLine{00082\ \ \ \ \ \_y\_size\ =\ cdata-\/>\_y\_size;}
\DoxyCodeLine{00083\ \ \ \ \ \_z\_size\ =\ cdata-\/>\_z\_size;}
\DoxyCodeLine{00084\ \ \ \ \ \_pixel\_width\ =\ cdata-\/>\_component\_width\ *\ cdata-\/>\_num\_components;}
\DoxyCodeLine{00085\ \ \ \ \ \_format\ =\ cdata-\/>\_format;}
\DoxyCodeLine{00086\ \ \ \ \ \_component\_type\ =\ cdata-\/>\_component\_type;}
\DoxyCodeLine{00087\ \ \ \}}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!cdata-\/>\_simple\_ram\_image.\_image.empty())\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ simple\ RAM\ image\ if\ *that*\ is\ available.}}
\DoxyCodeLine{00090\ \ \ \ \ \_image\ =\ cdata-\/>\_simple\_ram\_image.\_image;}
\DoxyCodeLine{00091\ \ \ \ \ \_x\_size\ =\ cdata-\/>\_simple\_x\_size;}
\DoxyCodeLine{00092\ \ \ \ \ \_y\_size\ =\ cdata-\/>\_simple\_y\_size;}
\DoxyCodeLine{00093\ \ \ \ \ \_z\_size\ =\ 1;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \_pixel\_width\ =\ 4;}
\DoxyCodeLine{00096\ \ \ \ \ \_format\ =\ Texture::F\_rgba;}
\DoxyCodeLine{00097\ \ \ \ \ \_component\_type\ =\ Texture::T\_unsigned\_byte;}
\DoxyCodeLine{00098\ \ \ \}}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Failing\ that,\ reload\ and\ get\ the\ uncompressed\ RAM\ image.}}
\DoxyCodeLine{00101\ \ \ \ \ \_image\ =\ tex-\/>do\_get\_uncompressed\_ram\_image(cdata);}
\DoxyCodeLine{00102\ \ \ \ \ \_x\_size\ =\ cdata-\/>\_x\_size;}
\DoxyCodeLine{00103\ \ \ \ \ \_y\_size\ =\ cdata-\/>\_y\_size;}
\DoxyCodeLine{00104\ \ \ \ \ \_z\_size\ =\ cdata-\/>\_z\_size;}
\DoxyCodeLine{00105\ \ \ \ \ \_pixel\_width\ =\ cdata-\/>\_component\_width\ *\ cdata-\/>\_num\_components;}
\DoxyCodeLine{00106\ \ \ \ \ \_format\ =\ cdata-\/>\_format;}
\DoxyCodeLine{00107\ \ \ \ \ \_component\_type\ =\ cdata-\/>\_component\_type;}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{if}\ (\_image.is\_null())\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classTexture_ab79a121187081015be45d321509da170}{Texture::is\_integer}}(\_format))\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_component\_type)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_byte:}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \_get\_component\ =\ get\_unsigned\_byte\_i;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_short:}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \_get\_component\ =\ get\_unsigned\_short\_i;}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_int:}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \_get\_component\ =\ get\_unsigned\_int\_i;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_byte:}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \_get\_component\ =\ get\_signed\_byte\_i;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_short:}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \_get\_component\ =\ get\_signed\_short\_i;}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_int:}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \_get\_component\ =\ get\_signed\_int\_i;}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \textcolor{comment}{//\ Not\ supported.}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \_image.clear();}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \}}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_component\_type)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_byte:}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_unsigned\_byte;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_short:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_unsigned\_short;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_int:}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_unsigned\_int;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_float:}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_float;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_half\_float:}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_half\_float;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordflow}{case}\ Texture::T\_unsigned\_int\_24\_8:}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \_get\_component\ =\ Texture::get\_unsigned\_int\_24;}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \textcolor{comment}{//\ Not\ supported.}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \_image.clear();}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordflow}{switch}\ (\_format)\ \{}
\DoxyCodeLine{00180\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_depth\_stencil:}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_depth\_component:}
\DoxyCodeLine{00182\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_depth\_component16:}
\DoxyCodeLine{00183\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_depth\_component24:}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_depth\_component32:}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_red:}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_r16:}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_r32:}
\DoxyCodeLine{00188\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_r32i:}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_r16i:}
\DoxyCodeLine{00190\ \ \ \ \ \_get\_texel\ =\ get\_texel\_r;}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_green:}
\DoxyCodeLine{00194\ \ \ \ \ \_get\_texel\ =\ get\_texel\_g;}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_blue:}
\DoxyCodeLine{00198\ \ \ \ \ \_get\_texel\ =\ get\_texel\_b;}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_alpha:}
\DoxyCodeLine{00202\ \ \ \ \ \_get\_texel\ =\ get\_texel\_a;}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_luminance:}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_sluminance:}
\DoxyCodeLine{00207\ \ \ \ \ \_get\_texel\ =\ get\_texel\_l;}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_luminance\_alpha:}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_sluminance\_alpha:}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_luminance\_alphamask:}
\DoxyCodeLine{00213\ \ \ \ \ \_get\_texel\ =\ get\_texel\_la;}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg:}
\DoxyCodeLine{00217\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg8i:}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg16:}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg16i:}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg32:}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rg32i:}
\DoxyCodeLine{00222\ \ \ \ \ \_get\_texel\ =\ get\_texel\_rg;}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb:}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb5:}
\DoxyCodeLine{00227\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb8:}
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb8i:}
\DoxyCodeLine{00229\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb12:}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb16:}
\DoxyCodeLine{00231\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb16i:}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb332:}
\DoxyCodeLine{00233\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_r11\_g11\_b10:}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb9\_e5:}
\DoxyCodeLine{00235\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb32:}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb32i:}
\DoxyCodeLine{00237\ \ \ \ \ \_get\_texel\ =\ get\_texel\_rgb;}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba:}
\DoxyCodeLine{00241\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgbm:}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba4:}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba5:}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba8:}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba8i:}
\DoxyCodeLine{00246\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba12:}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba16:}
\DoxyCodeLine{00248\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba16i:}
\DoxyCodeLine{00249\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba32:}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgba32i:}
\DoxyCodeLine{00251\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_rgb10\_a2:}
\DoxyCodeLine{00252\ \ \ \ \ \_get\_texel\ =\ get\_texel\_rgba;}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_srgb:}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_component\_type\ ==\ Texture::T\_unsigned\_byte)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \_get\_texel\ =\ get\_texel\_srgb;}
\DoxyCodeLine{00258\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00259\ \ \ \ \ \ \ gobj\_cat.error()}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}sRGB\ texture\ should\ have\ component\ type\ T\_unsigned\_byte\(\backslash\)n"{}};}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \textcolor{keywordflow}{case}\ Texture::F\_srgb\_alpha:}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_component\_type\ ==\ Texture::T\_unsigned\_byte)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \_get\_texel\ =\ get\_texel\_srgba;}
\DoxyCodeLine{00267\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ gobj\_cat.error()}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}sRGB\ texture\ should\ have\ component\ type\ T\_unsigned\_byte\(\backslash\)n"{}};}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Not\ supported.}}
\DoxyCodeLine{00275\ \ \ \ \ gobj\_cat.error()\ <<\ \textcolor{stringliteral}{"{}Unsupported\ texture\ peeker\ format:\ "{}}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ <<\ \mbox{\hyperlink{classTexture_af08a4893d78637835f8ea166212f9a78}{Texture::format\_format}}(\_format)\ <<\ std::endl;}
\DoxyCodeLine{00277\ \ \ \ \ \_image.clear();}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00279\ \ \ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \_is\_cube\ =\ (cdata-\/>\_texture\_type\ ==\ Texture::TT\_cube\_map\ ||}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cdata-\/>\_texture\_type\ ==\ Texture::TT\_cube\_map\_array);}
\DoxyCodeLine{00283\ \}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00293\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_a6a566b07202b33d8f246579ea2ed9589}{TexturePeeker::}}}
\DoxyCodeLine{00294\ \mbox{\hyperlink{classTexturePeeker_a6a566b07202b33d8f246579ea2ed9589}{lookup}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ u,\ PN\_stdfloat\ v)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00295\ \ \ \textcolor{keywordflow}{if}\ (!\_is\_cube)\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ int((u\ -\/\ cfloor(u))\ *\ (PN\_stdfloat)\_x\_size)\ \%\ \_x\_size;}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ int((v\ -\/\ cfloor(v))\ *\ (PN\_stdfloat)\_y\_size)\ \%\ \_y\_size;}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(\mbox{\hyperlink{structcolor}{color}},\ x,\ y);}
\DoxyCodeLine{00299\ \ \ \}}
\DoxyCodeLine{00300\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_a6a566b07202b33d8f246579ea2ed9589}{lookup}}(\mbox{\hyperlink{structcolor}{color}},\ u,\ v,\ 0);}
\DoxyCodeLine{00302\ \ \ \}}
\DoxyCodeLine{00303\ \}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00313\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_a6a566b07202b33d8f246579ea2ed9589}{TexturePeeker::}}}
\DoxyCodeLine{00314\ \mbox{\hyperlink{classTexturePeeker_a6a566b07202b33d8f246579ea2ed9589}{lookup}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ u,\ PN\_stdfloat\ v,\ PN\_stdfloat\ w)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00315\ \ \ \textcolor{keywordflow}{if}\ (!\_is\_cube)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ int((u\ -\/\ cfloor(u))\ *\ (PN\_stdfloat)\_x\_size)\ \%\ \_x\_size;}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ int((v\ -\/\ cfloor(v))\ *\ (PN\_stdfloat)\_y\_size)\ \%\ \_y\_size;}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordtype}{int}\ z\ =\ int((w\ -\/\ cfloor(w))\ *\ (PN\_stdfloat)\_z\_size)\ \%\ \_z\_size;}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ nassertv(x\ >=\ 0\ \&\&\ x\ <\ \_x\_size\ \&\&\ y\ >=\ 0\ \&\&\ y\ <\ \_y\_size\ \&\&}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ z\ >=\ 0\ \&\&\ z\ <\ \_z\_size);}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *p\ =\ \_image.p()\ +\ (z\ *\ \_x\_size\ *\ \_y\_size\ +\ y\ *\ \_x\_size\ +\ x)\ *\ \_pixel\_width;}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ (*\_get\_texel)(\mbox{\hyperlink{structcolor}{color}},\ p,\ \_get\_component);}
\DoxyCodeLine{00325\ \ \ \}}
\DoxyCodeLine{00326\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00327\ \ \ \ \ PN\_stdfloat\ absu\ =\ fabs(u),}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ absv\ =\ fabs(v),}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ absw\ =\ fabs(w);}
\DoxyCodeLine{00330\ \ \ \ \ PN\_stdfloat\ magnitude;}
\DoxyCodeLine{00331\ \ \ \ \ PN\_stdfloat\ u2d,\ v2d;}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keywordtype}{int}\ z;}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{comment}{//\ The\ following\ was\ pulled\ from:}}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{comment}{//\ https://www.gamedev.net/forums/topic/687535-\/implementing-\/a-\/cube-\/map-\/lookup-\/function/}}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordflow}{if}\ (absw\ >=\ absu\ \&\&\ absw\ >=\ absv)\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ z\ =\ 4\ +\ (w\ <\ 0.0);}
\DoxyCodeLine{00338\ \ \ \ \ \ \ magnitude\ =\ 0.5\ /\ absw;}
\DoxyCodeLine{00339\ \ \ \ \ \ \ u2d\ =\ w\ <\ 0.0\ ?\ -\/u\ :\ u;}
\DoxyCodeLine{00340\ \ \ \ \ \ \ v2d\ =\ -\/v;}
\DoxyCodeLine{00341\ \ \ \ \ \}}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (absv\ >=\ absu)\ \{}
\DoxyCodeLine{00343\ \ \ \ \ \ \ z\ =\ 2\ +\ (v\ <\ 0.0);}
\DoxyCodeLine{00344\ \ \ \ \ \ \ magnitude\ =\ 0.5\ /\ absv;}
\DoxyCodeLine{00345\ \ \ \ \ \ \ u2d\ =\ u;}
\DoxyCodeLine{00346\ \ \ \ \ \ \ v2d\ =\ v\ <\ 0.0\ ?\ -\/w\ :\ w;}
\DoxyCodeLine{00347\ \ \ \ \ \}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ z\ =\ 0\ +\ (u\ <\ 0.0);}
\DoxyCodeLine{00350\ \ \ \ \ \ \ magnitude\ =\ 0.5\ /\ absu;}
\DoxyCodeLine{00351\ \ \ \ \ \ \ u2d\ =\ u\ <\ 0.0\ ?\ w\ :\ -\/w;}
\DoxyCodeLine{00352\ \ \ \ \ \ \ v2d\ =\ -\/v;}
\DoxyCodeLine{00353\ \ \ \ \ \}}
\DoxyCodeLine{00354\ \ \ \ \ u2d\ =\ u2d\ *\ magnitude\ +\ 0.5;}
\DoxyCodeLine{00355\ \ \ \ \ v2d\ =\ v2d\ *\ magnitude\ +\ 0.5;}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ int((u2d\ -\/\ cfloor(u2d))\ *\ (PN\_stdfloat)\_x\_size)\ \%\ \_x\_size;}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ int((v2d\ -\/\ cfloor(v2d))\ *\ (PN\_stdfloat)\_y\_size)\ \%\ \_y\_size;}
\DoxyCodeLine{00359\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(\mbox{\hyperlink{structcolor}{color}},\ x,\ y,\ z);}
\DoxyCodeLine{00360\ \ \ \}}
\DoxyCodeLine{00361\ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00367\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{TexturePeeker::}}}
\DoxyCodeLine{00368\ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00369\ \ \ nassertv(x\ >=\ 0\ \&\&\ x\ <\ \_x\_size\ \&\&\ y\ >=\ 0\ \&\&\ y\ <\ \_y\_size);}
\DoxyCodeLine{00370\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *p\ =\ \_image.p()\ +\ (y\ *\ \_x\_size\ +\ x)\ *\ \_pixel\_width;}
\DoxyCodeLine{00371\ \ \ (*\_get\_texel)(\mbox{\hyperlink{structcolor}{color}},\ p,\ \_get\_component);}
\DoxyCodeLine{00372\ \}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00378\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{TexturePeeker::}}}
\DoxyCodeLine{00379\ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ z)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00380\ \ \ nassertv(x\ >=\ 0\ \&\&\ x\ <\ \_x\_size\ \&\&\ y\ >=\ 0\ \&\&\ y\ <\ \_y\_size\ \&\&\ z\ >=\ 0\ \&\&\ z\ <\ \_z\_size);}
\DoxyCodeLine{00381\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *p\ =\ \_image.p()\ +\ ((z\ *\ \_y\_size\ +\ y)\ *\ \_x\_size\ +\ x)\ *\ \_pixel\_width;}
\DoxyCodeLine{00382\ \ \ (*\_get\_texel)(\mbox{\hyperlink{structcolor}{color}},\ p,\ \_get\_component);}
\DoxyCodeLine{00383\ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00392\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classTexturePeeker_aef775f3942b9b7cb16c2313b843255f6}{TexturePeeker::}}}
\DoxyCodeLine{00393\ \mbox{\hyperlink{classTexturePeeker_aef775f3942b9b7cb16c2313b843255f6}{lookup\_bilinear}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ u,\ PN\_stdfloat\ v)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00394\ \ \ \mbox{\hyperlink{structcolor}{color}}\ =\ LColor::zero();}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ u\ =\ u\ *\ \_x\_size\ -\/\ 0.5;}
\DoxyCodeLine{00397\ \ \ v\ =\ v\ *\ \_y\_size\ -\/\ 0.5;}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \textcolor{keywordtype}{int}\ min\_u\ =\ int(floor(u));}
\DoxyCodeLine{00400\ \ \ \textcolor{keywordtype}{int}\ min\_v\ =\ int(floor(v));}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ PN\_stdfloat\ frac\_u\ =\ u\ -\/\ min\_u;}
\DoxyCodeLine{00403\ \ \ PN\_stdfloat\ frac\_v\ =\ v\ -\/\ min\_v;}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ LColor\ p00(LColor::zero()),\ p01(LColor::zero()),\ p10(LColor::zero()),\ p11(LColor::zero());}
\DoxyCodeLine{00406\ \ \ PN\_stdfloat\ w00\ =\ 0.0,\ w01\ =\ 0.0,\ w10\ =\ 0.0,\ w11\ =\ 0.0;}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{keywordflow}{if}\ (has\_pixel(min\_u,\ min\_v))\ \{}
\DoxyCodeLine{00409\ \ \ \ \ w00\ =\ (1.0\ -\/\ frac\_v)\ *\ (1.0\ -\/\ frac\_u);}
\DoxyCodeLine{00410\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(p00,\ min\_u,\ min\_v);}
\DoxyCodeLine{00411\ \ \ \}}
\DoxyCodeLine{00412\ \ \ \textcolor{keywordflow}{if}\ (has\_pixel(min\_u\ +\ 1,\ min\_v))\ \{}
\DoxyCodeLine{00413\ \ \ \ \ w10\ =\ (1.0\ -\/\ frac\_v)\ *\ frac\_u;}
\DoxyCodeLine{00414\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(p10,\ min\_u\ +\ 1,\ min\_v);}
\DoxyCodeLine{00415\ \ \ \}}
\DoxyCodeLine{00416\ \ \ \textcolor{keywordflow}{if}\ (has\_pixel(min\_u,\ min\_v\ +\ 1))\ \{}
\DoxyCodeLine{00417\ \ \ \ \ w01\ =\ frac\_v\ *\ (1.0\ -\/\ frac\_u);}
\DoxyCodeLine{00418\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(p01,\ min\_u,\ min\_v\ +\ 1);}
\DoxyCodeLine{00419\ \ \ \}}
\DoxyCodeLine{00420\ \ \ \textcolor{keywordflow}{if}\ (has\_pixel(min\_u\ +\ 1,\ min\_v\ +\ 1))\ \{}
\DoxyCodeLine{00421\ \ \ \ \ w11\ =\ frac\_v\ *\ frac\_u;}
\DoxyCodeLine{00422\ \ \ \ \ \mbox{\hyperlink{classTexturePeeker_aa908079717c1f08abc214316307bdb6f}{fetch\_pixel}}(p11,\ min\_u\ +\ 1,\ min\_v\ +\ 1);}
\DoxyCodeLine{00423\ \ \ \}}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ PN\_stdfloat\ net\_w\ =\ w00\ +\ w01\ +\ w10\ +\ w11;}
\DoxyCodeLine{00426\ \ \ \textcolor{keywordflow}{if}\ (net\_w\ ==\ 0.0)\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00428\ \ \ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \mbox{\hyperlink{structcolor}{color}}\ =\ (p00\ *\ w00\ +\ p01\ *\ w01\ +\ p10\ *\ w10\ +\ p11\ *\ w11)\ /\ net\_w;}
\DoxyCodeLine{00431\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00432\ \}}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00441\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_afce1ef02e33e349c5ea6ed0eb4d02991}{TexturePeeker::}}}
\DoxyCodeLine{00442\ \mbox{\hyperlink{classTexturePeeker_afce1ef02e33e349c5ea6ed0eb4d02991}{filter\_rect}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ min\_u,\ PN\_stdfloat\ min\_v,\ PN\_stdfloat\ max\_u,\ PN\_stdfloat\ max\_v)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00444\ \ \ \textcolor{keywordtype}{int}\ min\_x,\ max\_x;}
\DoxyCodeLine{00445\ \ \ init\_rect\_minmax(min\_x,\ max\_x,\ min\_u,\ max\_u,\ \_x\_size);}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \textcolor{keywordtype}{int}\ min\_y,\ max\_y;}
\DoxyCodeLine{00448\ \ \ init\_rect\_minmax(min\_y,\ max\_y,\ min\_v,\ max\_v,\ \_y\_size);}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \mbox{\hyperlink{structcolor}{color}}.set(0.0f,\ 0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00451\ \ \ PN\_stdfloat\ net\ =\ 0.0f;}
\DoxyCodeLine{00452\ \ \ accum\_filter\_y(\mbox{\hyperlink{structcolor}{color}},\ net,\ 0,}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.0f);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \textcolor{keywordflow}{if}\ (net\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00458\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}\ /=\ net;}
\DoxyCodeLine{00459\ \ \ \}}
\DoxyCodeLine{00460\ \}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00469\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTexturePeeker_afce1ef02e33e349c5ea6ed0eb4d02991}{TexturePeeker::}}}
\DoxyCodeLine{00470\ \mbox{\hyperlink{classTexturePeeker_afce1ef02e33e349c5ea6ed0eb4d02991}{filter\_rect}}(LColor\ \&\mbox{\hyperlink{structcolor}{color}},}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ min\_u,\ PN\_stdfloat\ min\_v,\ PN\_stdfloat\ min\_w,}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ max\_u,\ PN\_stdfloat\ max\_v,\ PN\_stdfloat\ max\_w)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00473\ \ \ \textcolor{keywordtype}{int}\ min\_x,\ max\_x;}
\DoxyCodeLine{00474\ \ \ init\_rect\_minmax(min\_x,\ max\_x,\ min\_u,\ max\_u,\ \_x\_size);}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \textcolor{keywordtype}{int}\ min\_y,\ max\_y;}
\DoxyCodeLine{00477\ \ \ init\_rect\_minmax(min\_y,\ max\_y,\ min\_v,\ max\_v,\ \_y\_size);}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \textcolor{keywordtype}{int}\ min\_z,\ max\_z;}
\DoxyCodeLine{00480\ \ \ init\_rect\_minmax(min\_z,\ max\_z,\ min\_w,\ max\_w,\ \_z\_size);}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \mbox{\hyperlink{structcolor}{color}}.set(0.0f,\ 0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00483\ \ \ PN\_stdfloat\ net\ =\ 0.0f;}
\DoxyCodeLine{00484\ \ \ accum\_filter\_z(\mbox{\hyperlink{structcolor}{color}},\ net,}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_z,\ max\_z,\ min\_w,\ max\_w);}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{if}\ (net\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}\ /=\ net;}
\DoxyCodeLine{00491\ \ \ \}}
\DoxyCodeLine{00492\ \}}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00498\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00499\ init\_rect\_minmax(\textcolor{keywordtype}{int}\ \&min\_x,\ \textcolor{keywordtype}{int}\ \&max\_x,\ PN\_stdfloat\ \&min\_u,\ PN\_stdfloat\ \&max\_u,}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\_size)\ \{}
\DoxyCodeLine{00501\ \ \ \textcolor{keywordflow}{if}\ (min\_u\ >\ max\_u)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ PN\_stdfloat\ t\ =\ min\_u;}
\DoxyCodeLine{00503\ \ \ \ \ min\_u\ =\ max\_u;}
\DoxyCodeLine{00504\ \ \ \ \ max\_u\ =\ t;}
\DoxyCodeLine{00505\ \ \ \}}
\DoxyCodeLine{00506\ \ \ \textcolor{keywordflow}{if}\ (max\_u\ -\/\ min\_u\ >=\ 1.0f)\ \{}
\DoxyCodeLine{00507\ \ \ \ \ min\_u\ =\ 0.0f;}
\DoxyCodeLine{00508\ \ \ \ \ max\_u\ =\ 1.0f;}
\DoxyCodeLine{00509\ \ \ \}}
\DoxyCodeLine{00510\ \ \ min\_x\ =\ (int)cfloor(min\_u\ *\ (PN\_stdfloat)x\_size);}
\DoxyCodeLine{00511\ \ \ max\_x\ =\ (int)cceil(max\_u\ *\ (PN\_stdfloat)x\_size);}
\DoxyCodeLine{00512\ \ \ nassertv(min\_x\ <=\ max\_x);}
\DoxyCodeLine{00513\ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00518\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00519\ accum\_filter\_z(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ \&net,}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_x,\ \textcolor{keywordtype}{int}\ max\_x,\ PN\_stdfloat\ min\_u,\ PN\_stdfloat\ max\_u,}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_y,\ \textcolor{keywordtype}{int}\ max\_y,\ PN\_stdfloat\ min\_v,\ PN\_stdfloat\ max\_v,}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_z,\ \textcolor{keywordtype}{int}\ max\_z,\ PN\_stdfloat\ min\_w,\ PN\_stdfloat\ max\_w)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00523\ \ \ nassertv(min\_z\ >=\ 0\ \&\&\ min\_z\ <=\ \_z\_size\ \&\&}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ max\_z\ >=\ 0\ \&\&\ max\_z\ <=\ \_z\_size);}
\DoxyCodeLine{00525\ \ \ \textcolor{keywordtype}{int}\ zi\ =\ min\_z;}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \textcolor{keywordflow}{if}\ (min\_z\ >=\ max\_z\ -\/\ 1)\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{comment}{//\ Within\ a\ single\ texel.}}
\DoxyCodeLine{00529\ \ \ \ \ accum\_filter\_y(\mbox{\hyperlink{structcolor}{color}},\ net,\ zi\ \%\ \_z\_size,}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.0f);}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00535\ \ \ \ \ \textcolor{comment}{//\ First\ part-\/texel.}}
\DoxyCodeLine{00536\ \ \ \ \ PN\_stdfloat\ w\ =\ (min\_z\ +\ 1)\ -\/\ min\_w\ *\ \_z\_size;}
\DoxyCodeLine{00537\ \ \ \ \ accum\_filter\_y(\mbox{\hyperlink{structcolor}{color}},\ net,\ zi\ \%\ \_z\_size,}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ w);}
\DoxyCodeLine{00541\ \ \ \ \ \textcolor{keywordtype}{int}\ zs\ =\ max\_z\ -\/\ 1;}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{comment}{//\ Run\ of\ full\ texels.}}
\DoxyCodeLine{00544\ \ \ \ \ zi\ =\ min\_z\ +\ 1;}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordflow}{while}\ (zi\ <\ zs)\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \ \ accum\_filter\_y(\mbox{\hyperlink{structcolor}{color}},\ net,\ zi\ \%\ \_z\_size,}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1.0f);}
\DoxyCodeLine{00550\ \ \ \ \ \ \ ++zi;}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ }
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{comment}{//\ Last\ part-\/texel.}}
\DoxyCodeLine{00554\ \ \ \ \ w\ =\ max\_w\ *\ \_z\_size\ -\/\ (max\_z\ -\/\ 1);}
\DoxyCodeLine{00555\ \ \ \ \ accum\_filter\_y(\mbox{\hyperlink{structcolor}{color}},\ net,\ zi\ \%\ \_z\_size,}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_x,\ max\_x,\ min\_u,\ max\_u,}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_y,\ max\_y,\ min\_v,\ max\_v,}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ w);}
\DoxyCodeLine{00559\ \ \ \}}
\DoxyCodeLine{00560\ \}}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00565\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00566\ accum\_filter\_y(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ \&net,\ \textcolor{keywordtype}{int}\ zi,}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_x,\ \textcolor{keywordtype}{int}\ max\_x,\ PN\_stdfloat\ min\_u,\ PN\_stdfloat\ max\_u,}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_y,\ \textcolor{keywordtype}{int}\ max\_y,\ PN\_stdfloat\ min\_v,\ PN\_stdfloat\ max\_v,}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ weight)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00570\ \ \ nassertv(zi\ >=\ 0\ \&\&\ zi\ <\ \_z\_size);}
\DoxyCodeLine{00571\ \ \ nassertv(min\_y\ >=\ 0\ \&\&\ min\_y\ <=\ \_y\_size\ \&\&}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ max\_y\ >=\ 0\ \&\&\ max\_y\ <=\ \_y\_size);}
\DoxyCodeLine{00573\ \ \ \textcolor{keywordtype}{int}\ yi\ =\ min\_y;}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \textcolor{keywordflow}{if}\ (min\_y\ >=\ max\_y\ -\/\ 1)\ \{}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{comment}{//\ Within\ a\ single\ texel.}}
\DoxyCodeLine{00577\ \ \ \ \ accum\_filter\_x(\mbox{\hyperlink{structcolor}{color}},\ net,\ yi\ \%\ \_y\_size,\ zi,\ min\_x,\ max\_x,\ min\_u,\ max\_u,\ weight);}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{comment}{//\ First\ part-\/texel.}}
\DoxyCodeLine{00581\ \ \ \ \ PN\_stdfloat\ w\ =\ (min\_y\ +\ 1)\ -\/\ min\_v\ *\ \_y\_size;}
\DoxyCodeLine{00582\ \ \ \ \ accum\_filter\_x(\mbox{\hyperlink{structcolor}{color}},\ net,\ yi\ \%\ \_y\_size,\ zi,\ min\_x,\ max\_x,\ min\_u,\ max\_u,\ weight\ *\ w);}
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keywordtype}{int}\ ys\ =\ max\_y\ -\/\ 1;}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \textcolor{comment}{//\ Run\ of\ full\ texels.}}
\DoxyCodeLine{00586\ \ \ \ \ yi\ =\ min\_y\ +\ 1;}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keywordflow}{while}\ (yi\ <\ ys)\ \{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ accum\_filter\_x(\mbox{\hyperlink{structcolor}{color}},\ net,\ yi\ \%\ \_y\_size,\ zi,\ min\_x,\ max\_x,\ min\_u,\ max\_u,\ weight);}
\DoxyCodeLine{00589\ \ \ \ \ \ \ ++yi;}
\DoxyCodeLine{00590\ \ \ \ \ \}}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{comment}{//\ Last\ part-\/texel.}}
\DoxyCodeLine{00593\ \ \ \ \ w\ =\ max\_v\ *\ \_y\_size\ -\/\ (max\_y\ -\/\ 1);}
\DoxyCodeLine{00594\ \ \ \ \ accum\_filter\_x(\mbox{\hyperlink{structcolor}{color}},\ net,\ yi\ \%\ \_y\_size,\ zi,\ min\_x,\ max\_x,\ min\_u,\ max\_u,\ weight\ *\ w);}
\DoxyCodeLine{00595\ \ \ \}}
\DoxyCodeLine{00596\ \}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00601\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00602\ accum\_filter\_x(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ \&net,\ \textcolor{keywordtype}{int}\ yi,\ \textcolor{keywordtype}{int}\ zi,}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ min\_x,\ \textcolor{keywordtype}{int}\ max\_x,\ PN\_stdfloat\ min\_u,\ PN\_stdfloat\ max\_u,}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ weight)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00605\ \ \ nassertv(yi\ >=\ 0\ \&\&\ yi\ <\ \_y\_size\ \&\&\ zi\ >=\ 0\ \&\&\ zi\ <\ \_z\_size);}
\DoxyCodeLine{00606\ \ \ nassertv(min\_x\ >=\ 0\ \&\&\ min\_x\ <=\ \_x\_size\ \&\&}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ max\_x\ >=\ 0\ \&\&\ max\_x\ <=\ \_x\_size);}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \textcolor{comment}{//\ Compute\ the\ p\ corresponding\ to\ min\_x.}}
\DoxyCodeLine{00610\ \ \ \textcolor{keywordtype}{int}\ xi\ =\ min\_x\ \%\ \_x\_size;}
\DoxyCodeLine{00611\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *p\ =\ \_image.p()\ +\ (zi\ *\ \_x\_size\ *\ \_y\_size\ +\ yi\ *\ \_x\_size\ +\ xi)\ *\ \_pixel\_width;}
\DoxyCodeLine{00612\ }
\DoxyCodeLine{00613\ \ \ \textcolor{keywordflow}{if}\ (min\_x\ >=\ max\_x\ -\/\ 1)\ \{}
\DoxyCodeLine{00614\ \ \ \ \ \textcolor{comment}{//\ Within\ a\ single\ texel.}}
\DoxyCodeLine{00615\ \ \ \ \ accum\_texel(\mbox{\hyperlink{structcolor}{color}},\ net,\ p,\ weight);}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{comment}{//\ First\ part-\/texel.}}
\DoxyCodeLine{00619\ \ \ \ \ PN\_stdfloat\ w\ =\ (min\_x\ +\ 1)\ -\/\ min\_u\ *\ \_x\_size;}
\DoxyCodeLine{00620\ \ \ \ \ accum\_texel(\mbox{\hyperlink{structcolor}{color}},\ net,\ p,\ weight\ *\ w);}
\DoxyCodeLine{00621\ \ \ \ \ \textcolor{keywordtype}{int}\ xs\ =\ max\_x\ -\/\ 1;}
\DoxyCodeLine{00622\ }
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{comment}{//\ Run\ of\ full\ texels.}}
\DoxyCodeLine{00624\ \ \ \ \ xi\ =\ min\_x\ +\ 1;}
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{keywordflow}{while}\ (xi\ <\ xs)\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xi\ ==\ \_x\_size)\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ xi\ =\ 0;}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ p\ =\ \_image.p()\ +\ (zi\ *\ \_x\_size\ *\ \_y\_size\ +\ yi\ *\ \_x\_size\ +\ xi)\ *\ \_pixel\_width;}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ xs\ -\/=\ \_x\_size;}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00631\ \ \ \ \ \ \ accum\_texel(\mbox{\hyperlink{structcolor}{color}},\ net,\ p,\ weight);}
\DoxyCodeLine{00632\ \ \ \ \ \ \ ++xi;}
\DoxyCodeLine{00633\ \ \ \ \ \}}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \textcolor{comment}{//\ Last\ part-\/texel.}}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{keywordflow}{if}\ (xi\ ==\ \_x\_size)\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \ \ xi\ =\ 0;}
\DoxyCodeLine{00638\ \ \ \ \ \ \ p\ =\ \_image.p()\ +\ (zi\ *\ \_x\_size\ *\ \_y\_size\ +\ yi\ *\ \_x\_size\ +\ xi)\ *\ \_pixel\_width;}
\DoxyCodeLine{00639\ \ \ \ \ \}}
\DoxyCodeLine{00640\ \ \ \ \ w\ =\ max\_u\ *\ \_x\_size\ -\/\ (max\_x\ -\/\ 1);}
\DoxyCodeLine{00641\ \ \ \ \ accum\_texel(\mbox{\hyperlink{structcolor}{color}},\ net,\ p,\ weight\ *\ w);}
\DoxyCodeLine{00642\ \ \ \}}
\DoxyCodeLine{00643\ \}}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00648\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00649\ accum\_texel(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ PN\_stdfloat\ \&net,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ PN\_stdfloat\ weight)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00650\ \ \ LColor\ c;}
\DoxyCodeLine{00651\ \ \ (*\_get\_texel)(c,\ p,\ \_get\_component);}
\DoxyCodeLine{00652\ \ \ \mbox{\hyperlink{structcolor}{color}}\ +=\ c\ *\ weight;}
\DoxyCodeLine{00653\ \ \ net\ +=\ weight;}
\DoxyCodeLine{00654\ \}}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00660\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00661\ get\_texel\_r(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00662\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00663\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ 0.0f;}
\DoxyCodeLine{00664\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ 0.0f;}
\DoxyCodeLine{00665\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00666\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00672\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00673\ get\_texel\_g(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00674\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ 0.0f;}
\DoxyCodeLine{00675\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00676\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ 0.0f;}
\DoxyCodeLine{00677\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00678\ \}}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00684\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00685\ get\_texel\_b(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00686\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ 0.0f;}
\DoxyCodeLine{00687\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ 0.0f;}
\DoxyCodeLine{00688\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00689\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00690\ \}}
\DoxyCodeLine{00691\ }
\DoxyCodeLine{00696\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00697\ get\_texel\_a(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00698\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ 0.0f;}
\DoxyCodeLine{00699\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ 0.0f;}
\DoxyCodeLine{00700\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ 1.0f;}
\DoxyCodeLine{00701\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00702\ \}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00708\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00709\ get\_texel\_l(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00710\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00711\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ \mbox{\hyperlink{structcolor}{color}}[0];}
\DoxyCodeLine{00712\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ \mbox{\hyperlink{structcolor}{color}}[0];}
\DoxyCodeLine{00713\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00714\ \}}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00720\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00721\ get\_texel\_la(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00722\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00723\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ \mbox{\hyperlink{structcolor}{color}}[0];}
\DoxyCodeLine{00724\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ \mbox{\hyperlink{structcolor}{color}}[0];}
\DoxyCodeLine{00725\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00726\ \}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00732\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00733\ get\_texel\_rg(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00734\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00735\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00736\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ 0.0f;}
\DoxyCodeLine{00737\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00738\ \}}
\DoxyCodeLine{00739\ }
\DoxyCodeLine{00744\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00745\ get\_texel\_rgb(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00746\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00747\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00748\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00749\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00750\ \}}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00756\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00757\ get\_texel\_rgba(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00758\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00759\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00760\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00761\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00762\ \}}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00768\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00769\ get\_texel\_srgb(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00770\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00771\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00772\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00773\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ 1.0f;}
\DoxyCodeLine{00774\ \}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00780\ \textcolor{keywordtype}{void}\ TexturePeeker::}
\DoxyCodeLine{00781\ get\_texel\_srgba(LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *\&p,\ GetComponentFunc\ *get\_component)\ \{}
\DoxyCodeLine{00782\ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00783\ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00784\ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ decode\_sRGB\_float(*p++);}
\DoxyCodeLine{00785\ \ \ \mbox{\hyperlink{structcolor}{color}}[3]\ =\ (*get\_component)(p);}
\DoxyCodeLine{00786\ \}}

\end{DoxyCode}

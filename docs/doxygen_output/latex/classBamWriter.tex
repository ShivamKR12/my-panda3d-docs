\doxysection{Bam\+Writer Class Reference}
\hypertarget{classBamWriter}{}\label{classBamWriter}\index{BamWriter@{BamWriter}}


{\ttfamily \#include $<$bam\+Writer.\+h$>$}

Inheritance diagram for Bam\+Writer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classBamWriter}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classBamWriter_a6b196136d332fc3cd2c96c01b289b4f9}\label{classBamWriter_a6b196136d332fc3cd2c96c01b289b4f9} 
{\bfseries EXTENSION} (Py\+Object \texorpdfstring{$\ast$}{*}get\+\_\+file\+\_\+version() const)
\item 
\Hypertarget{classBamWriter_a485227ba3f3f37f96a3f63c0d1ef5331}\label{classBamWriter_a485227ba3f3f37f96a3f63c0d1ef5331} 
{\bfseries MAKE\+\_\+\+PROPERTY} (filename, get\+\_\+filename)
\item 
\Hypertarget{classBamWriter_aa8a47e126d947d5d6dce793b3492615a}\label{classBamWriter_aa8a47e126d947d5d6dce793b3492615a} 
{\bfseries MAKE\+\_\+\+PROPERTY} (file\+\_\+version, get\+\_\+file\+\_\+version)
\item 
\Hypertarget{classBamWriter_a9eb973ca84bffac4c1fa5dc4c01943e8}\label{classBamWriter_a9eb973ca84bffac4c1fa5dc4c01943e8} 
{\bfseries MAKE\+\_\+\+PROPERTY} (file\+\_\+endian, get\+\_\+file\+\_\+endian)
\item 
\Hypertarget{classBamWriter_ae6d5713b66a2ffd15344a8cef429354f}\label{classBamWriter_ae6d5713b66a2ffd15344a8cef429354f} 
{\bfseries MAKE\+\_\+\+PROPERTY} (file\+\_\+stdfloat\+\_\+double, get\+\_\+file\+\_\+stdfloat\+\_\+double)
\item 
\Hypertarget{classBamWriter_ab3f6c3360a02d84468ec498cac5b1f2f}\label{classBamWriter_ab3f6c3360a02d84468ec498cac5b1f2f} 
{\bfseries MAKE\+\_\+\+PROPERTY} (file\+\_\+texture\+\_\+mode, get\+\_\+file\+\_\+texture\+\_\+mode, set\+\_\+file\+\_\+texture\+\_\+mode)
\item 
\Hypertarget{classBamWriter_abc9139edef252c77b069184fe7d97110}\label{classBamWriter_abc9139edef252c77b069184fe7d97110} 
{\bfseries MAKE\+\_\+\+PROPERTY} (root\+\_\+node, get\+\_\+root\+\_\+node, set\+\_\+root\+\_\+node)
\item 
void \mbox{\hyperlink{classBamWriter_a32f116d6443b307888b8d477c0c45277}{consider\+\_\+update}} (const \mbox{\hyperlink{classTypedWritable}{Typed\+Writable}} \texorpdfstring{$\ast$}{*}obj)
\item 
void \mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\+\_\+pointer}} (\mbox{\hyperlink{classDatagram}{Datagram}} \&packet, const \mbox{\hyperlink{classTypedWritable}{Typed\+Writable}} \texorpdfstring{$\ast$}{*}dest)
\item 
void \mbox{\hyperlink{classBamWriter_a4577a7d69ae8f4518b0d041a550f08a6}{write\+\_\+file\+\_\+data}} (\mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&result, const \mbox{\hyperlink{classFilename}{Filename}} \&filename)
\item 
void \mbox{\hyperlink{classBamWriter_a7364895ac9359c96f177961c215549cd}{write\+\_\+file\+\_\+data}} (\mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&result, const \mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&source)
\item 
void \mbox{\hyperlink{classBamWriter_a4a957fdbd6f508ee3029a41a794030cd}{write\+\_\+cdata}} (\mbox{\hyperlink{classDatagram}{Datagram}} \&packet, const \mbox{\hyperlink{structPipelineCyclerTrivialImpl}{Pipeline\+Cycler\+Base}} \&cycler)
\item 
void \mbox{\hyperlink{classBamWriter_a6e3db3a15240c916a5f8e2e4e3e341d8}{write\+\_\+cdata}} (\mbox{\hyperlink{classDatagram}{Datagram}} \&packet, const \mbox{\hyperlink{structPipelineCyclerTrivialImpl}{Pipeline\+Cycler\+Base}} \&cycler, void \texorpdfstring{$\ast$}{*}extra\+\_\+data)
\item 
bool \mbox{\hyperlink{classBamWriter_a6d06fadfca709b395dc8e7e9c2cfc08b}{register\+\_\+pta}} (\mbox{\hyperlink{classDatagram}{Datagram}} \&packet, const void \texorpdfstring{$\ast$}{*}ptr)
\item 
void \mbox{\hyperlink{classBamWriter_a9a21df38c9361fff09a68f13295d025d}{write\+\_\+handle}} (\mbox{\hyperlink{classDatagram}{Datagram}} \&packet, \mbox{\hyperlink{classTypeHandle}{Type\+Handle}} type)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \mbox{\hyperlink{classBamWriter_ae0c3859cbe2ce1502f5d9deb19cf2118}{get\+\_\+obsolete\+\_\+type\+\_\+name}} (\mbox{\hyperlink{classTypeHandle}{Type\+Handle}} type, int major, int minor)
\item 
static void \mbox{\hyperlink{classBamWriter_a92f20109e0b4993a7a0187191dd00315}{record\+\_\+obsolete\+\_\+type\+\_\+name}} (\mbox{\hyperlink{classTypeHandle}{Type\+Handle}} type, std\+::string name, int before\+\_\+major, int before\+\_\+minor)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classBamWriter_a8d835fb77239f24bcebf6b4834587224}\label{classBamWriter_a8d835fb77239f24bcebf6b4834587224} 
PUBLISHED \+: MAKE\+\_\+\+PROPERTY(target
\item 
\Hypertarget{classBamWriter_a20460acb454899810eea2812394f9baf}\label{classBamWriter_a20460acb454899810eea2812394f9baf} 
PUBLISHED {\bfseries get\+\_\+target}
\item 
PUBLISHED \mbox{\hyperlink{classBamWriter_aeeeb883cf224cd735fe42b2f70b04217}{set\+\_\+target}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classBamWriter_a976cd574d338c64de3a569eebb321793}\label{classBamWriter_a976cd574d338c64de3a569eebb321793} 
class {\bfseries Typed\+Writable}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is the fundamental interface for writing binary objects to a Bam file, to be extracted later by a \doxylink{classBamReader}{Bam\+Reader}.

A Bam file can be thought of as a linear collection of objects. Each object is an instance of a class that inherits, directly or indirectly, from \doxylink{classTypedWritable}{Typed\+Writable}. The objects may include pointers to other objects; the \doxylink{classBamWriter}{Bam\+Writer} automatically manages these (with help from code within each class) and writes all referenced objects to the file in such a way that the pointers may be correctly restored later.

This is the abstract interface and does not specifically deal with disk files, but rather with a \doxylink{classDatagramSink}{Datagram\+Sink} of some kind, which simply accepts a linear stream of Datagrams. It is probably written to a disk file, but it might conceivably be streamed directly to a network or some such nonsense.

Bam files are most often used to store scene graphs or subgraphs, and by convention they are given filenames ending in the extension "{}.\+bam"{} when they are used for this purpose. However, a Bam file may store any arbitrary list of \doxylink{classTypedWritable}{Typed\+Writable} objects; in this more general usage, they are given filenames ending in "{}.\+boo"{} to differentiate them from the more common scene graph files.

See also \doxylink{classBamFile}{Bam\+File}, which defines a higher-\/level interface to read and write Bam files on disk. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classBamWriter_a32f116d6443b307888b8d477c0c45277}\label{classBamWriter_a32f116d6443b307888b8d477c0c45277} 
\index{BamWriter@{BamWriter}!consider\_update@{consider\_update}}
\index{consider\_update@{consider\_update}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{consider\_update()}{consider\_update()}}
{\footnotesize\ttfamily void Bam\+Writer\+::consider\+\_\+update (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classTypedWritable}{Typed\+Writable}} \texorpdfstring{$\ast$}{*}}]{object }\end{DoxyParamCaption})}

Should be called from \doxylink{classTypedWritable_ab467e724d575f5ab225f594ffa091349}{Typed\+Writable\+::update\+\_\+bam\+\_\+nested()} to recursively check the entire hiererachy of writable objects for needed updates. This tests the indicated \doxylink{classTypedWritable}{Typed\+Writable} object and writes it to the bam stream if it has recently been modified, then recurses through update\+\_\+bam\+\_\+nested. \Hypertarget{classBamWriter_ae0c3859cbe2ce1502f5d9deb19cf2118}\label{classBamWriter_ae0c3859cbe2ce1502f5d9deb19cf2118} 
\index{BamWriter@{BamWriter}!get\_obsolete\_type\_name@{get\_obsolete\_type\_name}}
\index{get\_obsolete\_type\_name@{get\_obsolete\_type\_name}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{get\_obsolete\_type\_name()}{get\_obsolete\_type\_name()}}
{\footnotesize\ttfamily std\+::string Bam\+Writer\+::get\+\_\+obsolete\+\_\+type\+\_\+name (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classTypeHandle}{Type\+Handle}}}]{type,  }\item[{int}]{major,  }\item[{int}]{minor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Returns the name that the given type had in an older .bam version. \Hypertarget{classBamWriter_a92f20109e0b4993a7a0187191dd00315}\label{classBamWriter_a92f20109e0b4993a7a0187191dd00315} 
\index{BamWriter@{BamWriter}!record\_obsolete\_type\_name@{record\_obsolete\_type\_name}}
\index{record\_obsolete\_type\_name@{record\_obsolete\_type\_name}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{record\_obsolete\_type\_name()}{record\_obsolete\_type\_name()}}
{\footnotesize\ttfamily void Bam\+Writer\+::record\+\_\+obsolete\+\_\+type\+\_\+name (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classTypeHandle}{Type\+Handle}}}]{type,  }\item[{std\+::string}]{name,  }\item[{int}]{before\+\_\+major,  }\item[{int}]{before\+\_\+minor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Registers the given type as having an older name in .bam files {\itshape before} the indicated version. You can call this multiple times for the same type in order to establish a history of renames for this type. \Hypertarget{classBamWriter_a6d06fadfca709b395dc8e7e9c2cfc08b}\label{classBamWriter_a6d06fadfca709b395dc8e7e9c2cfc08b} 
\index{BamWriter@{BamWriter}!register\_pta@{register\_pta}}
\index{register\_pta@{register\_pta}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{register\_pta()}{register\_pta()}}
{\footnotesize\ttfamily bool Bam\+Writer\+::register\+\_\+pta (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDatagram}{Datagram}} \&}]{packet,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{ptr }\end{DoxyParamCaption})}

Prepares to write a \doxylink{classPointerToArray}{Pointer\+To\+Array} to the Bam file, unifying references to the same pointer across the Bam file.

The writing object should call this prior to writing out a \doxylink{classPointerToArray}{Pointer\+To\+Array}. It will return true if the same pointer has been written previously, in which case the writing object need do nothing further; or it will return false if this particular pointer has not yet been written, in which case the writing object must then write out the contents of the array.

Also see the WRITE\+\_\+\+PTA() macro, which consolidates the work that must be done to write a PTA. \Hypertarget{classBamWriter_a4a957fdbd6f508ee3029a41a794030cd}\label{classBamWriter_a4a957fdbd6f508ee3029a41a794030cd} 
\index{BamWriter@{BamWriter}!write\_cdata@{write\_cdata}}
\index{write\_cdata@{write\_cdata}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_cdata()}{write\_cdata()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+cdata (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDatagram}{Datagram}} \&}]{packet,  }\item[{const \mbox{\hyperlink{structPipelineCyclerTrivialImpl}{Pipeline\+Cycler\+Base}} \&}]{cycler }\end{DoxyParamCaption})}

Writes out the indicated \doxylink{classCycleData}{Cycle\+Data} object. This should be used by classes that store some or all of their data within a \doxylink{classCycleData}{Cycle\+Data} subclass, in support of pipelining. This will call the virtual \doxylink{classCycleData_aec552034f343a53d5efc79fce3e1e6f5}{Cycle\+Data\+::write\+\_\+datagram()} method to do the actual writing. \Hypertarget{classBamWriter_a6e3db3a15240c916a5f8e2e4e3e341d8}\label{classBamWriter_a6e3db3a15240c916a5f8e2e4e3e341d8} 
\index{BamWriter@{BamWriter}!write\_cdata@{write\_cdata}}
\index{write\_cdata@{write\_cdata}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_cdata()}{write\_cdata()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+cdata (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDatagram}{Datagram}} \&}]{packet,  }\item[{const \mbox{\hyperlink{structPipelineCyclerTrivialImpl}{Pipeline\+Cycler\+Base}} \&}]{cycler,  }\item[{void \texorpdfstring{$\ast$}{*}}]{extra\+\_\+data }\end{DoxyParamCaption})}

This version of write\+\_\+cdata allows passing an additional parameter to cdata-\/\texorpdfstring{$>$}{>}write\+\_\+datagram(). \Hypertarget{classBamWriter_a4577a7d69ae8f4518b0d041a550f08a6}\label{classBamWriter_a4577a7d69ae8f4518b0d041a550f08a6} 
\index{BamWriter@{BamWriter}!write\_file\_data@{write\_file\_data}}
\index{write\_file\_data@{write\_file\_data}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_file\_data()}{write\_file\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+file\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&}]{result,  }\item[{const \mbox{\hyperlink{classFilename}{Filename}} \&}]{filename }\end{DoxyParamCaption})}

Writes a block of auxiliary file data from the indicated file (within the vfs). This can be a block of arbitrary size, and it is assumed it may be quite large. This must be balanced by a matching call to read\+\_\+file\+\_\+data() on restore. \Hypertarget{classBamWriter_a7364895ac9359c96f177961c215549cd}\label{classBamWriter_a7364895ac9359c96f177961c215549cd} 
\index{BamWriter@{BamWriter}!write\_file\_data@{write\_file\_data}}
\index{write\_file\_data@{write\_file\_data}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_file\_data()}{write\_file\_data()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+file\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&}]{result,  }\item[{const \mbox{\hyperlink{classSubfileInfo}{Subfile\+Info}} \&}]{source }\end{DoxyParamCaption})}

Writes a block of auxiliary file data from the indicated file (outside of the vfs). This can be a block of arbitrary size, and it is assumed it may be quite large. This must be balanced by a matching call to read\+\_\+file\+\_\+data() on restore. \Hypertarget{classBamWriter_a9a21df38c9361fff09a68f13295d025d}\label{classBamWriter_a9a21df38c9361fff09a68f13295d025d} 
\index{BamWriter@{BamWriter}!write\_handle@{write\_handle}}
\index{write\_handle@{write\_handle}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_handle()}{write\_handle()}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDatagram}{Datagram}} \&}]{packet,  }\item[{\mbox{\hyperlink{classTypeHandle}{Type\+Handle}}}]{type }\end{DoxyParamCaption})}

Writes a \doxylink{classTypeHandle}{Type\+Handle} to the file in such a way that the \doxylink{classBamReader}{Bam\+Reader} can read the same \doxylink{classTypeHandle}{Type\+Handle} later via read\+\_\+handle(). \Hypertarget{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}\label{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467} 
\index{BamWriter@{BamWriter}!write\_pointer@{write\_pointer}}
\index{write\_pointer@{write\_pointer}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{write\_pointer()}{write\_pointer()}}
{\footnotesize\ttfamily void Bam\+Writer\+::write\+\_\+pointer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDatagram}{Datagram}} \&}]{packet,  }\item[{const \mbox{\hyperlink{classTypedWritable}{Typed\+Writable}} \texorpdfstring{$\ast$}{*}}]{object }\end{DoxyParamCaption})}

The interface for writing a pointer to another object to a Bam file. This is intended to be called by the various objects that write themselves to the Bam file, within the write\+\_\+datagram() method.

This writes the pointer out in such a way that the \doxylink{classBamReader}{Bam\+Reader} will be able to restore the pointer later. If the pointer is to an object that has not yet itself been written to the Bam file, that object will automatically be written. 

\doxysubsection{Member Data Documentation}
\Hypertarget{classBamWriter_aeeeb883cf224cd735fe42b2f70b04217}\label{classBamWriter_aeeeb883cf224cd735fe42b2f70b04217} 
\index{BamWriter@{BamWriter}!set\_target@{set\_target}}
\index{set\_target@{set\_target}!BamWriter@{BamWriter}}
\doxysubsubsection{\texorpdfstring{set\_target}{set\_target}}
{\footnotesize\ttfamily void Bam\+Writer\+::set\+\_\+target}

Changes the destination of future datagrams written by the \doxylink{classBamWriter}{Bam\+Writer}. This also implicitly calls init() if it has not already been called. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/putil/\mbox{\hyperlink{bamWriter_8h}{bam\+Writer.\+h}}\item 
panda/src/putil/\mbox{\hyperlink{bamWriter_8cxx}{bam\+Writer.\+cxx}}\end{DoxyCompactItemize}

\doxysection{win\+Stats\+Piano\+Roll.\+cxx}
\hypertarget{winStatsPianoRoll_8cxx_source}{}\label{winStatsPianoRoll_8cxx_source}\index{pandatool/src/win-\/stats/winStatsPianoRoll.cxx@{pandatool/src/win-\/stats/winStatsPianoRoll.cxx}}
\mbox{\hyperlink{winStatsPianoRoll_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsPianoRoll_8h}{winStatsPianoRoll.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMonitor_8h}{winStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{numeric__types_8h}{numeric\_types.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_piano\_roll\_width\ =\ 800;}
\DoxyCodeLine{00019\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_piano\_roll\_height\ =\ 400;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keywordtype}{bool}\ WinStatsPianoRoll::\_window\_class\_registered\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00022\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ \textcolor{keyword}{const}\ WinStatsPianoRoll::\_window\_class\_name\ =\ \textcolor{stringliteral}{"{}piano"{}};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ WinStatsPianoRoll::}
\DoxyCodeLine{00028\ WinStatsPianoRoll(\mbox{\hyperlink{classWinStatsMonitor}{WinStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index)\ :}
\DoxyCodeLine{00029\ \ \ \mbox{\hyperlink{classPStatPianoRoll}{PStatPianoRoll}}(monitor,\ thread\_index,}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ monitor-\/>get\_pixel\_scale()\ *\ default\_piano\_roll\_width\ /\ 4,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ monitor-\/>get\_pixel\_scale()\ *\ default\_piano\_roll\_height\ /\ 4),}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}(monitor)}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \ \ \_left\_margin\ =\ \_pixel\_scale\ *\ 32;}
\DoxyCodeLine{00035\ \ \ \_right\_margin\ =\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00036\ \ \ \_top\_margin\ =\ \_pixel\_scale\ *\ 5;}
\DoxyCodeLine{00037\ \ \ \_bottom\_margin\ =\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00038\ \ \ \_top\_label\_stack\_margin\ =\ \_pixel\_scale\ *\ 5;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ Let's\ show\ the\ units\ on\ the\ guide\ bar\ labels.\ \ There's\ room.}}
\DoxyCodeLine{00041\ \ \ set\_guide\_bar\_units(get\_guide\_bar\_units()\ |\ GBU\_show\_units);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ create\_window();}
\DoxyCodeLine{00044\ \ \ force\_redraw();}
\DoxyCodeLine{00045\ \ \ idle();}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ WinStatsPianoRoll::}
\DoxyCodeLine{00052\ \string~WinStatsPianoRoll()\ \{}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00061\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_ac79600f1aebc2a579b1eb4d4d7b20381}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00062\ \mbox{\hyperlink{classWinStatsPianoRoll_ac79600f1aebc2a579b1eb4d4d7b20381}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{if}\ (!\_pause)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classPStatPianoRoll_a59d660ffcd92e9e39f2d125e488ae61d}{update}}();}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00071\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_adcc31e2562dbd5ec227e650177c8bb03}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00072\ \mbox{\hyperlink{classWinStatsPianoRoll_adcc31e2562dbd5ec227e650177c8bb03}{force\_redraw}}()\ \{}
\DoxyCodeLine{00073\ \ \ \mbox{\hyperlink{classPStatPianoRoll_a842d7ad73ea599746245b485caef6948}{PStatPianoRoll::force\_redraw}}();}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00079\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a3bacdbfc7f91491090c16ffbb8d1a7c6}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00080\ \mbox{\hyperlink{classWinStatsPianoRoll_a3bacdbfc7f91491090c16ffbb8d1a7c6}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00081\ \ \ \mbox{\hyperlink{classPStatPianoRoll_a66d2cc2ef8fb156af9978b09e81b1593}{PStatPianoRoll::changed\_size}}(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00089\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a68c1b6a6a62fdc0ab0b0973dffdfcf48}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00090\ \mbox{\hyperlink{classWinStatsPianoRoll_a68c1b6a6a62fdc0ab0b0973dffdfcf48}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordtype}{int}\ old\_unit\_mask\ =\ get\_guide\_bar\_units();}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{if}\ ((old\_unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms))\ !=\ 0)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ unit\_mask\ =\ unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms);}
\DoxyCodeLine{00094\ \ \ \ \ unit\_mask\ |=\ (old\_unit\_mask\ \&\ GBU\_show\_units);}
\DoxyCodeLine{00095\ \ \ \ \ set\_guide\_bar\_units(unit\_mask);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00098\ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00099\ \ \ \ \ rect.left\ =\ \_right\_margin;}
\DoxyCodeLine{00100\ \ \ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00107\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a4971ab42fedb7817ee11a454f3a3738d}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00108\ \mbox{\hyperlink{classWinStatsPianoRoll_a4971ab42fedb7817ee11a454f3a3738d}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(\_thread\_index,\ collector\_index,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00111\ \ \ \}}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_ac8d3cfb44cfae0f2e8cf748bcf11f1e0}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00118\ \mbox{\hyperlink{classWinStatsPianoRoll_ac8d3cfb44cfae0f2e8cf748bcf11f1e0}{on\_popup\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00119\ \ \ POINT\ point;}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0\ \&\&\ GetCursorPos(\&point))\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \_popup\_index\ =\ collector\_index;}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ HMENU\ popup\ =\ CreatePopupMenu();}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ std::string\ label\ =\ \mbox{\hyperlink{classWinStatsPianoRoll_ae3f58277e37172665d056ed825382da5}{get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (!label.empty())\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_DISABLED,\ 0,\ label.c\_str());}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 102,\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}});}
\DoxyCodeLine{00130\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 103,\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}});}
\DoxyCodeLine{00131\ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_SEPARATOR,\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00132\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 104,\ \textcolor{stringliteral}{"{}Change\ Color..."{}});}
\DoxyCodeLine{00133\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 105,\ \textcolor{stringliteral}{"{}Reset\ Color"{}});}
\DoxyCodeLine{00134\ \ \ \ \ TrackPopupMenu(popup,\ TPM\_LEFTBUTTON,\ point.x,\ point.y,\ 0,\ \_window,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00135\ \ \ \}}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00142\ std::string\ \mbox{\hyperlink{classWinStatsPianoRoll_ae3f58277e37172665d056ed825382da5}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00143\ \mbox{\hyperlink{classWinStatsPianoRoll_ae3f58277e37172665d056ed825382da5}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatPianoRoll_ae65de5ce271954065ce5f257c1d55845}{PStatPianoRoll::get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00145\ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a63489fcc1975121cfb04b4c1b22218dc}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00152\ \mbox{\hyperlink{classWinStatsPianoRoll_a63489fcc1975121cfb04b4c1b22218dc}{set\_horizontal\_scale}}(\textcolor{keywordtype}{double}\ time\_width)\ \{}
\DoxyCodeLine{00153\ \ \ PStatPianoRoll::set\_horizontal\_scale(time\_width);}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ RECT\ rect;}
\DoxyCodeLine{00156\ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00157\ \ \ rect.bottom\ =\ \_top\_margin;}
\DoxyCodeLine{00158\ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00159\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00164\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a273c5dc655d93d092162d5edf5405ce7}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00165\ \mbox{\hyperlink{classWinStatsPianoRoll_a273c5dc655d93d092162d5edf5405ce7}{normal\_guide\_bars}}()\ \{}
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ We\ want\ vaguely\ 100\ pixels\ between\ guide\ bars.}}
\DoxyCodeLine{00167\ \ \ \mbox{\hyperlink{classPStatGraph_a59fe90cff2e9502493621b3d54b224d9}{update\_guide\_bars}}(get\_xsize()\ /\ (\_pixel\_scale\ *\ 25),\ get\_horizontal\_scale());}
\DoxyCodeLine{00168\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00173\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a332f523bc0f5405963827013de83abcc}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00174\ \mbox{\hyperlink{classWinStatsPianoRoll_a332f523bc0f5405963827013de83abcc}{clear\_region}}()\ \{}
\DoxyCodeLine{00175\ \ \ RECT\ rect\ =\ \{\ 0,\ 0,\ get\_xsize(),\ get\_ysize()\ \};}
\DoxyCodeLine{00176\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(WHITE\_BRUSH));}
\DoxyCodeLine{00177\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00182\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_ade19b6c6c6e7c38b2d5729ba7ea6c927}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00183\ \mbox{\hyperlink{classWinStatsPianoRoll_ade19b6c6c6e7c38b2d5729ba7ea6c927}{begin\_draw}}()\ \{}
\DoxyCodeLine{00184\ \ \ \mbox{\hyperlink{classWinStatsPianoRoll_a332f523bc0f5405963827013de83abcc}{clear\_region}}();}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ guide\ bars.}}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00188\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ draw\_guide\_bar(\_bitmap\_dc,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i));}
\DoxyCodeLine{00190\ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ SelectObject(\_bitmap\_dc,\ GetStockObject(NULL\_PEN));}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00200\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a579a78552d4266e50e775ef9025b3325}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00201\ \mbox{\hyperlink{classWinStatsPianoRoll_a579a78552d4266e50e775ef9025b3325}{begin\_row}}(\textcolor{keywordtype}{int}\ row)\ \{}
\DoxyCodeLine{00202\ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_label\_collector(row);}
\DoxyCodeLine{00203\ \ \ HBRUSH\ brush\ =\ \mbox{\hyperlink{classWinStatsGraph_a6c23dc88d8af5cc9e790ff31a8f74f09}{get\_collector\_brush}}(collector\_index,\ \_highlighted\_index\ ==\ collector\_index);}
\DoxyCodeLine{00204\ \ \ SelectObject(\_bitmap\_dc,\ brush);}
\DoxyCodeLine{00205\ \ \ SelectObject(\_bitmap\_dc,\ GetStockObject(NULL\_PEN));}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00211\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a79b8b383ac30400e59016919027aa12c}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00212\ \mbox{\hyperlink{classWinStatsPianoRoll_a79b8b383ac30400e59016919027aa12c}{draw\_bar}}(\textcolor{keywordtype}{int}\ row,\ \textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x)\ \{}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordflow}{if}\ (row\ >=\ 0\ \&\&\ row\ <\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_ad12c610133eb0407a39f88f6a809f11f}{get\_num\_labels}}())\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_ad4e086abd5ecb4e7e188472eb483ec0e}{get\_label\_y}}(row)\ -\/\ \_graph\_top;}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_acfebaef679fbf8ecab02521d06d9ef48}{get\_label\_height}}(row);}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ RoundRect(\_bitmap\_dc,\ from\_x,\ y\ -\/\ height\ +\ 2,\ to\_x,\ y\ -\/\ 2,\ \_pixel\_scale,\ \_pixel\_scale);}
\DoxyCodeLine{00218\ \ \ \}}
\DoxyCodeLine{00219\ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00225\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a5d74c55eba732e5d0497f1c4ce8dad83}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00226\ \mbox{\hyperlink{classWinStatsPianoRoll_a5d74c55eba732e5d0497f1c4ce8dad83}{end\_draw}}()\ \{}
\DoxyCodeLine{00227\ \ \ InvalidateRect(\_graph\_window,\ \textcolor{keyword}{nullptr},\ FALSE);}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00233\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a024b6af65221c089d9904f78327900a5}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00234\ \mbox{\hyperlink{classWinStatsPianoRoll_a024b6af65221c089d9904f78327900a5}{idle}}()\ \{}
\DoxyCodeLine{00235\ \ \ \textcolor{keywordflow}{if}\ (\_labels\_changed)\ \{}
\DoxyCodeLine{00236\ \ \ \ \ update\_labels();}
\DoxyCodeLine{00237\ \ \ \}}
\DoxyCodeLine{00238\ \}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00243\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classWinStatsPianoRoll_a66a81e897b870b340774c06265f4cc9d}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00244\ \mbox{\hyperlink{classWinStatsPianoRoll_a66a81e897b870b340774c06265f4cc9d}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00246\ \ \ \mbox{\hyperlink{classWinStatsGraph_a09816c5e652ee201e9e4d82b442fffdf}{WinStatsGraph::get\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00253\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_adfffacc2a35be044129217294bc8528b}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00254\ \mbox{\hyperlink{classWinStatsPianoRoll_adfffacc2a35be044129217294bc8528b}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00256\ \ \ \mbox{\hyperlink{classWinStatsGraph_ac5e136b133729a00045771eb9a1085fe}{WinStatsGraph::set\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00257\ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00262\ LONG\ WinStatsPianoRoll::}
\DoxyCodeLine{00263\ window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00264\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00265\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_new\_guide\_bar);}
\DoxyCodeLine{00268\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \textcolor{keywordflow}{case}\ WM\_COMMAND:}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordflow}{switch}\ (LOWORD(wparam))\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{case}\ 102:}
\DoxyCodeLine{00276\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(get\_thread\_index(),\ \_popup\_index,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keywordflow}{case}\ 103:}
\DoxyCodeLine{00280\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a19a5f72039f430ce2b33a559c183f5b0}{open\_flame\_graph}}(get\_thread\_index(),\ \_popup\_index);}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordflow}{case}\ 104:}
\DoxyCodeLine{00284\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_aa0bc0a0c7e4117e72da204b54debe60f}{choose\_collector\_color}}(\_popup\_index);}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordflow}{case}\ 105:}
\DoxyCodeLine{00288\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a7d1d9acd32503d2aebd77c86c5ad42b5}{reset\_collector\_color}}(\_popup\_index);}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00295\ \ \ \}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsGraph_a9c3aa3051d400418232bea75f31872b5}{WinStatsGraph::window\_proc}}(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00298\ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00303\ LONG\ WinStatsPianoRoll::}
\DoxyCodeLine{00304\ graph\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00305\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00306\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_scale);}
\DoxyCodeLine{00309\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \_drag\_scale\_start\ =\ pixel\_to\_height(x);}
\DoxyCodeLine{00311\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_guide\_bar\ \&\&\ \_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00316\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \_drag\_start\_x\ =\ x;}
\DoxyCodeLine{00318\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \textcolor{keywordflow}{case}\ WM\_MOUSEMOVE:}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_none\ \&\&\ \_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ is\ over\ a\ color\ bar,\ highlight\ it.}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00327\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(x,\ y);}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(collector\_index);}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_ab41c5cb94385c9056550b6770718f373}{on\_enter\_label}}(collector\_index);}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ we\ want\ to\ get\ a\ WM\_MOUSELEAVE\ when\ the\ mouse\ leaves\ the\ graph}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \textcolor{comment}{//\ window.}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ TRACKMOUSEEVENT\ tme\ =\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(TRACKMOUSEEVENT),}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ TME\_LEAVE,}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \_graph\_window,}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ 0}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00341\ \ \ \ \ \ \ TrackMouseEvent(\&tme);}
\DoxyCodeLine{00342\ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ in\ some\ drag\ mode,\ stop\ highlighting.}}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00347\ \ \ \ \ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00350\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ ratio\ =\ (double)x\ /\ (\textcolor{keywordtype}{double})get\_xsize();}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ratio\ >\ 0.0f)\ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsPianoRoll_a63489fcc1975121cfb04b4c1b22218dc}{set\_horizontal\_scale}}(\_drag\_scale\_start\ /\ ratio);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ haven't\ created\ the\ new\ guide\ bar\ yet;\ we\ won't\ until\ the\ mouse}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \textcolor{comment}{//\ comes\ within\ the\ graph's\ region.}}
\DoxyCodeLine{00360\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ 0\ \&\&\ x\ <\ get\_xsize())\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a3a7fc8b8eb05e7ff7a6f044ebee7035a}{add\_user\_guide\_bar}}(pixel\_to\_height(x));}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00368\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(x));}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{keywordflow}{case}\ WM\_MOUSELEAVE:}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ leaves\ the\ graph,\ stop\ highlighting.}}
\DoxyCodeLine{00376\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00377\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONUP:}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00383\ \ \ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 0\ ||\ x\ >=\ get\_xsize())\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a7627d5e29b88196713f4ba3cea78ea17}{remove\_user\_guide\_bar}}(\_drag\_guide\_bar);}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(x));}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00394\ \ \ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00396\ \ \ \ \ \}}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDBLCLK:}
\DoxyCodeLine{00400\ \ \ \ \ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \textcolor{comment}{//\ Double-\/clicking\ on\ a\ color\ bar\ in\ the\ graph\ is\ the\ same\ as\ double-\/}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \textcolor{comment}{//\ clicking\ on\ the\ corresponding\ label.}}
\DoxyCodeLine{00403\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsPianoRoll_a4971ab42fedb7817ee11a454f3a3738d}{on\_click\_label}}(get\_collector\_under\_pixel(x,\ y));}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00407\ \ \ \ \ \}}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \textcolor{keywordflow}{case}\ WM\_CONTEXTMENU:}
\DoxyCodeLine{00411\ \ \ \ \ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ POINT\ point;}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (GetCursorPos(\&point)\ \&\&\ ScreenToClient(\_graph\_window,\ \&point))\ \{}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(point.x,\ point.y);}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsPianoRoll_ac8d3cfb44cfae0f2e8cf748bcf11f1e0}{on\_popup\_label}}(collector\_index);}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00420\ \ \ \ \ \}}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00425\ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \textcolor{keywordflow}{return}\ WinStatsGraph::graph\_window\_proc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00428\ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00435\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a21a0646f3933c17c181c511c6e284481}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00436\ \mbox{\hyperlink{classWinStatsPianoRoll_a21a0646f3933c17c181c511c6e284481}{additional\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00437\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ labels\ for\ the\ guide\ bars.}}
\DoxyCodeLine{00438\ \ \ SelectObject(hdc,\ WinStatsGraph::\_monitor-\/>get\_font());}
\DoxyCodeLine{00439\ \ \ SetTextAlign(hdc,\ TA\_LEFT\ |\ TA\_BOTTOM);}
\DoxyCodeLine{00440\ \ \ SetBkMode(hdc,\ TRANSPARENT);}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \textcolor{keywordtype}{int}\ y\ =\ \_top\_margin\ -\/\ 2;}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00445\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00446\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00447\ \ \ \ \ draw\_guide\_label(hdc,\ y,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i));}
\DoxyCodeLine{00448\ \ \ \}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00451\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00452\ \ \ \ \ draw\_guide\_label(hdc,\ y,\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i));}
\DoxyCodeLine{00453\ \ \ \}}
\DoxyCodeLine{00454\ \}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00461\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsPianoRoll_a127ab80e7c106a0fa9c39ec0de04aa7e}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00462\ \mbox{\hyperlink{classWinStatsPianoRoll_a127ab80e7c106a0fa9c39ec0de04aa7e}{additional\_graph\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00463\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00464\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00465\ \ \ \ \ draw\_guide\_bar(hdc,\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i));}
\DoxyCodeLine{00466\ \ \ \}}
\DoxyCodeLine{00467\ \}}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00473\ std::string\ \mbox{\hyperlink{classWinStatsPianoRoll_a73a519552a6608851584cea771d4737c}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00474\ \mbox{\hyperlink{classWinStatsPianoRoll_a73a519552a6608851584cea771d4737c}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00475\ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(mouse\_x,\ mouse\_y);}
\DoxyCodeLine{00476\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsPianoRoll_ae3f58277e37172665d056ed825382da5}{get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00478\ \ \ \}}
\DoxyCodeLine{00479\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00480\ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00487\ WinStatsGraph::DragMode\ \mbox{\hyperlink{classWinStatsPianoRoll_afd18326c26a447c84153d98a86d4fa66}{WinStatsPianoRoll::}}}
\DoxyCodeLine{00488\ \mbox{\hyperlink{classWinStatsPianoRoll_afd18326c26a447c84153d98a86d4fa66}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height)\ \{}
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{if}\ (mouse\_y\ >=\ \_graph\_top\ \&\&\ mouse\_y\ <\ \_graph\_top\ +\ get\_ysize())\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \textcolor{keywordflow}{if}\ (mouse\_x\ >=\ \_graph\_left\ \&\&\ mouse\_x\ <\ \_graph\_left\ +\ get\_xsize())\ \{}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \textcolor{comment}{//\ See\ if\ the\ mouse\ is\ over\ a\ user-\/defined\ guide\ bar.}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ mouse\_x\ -\/\ \_graph\_left;}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(x\ -\/\ 2);}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(x\ +\ 2);}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height);}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_guide\_bar;}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (mouse\_x\ <\ \_left\_margin\ -\/\ 2\ ||}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mouse\_x\ >\ width\ -\/\ \_right\_margin\ +\ 2)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ mouse\ is\ left\ or\ right\ of\ the\ graph;\ maybe\ create\ a\ new\ guide}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \textcolor{comment}{//\ bar.}}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_new\_guide\_bar;}
\DoxyCodeLine{00505\ \ \ \ \ \}}
\DoxyCodeLine{00506\ \ \ \}}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsGraph_a6e217fc14d67434560f235087055ccd4}{WinStatsGraph::consider\_drag\_start}}(mouse\_x,\ mouse\_y,\ width,\ height);}
\DoxyCodeLine{00509\ \}}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00515\ \textcolor{keywordtype}{int}\ WinStatsPianoRoll::}
\DoxyCodeLine{00516\ get\_collector\_under\_pixel(\textcolor{keywordtype}{int}\ xpoint,\ \textcolor{keywordtype}{int}\ ypoint)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordflow}{if}\ (\_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_ad12c610133eb0407a39f88f6a809f11f}{get\_num\_labels}}()\ ==\ 0)\ \{}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00519\ \ \ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \textcolor{comment}{//\ Assume\ all\ of\ the\ labels\ are\ the\ same\ height.}}
\DoxyCodeLine{00522\ \ \ \textcolor{keywordtype}{int}\ height\ =\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_acfebaef679fbf8ecab02521d06d9ef48}{get\_label\_height}}(0);}
\DoxyCodeLine{00523\ \ \ \textcolor{keywordtype}{int}\ row\ =\ (get\_ysize()\ -\/\ ypoint)\ /\ height;}
\DoxyCodeLine{00524\ \ \ \textcolor{keywordflow}{if}\ (row\ >=\ 0\ \&\&\ row\ <\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_ad12c610133eb0407a39f88f6a809f11f}{get\_num\_labels}}())\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{return}\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a150a291ed78bfc859345aa045ee7ea9a}{get\_label\_collector\_index}}(row);}
\DoxyCodeLine{00526\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00528\ \ \ \}}
\DoxyCodeLine{00529\ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00534\ \textcolor{keywordtype}{void}\ WinStatsPianoRoll::}
\DoxyCodeLine{00535\ update\_labels()\ \{}
\DoxyCodeLine{00536\ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a5d313cea056b162fb5501c2f3fa408fe}{replace\_labels}}(WinStatsGraph::\_monitor,\ \textcolor{keyword}{this},}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_thread\_index,\ \_labels,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00538\ \ \ \_labels\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00539\ \}}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00544\ \textcolor{keywordtype}{void}\ WinStatsPianoRoll::}
\DoxyCodeLine{00545\ draw\_guide\_bar(HDC\ hdc,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00546\ \ \ \textcolor{keywordtype}{int}\ x\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ \textcolor{keywordflow}{if}\ (x\ >\ 0\ \&\&\ x\ <\ get\_xsize()\ -\/\ 1)\ \{}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{comment}{//\ Only\ draw\ it\ if\ it's\ not\ too\ close\ to\ either\ edge.}}
\DoxyCodeLine{00550\ \ \ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00552\ \ \ \ \ \ \ SelectObject(hdc,\ \_light\_pen);}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00556\ \ \ \ \ \ \ SelectObject(hdc,\ \_user\_guide\_bar\_pen);}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_normal:}
\DoxyCodeLine{00560\ \ \ \ \ \ \ SelectObject(hdc,\ \_dark\_pen);}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00562\ \ \ \ \ \}}
\DoxyCodeLine{00563\ \ \ \ \ MoveToEx(hdc,\ x,\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00564\ \ \ \ \ LineTo(hdc,\ x,\ get\_ysize());}
\DoxyCodeLine{00565\ \ \ \}}
\DoxyCodeLine{00566\ \}}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00571\ \textcolor{keywordtype}{void}\ WinStatsPianoRoll::}
\DoxyCodeLine{00572\ draw\_guide\_label(HDC\ hdc,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00573\ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00574\ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00575\ \ \ \ \ SetTextColor(hdc,\ \_light\_color);}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00579\ \ \ \ \ SetTextColor(hdc,\ \_user\_guide\_bar\_color);}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \textcolor{keywordflow}{case}\ GBS\_normal:}
\DoxyCodeLine{00583\ \ \ \ \ SetTextColor(hdc,\ \_dark\_color);}
\DoxyCodeLine{00584\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00585\ \ \ \}}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ \textcolor{keywordtype}{int}\ x\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00588\ \ \ \textcolor{keyword}{const}\ std::string\ \&label\ =\ bar.\_label;}
\DoxyCodeLine{00589\ \ \ SIZE\ size;}
\DoxyCodeLine{00590\ \ \ GetTextExtentPoint32(hdc,\ label.data(),\ label.length(),\ \&size);}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \textcolor{keywordflow}{if}\ (bar.\_style\ !=\ GBS\_user)\ \{}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(x\ -\/\ size.cx);}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(x\ +\ size.cx);}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height)\ >=\ 0)\ \{}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \textcolor{comment}{//\ Omit\ the\ label:\ there's\ a\ user-\/defined\ guide\ bar\ in\ the\ same\ space.}}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00598\ \ \ \ \ \}}
\DoxyCodeLine{00599\ \ \ \}}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \textcolor{keywordtype}{int}\ this\_x\ =\ \_graph\_left\ +\ x\ -\/\ size.cx\ /\ 2;}
\DoxyCodeLine{00602\ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ 0\ \&\&\ x\ <\ get\_xsize())\ \{}
\DoxyCodeLine{00603\ \ \ \ \ TextOut(hdc,\ this\_x,\ y,}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ label.data(),\ label.length());}
\DoxyCodeLine{00605\ \ \ \}}
\DoxyCodeLine{00606\ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00611\ \textcolor{keywordtype}{void}\ WinStatsPianoRoll::}
\DoxyCodeLine{00612\ create\_window()\ \{}
\DoxyCodeLine{00613\ \ \ \textcolor{keywordflow}{if}\ (\_window)\ \{}
\DoxyCodeLine{00614\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00615\ \ \ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ HINSTANCE\ application\ =\ GetModuleHandle(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00618\ \ \ register\_window\_class(application);}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =}
\DoxyCodeLine{00621\ \ \ \ \ WinStatsGraph::\_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00622\ \ \ std::string\ thread\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a5b905293fa940d70742612a4ec5a87f6}{get\_thread\_name}}(\_thread\_index);}
\DoxyCodeLine{00623\ \ \ std::string\ window\_title\ =\ thread\_name\ +\ \textcolor{stringliteral}{"{}\ thread\ piano\ roll"{}};}
\DoxyCodeLine{00624\ \ \ POINT\ window\_pos\ =\ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a2f0a1a79cadac41d2e0d9722c80ca0dd}{get\_new\_window\_pos}}();}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ RECT\ win\_rect\ =\ \{}
\DoxyCodeLine{00627\ \ \ \ \ 0,\ 0,}
\DoxyCodeLine{00628\ \ \ \ \ \_left\_margin\ +\ get\_xsize()\ +\ \_right\_margin,}
\DoxyCodeLine{00629\ \ \ \ \ \_top\_margin\ +\ get\_ysize()\ +\ \_bottom\_margin}
\DoxyCodeLine{00630\ \ \ \};}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00632\ \ \ \textcolor{comment}{//\ compute\ window\ size\ based\ on\ desired\ client\ area\ size}}
\DoxyCodeLine{00633\ \ \ AdjustWindowRect(\&win\_rect,\ graph\_window\_style,\ FALSE);}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \_window\ =}
\DoxyCodeLine{00636\ \ \ \ \ CreateWindowEx(WS\_EX\_DLGMODALFRAME,\ \_window\_class\_name,}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ window\_title.c\_str(),\ graph\_window\_style,}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ window\_pos.x,\ window\_pos.y,}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ win\_rect.right\ -\/\ win\_rect.left,}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ win\_rect.bottom\ -\/\ win\_rect.top,}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>get\_window(),}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},\ application,\ 0);}
\DoxyCodeLine{00643\ \ \ \textcolor{keywordflow}{if}\ (!\_window)\ \{}
\DoxyCodeLine{00644\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Could\ not\ create\ PianoRoll\ window!\(\backslash\)n"{}};}
\DoxyCodeLine{00645\ \ \ \ \ exit(1);}
\DoxyCodeLine{00646\ \ \ \}}
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00648\ \ \ SetWindowLongPtr(\_window,\ 0,\ (LONG\_PTR)\textcolor{keyword}{this});}
\DoxyCodeLine{00649\ \ \ \mbox{\hyperlink{classWinStatsGraph_ae4264dd0c02b3f91b5300f523b1aa5c6}{setup\_label\_stack}}();}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \textcolor{comment}{//\ Ensure\ that\ the\ window\ is\ on\ top\ of\ the\ stack.}}
\DoxyCodeLine{00652\ \ \ SetWindowPos(\_window,\ HWND\_TOP,\ 0,\ 0,\ 0,\ 0,}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SWP\_NOMOVE\ |\ SWP\_NOSIZE\ |\ SWP\_SHOWWINDOW);}
\DoxyCodeLine{00654\ \}}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00660\ \textcolor{keywordtype}{void}\ WinStatsPianoRoll::}
\DoxyCodeLine{00661\ register\_window\_class(HINSTANCE\ application)\ \{}
\DoxyCodeLine{00662\ \ \ \textcolor{keywordflow}{if}\ (\_window\_class\_registered)\ \{}
\DoxyCodeLine{00663\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00664\ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \ \ WNDCLASS\ wc;}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \ \ ZeroMemory(\&wc,\ \textcolor{keyword}{sizeof}(WNDCLASS));}
\DoxyCodeLine{00669\ \ \ wc.style\ =\ 0;}
\DoxyCodeLine{00670\ \ \ wc.lpfnWndProc\ =\ (WNDPROC)static\_window\_proc;}
\DoxyCodeLine{00671\ \ \ wc.hInstance\ =\ application;}
\DoxyCodeLine{00672\ \ \ wc.hCursor\ =\ LoadCursor(\textcolor{keyword}{nullptr},\ IDC\_ARROW);}
\DoxyCodeLine{00673\ \ \ wc.hbrBackground\ =\ (HBRUSH)COLOR\_WINDOW;}
\DoxyCodeLine{00674\ \ \ wc.lpszMenuName\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00675\ \ \ wc.lpszClassName\ =\ \_window\_class\_name;}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \ \ \textcolor{comment}{//\ Reserve\ space\ to\ associate\ the\ this\ pointer\ with\ the\ window.}}
\DoxyCodeLine{00678\ \ \ wc.cbWndExtra\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classWinStatsPianoRoll}{WinStatsPianoRoll}}\ *);}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \ \ \textcolor{keywordflow}{if}\ (!RegisterClass(\&wc))\ \{}
\DoxyCodeLine{00681\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Could\ not\ register\ PianoRoll\ window\ class!\(\backslash\)n"{}};}
\DoxyCodeLine{00682\ \ \ \ \ exit(1);}
\DoxyCodeLine{00683\ \ \ \}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \ \ \_window\_class\_registered\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00686\ \}}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00691\ LONG\ WINAPI\ WinStatsPianoRoll::}
\DoxyCodeLine{00692\ static\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00693\ \ \ \mbox{\hyperlink{classWinStatsPianoRoll}{WinStatsPianoRoll}}\ *self\ =\ (\mbox{\hyperlink{classWinStatsPianoRoll}{WinStatsPianoRoll}}\ *)GetWindowLongPtr(hwnd,\ 0);}
\DoxyCodeLine{00694\ \ \ \textcolor{keywordflow}{if}\ (self\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ self-\/>\_window\ ==\ hwnd)\ \{}
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{keywordflow}{return}\ self-\/>window\_proc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00696\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00697\ \ \ \ \ \textcolor{keywordflow}{return}\ DefWindowProc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00698\ \ \ \}}
\DoxyCodeLine{00699\ \}}

\end{DoxyCode}

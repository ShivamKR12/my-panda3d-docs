\doxysection{internal\+Name.\+cxx}
\hypertarget{internalName_8cxx_source}{}\label{internalName_8cxx_source}\index{panda/src/gobj/internalName.cxx@{panda/src/gobj/internalName.cxx}}
\mbox{\hyperlink{internalName_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{internalName_8h}{internalName.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{preparedGraphicsObjects_8h}{preparedGraphicsObjects.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_root;}
\DoxyCodeLine{00024\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_error;}
\DoxyCodeLine{00025\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_default;}
\DoxyCodeLine{00026\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_vertex;}
\DoxyCodeLine{00027\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_normal;}
\DoxyCodeLine{00028\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_tangent;}
\DoxyCodeLine{00029\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_binormal;}
\DoxyCodeLine{00030\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_texcoord;}
\DoxyCodeLine{00031\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_color;}
\DoxyCodeLine{00032\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_rotate;}
\DoxyCodeLine{00033\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_size;}
\DoxyCodeLine{00034\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_aspect\_ratio;}
\DoxyCodeLine{00035\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_transform\_blend;}
\DoxyCodeLine{00036\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_transform\_weight;}
\DoxyCodeLine{00037\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_transform\_index;}
\DoxyCodeLine{00038\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_index;}
\DoxyCodeLine{00039\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_world;}
\DoxyCodeLine{00040\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_camera;}
\DoxyCodeLine{00041\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_model;}
\DoxyCodeLine{00042\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_view;}
\DoxyCodeLine{00043\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::\_instance\_matrix;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ InternalName::\_type\_handle;}
\DoxyCodeLine{00046\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ InternalName::\_texcoord\_type\_handle;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#ifdef\ HAVE\_PYTHON}}
\DoxyCodeLine{00049\ InternalName::PyInternTable\ InternalName::\_py\_intern\_table;}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ InternalName::LiteralTable\ InternalName::\_literal\_table;}
\DoxyCodeLine{00053\ \mbox{\hyperlink{classLightMutex}{LightMutex}}\ InternalName::\_literal\_table\_lock;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00058\ InternalName::}
\DoxyCodeLine{00059\ InternalName(\mbox{\hyperlink{classInternalName}{InternalName}}\ *parent,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&basename)\ :}
\DoxyCodeLine{00060\ \ \ \_parent(parent),}
\DoxyCodeLine{00061\ \ \ \_basename(basename)}
\DoxyCodeLine{00062\ \{}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00068\ InternalName::}
\DoxyCodeLine{00069\ \string~InternalName()\ \{}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00071\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ unref()\ should\ have\ removed\ us\ from\ our\ parent's\ table\ already.}}
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_parent-\/>\_name\_table\_lock);}
\DoxyCodeLine{00074\ \ \ \ \ NameTable::iterator\ ni\ =\ \_parent-\/>\_name\_table.find(\_basename);}
\DoxyCodeLine{00075\ \ \ \ \ nassertv(ni\ ==\ \_parent-\/>\_name\_table.end());}
\DoxyCodeLine{00076\ \ \ \}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00084\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classInternalName_aea45afc170de842224fc5b0cf00d277e}{InternalName::}}}
\DoxyCodeLine{00085\ \mbox{\hyperlink{classInternalName_aea45afc170de842224fc5b0cf00d277e}{unref}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ No\ parent;\ no\ problem.\ \ This\ is\ the\ root\ InternalName.\ \ Actually,\ this}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ probably\ shouldn't\ be\ destructing,\ but\ I\ guess\ it\ might\ at\ application}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ shutdown.}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{return}\ TypedWritableReferenceCount::unref();}
\DoxyCodeLine{00091\ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_parent-\/>\_name\_table\_lock);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{if}\ (ReferenceCount::unref())\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{//\ The\ reference\ count\ has\ just\ reached\ zero.}}
\DoxyCodeLine{00100\ \ \ NameTable::iterator\ ni\ =\ \_parent-\/>\_name\_table.find(\_basename);}
\DoxyCodeLine{00101\ \ \ nassertr(ni\ !=\ \_parent-\/>\_name\_table.end(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00102\ \ \ \_parent-\/>\_name\_table.erase(ni);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00112\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::}
\DoxyCodeLine{00113\ append(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00114\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{if}\ (name.empty())\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00118\ \ \ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \textcolor{keywordtype}{size\_t}\ dot\ =\ name.rfind(\textcolor{charliteral}{'.'});}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{if}\ (dot\ !=\ string::npos)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return}\ append(name.substr(0,\ dot))-\/>append(name.substr(dot\ +\ 1));}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_name\_table\_lock);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ NameTable::iterator\ ni\ =\ \_name\_table.find(name);}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{if}\ (ni\ !=\ \_name\_table.end())\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{return}\ (*ni).second;}
\DoxyCodeLine{00130\ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{classInternalName}{InternalName}}\ *internal\_name\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classInternalName}{InternalName}}(\textcolor{keyword}{this},\ name);}
\DoxyCodeLine{00133\ \ \ \_name\_table[name]\ =\ internal\_name;}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordflow}{return}\ internal\_name;}
\DoxyCodeLine{00135\ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00141\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classInternalName_a9fd35ab9c168d1b4e3dcb6822086ae61}{InternalName::}}}
\DoxyCodeLine{00142\ \mbox{\hyperlink{classInternalName_a9fd35ab9c168d1b4e3dcb6822086ae61}{get\_name}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00143\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ ==\ get\_root())\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{return}\ \_basename;}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ string();}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordflow}{return}\ \_parent-\/>get\_name()\ +\ \textcolor{stringliteral}{"{}."{}}\ +\ \_basename;}
\DoxyCodeLine{00151\ \ \ \}}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00157\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classInternalName_a4ba0b46d364de974d78a114b78f5cba8}{InternalName::}}}
\DoxyCodeLine{00158\ \mbox{\hyperlink{classInternalName_a4ba0b46d364de974d78a114b78f5cba8}{join}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&sep)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ ==\ get\_root())\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{return}\ \_basename;}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{return}\ string();}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordflow}{return}\ \_parent-\/>join(sep)\ +\ sep\ +\ \_basename;}
\DoxyCodeLine{00167\ \ \ \}}
\DoxyCodeLine{00168\ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00177\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classInternalName_a4f712c95633c2c4767ae5df976ca0916}{InternalName::}}}
\DoxyCodeLine{00178\ \mbox{\hyperlink{classInternalName_a4f712c95633c2c4767ae5df976ca0916}{find\_ancestor}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&basename)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00179\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{if}\ (\_basename\ ==\ basename)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ \_parent-\/>find\_ancestor(basename);}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{if}\ (index\ >=\ 0)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ index\ +\ 1;}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00192\ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00199\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classInternalName}{InternalName}}\ *\mbox{\hyperlink{classInternalName_a0038203112deb7f2e82f1f74c867efe5}{InternalName::}}}
\DoxyCodeLine{00200\ \mbox{\hyperlink{classInternalName_a0038203112deb7f2e82f1f74c867efe5}{get\_ancestor}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00201\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 0)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{return}\ \_parent-\/>get\_ancestor(n\ -\/\ 1);}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_root();}
\DoxyCodeLine{00211\ \ \ \}}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00219\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classInternalName}{InternalName}}\ *\mbox{\hyperlink{classInternalName_aba6c66ae7e12468c30b7b2e396e1d728}{InternalName::}}}
\DoxyCodeLine{00220\ \mbox{\hyperlink{classInternalName_aba6c66ae7e12468c30b7b2e396e1d728}{get\_top}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00221\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ \_parent\ !=\ get\_root())\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordflow}{return}\ \_parent-\/>get\_top();}
\DoxyCodeLine{00225\ \ \ \}}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00234\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classInternalName_ab7f074b1fc5087a8c465291612e99f82}{InternalName::}}}
\DoxyCodeLine{00235\ \mbox{\hyperlink{classInternalName_ab7f074b1fc5087a8c465291612e99f82}{get\_net\_basename}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)\ \{}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (n\ ==\ 0)\ \{}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordflow}{return}\ \_basename;}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ \_parent\ !=\ get\_root())\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{return}\ \_parent-\/>get\_net\_basename(n\ -\/\ 1)\ +\ \textcolor{stringliteral}{"{}."{}}\ +\ \_basename;}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordflow}{return}\ \_basename;}
\DoxyCodeLine{00247\ \ \ \}}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00253\ \textcolor{keywordtype}{void}\ InternalName::}
\DoxyCodeLine{00254\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00255\ \ \ \textcolor{keywordflow}{if}\ (\_parent\ ==\ get\_root())\ \{}
\DoxyCodeLine{00256\ \ \ \ \ out\ <<\ \_basename;}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_parent\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00259\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}(root)"{}};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00262\ \ \ \ \ \_parent-\/>output(out);}
\DoxyCodeLine{00263\ \ \ \ \ out\ <<\ \textcolor{charliteral}{'.'}\ <<\ \_basename;}
\DoxyCodeLine{00264\ \ \ \}}
\DoxyCodeLine{00265\ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00270\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInternalName_a9d50878f04eca40cd0e5ffdcb66af20b}{InternalName::}}}
\DoxyCodeLine{00271\ \mbox{\hyperlink{classInternalName_a9d50878f04eca40cd0e5ffdcb66af20b}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00272\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classInternalName_a91495295c2e06cdd4301b6950646049d}{make\_from\_bam}});}
\DoxyCodeLine{00273\ \ \ BamReader::get\_factory()-\/>register\_factory(\_texcoord\_type\_handle,\ \mbox{\hyperlink{classInternalName_a978b34d851d7166f373ab54871f96300}{make\_texcoord\_from\_bam}});}
\DoxyCodeLine{00274\ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00281\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInternalName_abcf36e663c460c9eef281b72be220da4}{InternalName::}}}
\DoxyCodeLine{00282\ \mbox{\hyperlink{classInternalName_abcf36e663c460c9eef281b72be220da4}{finalize}}(\mbox{\hyperlink{classBamReader}{BamReader}}\ *)\ \{}
\DoxyCodeLine{00283\ \ \ \textcolor{comment}{//\ Unref\ the\ pointer\ that\ we\ explicitly\ reffed\ in\ make\_from\_bam().}}
\DoxyCodeLine{00284\ \ \ \mbox{\hyperlink{classInternalName_aea45afc170de842224fc5b0cf00d277e}{unref}}();}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \textcolor{comment}{//\ We\ should\ never\ get\ back\ to\ zero\ after\ unreffing\ our\ own\ count,\ because}}
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{//\ we\ expect\ to\ have\ been\ stored\ in\ a\ pointer\ somewhere.\ \ If\ we\ do\ get\ to}}
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ zero,\ it's\ a\ memory\ leak;\ the\ way\ to\ avoid\ this\ is\ to\ call\ unref\_delete()}}
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{//\ above\ instead\ of\ unref(),\ but\ this\ is\ dangerous\ to\ do\ from\ within\ a}}
\DoxyCodeLine{00290\ \ \ \textcolor{comment}{//\ virtual\ function.}}
\DoxyCodeLine{00291\ \ \ nassertv(get\_ref\_count()\ !=\ 0);}
\DoxyCodeLine{00292\ \}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00297\ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ InternalName::}
\DoxyCodeLine{00298\ make(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name,\ \textcolor{keywordtype}{int}\ index)\ \{}
\DoxyCodeLine{00299\ \ \ \mbox{\hyperlink{classstd_1_1ostringstream}{std::ostringstream}}\ full;}
\DoxyCodeLine{00300\ \ \ full\ <<\ name\ <<\ index;}
\DoxyCodeLine{00301\ \ \ \textcolor{keywordflow}{return}\ make(full.str());}
\DoxyCodeLine{00302\ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00309\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classInternalName_a91495295c2e06cdd4301b6950646049d}{InternalName::}}}
\DoxyCodeLine{00310\ \mbox{\hyperlink{classInternalName_a91495295c2e06cdd4301b6950646049d}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{//\ The\ process\ of\ making\ a\ InternalName\ is\ slightly\ different\ than\ making}}
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{//\ other\ Writable\ objects.\ \ That\ is\ because\ all\ creation\ of\ InternalNames}}
\DoxyCodeLine{00313\ \ \ \textcolor{comment}{//\ should\ be\ done\ through\ the\ make()\ constructor.}}
\DoxyCodeLine{00314\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \textcolor{comment}{//\ The\ name\ is\ the\ only\ thing\ written\ to\ the\ data\ stream.}}
\DoxyCodeLine{00320\ \ \ \textcolor{keywordtype}{string}\ name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \textcolor{comment}{//\ Make\ a\ new\ InternalName\ with\ that\ name\ (or\ get\ the\ previous\ one\ if\ there}}
\DoxyCodeLine{00323\ \ \ \textcolor{comment}{//\ is\ one\ already).}}
\DoxyCodeLine{00324\ \ \ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ me\ =\ make(name);}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{comment}{//\ But\ now\ we\ have\ a\ problem,\ since\ we\ have\ to\ hold\ the\ reference\ count\ and}}
\DoxyCodeLine{00327\ \ \ \textcolor{comment}{//\ there's\ no\ way\ to\ return\ a\ TypedWritable\ while\ still\ holding\ the}}
\DoxyCodeLine{00328\ \ \ \textcolor{comment}{//\ reference\ count!\ \ We\ work\ around\ this\ by\ explicitly\ upping\ the\ count,\ and}}
\DoxyCodeLine{00329\ \ \ \textcolor{comment}{//\ also\ setting\ a\ finalize()\ callback\ to\ down\ it\ later.}}
\DoxyCodeLine{00330\ \ \ me-\/>ref();}
\DoxyCodeLine{00331\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_a0c2e8dc5a794a4263139116b5b8dcb2d}{register\_finalize}}(me);}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \textcolor{keywordflow}{return}\ me.p();}
\DoxyCodeLine{00334\ \}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00341\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classInternalName_a978b34d851d7166f373ab54871f96300}{InternalName::}}}
\DoxyCodeLine{00342\ \mbox{\hyperlink{classInternalName_a978b34d851d7166f373ab54871f96300}{make\_texcoord\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00343\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00344\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00345\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \textcolor{keywordtype}{string}\ name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00348\ \ \ PT(\mbox{\hyperlink{classInternalName}{InternalName}})\ me;}
\DoxyCodeLine{00349\ \ \ \textcolor{keywordflow}{if}\ (name\ ==\ \textcolor{stringliteral}{"{}default"{}})\ \{}
\DoxyCodeLine{00350\ \ \ \ \ me\ =\ get\_texcoord();}
\DoxyCodeLine{00351\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00352\ \ \ \ \ me\ =\ get\_texcoord\_name(name);}
\DoxyCodeLine{00353\ \ \ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ me-\/>ref();}
\DoxyCodeLine{00356\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_a0c2e8dc5a794a4263139116b5b8dcb2d}{register\_finalize}}(me);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \textcolor{keywordflow}{return}\ me.p();}
\DoxyCodeLine{00359\ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00365\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInternalName_adb4cbfcb9c830c9fe7a58e69e8e1f133}{InternalName::}}}
\DoxyCodeLine{00366\ \mbox{\hyperlink{classInternalName_adb4cbfcb9c830c9fe7a58e69e8e1f133}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&me)\ \{}
\DoxyCodeLine{00367\ \ \ me.add\_string(\mbox{\hyperlink{classInternalName_a9fd35ab9c168d1b4e3dcb6822086ae61}{get\_name}}());}
\DoxyCodeLine{00368\ \}}

\end{DoxyCode}

\doxysection{win\+Stats\+Graph.\+cxx}
\hypertarget{winStatsGraph_8cxx_source}{}\label{winStatsGraph_8cxx_source}\index{pandatool/src/win-\/stats/winStatsGraph.cxx@{pandatool/src/win-\/stats/winStatsGraph.cxx}}
\mbox{\hyperlink{winStatsGraph_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsGraph_8h}{winStatsGraph.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMonitor_8h}{winStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsLabelStack_8h}{winStatsLabelStack.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsServer_8h}{winStatsServer.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{trueClock_8h}{trueClock.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{convert__srgb_8h}{convert\_srgb.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <commctrl.h>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ IDC\_GRAPH\ 100}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ DWORD\ WinStatsGraph::graph\_window\_style\ =}
\DoxyCodeLine{00026\ \ \ WS\_CLIPCHILDREN\ |\ WS\_CLIPSIBLINGS\ |\ WS\_OVERLAPPEDWINDOW\ |\ WS\_VISIBLE;}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00031\ WinStatsGraph::}
\DoxyCodeLine{00032\ WinStatsGraph(\mbox{\hyperlink{classWinStatsMonitor}{WinStatsMonitor}}\ *monitor)\ :}
\DoxyCodeLine{00033\ \ \ \_monitor(monitor)}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ \_window\ =\ 0;}
\DoxyCodeLine{00036\ \ \ \_graph\_window\ =\ 0;}
\DoxyCodeLine{00037\ \ \ \_tooltip\_window\ =\ 0;}
\DoxyCodeLine{00038\ \ \ \_sizewe\_cursor\ =\ LoadCursor(\textcolor{keyword}{nullptr},\ IDC\_SIZEWE);}
\DoxyCodeLine{00039\ \ \ \_hand\_cursor\ =\ LoadCursor(\textcolor{keyword}{nullptr},\ IDC\_HAND);}
\DoxyCodeLine{00040\ \ \ \_bitmap\ =\ 0;}
\DoxyCodeLine{00041\ \ \ \_bitmap\_dc\ =\ 0;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \_graph\_left\ =\ 0;}
\DoxyCodeLine{00044\ \ \ \_graph\_top\ =\ 0;}
\DoxyCodeLine{00045\ \ \ \_bitmap\_xsize\ =\ 0;}
\DoxyCodeLine{00046\ \ \ \_bitmap\_ysize\ =\ 0;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \_pixel\_scale\ =\ monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a9b876aa25df0e63d81ed95d2c37c90b5}{get\_pixel\_scale}}();}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ Default\ margins.}}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{int}\ margin\ =\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00052\ \ \ \_left\_margin\ =\ margin;}
\DoxyCodeLine{00053\ \ \ \_right\_margin\ =\ margin;}
\DoxyCodeLine{00054\ \ \ \_top\_margin\ =\ margin;}
\DoxyCodeLine{00055\ \ \ \_bottom\_margin\ =\ margin;}
\DoxyCodeLine{00056\ \ \ \_top\_label\_stack\_margin\ =\ margin;}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \_dark\_color\ =\ RGB(51,\ 51,\ 51);}
\DoxyCodeLine{00059\ \ \ \_light\_color\ =\ RGB(154,\ 154,\ 154);}
\DoxyCodeLine{00060\ \ \ \_user\_guide\_bar\_color\ =\ RGB(130,\ 150,\ 255);}
\DoxyCodeLine{00061\ \ \ \_frame\_guide\_bar\_color\ =\ RGB(255,\ 10,\ 10);}
\DoxyCodeLine{00062\ \ \ \_dark\_pen\ =\ CreatePen(PS\_SOLID,\ 1,\ \_dark\_color);}
\DoxyCodeLine{00063\ \ \ \_light\_pen\ =\ CreatePen(PS\_SOLID,\ 1,\ \_light\_color);}
\DoxyCodeLine{00064\ \ \ \_user\_guide\_bar\_pen\ =\ CreatePen(PS\_DASH,\ 1,\ \_user\_guide\_bar\_color);}
\DoxyCodeLine{00065\ \ \ \_frame\_guide\_bar\_pen\ =\ CreatePen(PS\_DASH,\ 1,\ \_frame\_guide\_bar\_color);}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \_drag\_mode\ =\ DM\_none;}
\DoxyCodeLine{00068\ \ \ \_potential\_drag\_mode\ =\ DM\_none;}
\DoxyCodeLine{00069\ \ \ \_drag\_scale\_start\ =\ 0.0f;}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \_pause\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00077\ WinStatsGraph::}
\DoxyCodeLine{00078\ \string~WinStatsGraph()\ \{}
\DoxyCodeLine{00079\ \ \ \_monitor\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00080\ \ \ release\_bitmap();}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ DeleteObject(\_dark\_pen);}
\DoxyCodeLine{00083\ \ \ DeleteObject(\_light\_pen);}
\DoxyCodeLine{00084\ \ \ DeleteObject(\_user\_guide\_bar\_pen);}
\DoxyCodeLine{00085\ \ \ DeleteObject(\_frame\_guide\_bar\_pen);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&item\ :\ \_brushes)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ DeleteObject(item.second.first);}
\DoxyCodeLine{00089\ \ \ \ \ DeleteObject(item.second.second);}
\DoxyCodeLine{00090\ \ \ \}}
\DoxyCodeLine{00091\ \ \ \_brushes.clear();}
\DoxyCodeLine{00092\ \ \ \_text\_colors.clear();}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{if}\ (\_graph\_window)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ DestroyWindow(\_graph\_window);}
\DoxyCodeLine{00096\ \ \ \ \ \_graph\_window\ =\ 0;}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{if}\ (\_window)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ DestroyWindow(\_window);}
\DoxyCodeLine{00101\ \ \ \ \ \_window\ =\ 0;}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{if}\ (\_tooltip\_window)\ \{}
\DoxyCodeLine{00105\ \ \ \ \ DestroyWindow(\_tooltip\_window);}
\DoxyCodeLine{00106\ \ \ \ \ \_tooltip\_window\ =\ 0;}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00113\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a647e6ac8b4a69314d42f7f7b0cabab35}{WinStatsGraph::}}}
\DoxyCodeLine{00114\ \mbox{\hyperlink{classWinStatsGraph_a647e6ac8b4a69314d42f7f7b0cabab35}{new\_collector}}(\textcolor{keywordtype}{int}\ new\_collector)\ \{}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00120\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_ad931580f25f48517a8652e91cf76fc19}{WinStatsGraph::}}}
\DoxyCodeLine{00121\ \mbox{\hyperlink{classWinStatsGraph_ad931580f25f48517a8652e91cf76fc19}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00127\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_af587ea85dbd88208f0a5e863a68b2b21}{WinStatsGraph::}}}
\DoxyCodeLine{00128\ \mbox{\hyperlink{classWinStatsGraph_af587ea85dbd88208f0a5e863a68b2b21}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a34152fa836e9bdf03848ff66f6d1af34}{WinStatsGraph::}}}
\DoxyCodeLine{00137\ \mbox{\hyperlink{classWinStatsGraph_a34152fa836e9bdf03848ff66f6d1af34}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00144\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a13dca094434d17ba4a8d6227d050a225}{WinStatsGraph::}}}
\DoxyCodeLine{00145\ \mbox{\hyperlink{classWinStatsGraph_a13dca094434d17ba4a8d6227d050a225}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00152\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a0e6c130af2d0846c9195f291e324e8b4}{WinStatsGraph::}}}
\DoxyCodeLine{00153\ \mbox{\hyperlink{classWinStatsGraph_a0e6c130af2d0846c9195f291e324e8b4}{set\_pause}}(\textcolor{keywordtype}{bool}\ pause)\ \{}
\DoxyCodeLine{00154\ \ \ \_pause\ =\ pause;}
\DoxyCodeLine{00155\ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00160\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_aba675cf8df04c42d2630cdeb8de18b28}{WinStatsGraph::}}}
\DoxyCodeLine{00161\ \mbox{\hyperlink{classWinStatsGraph_aba675cf8df04c42d2630cdeb8de18b28}{user\_guide\_bars\_changed}}()\ \{}
\DoxyCodeLine{00162\ \ \ InvalidateRect(\_window,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00163\ \ \ InvalidateRect(\_graph\_window,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00169\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a16be06b08bc21b5b542205428a1734c9}{WinStatsGraph::}}}
\DoxyCodeLine{00170\ \mbox{\hyperlink{classWinStatsGraph_a16be06b08bc21b5b542205428a1734c9}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00171\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00176\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_af0fb2345b78c22ff952ad7933da28389}{WinStatsGraph::}}}
\DoxyCodeLine{00177\ \mbox{\hyperlink{classWinStatsGraph_af0fb2345b78c22ff952ad7933da28389}{on\_popup\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00178\ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00183\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_ab41c5cb94385c9056550b6770718f373}{WinStatsGraph::}}}
\DoxyCodeLine{00184\ \mbox{\hyperlink{classWinStatsGraph_ab41c5cb94385c9056550b6770718f373}{on\_enter\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ !=\ \_highlighted\_index)\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \_highlighted\_index\ =\ collector\_index;}
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_acc7a6d69229485cc5e6b1a0aaae66ab4}{clear\_graph\_tooltip}}();}
\DoxyCodeLine{00188\ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00195\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{WinStatsGraph::}}}
\DoxyCodeLine{00196\ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{on\_leave\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ ==\ \_highlighted\_index\ \&\&\ collector\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \_highlighted\_index\ =\ -\/1;}
\DoxyCodeLine{00199\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_acc7a6d69229485cc5e6b1a0aaae66ab4}{clear\_graph\_tooltip}}();}
\DoxyCodeLine{00200\ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00201\ \ \ \}}
\DoxyCodeLine{00202\ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00208\ std::string\ \mbox{\hyperlink{classWinStatsGraph_a02897678ac15f7cc2c53b208864de49d}{WinStatsGraph::}}}
\DoxyCodeLine{00209\ \mbox{\hyperlink{classWinStatsGraph_a02897678ac15f7cc2c53b208864de49d}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00211\ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00216\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_acc7a6d69229485cc5e6b1a0aaae66ab4}{WinStatsGraph::}}}
\DoxyCodeLine{00217\ \mbox{\hyperlink{classWinStatsGraph_acc7a6d69229485cc5e6b1a0aaae66ab4}{clear\_graph\_tooltip}}()\ \{}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{if}\ (\_tooltip\_window\ !=\ 0)\ \{}
\DoxyCodeLine{00219\ \ \ \ \ SendMessage(\_tooltip\_window,\ TTM\_POP,\ 0,\ 0);}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00226\ HWND\ \mbox{\hyperlink{classWinStatsGraph_a5bef990c40badf52fe65219577e0c2b0}{WinStatsGraph::}}}
\DoxyCodeLine{00227\ \mbox{\hyperlink{classWinStatsGraph_a5bef990c40badf52fe65219577e0c2b0}{get\_window}}()\ \{}
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{return}\ \_window;}
\DoxyCodeLine{00229\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00235\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a95fbe603386c41220a755ff7539b3179}{WinStatsGraph::}}}
\DoxyCodeLine{00236\ \mbox{\hyperlink{classWinStatsGraph_a95fbe603386c41220a755ff7539b3179}{close}}()\ \{}
\DoxyCodeLine{00237\ \ \ \mbox{\hyperlink{classWinStatsMonitor}{WinStatsMonitor}}\ *monitor\ =\ \_monitor;}
\DoxyCodeLine{00238\ \ \ \_monitor\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordflow}{if}\ (monitor\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00240\ \ \ \ \ monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a5879cbab0eee67f882b752a3387e891e}{remove\_graph}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00241\ \ \ \}}
\DoxyCodeLine{00242\ \}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00247\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_ae4264dd0c02b3f91b5300f523b1aa5c6}{WinStatsGraph::}}}
\DoxyCodeLine{00248\ \mbox{\hyperlink{classWinStatsGraph_ae4264dd0c02b3f91b5300f523b1aa5c6}{setup\_label\_stack}}()\ \{}
\DoxyCodeLine{00249\ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a6c365446cd25c0ac1c0430cd052b9193}{setup}}(\_window);}
\DoxyCodeLine{00250\ \ \ \mbox{\hyperlink{classWinStatsGraph_ad0ab730ec9b18e916af83ecc06624d02}{move\_label\_stack}}();}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00256\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_ad0ab730ec9b18e916af83ecc06624d02}{WinStatsGraph::}}}
\DoxyCodeLine{00257\ \mbox{\hyperlink{classWinStatsGraph_ad0ab730ec9b18e916af83ecc06624d02}{move\_label\_stack}}()\ \{}
\DoxyCodeLine{00258\ \ \ \textcolor{keywordflow}{if}\ (\_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a6ac197658fb8a263a70a2cea82b2446a}{is\_setup}}())\ \{}
\DoxyCodeLine{00259\ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00260\ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ rect.left\ +=\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00263\ \ \ \ \ rect.right\ =\ \_left\_margin\ -\/\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a81ff9eb51ed52d7d3a7bec6ef9bd49cb}{set\_pos}}(rect.left,\ rect.top,}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rect.right\ -\/\ rect.left,\ rect.bottom\ -\/\ rect.top,}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_top\_label\_stack\_margin,\ \_bottom\_margin);}
\DoxyCodeLine{00268\ \ \ \}}
\DoxyCodeLine{00269\ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00274\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a66d3acee49e839e08f8efc12beb03a54}{WinStatsGraph::}}}
\DoxyCodeLine{00275\ \mbox{\hyperlink{classWinStatsGraph_a66d3acee49e839e08f8efc12beb03a54}{start\_animation}}()\ \{}
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{if}\ (!\_timer\_running)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \mbox{\hyperlink{classTrueClock}{TrueClock}}\ *clock\ =\ TrueClock::get\_global\_ptr();}
\DoxyCodeLine{00278\ \ \ \ \ \_time\ =\ clock-\/>get\_short\_time();}
\DoxyCodeLine{00279\ \ \ \ \ SetTimer(\_window,\ 0x100,\ 16,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00280\ \ \ \ \ \_timer\_running\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00281\ \ \ \}}
\DoxyCodeLine{00282\ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00288\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classWinStatsGraph_a428a0d378cb71146d38f61e70bceff25}{WinStatsGraph::}}}
\DoxyCodeLine{00289\ \mbox{\hyperlink{classWinStatsGraph_a428a0d378cb71146d38f61e70bceff25}{animate}}(\textcolor{keywordtype}{double}\ time,\ \textcolor{keywordtype}{double}\ dt)\ \{}
\DoxyCodeLine{00290\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00291\ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00296\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a09816c5e652ee201e9e4d82b442fffdf}{WinStatsGraph::}}}
\DoxyCodeLine{00297\ \mbox{\hyperlink{classWinStatsGraph_a09816c5e652ee201e9e4d82b442fffdf}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00299\ \ \ \mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *server\ =\ (\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_monitor-\/>get\_server();}
\DoxyCodeLine{00300\ \ \ POINT\ client\_origin\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_a1f92e6832505808b8cb817e95b1f1436}{get\_client\_origin}}();}
\DoxyCodeLine{00301\ \ \ WINDOWPLACEMENT\ wp;}
\DoxyCodeLine{00302\ \ \ wp.length\ =\ \textcolor{keyword}{sizeof}(WINDOWPLACEMENT);}
\DoxyCodeLine{00303\ \ \ GetWindowPlacement(\_window,\ \&wp);}
\DoxyCodeLine{00304\ \ \ x\ =\ wp.rcNormalPosition.left\ -\/\ client\_origin.x;}
\DoxyCodeLine{00305\ \ \ y\ =\ wp.rcNormalPosition.top\ -\/\ client\_origin.y;}
\DoxyCodeLine{00306\ \ \ width\ =\ wp.rcNormalPosition.right\ -\/\ wp.rcNormalPosition.left;}
\DoxyCodeLine{00307\ \ \ height\ =\ wp.rcNormalPosition.bottom\ -\/\ wp.rcNormalPosition.top;}
\DoxyCodeLine{00308\ \ \ maximized\ =\ (wp.showCmd\ ==\ SW\_SHOWMAXIMIZED\ ||\ (wp.flags\ \&\ WPF\_RESTORETOMAXIMIZED)\ !=\ 0);}
\DoxyCodeLine{00309\ \ \ minimized\ =\ (wp.showCmd\ ==\ SW\_SHOWMINIMIZED);}
\DoxyCodeLine{00310\ \}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00315\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_ac5e136b133729a00045771eb9a1085fe}{WinStatsGraph::}}}
\DoxyCodeLine{00316\ \mbox{\hyperlink{classWinStatsGraph_ac5e136b133729a00045771eb9a1085fe}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00318\ \ \ \mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *server\ =\ (\mbox{\hyperlink{classWinStatsServer}{WinStatsServer}}\ *)\_monitor-\/>get\_server();}
\DoxyCodeLine{00319\ \ \ POINT\ client\_origin\ =\ server-\/>\mbox{\hyperlink{classWinStatsServer_a1f92e6832505808b8cb817e95b1f1436}{get\_client\_origin}}();}
\DoxyCodeLine{00320\ \ \ WINDOWPLACEMENT\ wp;}
\DoxyCodeLine{00321\ \ \ wp.length\ =\ \textcolor{keyword}{sizeof}(WINDOWPLACEMENT);}
\DoxyCodeLine{00322\ \ \ wp.flags\ =\ maximized\ ?\ WPF\_RESTORETOMAXIMIZED\ :\ 0;}
\DoxyCodeLine{00323\ \ \ wp.showCmd\ =\ minimized\ ?\ SW\_SHOWMINIMIZED\ :\ (maximized\ ?\ SW\_SHOWMAXIMIZED\ :\ SW\_SHOWNORMAL);}
\DoxyCodeLine{00324\ \ \ wp.ptMinPosition.x\ =\ -\/1;}
\DoxyCodeLine{00325\ \ \ wp.ptMinPosition.y\ =\ -\/1;}
\DoxyCodeLine{00326\ \ \ wp.ptMaxPosition.x\ =\ -\/1;}
\DoxyCodeLine{00327\ \ \ wp.ptMaxPosition.y\ =\ -\/1;}
\DoxyCodeLine{00328\ \ \ wp.rcNormalPosition.left\ =\ client\_origin.x\ +\ x;}
\DoxyCodeLine{00329\ \ \ wp.rcNormalPosition.top\ =\ client\_origin.y\ +\ y;}
\DoxyCodeLine{00330\ \ \ wp.rcNormalPosition.right\ =\ wp.rcNormalPosition.left\ +\ width;}
\DoxyCodeLine{00331\ \ \ wp.rcNormalPosition.bottom\ =\ wp.rcNormalPosition.top\ +\ height;}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \textcolor{keywordflow}{if}\ (minimized)\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y;}
\DoxyCodeLine{00335\ \ \ \ \ \_monitor-\/>calc\_iconic\_graph\_window\_pos(\textcolor{keyword}{this},\ x,\ y);}
\DoxyCodeLine{00336\ \ \ \ \ wp.ptMinPosition.x\ =\ x;}
\DoxyCodeLine{00337\ \ \ \ \ wp.ptMinPosition.y\ =\ y;}
\DoxyCodeLine{00338\ \ \ \ \ wp.flags\ |=\ WPF\_SETMINPOSITION;}
\DoxyCodeLine{00339\ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ SetWindowPlacement(\_window,\ \&wp);}
\DoxyCodeLine{00342\ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00347\ HBRUSH\ \mbox{\hyperlink{classWinStatsGraph_a6c23dc88d8af5cc9e790ff31a8f74f09}{WinStatsGraph::}}}
\DoxyCodeLine{00348\ \mbox{\hyperlink{classWinStatsGraph_a6c23dc88d8af5cc9e790ff31a8f74f09}{get\_collector\_brush}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ highlight)\ \{}
\DoxyCodeLine{00349\ \ \ Brushes::iterator\ bi;}
\DoxyCodeLine{00350\ \ \ bi\ =\ \_brushes.find(collector\_index);}
\DoxyCodeLine{00351\ \ \ \textcolor{keywordflow}{if}\ (bi\ !=\ \_brushes.end())\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordflow}{return}\ highlight\ ?\ (*bi).second.second\ :\ (*bi).second.first;}
\DoxyCodeLine{00353\ \ \ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \textcolor{comment}{//\ Ask\ the\ monitor\ what\ color\ this\ guy\ should\ be.}}
\DoxyCodeLine{00356\ \ \ LRGBColor\ rgb\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{get\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00357\ \ \ \textcolor{keywordtype}{int}\ r\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[0]);}
\DoxyCodeLine{00358\ \ \ \textcolor{keywordtype}{int}\ g\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[1]);}
\DoxyCodeLine{00359\ \ \ \textcolor{keywordtype}{int}\ b\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[2]);}
\DoxyCodeLine{00360\ \ \ HBRUSH\ brush\ =\ CreateSolidBrush(RGB(r,\ g,\ b));}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \textcolor{keywordtype}{int}\ hr\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[0]\ *\ 0.75f);}
\DoxyCodeLine{00363\ \ \ \textcolor{keywordtype}{int}\ hg\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[1]\ *\ 0.75f);}
\DoxyCodeLine{00364\ \ \ \textcolor{keywordtype}{int}\ hb\ =\ (int)encode\_sRGB\_uchar((\textcolor{keywordtype}{float})rgb[2]\ *\ 0.75f);}
\DoxyCodeLine{00365\ \ \ HBRUSH\ hbrush\ =\ CreateSolidBrush(RGB(hr,\ hg,\ hb));}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \_brushes[collector\_index]\ =\ std::make\_pair(brush,\ hbrush);}
\DoxyCodeLine{00368\ \ \ \textcolor{keywordflow}{return}\ highlight\ ?\ hbrush\ :\ brush;}
\DoxyCodeLine{00369\ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00374\ COLORREF\ \mbox{\hyperlink{classWinStatsGraph_a63439518bdc72a5d963e0eb8f7449b5c}{WinStatsGraph::}}}
\DoxyCodeLine{00375\ \mbox{\hyperlink{classWinStatsGraph_a63439518bdc72a5d963e0eb8f7449b5c}{get\_collector\_text\_color}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ highlight)\ \{}
\DoxyCodeLine{00376\ \ \ TextColors::iterator\ tci;}
\DoxyCodeLine{00377\ \ \ tci\ =\ \_text\_colors.find(collector\_index);}
\DoxyCodeLine{00378\ \ \ \textcolor{keywordflow}{if}\ (tci\ !=\ \_text\_colors.end())\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{return}\ highlight\ ?\ (*tci).second.second\ :\ (*tci).second.first;}
\DoxyCodeLine{00380\ \ \ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ LRGBColor\ rgb\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{get\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00383\ \ \ \textcolor{keywordtype}{double}\ bright\ =}
\DoxyCodeLine{00384\ \ \ \ \ rgb[0]\ *\ 0.2126\ +}
\DoxyCodeLine{00385\ \ \ \ \ rgb[1]\ *\ 0.7152\ +}
\DoxyCodeLine{00386\ \ \ \ \ rgb[2]\ *\ 0.0722;}
\DoxyCodeLine{00387\ \ \ COLORREF\ \mbox{\hyperlink{structcolor}{color}}\ =\ bright\ >=\ 0.5\ ?\ RGB(0,\ 0,\ 0)\ :\ RGB(255,\ 255,\ 255);}
\DoxyCodeLine{00388\ \ \ COLORREF\ hcolor\ =\ bright\ *\ 0.75\ >=\ 0.5\ ?\ RGB(0,\ 0,\ 0)\ :\ RGB(255,\ 255,\ 255);}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \_text\_colors[collector\_index]\ =\ std::make\_pair(\mbox{\hyperlink{structcolor}{color}},\ hcolor);}
\DoxyCodeLine{00391\ \ \ \textcolor{keywordflow}{return}\ highlight\ ?\ hcolor\ :\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00392\ \}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00397\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a0c3acadc92682d63b6116602e7f8e991}{WinStatsGraph::}}}
\DoxyCodeLine{00398\ \mbox{\hyperlink{classWinStatsGraph_a0c3acadc92682d63b6116602e7f8e991}{reset\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00399\ \ \ \_brushes.erase(collector\_index);}
\DoxyCodeLine{00400\ \ \ \_text\_colors.erase(collector\_index);}
\DoxyCodeLine{00401\ \ \ force\_redraw();}
\DoxyCodeLine{00402\ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_af6846290eb997a7da49b547428bcb46c}{update\_label\_color}}(collector\_index);}
\DoxyCodeLine{00403\ \}}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00409\ LONG\ \mbox{\hyperlink{classWinStatsGraph_a9c3aa3051d400418232bea75f31872b5}{WinStatsGraph::}}}
\DoxyCodeLine{00410\ \mbox{\hyperlink{classWinStatsGraph_a9c3aa3051d400418232bea75f31872b5}{window\_proc}}(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00411\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00412\ \ \ \textcolor{keywordflow}{case}\ WM\_DESTROY:}
\DoxyCodeLine{00413\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a95fbe603386c41220a755ff7539b3179}{close}}();}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \textcolor{keywordflow}{case}\ WM\_APPCOMMAND:}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordflow}{if}\ (GET\_APPCOMMAND\_LPARAM(lparam)\ ==\ APPCOMMAND\_CLOSE)\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a95fbe603386c41220a755ff7539b3179}{close}}();}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00420\ \ \ \ \ \}}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \textcolor{keywordflow}{case}\ WM\_GETMINMAXINFO:}
\DoxyCodeLine{00424\ \ \ \ \ \{}
\DoxyCodeLine{00425\ \ \ \ \ \ \ WINDOWINFO\ winfo;}
\DoxyCodeLine{00426\ \ \ \ \ \ \ GetWindowInfo(hwnd,\ \&winfo);}
\DoxyCodeLine{00427\ \ \ \ \ \ \ MINMAXINFO\ \&minmax\ =\ *(MINMAXINFO\ *)lparam;}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ vminheight\ =\ \_bottom\_margin\ +\ \_top\_margin;}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_ad12c610133eb0407a39f88f6a809f11f}{get\_num\_labels}}()\ >\ 0)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ have\ a\ label,\ make\ sure\ at\ least\ one\ can\ be\ shown.}}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ vminheight\ =\ (std::max)(vminheight,\ \_top\_label\_stack\_margin\ +\ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_acfebaef679fbf8ecab02521d06d9ef48}{get\_label\_height}}(0)\ +\ \_bottom\_margin);}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00433\ \ \ \ \ \ \ minmax.ptMinTrackSize.x\ =\ (winfo.rcClient.left\ -\/\ winfo.rcWindow.left)}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ (winfo.rcWindow.right\ -\/\ winfo.rcClient.right)}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ (\_right\_margin\ +\ \_left\_margin);}
\DoxyCodeLine{00436\ \ \ \ \ \ \ minmax.ptMinTrackSize.y\ =\ (winfo.rcClient.top\ -\/\ winfo.rcWindow.top)}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ (winfo.rcWindow.bottom\ -\/\ winfo.rcClient.bottom)}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +\ vminheight;}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00440\ \ \ \ \ \}}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \textcolor{keywordflow}{case}\ WM\_WINDOWPOSCHANGING:}
\DoxyCodeLine{00443\ \ \ \ \ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ WINDOWPOS\ \&pos\ =\ *(WINDOWPOS\ *)lparam;}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pos.flags\ \&\ (SWP\_NOMOVE\ |\ SWP\_NOSIZE))\ ==\ 0\ \&\&\ IsIconic(hwnd))\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \_monitor-\/>calc\_iconic\_graph\_window\_pos(\textcolor{keyword}{this},\ pos.x,\ pos.y);}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00448\ \ \ \ \ \}}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \textcolor{keywordflow}{case}\ WM\_SYSCOMMAND:}
\DoxyCodeLine{00452\ \ \ \ \ \textcolor{keywordflow}{if}\ (wparam\ ==\ SC\_MINIMIZE)\ \{}
\DoxyCodeLine{00453\ \ \ \ \ \ \ WINDOWPLACEMENT\ wp;}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (GetWindowPlacement(hwnd,\ \&wp))\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y;}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \_monitor-\/>calc\_iconic\_graph\_window\_pos(\textcolor{keyword}{this},\ x,\ y);}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ wp.showCmd\ =\ SW\_SHOWMINIMIZED;}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ wp.flags\ |=\ WPF\_SETMINPOSITION;}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ wp.ptMinPosition.x\ =\ x;}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ wp.ptMinPosition.y\ =\ y;}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ SetWindowPlacement(hwnd,\ \&wp);}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \textcolor{keywordflow}{case}\ WM\_SIZE:}
\DoxyCodeLine{00468\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_ad0ab730ec9b18e916af83ecc06624d02}{move\_label\_stack}}();}
\DoxyCodeLine{00469\ \ \ \ \ InvalidateRect(hwnd,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00471\ }
\DoxyCodeLine{00472\ \ \ \textcolor{keywordflow}{case}\ WM\_SIZING:}
\DoxyCodeLine{00473\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_sizing);}
\DoxyCodeLine{00474\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \textcolor{keywordflow}{case}\ WM\_EXITSIZEMOVE:}
\DoxyCodeLine{00477\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \textcolor{keywordflow}{case}\ WM\_SETCURSOR:}
\DoxyCodeLine{00481\ \ \ \ \ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \textcolor{comment}{//\ Why\ is\ it\ so\ hard\ to\ ask\ for\ the\ cursor\ position\ within\ the\ window's}}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \textcolor{comment}{//\ client\ area?}}
\DoxyCodeLine{00484\ \ \ \ \ \ \ POINT\ point;}
\DoxyCodeLine{00485\ \ \ \ \ \ \ GetCursorPos(\&point);}
\DoxyCodeLine{00486\ \ \ \ \ \ \ WINDOWINFO\ winfo;}
\DoxyCodeLine{00487\ \ \ \ \ \ \ GetWindowInfo(hwnd,\ \&winfo);}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \textcolor{keyword}{const}\ RECT\ \&rect\ =\ winfo.rcClient;}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ point.x\ -\/\ rect.left;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ point.y\ -\/\ rect.top;}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ rect.right\ -\/\ rect.left;}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ rect.bottom\ -\/\ rect.top;}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \ \ \_potential\_drag\_mode\ =\ \mbox{\hyperlink{classWinStatsGraph_a6e217fc14d67434560f235087055ccd4}{consider\_drag\_start}}(x,\ y,\ width,\ height);}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_potential\_drag\_mode)\ \{}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DM\_left\_margin:}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DM\_right\_margin:}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ SetCursor(\_sizewe\_cursor);}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DM\_guide\_bar:}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ SetCursor(\_hand\_cursor);}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DM\_none:}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00510\ \ \ \ \ \}}
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ !=\ DM\_none)\ \{}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(\_potential\_drag\_mode);}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \_drag\_start\_x\ =\ (int16\_t)LOWORD(lparam);}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \_drag\_start\_y\ =\ (int16\_t)HIWORD(lparam);}
\DoxyCodeLine{00518\ \ \ \ \ \ \ SetCapture(\_window);}
\DoxyCodeLine{00519\ \ \ \ \ \}}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \textcolor{keywordflow}{case}\ WM\_MOUSEMOVE:}
\DoxyCodeLine{00523\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_left\_margin)\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ new\_left\_margin\ =\ \_left\_margin\ +\ (x\ -\/\ \_drag\_start\_x);}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \_left\_margin\ =\ std::max(new\_left\_margin,\ \_pixel\_scale\ *\ 2);}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \_drag\_start\_x\ =\ x\ -\/\ (new\_left\_margin\ -\/\ \_left\_margin);}
\DoxyCodeLine{00528\ \ \ \ \ \ \ InvalidateRect(hwnd,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_ad0ab730ec9b18e916af83ecc06624d02}{move\_label\_stack}}();}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_right\_margin)\ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \_right\_margin\ +=\ (\_drag\_start\_x\ -\/\ x);}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \_drag\_start\_x\ =\ x;}
\DoxyCodeLine{00536\ \ \ \ \ \ \ InvalidateRect(hwnd,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00538\ \ \ \ \ \}}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONUP:}
\DoxyCodeLine{00542\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00543\ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00546\ \ \ \textcolor{keywordflow}{case}\ WM\_PAINT:}
\DoxyCodeLine{00547\ \ \ \ \ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ PAINTSTRUCT\ ps;}
\DoxyCodeLine{00549\ \ \ \ \ \ \ HDC\ hdc\ =\ BeginPaint(hwnd,\ \&ps);}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ \ \ \textcolor{comment}{//\ First,\ draw\ a\ frame\ around\ the\ graph.}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00553\ \ \ \ \ \ \ GetClientRect(hwnd,\ \&rect);}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \ \ rect.left\ +=\ \_left\_margin;}
\DoxyCodeLine{00556\ \ \ \ \ \ \ rect.top\ +=\ \_top\_margin;}
\DoxyCodeLine{00557\ \ \ \ \ \ \ rect.right\ -\/=\ \_right\_margin;}
\DoxyCodeLine{00558\ \ \ \ \ \ \ rect.bottom\ -\/=\ \_bottom\_margin;}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (rect.right\ >\ rect.left\ \&\&\ rect.bottom\ >\ rect.top)\ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ graph\_xsize\ =\ rect.right\ -\/\ rect.left;}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ graph\_ysize\ =\ rect.bottom\ -\/\ rect.top;}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_bitmap\_dc\ ==\ 0\ ||}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ graph\_xsize\ !=\ \_bitmap\_xsize\ ||}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ graph\_ysize\ !=\ \_bitmap\_ysize)\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Oops,\ we\ need\ to\ change\ the\ bitmap\ (and\ graph)\ size.}}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_af587ea85dbd88208f0a5e863a68b2b21}{changed\_graph\_size}}(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a4afd9c0b5f7e8e40e754b51db3e9c4d1}{move\_graph\_window}}(rect.left,\ rect.top,\ graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_af804831604ea2b4c7a21737fa9ae4a2d}{additional\_window\_paint}}(hdc);}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ \ \ EndPaint(hwnd,\ \&ps);}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00577\ \ \ \ \ \}}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \textcolor{keywordflow}{case}\ WM\_DRAWITEM:}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordflow}{if}\ (wparam\ ==\ IDC\_GRAPH)\ \{}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \textcolor{keyword}{const}\ DRAWITEMSTRUCT\ \&dis\ =\ *(DRAWITEMSTRUCT\ *)lparam;}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \ \ \ \ \ \ \textcolor{comment}{//\ Repaint\ the\ graph\ by\ copying\ the\ backing\ pixmap\ in.}}
\DoxyCodeLine{00584\ \ \ \ \ \ \ BitBlt(dis.hDC,\ 0,\ 0,}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \_bitmap\_xsize,\ \_bitmap\_ysize,}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \_bitmap\_dc,\ 0,\ 0,}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ SRCCOPY);}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_aa1e5392417ee3dddc526dd7e7d608a3f}{additional\_graph\_window\_paint}}(dis.hDC);}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00591\ \ \ \ \ \}}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \textcolor{keywordflow}{case}\ WM\_TIMER:}
\DoxyCodeLine{00595\ \ \ \ \ \{}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \mbox{\hyperlink{classTrueClock}{TrueClock}}\ *clock\ =\ TrueClock::get\_global\_ptr();}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ new\_time\ =\ clock-\/>get\_short\_time();}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classWinStatsGraph_a428a0d378cb71146d38f61e70bceff25}{animate}}(new\_time,\ new\_time\ -\/\ \_time))\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ KillTimer(hwnd,\ 0x100);}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \_timer\_running\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \_time\ =\ new\_time;}
\DoxyCodeLine{00603\ \ \ \ \ \}}
\DoxyCodeLine{00604\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \ \ \textcolor{keywordflow}{case}\ WM\_NOTIFY:}
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{keywordflow}{switch}\ (((LPNMHDR)lparam)-\/>code)\ \{}
\DoxyCodeLine{00608\ \ \ \ \ \textcolor{keywordflow}{case}\ TTN\_GETDISPINFO:}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ NMTTDISPINFO\ \&info\ =\ *(NMTTDISPINFO\ *)lparam;}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ POINT\ point;}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (GetCursorPos(\&point)\ \&\&\ ScreenToClient(\_graph\_window,\ \&point))\ \{}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \_tooltip\_text\ =\ \mbox{\hyperlink{classWinStatsGraph_aa36a5a0b5f72fd4c46f5bddc548481b8}{get\_graph\_tooltip}}(point.x,\ point.y);}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ info.lpszText\ =\ (\textcolor{keywordtype}{char}\ *)\_tooltip\_text.c\_str();}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00618\ \ \ \ \ \}}
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00623\ \ \ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \textcolor{keywordflow}{return}\ DefWindowProc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00626\ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00631\ LONG\ WinStatsGraph::}
\DoxyCodeLine{00632\ graph\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00633\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00634\ \ \ \textcolor{keywordflow}{case}\ WM\_DISPLAYCHANGE:}
\DoxyCodeLine{00635\ \ \ \ \ setup\_bitmap(\_bitmap\_xsize,\ \_bitmap\_ysize);}
\DoxyCodeLine{00636\ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00637\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \textcolor{keywordflow}{case}\ WM\_NCHITTEST:}
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{comment}{//\ Necessary\ for\ mouse\ events\ to\ work;\ default\ returns\ HTTRANSPARENT}}
\DoxyCodeLine{00641\ \ \ \ \ \textcolor{keywordflow}{return}\ HTCLIENT;}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{comment}{//\ Vector\ any\ uncaught\ WM\_LBUTTONDOWN\ into\ the\ main\ window,\ so\ we\ can\ drag}}
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{comment}{//\ margins,\ etc.}}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ !=\ DM\_none)\ \{}
\DoxyCodeLine{00647\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam)\ +\ \_graph\_left;}
\DoxyCodeLine{00648\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam)\ +\ \_graph\_top;}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsGraph_a9c3aa3051d400418232bea75f31872b5}{window\_proc}}(\_window,\ msg,\ wparam,\ MAKELPARAM(x,\ y));}
\DoxyCodeLine{00650\ \ \ \ \ \}}
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONUP:}
\DoxyCodeLine{00654\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00655\ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00660\ \ \ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \textcolor{keywordflow}{return}\ DefSubclassProc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00663\ \}}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00670\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_af804831604ea2b4c7a21737fa9ae4a2d}{WinStatsGraph::}}}
\DoxyCodeLine{00671\ \mbox{\hyperlink{classWinStatsGraph_af804831604ea2b4c7a21737fa9ae4a2d}{additional\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00672\ \}}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00678\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_aa1e5392417ee3dddc526dd7e7d608a3f}{WinStatsGraph::}}}
\DoxyCodeLine{00679\ \mbox{\hyperlink{classWinStatsGraph_aa1e5392417ee3dddc526dd7e7d608a3f}{additional\_graph\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00680\ \}}
\DoxyCodeLine{00681\ }
\DoxyCodeLine{00686\ std::string\ \mbox{\hyperlink{classWinStatsGraph_aa36a5a0b5f72fd4c46f5bddc548481b8}{WinStatsGraph::}}}
\DoxyCodeLine{00687\ \mbox{\hyperlink{classWinStatsGraph_aa36a5a0b5f72fd4c46f5bddc548481b8}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00688\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00689\ \}}
\DoxyCodeLine{00690\ }
\DoxyCodeLine{00696\ WinStatsGraph::DragMode\ \mbox{\hyperlink{classWinStatsGraph_a6e217fc14d67434560f235087055ccd4}{WinStatsGraph::}}}
\DoxyCodeLine{00697\ \mbox{\hyperlink{classWinStatsGraph_a6e217fc14d67434560f235087055ccd4}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height)\ \{}
\DoxyCodeLine{00698\ \ \ \textcolor{keywordflow}{if}\ (mouse\_x\ >=\ \_left\_margin\ -\/\ 2\ \&\&\ mouse\_x\ <=\ \_left\_margin\ +\ 2)\ \{}
\DoxyCodeLine{00699\ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_left\_margin;}
\DoxyCodeLine{00700\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (mouse\_x\ >=\ width\ -\/\ \_right\_margin\ -\/\ 2\ \&\&\ mouse\_x\ <=\ width\ -\/\ \_right\_margin\ +\ 2)\ \{}
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_right\_margin;}
\DoxyCodeLine{00702\ \ \ \}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \textcolor{keywordflow}{return}\ DM\_none;}
\DoxyCodeLine{00705\ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00711\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{WinStatsGraph::}}}
\DoxyCodeLine{00712\ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{set\_drag\_mode}}(WinStatsGraph::DragMode\ drag\_mode)\ \{}
\DoxyCodeLine{00713\ \ \ \_drag\_mode\ =\ drag\_mode;}
\DoxyCodeLine{00714\ \}}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00720\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsGraph_a4afd9c0b5f7e8e40e754b51db3e9c4d1}{WinStatsGraph::}}}
\DoxyCodeLine{00721\ \mbox{\hyperlink{classWinStatsGraph_a4afd9c0b5f7e8e40e754b51db3e9c4d1}{move\_graph\_window}}(\textcolor{keywordtype}{int}\ graph\_left,\ \textcolor{keywordtype}{int}\ graph\_top,\ \textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00722\ \ \ \textcolor{keywordflow}{if}\ (\_graph\_window\ ==\ 0)\ \{}
\DoxyCodeLine{00723\ \ \ \ \ create\_graph\_window();}
\DoxyCodeLine{00724\ \ \ \}}
\DoxyCodeLine{00725\ }
\DoxyCodeLine{00726\ \ \ \_graph\_left\ =\ graph\_left;}
\DoxyCodeLine{00727\ \ \ \_graph\_top\ =\ graph\_top;}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ SetWindowPos(\_graph\_window,\ 0,}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_graph\_left,\ \_graph\_top,}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ graph\_xsize,\ graph\_ysize,}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SWP\_NOZORDER\ |\ SWP\_SHOWWINDOW);}
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \ \ \textcolor{keywordflow}{if}\ (graph\_xsize\ !=\ \_bitmap\_xsize\ ||\ graph\_ysize\ !=\ \_bitmap\_ysize)\ \{}
\DoxyCodeLine{00735\ \ \ \ \ setup\_bitmap(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00736\ \ \ \}}
\DoxyCodeLine{00737\ \}}
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00742\ \textcolor{keywordtype}{void}\ WinStatsGraph::}
\DoxyCodeLine{00743\ setup\_bitmap(\textcolor{keywordtype}{int}\ xsize,\ \textcolor{keywordtype}{int}\ ysize)\ \{}
\DoxyCodeLine{00744\ \ \ release\_bitmap();}
\DoxyCodeLine{00745\ \ \ \_bitmap\_xsize\ =\ std::max(xsize,\ 0);}
\DoxyCodeLine{00746\ \ \ \_bitmap\_ysize\ =\ std::max(ysize,\ 0);}
\DoxyCodeLine{00747\ }
\DoxyCodeLine{00748\ \ \ HDC\ hdc\ =\ GetDC(\_graph\_window);}
\DoxyCodeLine{00749\ \ \ \_bitmap\_dc\ =\ CreateCompatibleDC(hdc);}
\DoxyCodeLine{00750\ \ \ \_bitmap\ =\ CreateCompatibleBitmap(hdc,\ \_bitmap\_xsize,\ \_bitmap\_ysize);}
\DoxyCodeLine{00751\ \ \ SelectObject(\_bitmap\_dc,\ \_bitmap);}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ RECT\ rect\ =\ \{\ 0,\ 0,\ \_bitmap\_xsize,\ \_bitmap\_ysize\ \};}
\DoxyCodeLine{00754\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(WHITE\_BRUSH));}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ ReleaseDC(\_window,\ hdc);}
\DoxyCodeLine{00757\ \}}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00762\ \textcolor{keywordtype}{void}\ WinStatsGraph::}
\DoxyCodeLine{00763\ release\_bitmap()\ \{}
\DoxyCodeLine{00764\ \ \ \textcolor{keywordflow}{if}\ (\_bitmap)\ \{}
\DoxyCodeLine{00765\ \ \ \ \ DeleteObject(\_bitmap);}
\DoxyCodeLine{00766\ \ \ \ \ \_bitmap\ =\ 0;}
\DoxyCodeLine{00767\ \ \ \}}
\DoxyCodeLine{00768\ \ \ \textcolor{keywordflow}{if}\ (\_bitmap\_dc)\ \{}
\DoxyCodeLine{00769\ \ \ \ \ DeleteDC(\_bitmap\_dc);}
\DoxyCodeLine{00770\ \ \ \ \ \_bitmap\_dc\ =\ 0;}
\DoxyCodeLine{00771\ \ \ \}}
\DoxyCodeLine{00772\ \}}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00777\ \textcolor{keywordtype}{void}\ WinStatsGraph::}
\DoxyCodeLine{00778\ create\_graph\_window()\ \{}
\DoxyCodeLine{00779\ \ \ \textcolor{keywordflow}{if}\ (\_graph\_window)\ \{}
\DoxyCodeLine{00780\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00781\ \ \ \}}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ HINSTANCE\ application\ =\ GetModuleHandle(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ DWORD\ window\_style\ =\ WS\_CHILD\ |\ WS\_CLIPSIBLINGS\ |}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SS\_SUNKEN\ |\ SS\_OWNERDRAW;}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \ \ \_graph\_window\ =}
\DoxyCodeLine{00789\ \ \ \ \ CreateWindow(WC\_STATIC,\ \textcolor{stringliteral}{"{}"{}},\ window\_style,\ 0,\ 0,\ 0,\ 0,}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_window,\ (HMENU)IDC\_GRAPH,\ application,\ 0);}
\DoxyCodeLine{00791\ \ \ \textcolor{keywordflow}{if}\ (!\_graph\_window)\ \{}
\DoxyCodeLine{00792\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Could\ not\ create\ graph\ window!\(\backslash\)n"{}};}
\DoxyCodeLine{00793\ \ \ \ \ exit(1);}
\DoxyCodeLine{00794\ \ \ \}}
\DoxyCodeLine{00795\ }
\DoxyCodeLine{00796\ \ \ EnableWindow(\_graph\_window,\ TRUE);}
\DoxyCodeLine{00797\ }
\DoxyCodeLine{00798\ \ \ SetWindowSubclass(\_graph\_window,\ \&static\_graph\_subclass\_proc,\ 1234,\ (DWORD\_PTR)\textcolor{keyword}{this});}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ \ \ \textcolor{comment}{//\ Create\ the\ tooltip\ window.\ \ This\ will\ cause\ a\ TTN\_GETDISPINFO\ message\ to}}
\DoxyCodeLine{00801\ \ \ \textcolor{comment}{//\ be\ sent\ to\ the\ window\ to\ acquire\ the\ tooltip\ text.}}
\DoxyCodeLine{00802\ \ \ \_tooltip\_window\ =\ CreateWindow(TOOLTIPS\_CLASS,\ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WS\_POPUP,}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CW\_USEDEFAULT,\ CW\_USEDEFAULT,}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CW\_USEDEFAULT,\ CW\_USEDEFAULT,}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_window,\ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ application,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \textcolor{keywordflow}{if}\ (\_tooltip\_window\ !=\ 0)\ \{}
\DoxyCodeLine{00810\ \ \ \ \ TOOLINFO\ info\ =\ \{\ 0\ \};}
\DoxyCodeLine{00811\ \ \ \ \ info.cbSize\ =\ \textcolor{keyword}{sizeof}(info);}
\DoxyCodeLine{00812\ \ \ \ \ info.uFlags\ =\ TTF\_IDISHWND\ |\ TTF\_SUBCLASS;}
\DoxyCodeLine{00813\ \ \ \ \ info.hwnd\ =\ \_window;}
\DoxyCodeLine{00814\ \ \ \ \ info.uId\ =\ (UINT\_PTR)\_graph\_window;}
\DoxyCodeLine{00815\ \ \ \ \ info.lpszText\ =\ LPSTR\_TEXTCALLBACK;}
\DoxyCodeLine{00816\ \ \ \ \ SendMessage(\_tooltip\_window,\ TTM\_ADDTOOL,\ 0,\ (LPARAM)\&info);}
\DoxyCodeLine{00817\ \ \ \}}
\DoxyCodeLine{00818\ \}}
\DoxyCodeLine{00819\ }
\DoxyCodeLine{00823\ LRESULT\ WINAPI\ WinStatsGraph::}
\DoxyCodeLine{00824\ static\_graph\_subclass\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam,\ UINT\_PTR\ subclass,\ DWORD\_PTR\ ref\_data)\ \{}
\DoxyCodeLine{00825\ \ \ \mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *self\ =\ (\mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}\ *)ref\_data;}
\DoxyCodeLine{00826\ \ \ \textcolor{keywordflow}{if}\ (self\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ self-\/>\_graph\_window\ ==\ hwnd)\ \{}
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keywordflow}{return}\ self-\/>graph\_window\_proc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00828\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00829\ \ \ \ \ \textcolor{keywordflow}{return}\ DefWindowProc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00830\ \ \ \}}
\DoxyCodeLine{00831\ \}}

\end{DoxyCode}

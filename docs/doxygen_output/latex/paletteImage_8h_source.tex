\doxysection{palette\+Image.\+h}
\hypertarget{paletteImage_8h_source}{}\label{paletteImage_8h_source}\index{pandatool/src/palettizer/paletteImage.h@{pandatool/src/palettizer/paletteImage.h}}
\mbox{\hyperlink{paletteImage_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ PALETTEIMAGE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ PALETTEIMAGE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandatoolbase_8h}{pandatoolbase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{imageFile_8h}{imageFile.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnmImage_8h}{pnmImage.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPalettePage}{PalettePage}};}
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTexturePlacement}{TexturePlacement}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPaletteImage}{PaletteImage}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classImageFile}{ImageFile}}\ \{}
\DoxyCodeLine{00033\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{classPaletteImage}{PaletteImage}}();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{classPaletteImage}{PaletteImage}}(\mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page,\ \textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{classPaletteImage}{PaletteImage}}(\mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page,\ \textcolor{keywordtype}{int}\ index,\ \textcolor{keywordtype}{unsigned}\ swapIndex);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *\mbox{\hyperlink{classPaletteImage_a01ec0e848fcfc4361445f9321db24e21}{get\_page}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteImage_a015b6cf127eafdb43c47175401d5c36e}{is\_empty}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPaletteImage_ae4d8bc0ed7fade4e1ededaec89a9691d}{count\_utilization}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPaletteImage_afe3faf50b8ec3753ba58e6f1466cd19e}{count\_coverage}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteImage_ab6da61670d492706c84908002097711c}{place}}(\mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement);}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a107c5eae7771191c7237712db291098d}{unplace}}(\mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement);}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_af026885efde847ca20b47bcf96da2bc8}{check\_solitary}}();}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a9140ff64c917ca002df727d9a2276f4f}{optimal\_resize}}();}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteImage_ab52351202ef256d5bb75ed42b982f562}{resize\_image}}(\textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a4cddd34f4f337f37fa97348acf9c1bda}{resize\_swapped\_image}}(\textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_aacf59b419acf02ba0461dc0834d5fee1}{write\_placements}}(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level\ =\ 0)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a8cc270e958d43472998574570743f2a2}{reset\_image}}();}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_ac427c591b2d6a997d6501180b1234a26}{setup\_shadow\_image}}();}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a8eb07284eff8976ad6ffc6982e8ea701}{update\_image}}(\textcolor{keywordtype}{bool}\ redo\_all);}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteImage_a7e6baf1f86d5106366379e94c9fc3c2f}{update\_filename}}();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00062\ \ \ \textcolor{keywordtype}{bool}\ setup\_filename();}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{bool}\ find\_hole(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *find\_overlap(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{void}\ get\_image();}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordtype}{void}\ release\_image();}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{void}\ remove\_image();}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{void}\ get\_swapped\_image(\textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{void}\ get\_swapped\_images();}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ The\ ClearedRegion\ object\ keeps\ track\ of\ TexturePlacements\ that\ were}}
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ recently\ removed\ and\ thus\ need\ to\ be\ set\ to\ black.}}
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{class\ }ClearedRegion\ \{}
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00075\ \ \ \ \ ClearedRegion();}
\DoxyCodeLine{00076\ \ \ \ \ ClearedRegion(\mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement);}
\DoxyCodeLine{00077\ \ \ \ \ ClearedRegion(\textcolor{keyword}{const}\ ClearedRegion\ \&copy);}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ operator\ =\ (\textcolor{keyword}{const}\ ClearedRegion\ \&copy);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ clear(\mbox{\hyperlink{classPNMImage}{PNMImage}}\ \&image);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ write\_datagram(\mbox{\hyperlink{classDatagram}{Datagram}}\ \&datagram)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ fillin(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan);}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{int}\ \_x,\ \_y;}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{int}\ \_x\_size,\ \_y\_size;}
\DoxyCodeLine{00087\ \ \ \};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<ClearedRegion>}}\ \mbox{\hyperlink{classpvector}{ClearedRegions}};}
\DoxyCodeLine{00090\ \ \ \mbox{\hyperlink{classpvector}{ClearedRegions}}\ \_cleared\_regions;}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<TexturePlacement\ *>}}\ \mbox{\hyperlink{classpvector}{Placements}};}
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{classpvector}{Placements}}\ \_placements;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{classpvector}{Placements}}\ *\_masterPlacements;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *\_page;}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordtype}{int}\ \_index;}
\DoxyCodeLine{00099\ \ \ std::string\ \_basename;}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{keywordtype}{bool}\ \_new\_image;}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordtype}{bool}\ \_got\_image;}
\DoxyCodeLine{00103\ \ \ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ \_image;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{unsigned}\ \_swapped\_image;\ \textcolor{comment}{//\ 0\ for\ non\ swapped\ image}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \mbox{\hyperlink{classImageFile}{ImageFile}}\ \_shadow\_image;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<PaletteImage\ *>}}\ \mbox{\hyperlink{classpvector}{SwappedImages}};}
\DoxyCodeLine{00110\ \ \ \mbox{\hyperlink{classpvector}{SwappedImages}}\ \_swappedImages;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ The\ TypedWritable\ interface\ follows.}}
\DoxyCodeLine{00113\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00114\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_aefdf24e1e4b531f584ea95b159672ce0}{register\_with\_read\_factory}}();}
\DoxyCodeLine{00115\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a2b4460ee555995d6338217403b0fc88b}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *writer,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&datagram);}
\DoxyCodeLine{00116\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteImage_ad8a57e2ad6a869cb11f6a44b6662710f}{complete\_pointers}}(\mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ **p\_list,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00120\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classPaletteImage_a6e383b8a7faf478a41eafb4f50d2dc6c}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params);}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteImage_a053902b96bc02d12612f3f5738a1bbb5}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00124\ \ \ \textcolor{comment}{//\ This\ value\ is\ only\ filled\ in\ while\ reading\ from\ the\ bam\ file;\ don't\ use}}
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ it\ otherwise.}}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordtype}{int}\ \_num\_placements;}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00131\ \ \ \}}
\DoxyCodeLine{00132\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00133\ \ \ \ \ ImageFile::init\_type();}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}PaletteImage"{}},}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImageFile::get\_class\_type());}
\DoxyCodeLine{00136\ \ \ \}}
\DoxyCodeLine{00137\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00139\ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00143\ \};}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

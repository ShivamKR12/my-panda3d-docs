\doxysection{py\+\_\+compat.\+h}
\hypertarget{py__compat_8h_source}{}\label{py__compat_8h_source}\index{dtool/src/interrogatedb/py\_compat.h@{dtool/src/interrogatedb/py\_compat.h}}
\mbox{\hyperlink{py__compat_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#ifndef\ PY\_COMPAT\_H}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ PY\_COMPAT\_H}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dtoolbase_8h}{dtoolbase.h}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#ifdef\ HAVE\_PYTHON}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{comment}{//\ The\ contents\ of\ this\ file\ were\ originally\ part\ of\ py\_panda.h.\ \ It}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specifically\ contains\ polyfills\ that\ are\ required\ to\ maintain\ compatibility}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ with\ Python\ 2\ and\ older\ versions\ of\ Python\ 3.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{comment}{//\ These\ compatibility\ hacks\ are\ sorted\ by\ Python\ version\ that\ removes\ the}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ need\ for\ the\ respective\ hack.}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifdef\ \_POSIX\_C\_SOURCE}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#\ \ undef\ \_POSIX\_C\_SOURCE}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#ifdef\ \_XOPEN\_SOURCE}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#\ \ undef\ \_XOPEN\_SOURCE}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{//\ See\ PEP\ 353}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ PY\_SSIZE\_T\_CLEAN\ 1}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{Python_8h}{Python.h}}>}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#ifndef\ LINK\_ALL\_STATIC}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#\ \ define\ EXPCL\_PYPANDA}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#\ \ define\ EXPCL\_PYPANDA\ \_\_attribute\_\_((weak))}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#\ \ define\ EXPCL\_PYPANDA\ extern\ inline}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{/*\ Python\ 2.4\ */}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{comment}{//\ 2.4\ macros\ which\ aren't\ available\ in\ 2.3}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#ifndef\ Py\_RETURN\_NONE}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#\ \ define\ Py\_RETURN\_NONE\ return\ Py\_INCREF(Py\_None),\ Py\_None}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#ifndef\ Py\_RETURN\_TRUE}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#\ \ define\ Py\_RETURN\_TRUE\ return\ Py\_INCREF(Py\_True),\ Py\_True}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#ifndef\ Py\_RETURN\_FALSE}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#\ \ define\ Py\_RETURN\_FALSE\ return\ Py\_INCREF(Py\_False),\ Py\_False}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{/*\ Python\ 2.5\ */}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{comment}{//\ Prior\ to\ Python\ 2.5,\ we\ didn't\ have\ Py\_ssize\_t.}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x02050000}}
\DoxyCodeLine{00061\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ Py\_ssize\_t;}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#\ \ define\ PyInt\_FromSsize\_t\ PyInt\_FromLong}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#\ \ define\ PyInt\_AsSsize\_t\ PyInt\_AsLong}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{comment}{/*\ Python\ 2.6\ */}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x02060000}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#\ \ define\ Py\_TYPE(ob)\ (((PyObject*)(ob))-\/>ob\_type)}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{comment}{/*\ Python\ 2.7,\ 3.1\ */}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#ifndef\ PyVarObject\_HEAD\_INIT}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\ \ \#define\ PyVarObject\_HEAD\_INIT(type,\ size)\ \(\backslash\)}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\ \ \ \ PyObject\_HEAD\_INIT(type)\ size,}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{comment}{/*\ Python\ 2.7,\ 3.2\ */}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03020000}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#\ \ define\ PyErr\_NewExceptionWithDoc(name,\ doc,\ base,\ dict)\ \(\backslash\)}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ PyErr\_NewException(name,\ base,\ dict)}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{comment}{/*\ Python\ 3.0\ */}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{comment}{//\ Always\ on\ in\ Python\ 3}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#ifndef\ Py\_TPFLAGS\_CHECKTYPES}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#\ \ define\ Py\_TPFLAGS\_CHECKTYPES\ 0}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{comment}{//\ Macros\ for\ writing\ code\ that\ will\ compile\ in\ both\ versions.}}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#if\ PY\_MAJOR\_VERSION\ >=\ 3}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#\ \ define\ nb\_nonzero\ nb\_bool}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#\ \ define\ nb\_divide\ nb\_true\_divide}}
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#\ \ define\ nb\_inplace\_divide\ nb\_inplace\_true\_divide}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{preprocessor}{\#\ \ define\ PyLongOrInt\_Check(x)\ PyLong\_Check(x)}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\#\ \ define\ PyLongOrInt\_AS\_LONG\ PyLong\_AS\_LONG}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\#\ \ define\ PyInt\_Check\ PyLong\_Check}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#\ \ define\ PyInt\_AsLong\ PyLong\_AsLong}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\#\ \ define\ PyInt\_AS\_LONG\ PyLong\_AS\_LONG}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\#\ \ define\ PyLongOrInt\_AsSize\_t\ PyLong\_AsSize\_t}}
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#\ \ define\ PyLongOrInt\_Check(x)\ (PyInt\_Check(x)\ ||\ PyLong\_Check(x))}}
\DoxyCodeLine{00107\ \textcolor{comment}{//\ PyInt\_FromSize\_t\ automatically\ picks\ the\ right\ type.}}
\DoxyCodeLine{00108\ \textcolor{preprocessor}{\#\ \ define\ PyLongOrInt\_AS\_LONG\ PyInt\_AsLong}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ EXPCL\_PYPANDA\ \textcolor{keywordtype}{size\_t}\ PyLongOrInt\_AsSize\_t(PyObject\ *);}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{comment}{//\ Which\ character\ to\ use\ in\ PyArg\_ParseTuple\ et\ al\ for\ a\ byte\ string.}}
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#if\ PY\_MAJOR\_VERSION\ >=\ 3}}
\DoxyCodeLine{00115\ \textcolor{preprocessor}{\#\ \ define\ FMTCHAR\_BYTES\ "{}y"{}}}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\#\ \ define\ FMTCHAR\_BYTES\ "{}s"{}}}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{comment}{/*\ Python\ 3.2\ */}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03020000}}
\DoxyCodeLine{00123\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{long}\ Py\_hash\_t;}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{comment}{/*\ Python\ 3.3\ */}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \textcolor{preprocessor}{\#if\ PY\_MAJOR\_VERSION\ >=\ 3}}
\DoxyCodeLine{00129\ \textcolor{comment}{//\ Python\ versions\ before\ 3.3\ did\ not\ define\ this.}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#\ \ if\ PY\_VERSION\_HEX\ <\ 0x03030000}}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\#\ \ \ \ define\ PyUnicode\_AsUTF8\ \_PyUnicode\_AsString}}
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#\ \ \ \ define\ PyUnicode\_AsUTF8AndSize\ \_PyUnicode\_AsStringAndSize}}
\DoxyCodeLine{00133\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \textcolor{comment}{/*\ Python\ 3.4\ */}}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03040000}}
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\#define\ PyGILState\_Check()\ (PyGILState\_GetThisThreadState()\ ==\ \_PyThreadState\_Current)}}
\DoxyCodeLine{00139\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \textcolor{comment}{/*\ Python\ 3.6\ */}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03080000\ \&\&\ !defined(\_PyObject\_CallNoArg)}}
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#\ \ define\ \_PyObject\_CallNoArg\ PyObject\_CallNoArgs}}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03080000\ \&\&\ !defined(\_PyObject\_FastCall)}}
\DoxyCodeLine{00148\ INLINE\ PyObject\ *\_PyObject\_FastCall(PyObject\ *func,\ PyObject\ **args,\ Py\_ssize\_t\ nargs)\ \{}
\DoxyCodeLine{00149\ \ \ PyObject\ *tuple\ =\ PyTuple\_New(nargs);}
\DoxyCodeLine{00150\ \ \ \textcolor{keywordflow}{for}\ (Py\_ssize\_t\ i\ =\ 0;\ i\ <\ nargs;\ ++i)\ \{}
\DoxyCodeLine{00151\ \ \ \ \ PyTuple\_SET\_ITEM(tuple,\ i,\ args[i]);}
\DoxyCodeLine{00152\ \ \ \ \ Py\_INCREF(args[i]);}
\DoxyCodeLine{00153\ \ \ \}}
\DoxyCodeLine{00154\ \ \ PyObject\ *result\ =\ PyObject\_Call(func,\ tuple,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00155\ \ \ Py\_DECREF(tuple);}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00157\ \}}
\DoxyCodeLine{00158\ \textcolor{preprocessor}{\#\ \ define\ \_PyObject\_FastCall\ \_PyObject\_FastCall}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{comment}{//\ Python\ versions\ before\ 3.6\ didn't\ require\ longlong\ support\ to\ be\ enabled.}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#ifndef\ HAVE\_LONG\_LONG}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_FromLongLong(x)\ PyLong\_FromLong((long)\ (x))}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_FromUnsignedLongLong(x)\ PyLong\_FromUnsignedLong((unsigned\ long)\ (x))}}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_AsLongLong(x)\ PyLong\_AsLong(x)}}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_AsUnsignedLongLong(x)\ PyLong\_AsUnsignedLong(x)}}
\DoxyCodeLine{00167\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_AsUnsignedLongLongMask(x)\ PyLong\_AsUnsignedLongMask(x)}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_AsLongLongAndOverflow(x)\ PyLong\_AsLongAndOverflow(x)}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{comment}{/*\ Python\ 3.7\ */}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#ifndef\ PyDict\_GET\_SIZE}}
\DoxyCodeLine{00174\ \textcolor{preprocessor}{\#\ \ define\ PyDict\_GET\_SIZE(mp)\ (((PyDictObject\ *)mp)-\/>ma\_used)}}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#ifndef\ Py\_RETURN\_RICHCOMPARE}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\#\ \ define\ Py\_RETURN\_RICHCOMPARE(val1,\ val2,\ op)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\ \ do\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\ \ \ \ switch\ (op)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\ \ \ \ NODEFAULT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_EQ:\ if\ ((val1)\ ==\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \(\backslash\)}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_NE:\ if\ ((val1)\ !=\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \(\backslash\)}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_LT:\ if\ ((val1)\ <\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \ \(\backslash\)}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_GT:\ if\ ((val1)\ >\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \ \(\backslash\)}}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_LE:\ if\ ((val1)\ <=\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \(\backslash\)}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\ \ \ \ case\ Py\_GE:\ if\ ((val1)\ >=\ (val2))\ Py\_RETURN\_TRUE;\ Py\_RETURN\_FALSE;\ \ \(\backslash\)}}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\ \ \}\ while\ (0)}}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03070000}}
\DoxyCodeLine{00193\ INLINE\ PyObject\ *PyImport\_GetModule(PyObject\ *name)\ \{}
\DoxyCodeLine{00194\ \ \ PyObject\ *modules\ =\ PyImport\_GetModuleDict();}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{if}\ (modules\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00196\ \ \ \ \ PyObject\ *\textcolor{keyword}{module}\ =\ PyDict\_GetItem(modules,\ name);}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{if}\ (module\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ Py\_INCREF(module);}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{module};}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \}}
\DoxyCodeLine{00202\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00203\ \}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \textcolor{comment}{/*\ Python\ 3.8\ */}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03080000}}
\DoxyCodeLine{00208\ INLINE\ PyObject\ *\_PyLong\_Rshift(PyObject\ *a,\ \textcolor{keywordtype}{size\_t}\ shiftby)\ \{}
\DoxyCodeLine{00209\ \ \ PyObject\ *b\ =\ PyLong\_FromLong(shiftby);}
\DoxyCodeLine{00210\ \ \ PyObject\ *result\ =\ PyNumber\_Rshift(a,\ b);}
\DoxyCodeLine{00211\ \ \ Py\_DECREF(b);}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00213\ \}}
\DoxyCodeLine{00214\ INLINE\ PyObject\ *\_PyLong\_Lshift(PyObject\ *a,\ \textcolor{keywordtype}{size\_t}\ shiftby)\ \{}
\DoxyCodeLine{00215\ \ \ PyObject\ *b\ =\ PyLong\_FromLong(shiftby);}
\DoxyCodeLine{00216\ \ \ PyObject\ *result\ =\ PyNumber\_Lshift(a,\ b);}
\DoxyCodeLine{00217\ \ \ Py\_DECREF(b);}
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00219\ \}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \textcolor{comment}{/*\ Python\ 3.9\ */}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030900A4\ \&\&\ !defined(Py\_IS\_TYPE)}}
\DoxyCodeLine{00225\ \textcolor{preprocessor}{\#\ \ define\ Py\_IS\_TYPE(ob,\ type)\ (Py\_TYPE((PyObject\ *)ob)\ ==\ type)}}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\#ifndef\ PyCFunction\_CheckExact}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#\ \ define\ PyCFunction\_CheckExact(op)\ (Py\_IS\_TYPE(op,\ \&PyCFunction\_Type))}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x03090000}}
\DoxyCodeLine{00233\ INLINE\ PyObject\ *PyObject\_CallNoArgs(PyObject\ *func)\ \{}
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ >=\ 0x03080000}}
\DoxyCodeLine{00235\ \ \ \textcolor{keywordflow}{return}\ \_PyObject\_Vectorcall(func,\ \textcolor{keyword}{nullptr},\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#elif\ PY\_VERSION\_HEX\ >=\ 0x03070000}}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{return}\ \_PyObject\_FastCallDict(func,\ \textcolor{keyword}{nullptr},\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\#elif\ PY\_VERSION\_HEX\ >=\ 0x03060000}}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordflow}{return}\ \_PyObject\_FastCall(func,\ \textcolor{keyword}{nullptr},\ 0);}
\DoxyCodeLine{00240\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00241\ \ \ \textcolor{keywordflow}{return}\ PyObject\_CallObject(func,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00242\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00243\ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ INLINE\ PyObject\ *PyObject\_CallOneArg(PyObject\ *callable,\ PyObject\ *arg)\ \{}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ >=\ 0x03060000}}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{return}\ \_PyObject\_FastCall(callable,\ \&arg,\ 1);}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00249\ \ \ \textcolor{keywordflow}{return}\ PyObject\_CallFunctionObjArgs(callable,\ arg,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00250\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ INLINE\ PyObject\ *PyObject\_CallMethodNoArgs(PyObject\ *obj,\ PyObject\ *name)\ \{}
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{return}\ PyObject\_CallMethodObjArgs(obj,\ name,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00255\ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ INLINE\ PyObject\ *PyObject\_CallMethodOneArg(PyObject\ *obj,\ PyObject\ *name,\ PyObject\ *arg)\ \{}
\DoxyCodeLine{00258\ \ \ \textcolor{keywordflow}{return}\ PyObject\_CallMethodObjArgs(obj,\ name,\ arg,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00259\ \}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ INLINE\ \textcolor{keywordtype}{int}\ PyObject\_GC\_IsTracked(PyObject\ *obj)\ \{}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{return}\ \_PyObject\_GC\_IS\_TRACKED(obj);}
\DoxyCodeLine{00263\ \}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \textcolor{comment}{/*\ Python\ 3.10\ */}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030A0000}}
\DoxyCodeLine{00269\ INLINE\ \textcolor{keywordtype}{int}\ PyModule\_AddObjectRef(PyObject\ *module,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name,\ PyObject\ *value)\ \{}
\DoxyCodeLine{00270\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ PyModule\_AddObject(module,\ name,\ value);}
\DoxyCodeLine{00271\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ 0)\ \{}
\DoxyCodeLine{00272\ \ \ \ \ Py\_INCREF(value);}
\DoxyCodeLine{00273\ \ \ \}}
\DoxyCodeLine{00274\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00275\ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ ALWAYS\_INLINE\ PyObject\ *Py\_NewRef(PyObject\ *obj)\ \{}
\DoxyCodeLine{00278\ \ \ Py\_INCREF(obj);}
\DoxyCodeLine{00279\ \ \ \textcolor{keywordflow}{return}\ obj;}
\DoxyCodeLine{00280\ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ ALWAYS\_INLINE\ PyObject\ *Py\_XNewRef(PyObject\ *obj)\ \{}
\DoxyCodeLine{00283\ \ \ Py\_XINCREF(obj);}
\DoxyCodeLine{00284\ \ \ \textcolor{keywordflow}{return}\ obj;}
\DoxyCodeLine{00285\ \}}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \textcolor{comment}{/*\ Python\ 3.12\ */}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030C0000}}
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_IsNonNegative(value)\ (Py\_SIZE((value))\ >=\ 0)}}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00293\ INLINE\ \textcolor{keywordtype}{bool}\ PyLong\_IsNonNegative(PyObject\ *value)\ \{}
\DoxyCodeLine{00294\ \ \ \textcolor{keywordtype}{int}\ overflow\ =\ 0;}
\DoxyCodeLine{00295\ \ \ \textcolor{keywordtype}{long}\ longval\ =\ PyLong\_AsLongAndOverflow(value,\ \&overflow);}
\DoxyCodeLine{00296\ \ \ \textcolor{keywordflow}{return}\ overflow\ ==\ 1\ ||\ longval\ >=\ 0;}
\DoxyCodeLine{00297\ \}}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \textcolor{comment}{/*\ Python\ 3.13\ */}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00A1}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#\ \ define\ PyLong\_AsInt(x)\ (\_PyLong\_AsInt(x))}}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00A1}}
\DoxyCodeLine{00307\ ALWAYS\_INLINE\ \textcolor{keywordtype}{int}}
\DoxyCodeLine{00308\ PyModule\_Add(PyObject\ *mod,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name,\ PyObject\ *value)\ \{}
\DoxyCodeLine{00309\ \ \ \textcolor{keywordtype}{int}\ res\ =\ PyModule\_AddObjectRef(mod,\ name,\ value);}
\DoxyCodeLine{00310\ \ \ Py\_XDECREF(value);}
\DoxyCodeLine{00311\ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00312\ \}}
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00A1}}
\DoxyCodeLine{00316\ INLINE\ \textcolor{keywordtype}{int}}
\DoxyCodeLine{00317\ PyDict\_GetItemRef(PyObject\ *mp,\ PyObject\ *key,\ PyObject\ **result)\ \{}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\#if\ PY\_MAJOR\_VERSION\ >=\ 3}}
\DoxyCodeLine{00319\ \ \ PyObject\ *item\ =\ PyDict\_GetItemWithError(mp,\ key);}
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00321\ \ \ PyObject\ *item\ =\ \_PyDict\_GetItemWithError(mp,\ key);}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordflow}{if}\ (item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00324\ \ \ \ \ *result\ =\ Py\_NewRef(item);}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00326\ \ \ \}}
\DoxyCodeLine{00327\ \ \ *result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordflow}{return}\ PyErr\_Occurred()\ ?\ -\/1\ :\ 0;}
\DoxyCodeLine{00329\ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ INLINE\ \textcolor{keywordtype}{int}}
\DoxyCodeLine{00332\ PyDict\_GetItemStringRef(PyObject\ *mp,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *key,\ PyObject\ **result)\ \{}
\DoxyCodeLine{00333\ \ \ PyObject\ *item\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\#if\ PY\_MAJOR\_VERSION\ >=\ 3}}
\DoxyCodeLine{00335\ \ \ PyObject\ *key\_obj\ =\ PyUnicode\_FromString(key);}
\DoxyCodeLine{00336\ \ \ item\ =\ key\_obj\ ?\ PyDict\_GetItemWithError(mp,\ key\_obj)\ :\ nullptr;}
\DoxyCodeLine{00337\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00338\ \ \ PyObject\ *key\_obj\ =\ PyString\_FromString(key);}
\DoxyCodeLine{00339\ \ \ item\ =\ key\_obj\ ?\ \_PyDict\_GetItemWithError(mp,\ key\_obj)\ :\ nullptr;}
\DoxyCodeLine{00340\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00341\ \ \ Py\_DECREF(key\_obj);}
\DoxyCodeLine{00342\ \ \ \textcolor{keywordflow}{if}\ (item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00343\ \ \ \ \ *result\ =\ Py\_NewRef(item);}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00345\ \ \ \}}
\DoxyCodeLine{00346\ \ \ *result\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordflow}{return}\ PyErr\_Occurred()\ ?\ -\/1\ :\ 0;}
\DoxyCodeLine{00348\ \}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ >=\ 0x03050200\ \&\&\ PY\_VERSION\_HEX\ <\ 0x030D00A1}}
\DoxyCodeLine{00352\ \textcolor{preprocessor}{\#\ \ define\ PyThreadState\_GetUnchecked()\ (\_PyThreadState\_UncheckedGet())}}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00A2}}
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\#\ \ define\ PyList\_Extend(list,\ iterable)\ (PyList\_SetSlice((list),\ PY\_SSIZE\_T\_MAX,\ PY\_SSIZE\_T\_MAX,\ (iterable)))}}
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\#\ \ define\ PyList\_Clear(list)\ (PyList\_SetSlice((list),\ 0,\ PY\_SSIZE\_T\_MAX,\ nullptr))}}
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00A4}}
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#\ \ define\ PyList\_GetItemRef(op,\ index)\ (Py\_XNewRef(PyList\_GetItem((op),\ (index))))}}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \textcolor{preprocessor}{\#if\ PY\_VERSION\_HEX\ <\ 0x030D00B3}}
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\#\ \ define\ Py\_BEGIN\_CRITICAL\_SECTION(op)\ \{}}
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\#\ \ define\ Py\_END\_CRITICAL\_SECTION()\ \}}}
\DoxyCodeLine{00367\ \textcolor{preprocessor}{\#\ \ define\ Py\_BEGIN\_CRITICAL\_SECTION2(a,\ b)\ \{}}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#\ \ define\ Py\_END\_CRITICAL\_SECTION2()\ \}}}
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \textcolor{comment}{/*\ Other\ Python\ implementations\ */}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_PYTHON}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ PY\_COMPAT\_H}}

\end{DoxyCode}

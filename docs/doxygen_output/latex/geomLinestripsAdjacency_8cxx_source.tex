\doxysection{geom\+Linestrips\+Adjacency.\+cxx}
\hypertarget{geomLinestripsAdjacency_8cxx_source}{}\label{geomLinestripsAdjacency_8cxx_source}\index{panda/src/gobj/geomLinestripsAdjacency.cxx@{panda/src/gobj/geomLinestripsAdjacency.cxx}}
\mbox{\hyperlink{geomLinestripsAdjacency_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomLinestripsAdjacency_8h}{geomLinestripsAdjacency.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomLines_8h}{geomLines.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomLinesAdjacency_8h}{geomLinesAdjacency.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomVertexRewriter_8h}{geomVertexRewriter.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatTimer_8h}{pStatTimer.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsStateGuardianBase_8h}{graphicsStateGuardianBase.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ GeomLinestripsAdjacency::\_type\_handle;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00029\ GeomLinestripsAdjacency(GeomEnums::UsageHint\ usage\_hint)\ :}
\DoxyCodeLine{00030\ \ \ \mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}}(usage\_hint)}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00037\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00038\ GeomLinestripsAdjacency(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomLinestripsAdjacency}{GeomLinestripsAdjacency}}\ \&copy)\ :}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}}(copy)}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00046\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00047\ \string~GeomLinestripsAdjacency()\ \{}
\DoxyCodeLine{00048\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00053\ PT(\mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}})\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00054\ make\_copy()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomLinestripsAdjacency}{GeomLinestripsAdjacency}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00066\ GeomPrimitive::PrimitiveType\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00067\ get\_primitive\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{return}\ PT\_lines;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a53b44f402f144cb23d1e1a76e772f706}{GeomLinestripsAdjacency::}}}
\DoxyCodeLine{00076\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a53b44f402f144cb23d1e1a76e772f706}{get\_geom\_rendering}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{if}\ (is\_indexed())\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_num\_primitives()\ >\ 1)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ GR\_line\_strip\ |\ GR\_indexed\_other\ |\ GR\_strip\_cut\_index\ |\ GR\_adjacency;}
\DoxyCodeLine{00080\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ GR\_line\_strip\ |\ GR\_indexed\_other\ |\ GR\_adjacency;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{return}\ GR\_line\_strip\ |\ GR\_adjacency;}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00092\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a0fdee9ed8eda82f5be586e7a260c0926}{GeomLinestripsAdjacency::}}}
\DoxyCodeLine{00093\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a0fdee9ed8eda82f5be586e7a260c0926}{get\_min\_num\_vertices\_per\_primitive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{return}\ 4;}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00103\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a29e0cdb1a931a286624b6a7428e9e36d}{GeomLinestripsAdjacency::}}}
\DoxyCodeLine{00104\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a29e0cdb1a931a286624b6a7428e9e36d}{get\_num\_unused\_vertices\_per\_primitive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00111\ \textcolor{keywordtype}{bool}\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00112\ draw(\mbox{\hyperlink{classGraphicsStateGuardianBase}{GraphicsStateGuardianBase}}\ *gsg,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomPrimitivePipelineReader}{GeomPrimitivePipelineReader}}\ *reader,}
\DoxyCodeLine{00113\ \ \ \ \ \ \textcolor{keywordtype}{bool}\ force)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{return}\ gsg-\/>draw\_linestrips\_adj(reader,\ force);}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00127\ CPT(\mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}})\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00128\ decompose\_impl()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00129\ \ \ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread\ =\ Thread::get\_current\_thread();}
\DoxyCodeLine{00130\ \ \ PT(\mbox{\hyperlink{classGeomLinesAdjacency}{GeomLinesAdjacency}})\ lines\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomLinesAdjacency}{GeomLinesAdjacency}}(get\_usage\_hint());}
\DoxyCodeLine{00131\ \ \ lines-\/>set\_shade\_model(get\_shade\_model());}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \mbox{\hyperlink{classGeomPrimitivePipelineReader}{GeomPrimitivePipelineReader}}\ from(\textcolor{keyword}{this},\ current\_thread);}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordtype}{int}\ num\_vertices\ =\ from.get\_num\_vertices();}
\DoxyCodeLine{00135\ \ \ \mbox{\hyperlink{classConstPointerToArray}{CPTA\_int}}\ ends\ =\ get\_ends();}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ num\_unused\ =\ 1;}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{keywordtype}{int}\ vi\ =\ -\/num\_unused;}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{int}\ li\ =\ 0;}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{while}\ (li\ <\ (\textcolor{keywordtype}{int})ends.size())\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Skip\ unused\ vertices\ between\ tristrips.}}
\DoxyCodeLine{00143\ \ \ \ \ vi\ +=\ num\_unused;}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{int}\ end\ =\ ends[li];}
\DoxyCodeLine{00145\ \ \ \ \ nassertr(vi\ +\ 3\ <=\ end,\ lines);}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{int}\ v0\ =\ from.get\_vertex(vi++);}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordtype}{int}\ v1\ =\ from.get\_vertex(vi++);}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordtype}{int}\ v2\ =\ from.get\_vertex(vi++);}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{while}\ (vi\ <\ end)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ v3\ =\ from.get\_vertex(vi++);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ lines-\/>add\_vertex(v0);}
\DoxyCodeLine{00152\ \ \ \ \ \ \ lines-\/>add\_vertex(v1);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ lines-\/>add\_vertex(v2);}
\DoxyCodeLine{00154\ \ \ \ \ \ \ lines-\/>add\_vertex(v3);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ v0\ =\ v1;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ v1\ =\ v2;}
\DoxyCodeLine{00157\ \ \ \ \ \ \ v2\ =\ v3;}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ ++li;}
\DoxyCodeLine{00160\ \ \ \}}
\DoxyCodeLine{00161\ \ \ nassertr(vi\ ==\ num\_vertices,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{keywordflow}{return}\ lines;}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00170\ \textcolor{keywordtype}{bool}\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00171\ requires\_unused\_vertices()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00173\ \}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00181\ \textcolor{keywordtype}{void}\ GeomLinestripsAdjacency::}
\DoxyCodeLine{00182\ append\_unused\_vertices(\mbox{\hyperlink{classGeomVertexArrayData}{GeomVertexArrayData}}\ *vertices,\ \textcolor{keywordtype}{int}\ vertex)\ \{}
\DoxyCodeLine{00183\ \ \ \mbox{\hyperlink{classGeomVertexWriter}{GeomVertexWriter}}\ to(vertices,\ 0);}
\DoxyCodeLine{00184\ \ \ to.set\_row\_unsafe(vertices-\/>get\_num\_rows());}
\DoxyCodeLine{00185\ \ \ to.add\_data1i(get\_strip\_cut\_index());}
\DoxyCodeLine{00186\ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00191\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a0c22489ecc1a39449796e231ea618500}{GeomLinestripsAdjacency::}}}
\DoxyCodeLine{00192\ \mbox{\hyperlink{classGeomLinestripsAdjacency_a0c22489ecc1a39449796e231ea618500}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00193\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classGeomLinestripsAdjacency_aa64da2aec8ec7b0933769a2292697c61}{make\_from\_bam}});}
\DoxyCodeLine{00194\ \}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00201\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classGeomLinestripsAdjacency_aa64da2aec8ec7b0933769a2292697c61}{GeomLinestripsAdjacency::}}}
\DoxyCodeLine{00202\ \mbox{\hyperlink{classGeomLinestripsAdjacency_aa64da2aec8ec7b0933769a2292697c61}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00203\ \ \ \mbox{\hyperlink{classGeomLinestripsAdjacency}{GeomLinestripsAdjacency}}\ *\textcolor{keywordtype}{object}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomLinestripsAdjacency}{GeomLinestripsAdjacency}}(UH\_unspecified);}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00205\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordtype}{object}-\/>fillin(scan,\ manager);}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{return}\ object;}
\DoxyCodeLine{00211\ \}}

\end{DoxyCode}

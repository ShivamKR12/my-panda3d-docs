\doxysection{egg\+Matrix\+Table\+Pointer.\+cxx}
\hypertarget{eggMatrixTablePointer_8cxx_source}{}\label{eggMatrixTablePointer_8cxx_source}\index{pandatool/src/eggcharbase/eggMatrixTablePointer.cxx@{pandatool/src/eggcharbase/eggMatrixTablePointer.cxx}}
\mbox{\hyperlink{eggMatrixTablePointer_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggMatrixTablePointer_8h}{eggMatrixTablePointer.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dcast_8h}{dcast.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterDb_8h}{eggCharacterDb.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggSAnimData_8h}{eggSAnimData.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggXfmAnimData_8h}{eggXfmAnimData.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggXfmSAnim_8h}{eggXfmSAnim.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ EggMatrixTablePointer::\_type\_handle;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00029\ EggMatrixTablePointer::}
\DoxyCodeLine{00030\ EggMatrixTablePointer(\mbox{\hyperlink{classEggObject}{EggObject}}\ *\textcolor{keywordtype}{object})\ \{}
\DoxyCodeLine{00031\ \ \ \_table\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ \textcolor{keywordtype}{object});}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \textcolor{keywordflow}{if}\ (\_table\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{comment}{//\ Now\ search\ for\ the\ child\ named\ "{}xform"{}.\ \ This\ contains\ the\ actual\ table}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//\ data.}}
\DoxyCodeLine{00036\ \ \ \ \ EggGroupNode::iterator\ ci;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{bool}\ found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_table-\/>begin();\ ci\ !=\ \_table-\/>end()\ \&\&\ !found;\ ++ci)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ (*ci);}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>get\_name()\ ==\ \textcolor{stringliteral}{"{}xform"{}})\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggXfmSAnim::get\_class\_type()))\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \_xform\ =\ DCAST(\mbox{\hyperlink{classEggXfmSAnim}{EggXfmSAnim}},\ child);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \_xform-\/>normalize();}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggXfmAnimData::get\_class\_type()))\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quietly\ replace\ old-\/style\ XfmAnim\ tables\ with\ new-\/style\ XfmSAnim}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ tables.}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ PT(\mbox{\hyperlink{classEggXfmAnimData}{EggXfmAnimData}})\ anim\ =\ DCAST(\mbox{\hyperlink{classEggXfmAnimData}{EggXfmAnimData}},\ child);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \_xform\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggXfmSAnim}{EggXfmSAnim}}(*anim);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \_table-\/>replace(ci,\ \_xform.p());}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00063\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classEggMatrixTablePointer_a6cd0c0c8eb68211aed8350a41b5aa3e8}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00064\ \mbox{\hyperlink{classEggMatrixTablePointer_a6cd0c0c8eb68211aed8350a41b5aa3e8}{get\_frame\_rate}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr}\ ||\ !\_xform-\/>has\_fps())\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0;}
\DoxyCodeLine{00067\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ \_xform-\/>get\_fps();}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00076\ \mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{get\_num\_frames}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00079\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ \_xform-\/>get\_num\_rows();}
\DoxyCodeLine{00081\ \ \ \}}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00087\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_a835f4cc40dc18977bd21b1ffd7f83f7c}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00088\ \mbox{\hyperlink{classEggMatrixTablePointer_a835f4cc40dc18977bd21b1ffd7f83f7c}{extend\_to}}(\textcolor{keywordtype}{int}\ num\_frames)\ \{}
\DoxyCodeLine{00089\ \ \ nassertv(\_xform\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00090\ \ \ \_xform-\/>normalize();}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordtype}{int}\ num\_rows\ =\ \_xform-\/>get\_num\_rows();}
\DoxyCodeLine{00092\ \ \ LMatrix4d\ last\_mat;}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{if}\ (num\_rows\ ==\ 0)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ last\_mat\ =\ LMatrix4d::ident\_mat();}
\DoxyCodeLine{00095\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \_xform-\/>get\_value(num\_rows\ -\/\ 1,\ last\_mat);}
\DoxyCodeLine{00097\ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{while}\ (num\_rows\ <\ num\_frames)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \_xform-\/>add\_data(last\_mat);}
\DoxyCodeLine{00101\ \ \ \ \ num\_rows++;}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ LMatrix4d\ \mbox{\hyperlink{classEggMatrixTablePointer_a88d7a3c9f800bf44dfdb18b2dc2fa9ad}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classEggMatrixTablePointer_a88d7a3c9f800bf44dfdb18b2dc2fa9ad}{get\_frame}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{get\_num\_frames}}()\ ==\ 1)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ If\ we\ have\ exactly\ one\ frame,\ then\ we\ have\ as\ many\ frames\ as\ we\ want;}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ just\ repeat\ the\ first\ frame.}}
\DoxyCodeLine{00114\ \ \ \ \ n\ =\ 0;}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{get\_num\_frames}}()\ ==\ 0)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ If\ we\ have\ no\ frames,\ we\ really\ have\ the\ identity\ matrix.}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{return}\ LMatrix4d::ident\_mat();}
\DoxyCodeLine{00119\ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ \mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{get\_num\_frames}}(),\ LMatrix4d::ident\_mat());}
\DoxyCodeLine{00122\ \ \ LMatrix4d\ mat;}
\DoxyCodeLine{00123\ \ \ \_xform-\/>get\_value(n,\ mat);}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordflow}{return}\ mat;}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00131\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_a9f7a0351dc5ddbf627b29a3c94300bd5}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00132\ \mbox{\hyperlink{classEggMatrixTablePointer_a9f7a0351dc5ddbf627b29a3c94300bd5}{set\_frame}}(\textcolor{keywordtype}{int}\ n,\ \textcolor{keyword}{const}\ LMatrix4d\ \&mat)\ \{}
\DoxyCodeLine{00133\ \ \ nassertv(n\ >=\ 0\ \&\&\ n\ <\ \mbox{\hyperlink{classEggMatrixTablePointer_a4cfdb6b928a75ccb4cbd5f4fb2d8c870}{get\_num\_frames}}());}
\DoxyCodeLine{00134\ \ \ \_xform-\/>set\_value(n,\ mat);}
\DoxyCodeLine{00135\ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00141\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEggMatrixTablePointer_a5d85d43d8059bba82a5745528cd8976b}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00142\ \mbox{\hyperlink{classEggMatrixTablePointer_a5d85d43d8059bba82a5745528cd8976b}{add\_frame}}(\textcolor{keyword}{const}\ LMatrix4d\ \&mat)\ \{}
\DoxyCodeLine{00143\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00145\ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keywordflow}{return}\ \_xform-\/>add\_data(mat);}
\DoxyCodeLine{00148\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00154\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_a77956fcbbe8c51ece7720cb26b6c19f1}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00155\ \mbox{\hyperlink{classEggMatrixTablePointer_a77956fcbbe8c51ece7720cb26b6c19f1}{do\_finish\_reparent}}(\mbox{\hyperlink{classEggJointPointer}{EggJointPointer}}\ *new\_parent)\ \{}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{if}\ (new\_parent\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{comment}{//\ No\ new\ parent;\ unparent\ the\ joint.}}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{classEggGroupNode}{EggGroupNode}}\ *egg\_parent\ =\ \_table-\/>get\_parent();}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{if}\ (egg\_parent\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ egg\_parent-\/>remove\_child(\_table.p());}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{comment}{//\ Reparent\ the\ joint\ to\ its\ new\ parent\ (implicitly\ unparenting\ it\ from}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ its\ previous\ parent).}}
\DoxyCodeLine{00166\ \ \ \ \ \mbox{\hyperlink{classEggMatrixTablePointer}{EggMatrixTablePointer}}\ *new\_node\ =\ DCAST(\mbox{\hyperlink{classEggMatrixTablePointer}{EggMatrixTablePointer}},\ new\_parent);}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordflow}{if}\ (new\_node-\/>\_table\ !=\ \_table-\/>get\_parent())\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ new\_node-\/>\_table-\/>add\_child(\_table.p());}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00183\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEggMatrixTablePointer_a4db7bbc7d28f0ab1f6cce0aae0a8ad9d}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00184\ \mbox{\hyperlink{classEggMatrixTablePointer_a4db7bbc7d28f0ab1f6cce0aae0a8ad9d}{do\_rebuild}}(\mbox{\hyperlink{classEggCharacterDb}{EggCharacterDb}}\ \&db)\ \{}
\DoxyCodeLine{00185\ \ \ LMatrix4d\ mat;}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{if}\ (!db.\mbox{\hyperlink{classEggCharacterDb_ad58ac8483e055bba1a3d0968dbead779}{get\_matrix}}(\textcolor{keyword}{this},\ EggCharacterDb::TT\_rebuild\_frame,\ 0,\ mat))\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ No\ rebuild\ frame;\ this\ is\ OK.}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00193\ \ \ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{bool}\ all\_ok\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \_xform-\/>clear\_data();}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordflow}{if}\ (!\_xform-\/>add\_data(mat))\ \{}
\DoxyCodeLine{00199\ \ \ \ \ all\_ok\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00200\ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ Assume\ all\ frames\ will\ be\ contiguous.}}
\DoxyCodeLine{00203\ \ \ \textcolor{keywordtype}{int}\ n\ =\ 1;}
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{while}\ (db.\mbox{\hyperlink{classEggCharacterDb_ad58ac8483e055bba1a3d0968dbead779}{get\_matrix}}(\textcolor{keyword}{this},\ EggCharacterDb::TT\_rebuild\_frame,\ n,\ mat))\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_xform-\/>add\_data(mat))\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ all\_ok\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ ++n;}
\DoxyCodeLine{00209\ \ \ \}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{return}\ all\_ok;}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00218\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_aabb24321ea321c97eb515966136bb7d3}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00219\ \mbox{\hyperlink{classEggMatrixTablePointer_aabb24321ea321c97eb515966136bb7d3}{optimize}}()\ \{}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \_xform-\/>optimize();}
\DoxyCodeLine{00222\ \ \ \}}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00228\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_a6590926d3aeb0680e1f69934fc3850b1}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00229\ \mbox{\hyperlink{classEggMatrixTablePointer_a6590926d3aeb0680e1f69934fc3850b1}{zero\_channels}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&components)\ \{}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00232\ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \textcolor{comment}{//\ This\ is\ particularly\ easy:\ we\ only\ have\ to\ remove\ children\ from\ the}}
\DoxyCodeLine{00235\ \ \ \textcolor{comment}{//\ \_xform\ object\ whose\ name\ is\ listed\ in\ the\ components.}}
\DoxyCodeLine{00236\ \ \ string::const\_iterator\ si;}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{for}\ (si\ =\ components.begin();\ si\ !=\ components.end();\ ++si)\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordtype}{string}\ table\_name(1,\ *si);}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ \_xform-\/>find\_child(table\_name);}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordflow}{if}\ (child\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \_xform-\/>remove\_child(child);}
\DoxyCodeLine{00242\ \ \ \ \ \}}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00250\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_aec3b6921e2b1c6b257fefa41dab721d8}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00251\ \mbox{\hyperlink{classEggMatrixTablePointer_aec3b6921e2b1c6b257fefa41dab721d8}{quantize\_channels}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&components,\ \textcolor{keywordtype}{double}\ quantum)\ \{}
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00254\ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ This\ is\ similar\ to\ the\ above:\ we\ quantize\ children\ of\ the\ \_xform\ object}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ whose\ name\ is\ listed\ in\ the\ components.}}
\DoxyCodeLine{00258\ \ \ string::const\_iterator\ si;}
\DoxyCodeLine{00259\ \ \ \textcolor{keywordflow}{for}\ (si\ =\ components.begin();\ si\ !=\ components.end();\ ++si)\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordtype}{string}\ table\_name(1,\ *si);}
\DoxyCodeLine{00261\ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ \_xform-\/>find\_child(table\_name);}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{if}\ (child\ !=\ \textcolor{keyword}{nullptr}\ \&\&}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ child-\/>is\_of\_type(EggSAnimData::get\_class\_type()))\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \mbox{\hyperlink{classEggSAnimData}{EggSAnimData}}\ *anim\ =\ DCAST(\mbox{\hyperlink{classEggSAnimData}{EggSAnimData}},\ child);}
\DoxyCodeLine{00265\ \ \ \ \ \ \ anim-\/>quantize(quantum);}
\DoxyCodeLine{00266\ \ \ \ \ \}}
\DoxyCodeLine{00267\ \ \ \}}
\DoxyCodeLine{00268\ \}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00274\ \mbox{\hyperlink{classEggJointPointer}{EggJointPointer}}\ *\mbox{\hyperlink{classEggMatrixTablePointer_abcfa3465b6d463c38e8fdac0e0facf18}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00275\ \mbox{\hyperlink{classEggMatrixTablePointer_abcfa3465b6d463c38e8fdac0e0facf18}{make\_new\_joint}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00276\ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *new\_table\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggTable}{EggTable}}(name);}
\DoxyCodeLine{00277\ \ \ \_table-\/>add\_child(new\_table);}
\DoxyCodeLine{00278\ \ \ CoordinateSystem\ cs\ =\ CS\_default;}
\DoxyCodeLine{00279\ \ \ \textcolor{keywordflow}{if}\ (\_xform\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00280\ \ \ \ \ cs\ =\ \_xform-\/>get\_coordinate\_system();}
\DoxyCodeLine{00281\ \ \ \}}
\DoxyCodeLine{00282\ \ \ \mbox{\hyperlink{classEggXfmSAnim}{EggXfmSAnim}}\ *new\_xform\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggXfmSAnim}{EggXfmSAnim}}(\textcolor{stringliteral}{"{}xform"{}},\ cs);}
\DoxyCodeLine{00283\ \ \ new\_table-\/>\mbox{\hyperlink{classEggGroupNode_a5ddaeb0aa17a0740e0ce94586f862625}{add\_child}}(new\_xform);}
\DoxyCodeLine{00284\ \ \ new\_xform-\/>add\_data(LMatrix4d::ident\_mat());}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggMatrixTablePointer}{EggMatrixTablePointer}}(new\_table);}
\DoxyCodeLine{00287\ \}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00292\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggMatrixTablePointer_aafaf946a4b1097cf2dcba9e7208c9dc1}{EggMatrixTablePointer::}}}
\DoxyCodeLine{00293\ \mbox{\hyperlink{classEggMatrixTablePointer_aafaf946a4b1097cf2dcba9e7208c9dc1}{set\_name}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00294\ \ \ \_table-\/>set\_name(name);}
\DoxyCodeLine{00295\ \}}

\end{DoxyCode}

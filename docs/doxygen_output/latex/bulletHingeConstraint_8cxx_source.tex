\doxysection{bullet\+Hinge\+Constraint.\+cxx}
\hypertarget{bulletHingeConstraint_8cxx_source}{}\label{bulletHingeConstraint_8cxx_source}\index{panda/src/bullet/bulletHingeConstraint.cxx@{panda/src/bullet/bulletHingeConstraint.cxx}}
\mbox{\hyperlink{bulletHingeConstraint_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bulletHingeConstraint_8h}{bulletHingeConstraint.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bulletRigidBodyNode_8h}{bulletRigidBodyNode.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bulletWorld_8h}{bulletWorld.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{deg__2__rad_8h}{deg\_2\_rad.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ BulletHingeConstraint::\_type\_handle;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00027\ BulletHingeConstraint::}
\DoxyCodeLine{00028\ BulletHingeConstraint(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_a,}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *ts\_a,}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_frame\_a)\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_a\ =\ btRigidBody::upcast(node\_a-\/>get\_object());}
\DoxyCodeLine{00033\ \ \ btTransform\ frame\_a\ =\ TransformState\_to\_btTrans(ts\_a);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \_constraint\ =\ \textcolor{keyword}{new}\ btHingeConstraint(*ptr\_a,\ frame\_a,\ use\_frame\_a);}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00041\ BulletHingeConstraint::}
\DoxyCodeLine{00042\ BulletHingeConstraint(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_a,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_b,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *ts\_a,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *ts\_b,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_frame\_a)\ \{}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_a\ =\ btRigidBody::upcast(node\_a-\/>get\_object());}
\DoxyCodeLine{00049\ \ \ btTransform\ frame\_a\ =\ TransformState\_to\_btTrans(ts\_a);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_b\ =\ btRigidBody::upcast(node\_b-\/>get\_object());}
\DoxyCodeLine{00052\ \ \ btTransform\ frame\_b\ =\ TransformState\_to\_btTrans(ts\_b);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \_constraint\ =\ \textcolor{keyword}{new}\ btHingeConstraint(*ptr\_a,\ *ptr\_b,\ frame\_a,\ frame\_b,\ use\_frame\_a);}
\DoxyCodeLine{00055\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00062\ BulletHingeConstraint::}
\DoxyCodeLine{00063\ BulletHingeConstraint(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_a,}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&pivot\_a,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector3\ \&axis\_a,}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_frame\_a)\ \{}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_a\ =\ btRigidBody::upcast(node\_a-\/>get\_object());}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ pos\_a\ =\ LVecBase3\_to\_btVector3(pivot\_a);}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ vec\_a\ =\ LVecBase3\_to\_btVector3(axis\_a);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \_constraint\ =\ \textcolor{keyword}{new}\ btHingeConstraint(*ptr\_a,\ pos\_a,\ vec\_a,\ use\_frame\_a);}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00082\ BulletHingeConstraint::}
\DoxyCodeLine{00083\ BulletHingeConstraint(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_a,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBulletRigidBodyNode}{BulletRigidBodyNode}}\ *node\_b,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&pivot\_a,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LPoint3\ \&pivot\_b,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector3\ \&axis\_a,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVector3\ \&axis\_b,}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ use\_frame\_a)\ \{}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_a\ =\ btRigidBody::upcast(node\_a-\/>get\_object());}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ pos\_a\ =\ LVecBase3\_to\_btVector3(pivot\_a);}
\DoxyCodeLine{00093\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ vec\_a\ =\ LVecBase3\_to\_btVector3(axis\_a);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \mbox{\hyperlink{classbtRigidBody}{btRigidBody}}\ *ptr\_b\ =\ btRigidBody::upcast(node\_b-\/>get\_object());}
\DoxyCodeLine{00096\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ pos\_b\ =\ LVecBase3\_to\_btVector3(pivot\_b);}
\DoxyCodeLine{00097\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ vec\_b\ =\ LVecBase3\_to\_btVector3(axis\_b);}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \_constraint\ =\ \textcolor{keyword}{new}\ btHingeConstraint(*ptr\_a,\ *ptr\_b,\ pos\_a,\ pos\_b,\ vec\_a,\ vec\_b,\ use\_frame\_a);}
\DoxyCodeLine{00100\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00105\ btTypedConstraint\ *BulletHingeConstraint::}
\DoxyCodeLine{00106\ ptr()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{return}\ \_constraint;}
\DoxyCodeLine{00109\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00114\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00115\ set\_angular\_only(\textcolor{keywordtype}{bool}\ value)\ \{}
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \textcolor{keywordflow}{return}\ \_constraint-\/>setAngularOnly(value);}
\DoxyCodeLine{00119\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00124\ \textcolor{keywordtype}{bool}\ BulletHingeConstraint::}
\DoxyCodeLine{00125\ get\_angular\_only()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{return}\ \_constraint-\/>getAngularOnly();}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00134\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00135\ set\_limit(PN\_stdfloat\ low,\ PN\_stdfloat\ high,\ PN\_stdfloat\ softness,\ PN\_stdfloat\ bias,\ PN\_stdfloat\ relaxation)\ \{}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ low\ \ =\ deg\_2\_rad(low);}
\DoxyCodeLine{00139\ \ \ high\ =\ deg\_2\_rad(high);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \_constraint-\/>setLimit(low,\ high,\ softness,\ bias,\ relaxation);}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00147\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00148\ set\_axis(\textcolor{keyword}{const}\ LVector3\ \&axis)\ \{}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ nassertv(!axis.is\_nan());}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \mbox{\hyperlink{structbtVector3}{btVector3}}\ v\ =\ LVecBase3\_to\_btVector3(axis);}
\DoxyCodeLine{00154\ \ \ \_constraint-\/>setAxis(v);}
\DoxyCodeLine{00155\ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00160\ PN\_stdfloat\ BulletHingeConstraint::}
\DoxyCodeLine{00161\ get\_lower\_limit()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00162\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordflow}{return}\ rad\_2\_deg(\_constraint-\/>getLowerLimit());}
\DoxyCodeLine{00165\ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00170\ PN\_stdfloat\ BulletHingeConstraint::}
\DoxyCodeLine{00171\ get\_upper\_limit()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00172\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{return}\ rad\_2\_deg(\_constraint-\/>getUpperLimit());}
\DoxyCodeLine{00175\ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00180\ PN\_stdfloat\ BulletHingeConstraint::}
\DoxyCodeLine{00181\ get\_hinge\_angle()\ \{}
\DoxyCodeLine{00182\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{return}\ rad\_2\_deg(\_constraint-\/>getHingeAngle());}
\DoxyCodeLine{00185\ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00194\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00195\ enable\_angular\_motor(\textcolor{keywordtype}{bool}\ enable,\ PN\_stdfloat\ target\_velocity,\ PN\_stdfloat\ max\_impulse)\ \{}
\DoxyCodeLine{00196\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \_constraint-\/>enableAngularMotor(enable,\ target\_velocity,\ max\_impulse);}
\DoxyCodeLine{00199\ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00204\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00205\ enable\_motor(\textcolor{keywordtype}{bool}\ enable)\ \{}
\DoxyCodeLine{00206\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \_constraint-\/>enableMotor(enable);}
\DoxyCodeLine{00209\ \}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00215\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00216\ set\_max\_motor\_impulse(PN\_stdfloat\ max\_impulse)\ \{}
\DoxyCodeLine{00217\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \_constraint-\/>setMaxMotorImpulse(max\_impulse);}
\DoxyCodeLine{00220\ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00225\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00226\ set\_motor\_target(\textcolor{keyword}{const}\ LQuaternion\ \&quat,\ PN\_stdfloat\ dt)\ \{}
\DoxyCodeLine{00227\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \_constraint-\/>setMotorTarget(LQuaternion\_to\_btQuat(quat),\ dt);}
\DoxyCodeLine{00230\ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00235\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00236\ set\_motor\_target(PN\_stdfloat\ target\_angle,\ PN\_stdfloat\ dt)\ \{}
\DoxyCodeLine{00237\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \_constraint-\/>setMotorTarget(target\_angle,\ dt);}
\DoxyCodeLine{00240\ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00245\ \textcolor{keywordtype}{void}\ BulletHingeConstraint::}
\DoxyCodeLine{00246\ set\_frames(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *ts\_a,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *ts\_b)\ \{}
\DoxyCodeLine{00247\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ btTransform\ frame\_a\ =\ TransformState\_to\_btTrans(ts\_a);}
\DoxyCodeLine{00250\ \ \ btTransform\ frame\_b\ =\ TransformState\_to\_btTrans(ts\_b);}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \_constraint-\/>setFrames(frame\_a,\ frame\_b);}
\DoxyCodeLine{00253\ \}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00258\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ BulletHingeConstraint::}
\DoxyCodeLine{00259\ get\_frame\_a()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00260\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{return}\ btTrans\_to\_TransformState(\_constraint-\/>getAFrame());}
\DoxyCodeLine{00263\ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00268\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ BulletHingeConstraint::}
\DoxyCodeLine{00269\ get\_frame\_b()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00270\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(BulletWorld::get\_global\_lock());}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \textcolor{keywordflow}{return}\ btTrans\_to\_TransformState(\_constraint-\/>getBFrame());}
\DoxyCodeLine{00273\ \}}

\end{DoxyCode}

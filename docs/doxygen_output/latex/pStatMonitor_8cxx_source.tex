\doxysection{p\+Stat\+Monitor.\+cxx}
\hypertarget{pStatMonitor_8cxx_source}{}\label{pStatMonitor_8cxx_source}\index{pandatool/src/pstatserver/pStatMonitor.cxx@{pandatool/src/pstatserver/pStatMonitor.cxx}}
\mbox{\hyperlink{pStatMonitor_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatMonitor_8h}{pStatMonitor.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramInputFile_8h}{datagramInputFile.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramOutputFile_8h}{datagramOutputFile.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}pandaVersion.h"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatTimeline_8h}{pStatTimeline.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatStripChart_8h}{pStatStripChart.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatFlameGraph_8h}{pStatFlameGraph.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatPianoRoll_8h}{pStatPianoRoll.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ session\_file\_header(\textcolor{stringliteral}{"{}pstat\(\backslash\)0\(\backslash\)n\(\backslash\)r"{}},\ 8);}
\DoxyCodeLine{00028\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ layout\_file\_header(\textcolor{stringliteral}{"{}pslyt\(\backslash\)0\(\backslash\)n\(\backslash\)r"{}},\ 8);}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ layout\_filename\ =\ Filename::binary\_filename(}
\DoxyCodeLine{00031\ \#ifdef\ \_WIN32}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classFilename_a73834ff912339f4d780d4fa235cb6826}{Filename::expand\_from}}(\textcolor{stringliteral}{"{}\$USER\_APPDATA/Panda3D-\/"{}}\ PANDA\_ABI\_VERSION\_STR\ \textcolor{stringliteral}{"{}/pstats-\/layout"{}})}
\DoxyCodeLine{00033\ \#elif\ defined(\_\_APPLE\_\_)}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{classFilename_a73834ff912339f4d780d4fa235cb6826}{Filename::expand\_from}}(\textcolor{stringliteral}{"{}\$HOME/Library/Caches/Panda3D-\/"{}}\ PANDA\_ABI\_VERSION\_STR\ \textcolor{stringliteral}{"{}/pstats-\/layout"{}})}
\DoxyCodeLine{00035\ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{00036\ \ \ \mbox{\hyperlink{classFilename_a73834ff912339f4d780d4fa235cb6826}{Filename::expand\_from}}(\textcolor{stringliteral}{"{}\$XDG\_STATE\_HOME/panda3d/pstats-\/layout"{}})}
\DoxyCodeLine{00037\ \#endif}
\DoxyCodeLine{00038\ );}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00043\ PStatMonitor::}
\DoxyCodeLine{00044\ PStatMonitor(\mbox{\hyperlink{classPStatServer}{PStatServer}}\ *server)\ :\ \_server(server)\ \{}
\DoxyCodeLine{00045\ \ \ \_client\_known\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ PStatMonitor::}
\DoxyCodeLine{00052\ \string~PStatMonitor()\ \{}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{close}}();}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00060\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a9c99005c8196153073e759a2d0d54bbd}{PStatMonitor::}}}
\DoxyCodeLine{00061\ \mbox{\hyperlink{classPStatMonitor_a9c99005c8196153073e759a2d0d54bbd}{hello\_from}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&hostname,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&progname,\ \textcolor{keywordtype}{int}\ pid)\ \{}
\DoxyCodeLine{00062\ \ \ \_client\_known\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00063\ \ \ \_client\_hostname\ =\ hostname;}
\DoxyCodeLine{00064\ \ \ \_client\_progname\ =\ progname;}
\DoxyCodeLine{00065\ \ \ \_client\_pid\ =\ pid;}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classPStatMonitor_a04677a5732061e83d61e78549b3f056c}{got\_hello}}();}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a46ff476016645d996df8e54dca2a5a71}{PStatMonitor::}}}
\DoxyCodeLine{00076\ \mbox{\hyperlink{classPStatMonitor_a46ff476016645d996df8e54dca2a5a71}{bad\_version}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&hostname,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&progname,\ \textcolor{keywordtype}{int}\ pid,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ client\_major,\ \textcolor{keywordtype}{int}\ client\_minor,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ server\_major,\ \textcolor{keywordtype}{int}\ server\_minor)\ \{}
\DoxyCodeLine{00079\ \ \ \_client\_known\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00080\ \ \ \_client\_hostname\ =\ hostname;}
\DoxyCodeLine{00081\ \ \ \_client\_progname\ =\ progname;}
\DoxyCodeLine{00082\ \ \ \_client\_pid\ =\ 0;}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{classPStatMonitor_aabfbfe8a5deaf26de30d5d87867e952b}{got\_bad\_version}}(client\_major,\ client\_minor,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ server\_major,\ server\_minor);}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a424ba0b66c327e793a7aef9260946ac8}{PStatMonitor::}}}
\DoxyCodeLine{00092\ \mbox{\hyperlink{classPStatMonitor_a424ba0b66c327e793a7aef9260946ac8}{set\_client\_data}}(\mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data)\ \{}
\DoxyCodeLine{00093\ \ \ \_client\_data\ =\ client\_data;}
\DoxyCodeLine{00094\ \ \ \mbox{\hyperlink{classPStatMonitor_a4f6bd302d4a1e029c8f89058b6495b58}{initialized}}();}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00100\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_aace5334b65153a6e02b9853cad6f915e}{PStatMonitor::}}}
\DoxyCodeLine{00101\ \mbox{\hyperlink{classPStatMonitor_aace5334b65153a6e02b9853cad6f915e}{write}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&fn)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00102\ \ \ \mbox{\hyperlink{classDatagramOutputFile}{DatagramOutputFile}}\ dof;}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{if}\ (!dof.open(fn))\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordflow}{if}\ (!dof.write\_header(session\_file\_header))\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{classDatagram}{Datagram}}\ dg;}
\DoxyCodeLine{00110\ \ \ dg.set\_stdfloat\_double(\textcolor{keyword}{false});}
\DoxyCodeLine{00111\ \ \ dg.add\_uint16(1);}
\DoxyCodeLine{00112\ \ \ dg.add\_uint16(1);}
\DoxyCodeLine{00113\ \ \ \mbox{\hyperlink{classPStatMonitor_a8d27e35f8e7df7e7519f1f8ed922b5af}{write\_datagram}}(dg);}
\DoxyCodeLine{00114\ \ \ dof.put\_datagram(dg);}
\DoxyCodeLine{00115\ \ \ dof.close();}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a0e003c0bf21c1d000fd41185a261412b}{PStatMonitor::}}}
\DoxyCodeLine{00123\ \mbox{\hyperlink{classPStatMonitor_a0e003c0bf21c1d000fd41185a261412b}{read}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&fn)\ \{}
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{close}}();}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classDatagramInputFile}{DatagramInputFile}}\ dif;}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{if}\ (!dif.open(fn))\ \{}
\DoxyCodeLine{00128\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Failed\ to\ open\ "{}}\ <<\ fn\ <<\ \textcolor{stringliteral}{"{}\ for\ reading.\(\backslash\)n"{}};}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00130\ \ \ \}}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{string}\ header;}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{if}\ (!dif.read\_header(header,\ 8)\ ||\ header\ !=\ session\_file\_header)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Session\ file\ contains\ invalid\ header.\(\backslash\)n"{}};}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ \ \ \}}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classDatagram}{Datagram}}\ dg;}
\DoxyCodeLine{00137\ \ \ dg.set\_stdfloat\_double(\textcolor{keyword}{false});}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{if}\ (!dif.get\_datagram(dg))\ \{}
\DoxyCodeLine{00140\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Failed\ to\ read\ datagram\ from\ session\ file.\(\backslash\)n"{}};}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan(dg);}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordtype}{int}\ version\ =\ scan.get\_uint16();}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordflow}{if}\ (version\ !=\ 1)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unsupported\ session\ file\ version\ "{}}\ <<\ version\ <<\ \textcolor{stringliteral}{"{}.\(\backslash\)n"{}};}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00149\ \ \ \}}
\DoxyCodeLine{00150\ \ \ \textcolor{comment}{//\ Room\ for\ a\ minor\ version\ number}}
\DoxyCodeLine{00151\ \ \ scan.get\_uint16();}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \mbox{\hyperlink{classPStatMonitor_a0f0f06a831ee530c86a8166d65280a76}{read\_datagram}}(scan);}
\DoxyCodeLine{00154\ \ \ dif.close();}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \mbox{\hyperlink{classPStatMonitor_a20f9ef2533122ec6394066f33e26c732}{idle}}();}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \_read\_filename\ =\ fn;}
\DoxyCodeLine{00159\ \ \ \_client\_data-\/>clear\_dirty();}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00162\ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00167\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{PStatMonitor::}}}
\DoxyCodeLine{00168\ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}()\ \{}
\DoxyCodeLine{00169\ \ \ \mbox{\hyperlink{classDatagramInputFile}{DatagramInputFile}}\ dif;}
\DoxyCodeLine{00170\ \ \ \textcolor{keywordflow}{if}\ (!dif.open(layout\_filename))\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00173\ \ \ \}}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{string}\ header;}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordflow}{if}\ (!dif.read\_header(header,\ 8)\ ||\ header\ !=\ layout\_file\_header)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Layout\ file\ contains\ invalid\ header.\(\backslash\)n"{}};}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00179\ \ \ \}}
\DoxyCodeLine{00180\ \ \ \mbox{\hyperlink{classDatagram}{Datagram}}\ dg;}
\DoxyCodeLine{00181\ \ \ dg.set\_stdfloat\_double(\textcolor{keyword}{false});}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{keywordflow}{if}\ (!dif.get\_datagram(dg))\ \{}
\DoxyCodeLine{00184\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Failed\ to\ read\ datagram\ from\ layout\ file.\(\backslash\)n"{}};}
\DoxyCodeLine{00185\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00187\ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan(dg);}
\DoxyCodeLine{00190\ \ \ \textcolor{keywordtype}{int}\ version\ =\ scan.get\_uint16();}
\DoxyCodeLine{00191\ \ \ \textcolor{keywordflow}{if}\ (version\ !=\ 1)\ \{}
\DoxyCodeLine{00192\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unsupported\ layout\ file\ version\ "{}}\ <<\ version\ <<\ \textcolor{stringliteral}{"{}.\(\backslash\)n"{}};}
\DoxyCodeLine{00193\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00195\ \ \ \}}
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ Room\ for\ a\ minor\ version\ number}}
\DoxyCodeLine{00197\ \ \ scan.get\_uint16();}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keywordtype}{size\_t}\ num\_colors\ =\ scan.get\_uint32();}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_colors;\ ++i)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordtype}{int}\ key\ =\ scan.get\_int32();}
\DoxyCodeLine{00202\ \ \ \ \ LRGBColor\ \&\mbox{\hyperlink{structcolor}{color}}\ =\ \_colors[key];}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ scan.get\_float32();}
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ scan.get\_float32();}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ scan.get\_float32();}
\DoxyCodeLine{00206\ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph;}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordtype}{size\_t}\ num\_timelines\ =\ scan.get\_uint16();}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_timelines;\ ++i)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ scan.get\_int32();}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ scan.get\_int32();}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ scan.get\_int32();}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ scan.get\_int32();}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized\ =\ scan.get\_bool();}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized\ =\ scan.get\_bool();}
\DoxyCodeLine{00218\ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_ac624bc669de170e76dd7dbce557c4aa1}{open\_timeline}}();}
\DoxyCodeLine{00219\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized);}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \textcolor{keywordtype}{size\_t}\ num\_strip\_charts\ =\ scan.get\_uint16();}
\DoxyCodeLine{00223\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_strip\_charts;\ ++i)\ \{}
\DoxyCodeLine{00224\ \ \ \ \ std::string\ thread\_name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00225\ \ \ \ \ std::string\ collector\_name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{bool}\ show\_level\ =\ scan.get\_bool();}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ \_client\_data-\/>find\_thread(thread\_name);}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ \_client\_data-\/>find\_collector(collector\_name);}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ scan.get\_int32();}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ scan.get\_int32();}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ scan.get\_int32();}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ scan.get\_int32();}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized\ =\ scan.get\_bool();}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized\ =\ scan.get\_bool();}
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(thread\_index,\ collector\_index,\ show\_level);}
\DoxyCodeLine{00237\ \ \ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized);}
\DoxyCodeLine{00238\ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \textcolor{keywordtype}{size\_t}\ num\_flame\_graphs\ =\ scan.get\_uint16();}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_flame\_graphs;\ ++i)\ \{}
\DoxyCodeLine{00243\ \ \ \ \ std::string\ thread\_name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00244\ \ \ \ \ std::string\ collector\_name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ \_client\_data-\/>find\_thread(thread\_name);}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ collector\_name.empty()\ ?\ -\/1\ :\ \_client\_data-\/>find\_collector(collector\_name);}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ scan.get\_int32();}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ scan.get\_int32();}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ scan.get\_int32();}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ scan.get\_int32();}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized\ =\ scan.get\_bool();}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized\ =\ scan.get\_bool();}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a1b28b7f667978981b41b5ed393161ed8}{open\_flame\_graph}}(thread\_index,\ collector\_index);}
\DoxyCodeLine{00255\ \ \ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized);}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \textcolor{keywordtype}{size\_t}\ num\_piano\_rolls\ =\ scan.get\_uint16();}
\DoxyCodeLine{00260\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_piano\_rolls;\ ++i)\ \{}
\DoxyCodeLine{00261\ \ \ \ \ std::string\ thread\_name\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ \_client\_data-\/>find\_thread(thread\_name);}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ scan.get\_int32();}
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ scan.get\_int32();}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ scan.get\_int32();}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ scan.get\_int32();}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized\ =\ scan.get\_bool();}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized\ =\ scan.get\_bool();}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a344e95530770709157e7780b90608cda}{open\_piano\_roll}}(thread\_index);}
\DoxyCodeLine{00271\ \ \ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized);}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \}}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ dif.close();}
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{if}\ (num\_timelines\ +\ num\_strip\_charts\ +\ num\_flame\_graphs\ +\ num\_piano\_rolls\ ==\ 0)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(0,\ 0,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00278\ \ \ \}}
\DoxyCodeLine{00279\ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00284\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a002afbd26111ae231bc865c1873a5aff}{PStatMonitor::}}}
\DoxyCodeLine{00285\ \mbox{\hyperlink{classPStatMonitor_a002afbd26111ae231bc865c1873a5aff}{save\_default\_graphs}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00286\ \ \ layout\_filename.\mbox{\hyperlink{classFilename_aa3072a14bec6fccd0e7befca5863a35c}{make\_dir}}();}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \mbox{\hyperlink{classDatagramOutputFile}{DatagramOutputFile}}\ dof;}
\DoxyCodeLine{00289\ \ \ \textcolor{keywordflow}{if}\ (!dof.open(layout\_filename))\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00291\ \ \ \}}
\DoxyCodeLine{00292\ \ \ \textcolor{keywordflow}{if}\ (!dof.write\_header(layout\_file\_header))\ \{}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00294\ \ \ \}}
\DoxyCodeLine{00295\ \ \ \mbox{\hyperlink{classDatagram}{Datagram}}\ dg;}
\DoxyCodeLine{00296\ \ \ dg.set\_stdfloat\_double(\textcolor{keyword}{false});}
\DoxyCodeLine{00297\ \ \ dg.add\_uint16(1);}
\DoxyCodeLine{00298\ \ \ dg.add\_uint16(1);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ dg.add\_uint32((uint32\_t)\_colors.size());}
\DoxyCodeLine{00301\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&item\ :\ \_colors)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ dg.add\_int32(item.first);}
\DoxyCodeLine{00303\ \ \ \ \ dg.add\_float32(item.second[0]);}
\DoxyCodeLine{00304\ \ \ \ \ dg.add\_float32(item.second[1]);}
\DoxyCodeLine{00305\ \ \ \ \ dg.add\_float32(item.second[2]);}
\DoxyCodeLine{00306\ \ \ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ dg.add\_uint16(\_timelines.size());}
\DoxyCodeLine{00309\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_timelines)\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y,\ width,\ height;}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized,\ maximized;}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph-\/>get\_window\_state(x,\ y,\ width,\ height,\ minimized,\ maximized))\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ dg.add\_int32(x);}
\DoxyCodeLine{00314\ \ \ \ \ \ \ dg.add\_int32(y);}
\DoxyCodeLine{00315\ \ \ \ \ \ \ dg.add\_int32(width);}
\DoxyCodeLine{00316\ \ \ \ \ \ \ dg.add\_int32(height);}
\DoxyCodeLine{00317\ \ \ \ \ \ \ dg.add\_bool(minimized);}
\DoxyCodeLine{00318\ \ \ \ \ \ \ dg.add\_bool(maximized);}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ dg.add\_uint16(\_strip\_charts.size());}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_strip\_charts)\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y,\ width,\ height;}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized,\ maximized;}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph-\/>get\_window\_state(x,\ y,\ width,\ height,\ minimized,\ maximized))\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ dg.add\_string(\_client\_data-\/>get\_thread\_name(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_thread\_index()));}
\DoxyCodeLine{00328\ \ \ \ \ \ \ dg.add\_string(\_client\_data-\/>get\_collector\_fullname(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_collector\_index()));}
\DoxyCodeLine{00329\ \ \ \ \ \ \ dg.add\_bool(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_view().get\_show\_level());}
\DoxyCodeLine{00330\ \ \ \ \ \ \ dg.add\_int32(x);}
\DoxyCodeLine{00331\ \ \ \ \ \ \ dg.add\_int32(y);}
\DoxyCodeLine{00332\ \ \ \ \ \ \ dg.add\_int32(width);}
\DoxyCodeLine{00333\ \ \ \ \ \ \ dg.add\_int32(height);}
\DoxyCodeLine{00334\ \ \ \ \ \ \ dg.add\_bool(minimized);}
\DoxyCodeLine{00335\ \ \ \ \ \ \ dg.add\_bool(maximized);}
\DoxyCodeLine{00336\ \ \ \ \ \}}
\DoxyCodeLine{00337\ \ \ \}}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ dg.add\_uint16(\_flame\_graphs.size());}
\DoxyCodeLine{00340\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_flame\_graphs)\ \{}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y,\ width,\ height;}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized,\ maximized;}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph-\/>get\_window\_state(x,\ y,\ width,\ height,\ minimized,\ maximized))\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ ((\mbox{\hyperlink{classPStatFlameGraph}{PStatFlameGraph}}\ *)graph)-\/>get\_collector\_index();}
\DoxyCodeLine{00345\ \ \ \ \ \ \ dg.add\_string(\_client\_data-\/>get\_thread\_name(((\mbox{\hyperlink{classPStatFlameGraph}{PStatFlameGraph}}\ *)graph)-\/>get\_thread\_index()));}
\DoxyCodeLine{00346\ \ \ \ \ \ \ dg.add\_string(collector\_index\ >=\ 0\ ?\ \_client\_data-\/>get\_collector\_fullname(collector\_index)\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00347\ \ \ \ \ \ \ dg.add\_int32(x);}
\DoxyCodeLine{00348\ \ \ \ \ \ \ dg.add\_int32(y);}
\DoxyCodeLine{00349\ \ \ \ \ \ \ dg.add\_int32(width);}
\DoxyCodeLine{00350\ \ \ \ \ \ \ dg.add\_int32(height);}
\DoxyCodeLine{00351\ \ \ \ \ \ \ dg.add\_bool(minimized);}
\DoxyCodeLine{00352\ \ \ \ \ \ \ dg.add\_bool(maximized);}
\DoxyCodeLine{00353\ \ \ \ \ \}}
\DoxyCodeLine{00354\ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ dg.add\_uint16(\_piano\_rolls.size());}
\DoxyCodeLine{00357\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_piano\_rolls)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ y,\ width,\ height;}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized,\ maximized;}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph-\/>get\_window\_state(x,\ y,\ width,\ height,\ minimized,\ maximized))\ \{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ dg.add\_string(\_client\_data-\/>get\_thread\_name(((\mbox{\hyperlink{classPStatPianoRoll}{PStatPianoRoll}}\ *)graph)-\/>get\_thread\_index()));}
\DoxyCodeLine{00362\ \ \ \ \ \ \ dg.add\_int32(x);}
\DoxyCodeLine{00363\ \ \ \ \ \ \ dg.add\_int32(y);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ dg.add\_int32(width);}
\DoxyCodeLine{00365\ \ \ \ \ \ \ dg.add\_int32(height);}
\DoxyCodeLine{00366\ \ \ \ \ \ \ dg.add\_bool(minimized);}
\DoxyCodeLine{00367\ \ \ \ \ \ \ dg.add\_bool(maximized);}
\DoxyCodeLine{00368\ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ Reserved\ for\ future\ graph\ type}}
\DoxyCodeLine{00372\ \ \ dg.add\_uint16(0);}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ dof.put\_datagram(dg);}
\DoxyCodeLine{00375\ \ \ dof.close();}
\DoxyCodeLine{00376\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00377\ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00382\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_ab078853264c369bb4e2295cef87fbaa5}{PStatMonitor::}}}
\DoxyCodeLine{00383\ \mbox{\hyperlink{classPStatMonitor_ab078853264c369bb4e2295cef87fbaa5}{is\_alive}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00384\ \ \ \textcolor{keywordflow}{if}\ (\_client\_data.is\_null())\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{comment}{//\ Not\ yet,\ but\ in\ a\ second\ probably.}}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00387\ \ \ \}}
\DoxyCodeLine{00388\ \ \ \textcolor{keywordflow}{return}\ \_client\_data-\/>is\_alive();}
\DoxyCodeLine{00389\ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00394\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{PStatMonitor::}}}
\DoxyCodeLine{00395\ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{close}}()\ \{}
\DoxyCodeLine{00396\ \ \ \textcolor{keywordflow}{if}\ (!\_client\_data.is\_null())\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \_client\_data-\/>close();}
\DoxyCodeLine{00398\ \ \ \}}
\DoxyCodeLine{00399\ \}}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00407\ \textcolor{keyword}{const}\ LRGBColor\ \&\mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{PStatMonitor::}}}
\DoxyCodeLine{00408\ \mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{get\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00409\ \ \ Colors::iterator\ ci;}
\DoxyCodeLine{00410\ \ \ ci\ =\ \_colors.find(collector\_index);}
\DoxyCodeLine{00411\ \ \ \textcolor{keywordflow}{if}\ (ci\ !=\ \_colors.end())\ \{}
\DoxyCodeLine{00412\ \ \ \ \ \textcolor{keywordflow}{return}\ (*ci).second;}
\DoxyCodeLine{00413\ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \textcolor{comment}{//\ Ask\ the\ client\ data\ about\ the\ color.}}
\DoxyCodeLine{00416\ \ \ \textcolor{keywordflow}{if}\ (!\_client\_data.is\_null()\ \&\&}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \_client\_data-\/>has\_collector(collector\_index))\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}}\ \&def\ =}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \_client\_data-\/>get\_collector\_def(collector\_index);}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ LRGBColor\ sc(def.\_suggested\_color.r,}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ def.\_suggested\_color.g,}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ def.\_suggested\_color.b);}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{if}\ (sc\ !=\ LRGBColor::zero())\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \ \ ci\ =\ \_colors.insert(Colors::value\_type(collector\_index,\ sc)).first;}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*ci).second;}
\DoxyCodeLine{00427\ \ \ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{comment}{//\ Use\ the\ fullname\ of\ the\ collector\ as\ a\ hash\ to\ seed\ the\ random\ number}}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{comment}{//\ generator\ (consulted\ below),\ so\ we\ get\ the\ same\ color\ for\ a\ given\ name}}
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{comment}{//\ across\ sessions.}}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordtype}{string}\ fullname\ =\ \_client\_data-\/>get\_collector\_fullname(collector\_index);}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ hash\ =\ 0;}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{for}\ (string::const\_iterator\ ci\ =\ fullname.begin();\ ci\ !=\ fullname.end();\ ++ci)\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ hash\ =\ hash\ *\ 37\ +\ (\textcolor{keywordtype}{unsigned}\ int)(*ci);}
\DoxyCodeLine{00436\ \ \ \ \ \}}
\DoxyCodeLine{00437\ \ \ \ \ srand(hash);}
\DoxyCodeLine{00438\ \ \ \}}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \textcolor{comment}{//\ We\ didn't\ have\ a\ color\ for\ the\ collector;\ make\ one\ up.}}
\DoxyCodeLine{00441\ \ \ LRGBColor\ random\_color;}
\DoxyCodeLine{00442\ \ \ random\_color[0]\ =\ (double)rand()\ /\ (double)RAND\_MAX;}
\DoxyCodeLine{00443\ \ \ random\_color[1]\ =\ (double)rand()\ /\ (double)RAND\_MAX;}
\DoxyCodeLine{00444\ \ \ random\_color[2]\ =\ (double)rand()\ /\ (double)RAND\_MAX;}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00446\ \ \ ci\ =\ \_colors.insert(Colors::value\_type(collector\_index,\ random\_color)).first;}
\DoxyCodeLine{00447\ \ \ \textcolor{keywordflow}{return}\ (*ci).second;}
\DoxyCodeLine{00448\ \}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00453\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a9f50836f722b9738e258b90a65402855}{PStatMonitor::}}}
\DoxyCodeLine{00454\ \mbox{\hyperlink{classPStatMonitor_a9f50836f722b9738e258b90a65402855}{set\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keyword}{const}\ LRGBColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00455\ \ \ \_colors[collector\_index]\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00456\ \}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00461\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a5bb70f1407a516074a7fa71a724c9137}{PStatMonitor::}}}
\DoxyCodeLine{00462\ \mbox{\hyperlink{classPStatMonitor_a5bb70f1407a516074a7fa71a724c9137}{clear\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00463\ \ \ \_colors.erase(collector\_index);}
\DoxyCodeLine{00464\ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00471\ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{PStatMonitor::}}}
\DoxyCodeLine{00472\ \mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00473\ \ \ Views::iterator\ vi;}
\DoxyCodeLine{00474\ \ \ vi\ =\ \_views.find(thread\_index);}
\DoxyCodeLine{00475\ \ \ \textcolor{keywordflow}{if}\ (vi\ ==\ \_views.end())\ \{}
\DoxyCodeLine{00476\ \ \ \ \ vi\ =\ \_views.insert(Views::value\_type(thread\_index,\ \mbox{\hyperlink{classPStatView}{PStatView}}())).first;}
\DoxyCodeLine{00477\ \ \ \ \ (*vi).second.set\_thread\_data(\_client\_data-\/>get\_thread\_data(thread\_index));}
\DoxyCodeLine{00478\ \ \ \}}
\DoxyCodeLine{00479\ \ \ \textcolor{keywordflow}{return}\ (*vi).second;}
\DoxyCodeLine{00480\ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00487\ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&\mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{PStatMonitor::}}}
\DoxyCodeLine{00488\ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00489\ \ \ LevelViews::iterator\ lvi;}
\DoxyCodeLine{00490\ \ \ lvi\ =\ \_level\_views.find(collector\_index);}
\DoxyCodeLine{00491\ \ \ \textcolor{keywordflow}{if}\ (lvi\ ==\ \_level\_views.end())\ \{}
\DoxyCodeLine{00492\ \ \ \ \ lvi\ =\ \_level\_views.insert(LevelViews::value\_type(collector\_index,\ \mbox{\hyperlink{classpmap}{Views}}())).first;}
\DoxyCodeLine{00493\ \ \ \}}
\DoxyCodeLine{00494\ \ \ \mbox{\hyperlink{classpmap}{Views}}\ \&views\ =\ (*lvi).second;}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ Views::iterator\ vi;}
\DoxyCodeLine{00497\ \ \ vi\ =\ views.find(thread\_index);}
\DoxyCodeLine{00498\ \ \ \textcolor{keywordflow}{if}\ (vi\ ==\ views.end())\ \{}
\DoxyCodeLine{00499\ \ \ \ \ vi\ =\ views.insert(Views::value\_type(thread\_index,\ \mbox{\hyperlink{classPStatView}{PStatView}}())).first;}
\DoxyCodeLine{00500\ \ \ \ \ (*vi).second.set\_thread\_data(\_client\_data-\/>get\_thread\_data(thread\_index));}
\DoxyCodeLine{00501\ \ \ \ \ (*vi).second.constrain(collector\_index,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00502\ \ \ \}}
\DoxyCodeLine{00503\ \ \ \textcolor{keywordflow}{return}\ (*vi).second;}
\DoxyCodeLine{00504\ \}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00513\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a4f6bd302d4a1e029c8f89058b6495b58}{PStatMonitor::}}}
\DoxyCodeLine{00514\ \mbox{\hyperlink{classPStatMonitor_a4f6bd302d4a1e029c8f89058b6495b58}{initialized}}()\ \{}
\DoxyCodeLine{00515\ \}}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00521\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a04677a5732061e83d61e78549b3f056c}{PStatMonitor::}}}
\DoxyCodeLine{00522\ \mbox{\hyperlink{classPStatMonitor_a04677a5732061e83d61e78549b3f056c}{got\_hello}}()\ \{}
\DoxyCodeLine{00523\ \}}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00532\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aabfbfe8a5deaf26de30d5d87867e952b}{PStatMonitor::}}}
\DoxyCodeLine{00533\ \mbox{\hyperlink{classPStatMonitor_aabfbfe8a5deaf26de30d5d87867e952b}{got\_bad\_version}}(\textcolor{keywordtype}{int},\ \textcolor{keywordtype}{int},\ \textcolor{keywordtype}{int},\ \textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00534\ \}}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00543\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aa8479c401e3c517b15865ccccd133c39}{PStatMonitor::}}}
\DoxyCodeLine{00544\ \mbox{\hyperlink{classPStatMonitor_aa8479c401e3c517b15865ccccd133c39}{new\_collector}}(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00545\ \}}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00554\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_abb727676843b37f233da4f8997a16cc2}{PStatMonitor::}}}
\DoxyCodeLine{00555\ \mbox{\hyperlink{classPStatMonitor_abb727676843b37f233da4f8997a16cc2}{new\_thread}}(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00556\ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00565\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a4bc7717cc967e0e4eb861979210b3aba}{PStatMonitor::}}}
\DoxyCodeLine{00566\ \mbox{\hyperlink{classPStatMonitor_a4bc7717cc967e0e4eb861979210b3aba}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00567\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ get\_client\_data();}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \textcolor{comment}{//\ Don't\ bother\ to\ update\ the\ thread\ data\ until\ we\ know\ at\ least\ something}}
\DoxyCodeLine{00570\ \ \ \textcolor{comment}{//\ about\ the\ collectors\ and\ threads.}}
\DoxyCodeLine{00571\ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}()\ !=\ 0\ \&\&}
\DoxyCodeLine{00572\ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a37f031ee8fbaaa8c139ada02d19a1926}{get\_num\_threads}}()\ !=\ 0)\ \{}
\DoxyCodeLine{00573\ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(thread\_index);}
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ view.get\_thread\_data();}
\DoxyCodeLine{00575\ \ \ \ \ \textcolor{keywordflow}{if}\ (!thread\_data-\/>is\_empty())\ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ latest\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a69bcce3d1e7df55590225f42c70d815c}{get\_latest\_frame\_number}}();}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frame\_number\ ==\ latest)\ \{}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ view.\mbox{\hyperlink{classPStatView_a58673e539f32b9df52b690e82a8fddbb}{set\_to\_frame}}(thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a5530a369c1f4400afdbbb2659cdd99f2}{get\_frame}}(frame\_number));}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00580\ \ \ \ \ \}}
\DoxyCodeLine{00581\ \ \ \}}
\DoxyCodeLine{00582\ \}}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00587\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_ae23d79e0e27774d3ce19d4c4d4519765}{PStatMonitor::}}}
\DoxyCodeLine{00588\ \mbox{\hyperlink{classPStatMonitor_ae23d79e0e27774d3ce19d4c4d4519765}{remove\_thread}}(\textcolor{keywordtype}{int})\ \{}
\DoxyCodeLine{00589\ \}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00596\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a031beffdda0cb7849b486ab8736f04d2}{PStatMonitor::}}}
\DoxyCodeLine{00597\ \mbox{\hyperlink{classPStatMonitor_a031beffdda0cb7849b486ab8736f04d2}{lost\_connection}}()\ \{}
\DoxyCodeLine{00598\ \}}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00604\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a20f9ef2533122ec6394066f33e26c732}{PStatMonitor::}}}
\DoxyCodeLine{00605\ \mbox{\hyperlink{classPStatMonitor_a20f9ef2533122ec6394066f33e26c732}{idle}}()\ \{}
\DoxyCodeLine{00606\ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00612\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a7f8a6afaafdf7482600ec3aee96ba68e}{PStatMonitor::}}}
\DoxyCodeLine{00613\ \mbox{\hyperlink{classPStatMonitor_a7f8a6afaafdf7482600ec3aee96ba68e}{has\_idle}}()\ \{}
\DoxyCodeLine{00614\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00615\ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00625\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_ad199aab6e022c13dada6b9429ca1e69e}{PStatMonitor::}}}
\DoxyCodeLine{00626\ \mbox{\hyperlink{classPStatMonitor_ad199aab6e022c13dada6b9429ca1e69e}{is\_thread\_safe}}()\ \{}
\DoxyCodeLine{00627\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00628\ \}}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00633\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a6e39c108708b043847909be7a1b7f8ee}{PStatMonitor::}}}
\DoxyCodeLine{00634\ \mbox{\hyperlink{classPStatMonitor_a6e39c108708b043847909be7a1b7f8ee}{user\_guide\_bars\_changed}}()\ \{}
\DoxyCodeLine{00635\ \}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00640\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_ac624bc669de170e76dd7dbce557c4aa1}{PStatMonitor::}}}
\DoxyCodeLine{00641\ \mbox{\hyperlink{classPStatMonitor_ac624bc669de170e76dd7dbce557c4aa1}{open\_timeline}}()\ \{}
\DoxyCodeLine{00642\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00643\ \}}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00648\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{PStatMonitor::}}}
\DoxyCodeLine{00649\ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level)\ \{}
\DoxyCodeLine{00650\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00651\ \}}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00656\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a1b28b7f667978981b41b5ed393161ed8}{PStatMonitor::}}}
\DoxyCodeLine{00657\ \mbox{\hyperlink{classPStatMonitor_a1b28b7f667978981b41b5ed393161ed8}{open\_flame\_graph}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00658\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00659\ \}}
\DoxyCodeLine{00660\ }
\DoxyCodeLine{00664\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a344e95530770709157e7780b90608cda}{PStatMonitor::}}}
\DoxyCodeLine{00665\ \mbox{\hyperlink{classPStatMonitor_a344e95530770709157e7780b90608cda}{open\_piano\_roll}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00666\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00667\ \}}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00672\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a8d27e35f8e7df7e7519f1f8ed922b5af}{PStatMonitor::}}}
\DoxyCodeLine{00673\ \mbox{\hyperlink{classPStatMonitor_a8d27e35f8e7df7e7519f1f8ed922b5af}{write\_datagram}}(\mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00674\ \ \ dg.add\_bool(\_client\_known);}
\DoxyCodeLine{00675\ \ \ dg.add\_string(\_client\_hostname);}
\DoxyCodeLine{00676\ \ \ dg.add\_string(\_client\_progname);}
\DoxyCodeLine{00677\ \ \ dg.add\_int32(\_client\_pid);}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ get\_client\_data()-\/>\mbox{\hyperlink{classPStatClientData_a25d2cfdc136af4dff76ea68e06d8c9f2}{write\_datagram}}(dg);}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \ \ dg.add\_uint32((uint32\_t)\_colors.size());}
\DoxyCodeLine{00682\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&item\ :\ \_colors)\ \{}
\DoxyCodeLine{00683\ \ \ \ \ dg.add\_int32(item.first);}
\DoxyCodeLine{00684\ \ \ \ \ dg.add\_float32(item.second[0]);}
\DoxyCodeLine{00685\ \ \ \ \ dg.add\_float32(item.second[1]);}
\DoxyCodeLine{00686\ \ \ \ \ dg.add\_float32(item.second[2]);}
\DoxyCodeLine{00687\ \ \ \}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ dg.add\_uint16(\_timelines.size());}
\DoxyCodeLine{00690\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_timelines)\ \{}
\DoxyCodeLine{00691\ \ \ \ \ graph-\/>write\_datagram(dg);}
\DoxyCodeLine{00692\ \ \ \}}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ \ \ dg.add\_uint16(\_strip\_charts.size());}
\DoxyCodeLine{00695\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_strip\_charts)\ \{}
\DoxyCodeLine{00696\ \ \ \ \ dg.add\_int16(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_thread\_index());}
\DoxyCodeLine{00697\ \ \ \ \ dg.add\_int16(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_collector\_index());}
\DoxyCodeLine{00698\ \ \ \ \ dg.add\_bool(((\mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}\ *)graph)-\/>get\_view().get\_show\_level());}
\DoxyCodeLine{00699\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatStripChart_a922ff471a7072bf44c3cab913896ddcf}{write\_datagram}}(dg);}
\DoxyCodeLine{00700\ \ \ \}}
\DoxyCodeLine{00701\ }
\DoxyCodeLine{00702\ \ \ dg.add\_uint16(\_flame\_graphs.size());}
\DoxyCodeLine{00703\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_flame\_graphs)\ \{}
\DoxyCodeLine{00704\ \ \ \ \ dg.add\_int16(((\mbox{\hyperlink{classPStatFlameGraph}{PStatFlameGraph}}\ *)graph)-\/>get\_thread\_index());}
\DoxyCodeLine{00705\ \ \ \ \ dg.add\_int16(((\mbox{\hyperlink{classPStatFlameGraph}{PStatFlameGraph}}\ *)graph)-\/>get\_collector\_index());}
\DoxyCodeLine{00706\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatFlameGraph_a00d13a7dc605a909397deb83eed0a053}{write\_datagram}}(dg);}
\DoxyCodeLine{00707\ \ \ \}}
\DoxyCodeLine{00708\ }
\DoxyCodeLine{00709\ \ \ dg.add\_uint16(\_piano\_rolls.size());}
\DoxyCodeLine{00710\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph\ :\ \_piano\_rolls)\ \{}
\DoxyCodeLine{00711\ \ \ \ \ dg.add\_int16(((\mbox{\hyperlink{classPStatPianoRoll}{PStatPianoRoll}}\ *)graph)-\/>get\_thread\_index());}
\DoxyCodeLine{00712\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatPianoRoll_a663d0149f350554cc3883aebc1314a3d}{write\_datagram}}(dg);}
\DoxyCodeLine{00713\ \ \ \}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \textcolor{comment}{//\ Reserved\ for\ future\ graph\ type}}
\DoxyCodeLine{00716\ \ \ dg.add\_uint16(0);}
\DoxyCodeLine{00717\ \}}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00722\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a0f0f06a831ee530c86a8166d65280a76}{PStatMonitor::}}}
\DoxyCodeLine{00723\ \mbox{\hyperlink{classPStatMonitor_a0f0f06a831ee530c86a8166d65280a76}{read\_datagram}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan)\ \{}
\DoxyCodeLine{00724\ \ \ \_client\_known\ =\ scan.get\_bool();}
\DoxyCodeLine{00725\ \ \ \_client\_hostname\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00726\ \ \ \_client\_progname\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00727\ \ \ \_client\_pid\ =\ scan.get\_int32();}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}};}
\DoxyCodeLine{00730\ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a901859be1059a8ce96dbed1911d5a016}{read\_datagram}}(scan);}
\DoxyCodeLine{00731\ \ \ \mbox{\hyperlink{classPStatMonitor_a424ba0b66c327e793a7aef9260946ac8}{set\_client\_data}}(client\_data);}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \textcolor{keywordtype}{size\_t}\ num\_colors\ =\ scan.get\_uint32();}
\DoxyCodeLine{00734\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_colors;\ ++i)\ \{}
\DoxyCodeLine{00735\ \ \ \ \ \textcolor{keywordtype}{int}\ key\ =\ scan.get\_int32();}
\DoxyCodeLine{00736\ \ \ \ \ LRGBColor\ \&\mbox{\hyperlink{structcolor}{color}}\ =\ \_colors[key];}
\DoxyCodeLine{00737\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[0]\ =\ scan.get\_float32();}
\DoxyCodeLine{00738\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[1]\ =\ scan.get\_float32();}
\DoxyCodeLine{00739\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}[2]\ =\ scan.get\_float32();}
\DoxyCodeLine{00740\ \ \ \}}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ \textcolor{keywordtype}{int}\ num\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}();}
\DoxyCodeLine{00743\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ collector\_index\ =\ 0;\ collector\_index\ <\ num\_collectors;\ ++collector\_index)\ \{}
\DoxyCodeLine{00744\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector\_index))\ \{}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_aa8479c401e3c517b15865ccccd133c39}{new\_collector}}(collector\_index);}
\DoxyCodeLine{00746\ \ \ \ \ \}}
\DoxyCodeLine{00747\ \ \ \}}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \ \ \textcolor{keywordtype}{int}\ num\_threads\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a37f031ee8fbaaa8c139ada02d19a1926}{get\_num\_threads}}();}
\DoxyCodeLine{00750\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ thread\_index\ =\ 0;\ thread\_index\ <\ num\_threads;\ ++thread\_index)\ \{}
\DoxyCodeLine{00751\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_a191b7fe1a56515271c5829d870e48192}{has\_thread}}(thread\_index))\ \{}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a46e69042db6f96f3c5eb00990c904dc8}{get\_thread\_data}}(thread\_index);}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!thread\_data-\/>is\_empty())\ \{}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatFrameData}{PStatFrameData}}\ \&frame\_data\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a418fd8083999201fe9601b35e607999c}{get\_latest\_frame}}();}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(thread\_index).\mbox{\hyperlink{classPStatView_a58673e539f32b9df52b690e82a8fddbb}{set\_to\_frame}}(frame\_data);}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a86cbac0fa6c4d9c66ff2d24f001c3148}{get\_num\_toplevel\_collectors}}();}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_collectors;\ ++i)\ \{}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_abce44a655ded672baee4aa5b2463169f}{get\_toplevel\_collector}}(i);}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector\_index))\ \{}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector\_index,\ thread\_index).\mbox{\hyperlink{classPStatView_a58673e539f32b9df52b690e82a8fddbb}{set\_to\_frame}}(thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a418fd8083999201fe9601b35e607999c}{get\_latest\_frame}}());}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_abb727676843b37f233da4f8997a16cc2}{new\_thread}}(thread\_index);}
\DoxyCodeLine{00766\ \ \ \ \ \}}
\DoxyCodeLine{00767\ \ \ \}}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *graph;}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \textcolor{keywordtype}{size\_t}\ num\_timelines\ =\ scan.get\_uint16();}
\DoxyCodeLine{00772\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_timelines;\ ++i)\ \{}
\DoxyCodeLine{00773\ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_ac624bc669de170e76dd7dbce557c4aa1}{open\_timeline}}();}
\DoxyCodeLine{00774\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{read\_datagram}}(scan);}
\DoxyCodeLine{00775\ \ \ \}}
\DoxyCodeLine{00776\ }
\DoxyCodeLine{00777\ \ \ \textcolor{keywordtype}{size\_t}\ num\_strip\_charts\ =\ scan.get\_uint16();}
\DoxyCodeLine{00778\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_strip\_charts;\ ++i)\ \{}
\DoxyCodeLine{00779\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ scan.get\_int16();}
\DoxyCodeLine{00780\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ scan.get\_int16();}
\DoxyCodeLine{00781\ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(thread\_index,\ collector\_index,\ scan.get\_bool());}
\DoxyCodeLine{00782\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{read\_datagram}}(scan);}
\DoxyCodeLine{00783\ \ \ \}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ \textcolor{keywordtype}{size\_t}\ num\_flame\_graphs\ =\ scan.get\_uint16();}
\DoxyCodeLine{00786\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_flame\_graphs;\ ++i)\ \{}
\DoxyCodeLine{00787\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ scan.get\_int16();}
\DoxyCodeLine{00788\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ scan.get\_int16();}
\DoxyCodeLine{00789\ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a1b28b7f667978981b41b5ed393161ed8}{open\_flame\_graph}}(thread\_index,\ collector\_index);}
\DoxyCodeLine{00790\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{read\_datagram}}(scan);}
\DoxyCodeLine{00791\ \ \ \}}
\DoxyCodeLine{00792\ }
\DoxyCodeLine{00793\ \ \ \textcolor{keywordtype}{size\_t}\ num\_piano\_rolls\ =\ scan.get\_uint16();}
\DoxyCodeLine{00794\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ num\_piano\_rolls;\ ++i)\ \{}
\DoxyCodeLine{00795\ \ \ \ \ \textcolor{keywordtype}{int}\ thread\_index\ =\ scan.get\_int16();}
\DoxyCodeLine{00796\ \ \ \ \ graph\ =\ \mbox{\hyperlink{classPStatMonitor_a344e95530770709157e7780b90608cda}{open\_piano\_roll}}(thread\_index);}
\DoxyCodeLine{00797\ \ \ \ \ graph-\/>\mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{read\_datagram}}(scan);}
\DoxyCodeLine{00798\ \ \ \}}
\DoxyCodeLine{00799\ \}}

\end{DoxyCode}

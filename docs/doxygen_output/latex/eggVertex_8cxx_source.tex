\doxysection{egg\+Vertex.\+cxx}
\hypertarget{eggVertex_8cxx_source}{}\label{eggVertex_8cxx_source}\index{panda/src/egg/eggVertex.cxx@{panda/src/egg/eggVertex.cxx}}
\mbox{\hyperlink{eggVertex_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggVertex_8h}{eggVertex.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggVertexPool_8h}{eggVertexPool.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggParameters_8h}{eggParameters.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggGroup_8h}{eggGroup.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggMiscFuncs_8h}{eggMiscFuncs.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggPrimitive_8h}{eggPrimitive.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{luse_8h}{luse.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lmatrix_8h}{lmatrix.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{math_8h}{math.h}}>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{using\ }std::ostream;}
\DoxyCodeLine{00030\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ EggVertex::\_type\_handle;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00038\ \mbox{\hyperlink{classEggVertex_a042773eae6865bad02e76ccf22a0cd0d}{EggVertex::}}}
\DoxyCodeLine{00039\ \mbox{\hyperlink{classEggVertex_a042773eae6865bad02e76ccf22a0cd0d}{EggVertex}}()\ \{}
\DoxyCodeLine{00040\ \ \ \_pool\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00041\ \ \ \_forward\_reference\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00042\ \ \ \_index\ =\ -\/1;}
\DoxyCodeLine{00043\ \ \ \_external\_index\ =\ -\/1;}
\DoxyCodeLine{00044\ \ \ \_external\_index2\ =\ -\/1;}
\DoxyCodeLine{00045\ \ \ set\_pos(LPoint3d(0.0,\ 0.0,\ 0.0));}
\DoxyCodeLine{00046\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00047\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00048\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00054\ \mbox{\hyperlink{classEggVertex_a042773eae6865bad02e76ccf22a0cd0d}{EggVertex::}}}
\DoxyCodeLine{00055\ \mbox{\hyperlink{classEggVertex_a042773eae6865bad02e76ccf22a0cd0d}{EggVertex}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ \&copy)}
\DoxyCodeLine{00056\ \ \ :\ \mbox{\hyperlink{classEggObject}{EggObject}}(copy),\ \mbox{\hyperlink{classEggAttributes}{EggAttributes}}(copy),}
\DoxyCodeLine{00057\ \ \ \ \ \_dxyzs(copy.\_dxyzs),}
\DoxyCodeLine{00058\ \ \ \ \ \_external\_index(copy.\_external\_index),}
\DoxyCodeLine{00059\ \ \ \ \ \_external\_index2(copy.\_external\_index2),}
\DoxyCodeLine{00060\ \ \ \ \ \_pos(copy.\_pos),}
\DoxyCodeLine{00061\ \ \ \ \ \_num\_dimensions(copy.\_num\_dimensions),}
\DoxyCodeLine{00062\ \ \ \ \ \_uv\_map(copy.\_uv\_map),}
\DoxyCodeLine{00063\ \ \ \ \ \_aux\_map(copy.\_aux\_map)}
\DoxyCodeLine{00064\ \{}
\DoxyCodeLine{00065\ \ \ \_pool\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00066\ \ \ \_forward\_reference\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00067\ \ \ \_index\ =\ -\/1;}
\DoxyCodeLine{00068\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00069\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00077\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ \&\mbox{\hyperlink{classEggVertex_a756f97bb0145e7728f895f393025547c}{EggVertex::}}}
\DoxyCodeLine{00078\ \mbox{\hyperlink{classEggVertex_a756f97bb0145e7728f895f393025547c}{operator\ =\ }}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ \&copy)\ \{}
\DoxyCodeLine{00079\ \ \ EggObject::operator\ =\ (copy);}
\DoxyCodeLine{00080\ \ \ EggAttributes::operator\ =\ (copy);}
\DoxyCodeLine{00081\ \ \ \_dxyzs\ =\ copy.\_dxyzs;}
\DoxyCodeLine{00082\ \ \ \_external\_index\ =\ copy.\_external\_index;}
\DoxyCodeLine{00083\ \ \ \_external\_index2\ =\ copy.\_external\_index2;}
\DoxyCodeLine{00084\ \ \ \_pos\ =\ copy.\_pos;}
\DoxyCodeLine{00085\ \ \ \_num\_dimensions\ =\ copy.\_num\_dimensions;}
\DoxyCodeLine{00086\ \ \ \_uv\_map\ =\ copy.\_uv\_map;}
\DoxyCodeLine{00087\ \ \ \_aux\_map\ =\ copy.\_aux\_map;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00090\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00098\ EggVertex::}
\DoxyCodeLine{00099\ \string~EggVertex()\ \{}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ We\ should\ never\ destruct\ a\ vertex\ while\ it\ still\ thinks\ it\ belongs\ to\ a}}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ VertexPool.\ \ If\ we\ do,\ we've\ probably\ lost\ a\ reference\ count\ somewhere.}}
\DoxyCodeLine{00102\ \ \ nassertv(\_pool\ ==\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ Also,\ a\ vertex\ shouldn't\ be\ destructed\ while\ it's\ being\ referenced\ by\ a}}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{//\ group\ or\ a\ primitive,\ for\ the\ same\ reason.}}
\DoxyCodeLine{00106\ \ \ nassertv(\_gref.empty());}
\DoxyCodeLine{00107\ \ \ nassertv(\_pref.empty());}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00114\ \textcolor{keywordtype}{bool}\ EggVertex::}
\DoxyCodeLine{00115\ has\_uv(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00116\ \ \ UVMap::const\_iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{if}\ (ui\ !=\ \_uv\_map.end())\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *uv\_obj\ =\ (*ui).second;}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ !uv\_obj-\/>has\_w();}
\DoxyCodeLine{00120\ \ \ \}}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00128\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEggVertex_a09e58a2e05451f588cb8a41070810b32}{EggVertex::}}}
\DoxyCodeLine{00129\ \mbox{\hyperlink{classEggVertex_a09e58a2e05451f588cb8a41070810b32}{has\_uvw}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00130\ \ \ UVMap::const\_iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{if}\ (ui\ !=\ \_uv\_map.end())\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *uv\_obj\ =\ (*ui).second;}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{return}\ uv\_obj-\/>has\_w();}
\DoxyCodeLine{00134\ \ \ \}}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00141\ \textcolor{keywordtype}{bool}\ EggVertex::}
\DoxyCodeLine{00142\ has\_aux(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00143\ \ \ AuxMap::const\_iterator\ xi\ =\ \_aux\_map.find(name);}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{return}\ (xi\ !=\ \_aux\_map.end());}
\DoxyCodeLine{00145\ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ LTexCoordd\ EggVertex::}
\DoxyCodeLine{00152\ get\_uv(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00153\ \ \ UVMap::const\_iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00154\ \ \ nassertr(ui\ !=\ \_uv\_map.end(),\ LTexCoordd::zero());}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordflow}{return}\ (*ui).second-\/>get\_uv();}
\DoxyCodeLine{00156\ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00162\ \textcolor{keyword}{const}\ LTexCoord3d\ \&\mbox{\hyperlink{classEggVertex_a95b5ea2c3c511db6253347580abd1a12}{EggVertex::}}}
\DoxyCodeLine{00163\ \mbox{\hyperlink{classEggVertex_a95b5ea2c3c511db6253347580abd1a12}{get\_uvw}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00164\ \ \ UVMap::const\_iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00165\ \ \ nassertr(ui\ !=\ \_uv\_map.end(),\ LTexCoord3d::zero());}
\DoxyCodeLine{00166\ \ \ \textcolor{keywordflow}{return}\ (*ui).second-\/>get\_uvw();}
\DoxyCodeLine{00167\ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00173\ \textcolor{keyword}{const}\ LVecBase4d\ \&\mbox{\hyperlink{classEggVertex_af6a46da6e1ac8f39b24474ec046f46fd}{EggVertex::}}}
\DoxyCodeLine{00174\ \mbox{\hyperlink{classEggVertex_af6a46da6e1ac8f39b24474ec046f46fd}{get\_aux}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00175\ \ \ AuxMap::const\_iterator\ xi\ =\ \_aux\_map.find(name);}
\DoxyCodeLine{00176\ \ \ nassertr(xi\ !=\ \_aux\_map.end(),\ LVecBase4d::zero());}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordflow}{return}\ (*xi).second-\/>get\_aux();}
\DoxyCodeLine{00178\ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00185\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00186\ set\_uv(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name,\ \textcolor{keyword}{const}\ LTexCoordd\ \&uv)\ \{}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordtype}{string}\ fname\ =\ EggVertexUV::filter\_name(name);}
\DoxyCodeLine{00188\ \ \ PT(\mbox{\hyperlink{classEggVertexUV}{EggVertexUV}})\ \&uv\_obj\ =\ \_uv\_map[fname];}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \textcolor{keywordflow}{if}\ (uv\_obj.is\_null())\ \{}
\DoxyCodeLine{00191\ \ \ \ \ uv\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}(fname,\ uv);}
\DoxyCodeLine{00192\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00193\ \ \ \ \ uv\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}(*uv\_obj);}
\DoxyCodeLine{00194\ \ \ \ \ uv\_obj-\/>set\_uv(uv);}
\DoxyCodeLine{00195\ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ nassertv(get\_uv(fname)\ ==\ uv);}
\DoxyCodeLine{00198\ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00205\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_abff782e291cb65578d50e0e8a03a735d}{EggVertex::}}}
\DoxyCodeLine{00206\ \mbox{\hyperlink{classEggVertex_abff782e291cb65578d50e0e8a03a735d}{set\_uvw}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name,\ \textcolor{keyword}{const}\ LTexCoord3d\ \&uvw)\ \{}
\DoxyCodeLine{00207\ \ \ \textcolor{keywordtype}{string}\ fname\ =\ EggVertexUV::filter\_name(name);}
\DoxyCodeLine{00208\ \ \ PT(\mbox{\hyperlink{classEggVertexUV}{EggVertexUV}})\ \&uv\_obj\ =\ \_uv\_map[fname];}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \textcolor{keywordflow}{if}\ (uv\_obj.is\_null())\ \{}
\DoxyCodeLine{00211\ \ \ \ \ uv\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}(fname,\ uvw);}
\DoxyCodeLine{00212\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00213\ \ \ \ \ uv\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}(*uv\_obj);}
\DoxyCodeLine{00214\ \ \ \ \ uv\_obj-\/>set\_uvw(uvw);}
\DoxyCodeLine{00215\ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ nassertv(\mbox{\hyperlink{classEggVertex_a95b5ea2c3c511db6253347580abd1a12}{get\_uvw}}(fname)\ ==\ uvw);}
\DoxyCodeLine{00218\ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00224\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_a610dfc3734693711d791168c138fbe53}{EggVertex::}}}
\DoxyCodeLine{00225\ \mbox{\hyperlink{classEggVertex_a610dfc3734693711d791168c138fbe53}{set\_aux}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name,\ \textcolor{keyword}{const}\ LVecBase4d\ \&aux)\ \{}
\DoxyCodeLine{00226\ \ \ PT(\mbox{\hyperlink{classEggVertexAux}{EggVertexAux}})\ \&aux\_obj\ =\ \_aux\_map[name];}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \textcolor{keywordflow}{if}\ (aux\_obj.is\_null())\ \{}
\DoxyCodeLine{00229\ \ \ \ \ aux\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}(name,\ aux);}
\DoxyCodeLine{00230\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00231\ \ \ \ \ aux\_obj\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}(*aux\_obj);}
\DoxyCodeLine{00232\ \ \ \ \ aux\_obj-\/>set\_aux(aux);}
\DoxyCodeLine{00233\ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ nassertv(\mbox{\hyperlink{classEggVertex_af6a46da6e1ac8f39b24474ec046f46fd}{get\_aux}}(name)\ ==\ aux);}
\DoxyCodeLine{00236\ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00244\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *\mbox{\hyperlink{classEggVertex_a03708ecb279ffb8859279a9420539a11}{EggVertex::}}}
\DoxyCodeLine{00245\ \mbox{\hyperlink{classEggVertex_a03708ecb279ffb8859279a9420539a11}{get\_uv\_obj}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00246\ \ \ UVMap::const\_iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{if}\ (ui\ !=\ \_uv\_map.end())\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return}\ (*ui).second;}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00259\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}\ *\mbox{\hyperlink{classEggVertex_a09b0e2a1d3c495c71a7cc0782ea3c5d3}{EggVertex::}}}
\DoxyCodeLine{00260\ \mbox{\hyperlink{classEggVertex_a09b0e2a1d3c495c71a7cc0782ea3c5d3}{get\_aux\_obj}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00261\ \ \ AuxMap::const\_iterator\ xi\ =\ \_aux\_map.find(name);}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{if}\ (xi\ !=\ \_aux\_map.end())\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordflow}{return}\ (*xi).second;}
\DoxyCodeLine{00264\ \ \ \}}
\DoxyCodeLine{00265\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00266\ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00273\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *\mbox{\hyperlink{classEggVertex_a5d544bf404c0b3a8342a9ba5fbae030f}{EggVertex::}}}
\DoxyCodeLine{00274\ \mbox{\hyperlink{classEggVertex_a5d544bf404c0b3a8342a9ba5fbae030f}{modify\_uv\_obj}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00275\ \ \ UVMap::iterator\ ui\ =\ \_uv\_map.find(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{if}\ (ui\ !=\ \_uv\_map.end())\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ui).second-\/>get\_ref\_count()\ !=\ 1)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \textcolor{comment}{//\ Copy\ on\ write.}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ (*ui).second\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}(*(*ui).second);}
\DoxyCodeLine{00280\ \ \ \ \ \}}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordflow}{return}\ (*ui).second;}
\DoxyCodeLine{00282\ \ \ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00285\ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00292\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}\ *\mbox{\hyperlink{classEggVertex_ad2bcb640318098cab4e2255640b9d4e3}{EggVertex::}}}
\DoxyCodeLine{00293\ \mbox{\hyperlink{classEggVertex_ad2bcb640318098cab4e2255640b9d4e3}{modify\_aux\_obj}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00294\ \ \ AuxMap::iterator\ xi\ =\ \_aux\_map.find(name);}
\DoxyCodeLine{00295\ \ \ \textcolor{keywordflow}{if}\ (xi\ !=\ \_aux\_map.end())\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*xi).second-\/>get\_ref\_count()\ !=\ 1)\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \textcolor{comment}{//\ Copy\ on\ write.}}
\DoxyCodeLine{00298\ \ \ \ \ \ \ (*xi).second\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}(*(*xi).second);}
\DoxyCodeLine{00299\ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{return}\ (*xi).second;}
\DoxyCodeLine{00301\ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00304\ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00311\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_a06066c8a0232f259dfb6fd8ac91d9dd6}{EggVertex::}}}
\DoxyCodeLine{00312\ \mbox{\hyperlink{classEggVertex_a06066c8a0232f259dfb6fd8ac91d9dd6}{set\_uv\_obj}}(\mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *uv)\ \{}
\DoxyCodeLine{00313\ \ \ \_uv\_map[uv-\/>get\_name()]\ =\ uv;}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00320\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_afe3bad7f6d101eaa60ce9a32eed4c32f}{EggVertex::}}}
\DoxyCodeLine{00321\ \mbox{\hyperlink{classEggVertex_afe3bad7f6d101eaa60ce9a32eed4c32f}{set\_aux\_obj}}(\mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}\ *aux)\ \{}
\DoxyCodeLine{00322\ \ \ \_aux\_map[aux-\/>get\_name()]\ =\ aux;}
\DoxyCodeLine{00323\ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00329\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00330\ clear\_uv(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00331\ \ \ \_uv\_map.erase(EggVertexUV::filter\_name(name));}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00337\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00338\ clear\_aux(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00339\ \ \ \_aux\_map.erase(name);}
\DoxyCodeLine{00340\ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00349\ PT(\mbox{\hyperlink{classEggVertex}{EggVertex}})\ EggVertex::}
\DoxyCodeLine{00350\ make\_average(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ *first,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ *second)\ \{}
\DoxyCodeLine{00351\ \ \ PT(\mbox{\hyperlink{classEggVertexPool}{EggVertexPool}})\ pool\ =\ first-\/>get\_pool();}
\DoxyCodeLine{00352\ \ \ nassertr(pool\ ==\ second-\/>get\_pool(),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \textcolor{comment}{//\ If\ both\ vertices\ are\ in\ a\ pool,\ the\ new\ vertex\ will\ be\ part\ of\ the\ pool}}
\DoxyCodeLine{00355\ \ \ \textcolor{comment}{//\ as\ well.}}
\DoxyCodeLine{00356\ \ \ PT(\mbox{\hyperlink{classEggVertex}{EggVertex}})\ middle;}
\DoxyCodeLine{00357\ \ \ \textcolor{keywordflow}{if}\ (pool\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00358\ \ \ \ \ middle\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggVertex_a042773eae6865bad02e76ccf22a0cd0d}{EggVertex}};}
\DoxyCodeLine{00359\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00360\ \ \ \ \ middle\ =\ pool-\/>make\_new\_vertex();}
\DoxyCodeLine{00361\ \ \ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ middle-\/>set\_pos4((first-\/>get\_pos4()\ +\ second-\/>get\_pos4())\ /\ 2);}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keywordflow}{if}\ (first-\/>has\_normal()\ \&\&\ second-\/>has\_normal())\ \{}
\DoxyCodeLine{00366\ \ \ \ \ LNormald\ normal\ =\ (first-\/>get\_normal()\ +\ second-\/>get\_normal())\ /\ 2;}
\DoxyCodeLine{00367\ \ \ \ \ normal.normalize();}
\DoxyCodeLine{00368\ \ \ \ \ middle-\/>set\_normal(normal);}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ \ \ \textcolor{keywordflow}{if}\ (first-\/>has\_color()\ \&\&\ second-\/>has\_color())\ \{}
\DoxyCodeLine{00371\ \ \ \ \ middle-\/>set\_color((first-\/>get\_color()\ +\ second-\/>get\_color())\ /\ 2);}
\DoxyCodeLine{00372\ \ \ \}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{comment}{//\ Average\ out\ the\ EggVertexUV\ objects,\ but\ only\ for\ the\ UV\ sets\ that\ they}}
\DoxyCodeLine{00375\ \ \ \textcolor{comment}{//\ have\ in\ common.}}
\DoxyCodeLine{00376\ \ \ const\_uv\_iterator\ it;}
\DoxyCodeLine{00377\ \ \ \textcolor{keywordflow}{for}\ (it\ =\ first-\/>uv\_begin();\ it\ !=\ first-\/>uv\_end();\ ++it)\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *first\_uv\ =\ it-\/>second;}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *second\_uv\ =\ second-\/>\mbox{\hyperlink{classEggVertex_a03708ecb279ffb8859279a9420539a11}{get\_uv\_obj}}(it-\/>first);}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_uv\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ second\_uv\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ middle-\/>set\_uv\_obj(EggVertexUV::make\_average(first\_uv,\ second\_uv));}
\DoxyCodeLine{00383\ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \textcolor{comment}{//\ Same\ for\ EggVertexAux.}}
\DoxyCodeLine{00387\ \ \ const\_aux\_iterator\ ai;}
\DoxyCodeLine{00388\ \ \ \textcolor{keywordflow}{for}\ (ai\ =\ first-\/>aux\_begin();\ ai\ !=\ first-\/>aux\_end();\ ++ai)\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}\ *first\_aux\ =\ ai-\/>second;}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertexAux}{EggVertexAux}}\ *second\_aux\ =\ second-\/>\mbox{\hyperlink{classEggVertex_a09b0e2a1d3c495c71a7cc0782ea3c5d3}{get\_aux\_obj}}(ai-\/>first);}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{keywordflow}{if}\ (first\_aux\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ second\_aux\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ middle-\/>set\_aux\_obj(EggVertexAux::make\_average(first\_aux,\ second\_aux));}
\DoxyCodeLine{00394\ \ \ \ \ \}}
\DoxyCodeLine{00395\ \ \ \}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \textcolor{comment}{//\ Now\ process\ the\ morph\ targets.}}
\DoxyCodeLine{00398\ \ \ EggMorphVertexList::const\_iterator\ vi,\ vi2;}
\DoxyCodeLine{00399\ \ \ \textcolor{keywordflow}{for}\ (vi\ =\ first-\/>\_dxyzs.begin();\ vi\ !=\ first-\/>\_dxyzs.end();\ ++vi)\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keywordflow}{for}\ (vi2\ =\ second-\/>\_dxyzs.begin();\ vi2\ !=\ second-\/>\_dxyzs.end();\ ++vi2)\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (vi-\/>get\_name()\ ==\ vi2-\/>get\_name())\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ middle-\/>\_dxyzs.insert(\mbox{\hyperlink{classEggMorph}{EggMorphVertex}}(vi-\/>get\_name(),}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (vi-\/>get\_offset()\ +\ vi2-\/>get\_offset())\ /\ 2));}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ \ \ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ EggMorphNormalList::const\_iterator\ ni,\ ni2;}
\DoxyCodeLine{00410\ \ \ \textcolor{keywordflow}{for}\ (ni\ =\ first-\/>\_dxyzs.begin();\ ni\ !=\ first-\/>\_dxyzs.end();\ ++ni)\ \{}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordflow}{for}\ (ni2\ =\ second-\/>\_dxyzs.begin();\ ni2\ !=\ second-\/>\_dxyzs.end();\ ++ni2)\ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ni-\/>get\_name()\ ==\ ni2-\/>get\_name())\ \{}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ middle-\/>\_dnormals.insert(\mbox{\hyperlink{classEggMorph}{EggMorphNormal}}(ni-\/>get\_name(),}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (ni-\/>get\_offset()\ +\ ni2-\/>get\_offset())\ /\ 2));}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00417\ \ \ \ \ \}}
\DoxyCodeLine{00418\ \ \ \}}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ EggMorphColorList::const\_iterator\ ci,\ ci2;}
\DoxyCodeLine{00421\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ first-\/>\_drgbas.begin();\ ci\ !=\ first-\/>\_drgbas.end();\ ++ci)\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordflow}{for}\ (ci2\ =\ second-\/>\_drgbas.begin();\ ci2\ !=\ second-\/>\_drgbas.end();\ ++ci2)\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ci-\/>get\_name()\ ==\ ci2-\/>get\_name())\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ middle-\/>\_drgbas.insert(\mbox{\hyperlink{classEggMorph}{EggMorphColor}}(ci-\/>get\_name(),}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (ci-\/>get\_offset()\ +\ ci2-\/>get\_offset())\ /\ 2));}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00428\ \ \ \ \ \}}
\DoxyCodeLine{00429\ \ \ \}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \textcolor{comment}{//\ Now\ merge\ the\ vertex\ memberships.}}
\DoxyCodeLine{00432\ \ \ GroupRef::iterator\ gi;}
\DoxyCodeLine{00433\ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ first-\/>\_gref.begin();\ gi\ !=\ first-\/>\_gref.end();\ ++gi)\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ *gi;}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordflow}{if}\ (second-\/>\_gref.count(group))\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ group-\/>\mbox{\hyperlink{classEggGroup_a3c64f2d310867003a5b65198700980bf}{set\_vertex\_membership}}(middle,}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ (group-\/>get\_vertex\_membership(first)\ +}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ group-\/>get\_vertex\_membership(second))\ /\ 2.);}
\DoxyCodeLine{00439\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \textcolor{comment}{//\ Hmm,\ unfortunate,\ only\ one\ of\ the\ vertices\ is\ member\ of\ this\ group,}}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \textcolor{comment}{//\ so\ we\ can't\ make\ an\ average.\ \ We'll\ have\ to\ assign\ the\ only\ group}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \textcolor{comment}{//\ membership\ we\ have.}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ group-\/>set\_vertex\_membership(middle,\ group-\/>get\_vertex\_membership(first));}
\DoxyCodeLine{00444\ \ \ \ \ \}}
\DoxyCodeLine{00445\ \ \ \}}
\DoxyCodeLine{00446\ \ \ \textcolor{comment}{//\ Also\ assign\ memberships\ to\ the\ grefs\ in\ the\ second\ vertex\ that\ aren't}}
\DoxyCodeLine{00447\ \ \ \textcolor{comment}{//\ part\ of\ the\ first\ vertex.}}
\DoxyCodeLine{00448\ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ second-\/>\_gref.begin();\ gi\ !=\ second-\/>\_gref.end();\ ++gi)\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ *gi;}
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{keywordflow}{if}\ (second-\/>\_gref.count(group)\ ==\ 0)\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ group-\/>\mbox{\hyperlink{classEggGroup_a3c64f2d310867003a5b65198700980bf}{set\_vertex\_membership}}(middle,\ group-\/>get\_vertex\_membership(second));}
\DoxyCodeLine{00452\ \ \ \ \ \}}
\DoxyCodeLine{00453\ \ \ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \textcolor{keywordflow}{return}\ middle;}
\DoxyCodeLine{00456\ \}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00462\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classGroupRefEntry}{GroupRefEntry}}\ \{}
\DoxyCodeLine{00463\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00464\ \ \ \mbox{\hyperlink{classGroupRefEntry}{GroupRefEntry}}(\mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group,\ \textcolor{keywordtype}{double}\ membership)}
\DoxyCodeLine{00465\ \ \ \ \ :\ \_group(group),\ \_membership(membership)\ \{\ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \textcolor{keywordtype}{bool}\ operator\ <\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classGroupRefEntry}{GroupRefEntry}}\ \&other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keywordflow}{return}\ \_group-\/>get\_name()\ <\ other.\_group-\/>get\_name();}
\DoxyCodeLine{00469\ \ \ \}}
\DoxyCodeLine{00470\ \ \ \textcolor{keywordtype}{void}\ output(ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00471\ \ \ \ \ out\ <<\ \_group-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ \_membership;}
\DoxyCodeLine{00472\ \ \ \}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *\_group;}
\DoxyCodeLine{00475\ \ \ \textcolor{keywordtype}{double}\ \_membership;}
\DoxyCodeLine{00476\ \};}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ INLINE\ ostream\ \&operator\ <<\ (ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGroupRefEntry}{GroupRefEntry}}\ \&gre)\ \{}
\DoxyCodeLine{00479\ \ \ gre.output(out);}
\DoxyCodeLine{00480\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00481\ \}}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00486\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_adc5e403ac594da0029904e7c72b47aa3}{EggVertex::}}}
\DoxyCodeLine{00487\ \mbox{\hyperlink{classEggVertex_adc5e403ac594da0029904e7c72b47aa3}{write}}(ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00488\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00489\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)}
\DoxyCodeLine{00492\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}<Vertex>\ "{}}\ <<\ \_index\ <<\ \textcolor{stringliteral}{"{}\ \{\(\backslash\)n"{}};}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \textcolor{comment}{//\ Now\ output\ the\ position.\ \ This\ might\ have\ any\ number\ of\ dimensions\ up\ to}}
\DoxyCodeLine{00495\ \ \ \textcolor{comment}{//\ 4.}}
\DoxyCodeLine{00496\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level+1);}
\DoxyCodeLine{00497\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \_num\_dimensions;\ i++)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ \_pos[i];}
\DoxyCodeLine{00499\ \ \ \}}
\DoxyCodeLine{00500\ \ \ out\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ UVMap::const\_iterator\ ui;}
\DoxyCodeLine{00503\ \ \ \textcolor{keywordflow}{for}\ (ui\ =\ \_uv\_map.begin();\ ui\ !=\ \_uv\_map.end();\ ++ui)\ \{}
\DoxyCodeLine{00504\ \ \ \ \ (*ui).second-\/>write(out,\ indent\_level\ +\ 2);}
\DoxyCodeLine{00505\ \ \ \}}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \ AuxMap::const\_iterator\ xi;}
\DoxyCodeLine{00508\ \ \ \textcolor{keywordflow}{for}\ (xi\ =\ \_aux\_map.begin();\ xi\ !=\ \_aux\_map.end();\ ++xi)\ \{}
\DoxyCodeLine{00509\ \ \ \ \ (*xi).second-\/>write(out,\ indent\_level\ +\ 2);}
\DoxyCodeLine{00510\ \ \ \}}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ \ \ EggAttributes::write(out,\ indent\_level+2);}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \_dxyzs.write(out,\ indent\_level\ +\ 2,\ \textcolor{stringliteral}{"{}<Dxyz>"{}},\ 3);}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \textcolor{comment}{//\ If\ the\ vertex\ is\ referenced\ by\ one\ or\ more\ groups,\ write\ that\ as\ a}}
\DoxyCodeLine{00517\ \ \ \textcolor{comment}{//\ helpful\ comment.}}
\DoxyCodeLine{00518\ \ \ \textcolor{keywordflow}{if}\ (!\_gref.empty())\ \{}
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ build\ a\ list\ of\ group\ entries.}}
\DoxyCodeLine{00520\ \ \ \ \ \mbox{\hyperlink{classpset}{pset<GroupRefEntry>}}\ gre;}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \ \ GroupRef::const\_iterator\ gi;}
\DoxyCodeLine{00523\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ \_gref.begin();\ gi\ !=\ \_gref.end();\ ++gi)\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ gre.insert(\mbox{\hyperlink{classGroupRefEntry}{GroupRefEntry}}(*gi,\ (*gi)-\/>get\_vertex\_membership(\textcolor{keyword}{this})));}
\DoxyCodeLine{00525\ \ \ \ \ \}}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{comment}{//\ Now\ output\ the\ list.}}
\DoxyCodeLine{00528\ \ \ \ \ \mbox{\hyperlink{indent_8h_a25cf046258c218e427e0b834e5c08f97}{write\_long\_list}}(out,\ indent\_level\ +\ 2,\ gre.begin(),\ gre.end(),\ \textcolor{stringliteral}{"{}//\ "{}},}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}},\ 72);}
\DoxyCodeLine{00530\ \ \ \}}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)}
\DoxyCodeLine{00533\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{00534\ \}}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00552\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEggVertex_a6032bfa7f29c012d05814e6e7bf14067}{EggVertex::}}}
\DoxyCodeLine{00553\ \mbox{\hyperlink{classEggVertex_a6032bfa7f29c012d05814e6e7bf14067}{compare\_to}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ \&other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00554\ \ \ \textcolor{keywordflow}{if}\ (\_external\_index\ !=\ other.\_external\_index)\ \{}
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})\_external\_index\ -\/\ (int)other.\_external\_index;}
\DoxyCodeLine{00556\ \ \ \}}
\DoxyCodeLine{00557\ \ \ \textcolor{keywordflow}{if}\ (\_external\_index2\ !=\ other.\_external\_index2)\ \{}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})\_external\_index2\ -\/\ (int)other.\_external\_index2;}
\DoxyCodeLine{00559\ \ \ \}}
\DoxyCodeLine{00560\ \ \ \textcolor{keywordflow}{if}\ (\_num\_dimensions\ !=\ other.\_num\_dimensions)\ \{}
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})\_num\_dimensions\ -\/\ (int)other.\_num\_dimensions;}
\DoxyCodeLine{00562\ \ \ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \textcolor{keywordtype}{int}\ compare\ =}
\DoxyCodeLine{00565\ \ \ \ \ \_pos.compare\_to(other.\_pos,\ egg\_parameters-\/>\_pos\_threshold);}
\DoxyCodeLine{00566\ \ \ \textcolor{keywordflow}{if}\ (compare\ !=\ 0)\ \{}
\DoxyCodeLine{00567\ \ \ \ \ \textcolor{keywordflow}{return}\ compare;}
\DoxyCodeLine{00568\ \ \ \}}
\DoxyCodeLine{00569\ \ \ compare\ =\ \_dxyzs.compare\_to(other.\_dxyzs,\ egg\_parameters-\/>\_pos\_threshold);}
\DoxyCodeLine{00570\ \ \ \textcolor{keywordflow}{if}\ (compare\ !=\ 0)\ \{}
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{keywordflow}{return}\ compare;}
\DoxyCodeLine{00572\ \ \ \}}
\DoxyCodeLine{00573\ }
\DoxyCodeLine{00574\ \ \ \textcolor{comment}{//\ Merge-\/compare\ the\ uv\ maps.}}
\DoxyCodeLine{00575\ \ \ UVMap::const\_iterator\ ai,\ bi;}
\DoxyCodeLine{00576\ \ \ ai\ =\ \_uv\_map.begin();}
\DoxyCodeLine{00577\ \ \ bi\ =\ other.\_uv\_map.begin();}
\DoxyCodeLine{00578\ \ \ \textcolor{keywordflow}{while}\ (ai\ !=\ \_uv\_map.end()\ \&\&\ bi\ !=\ other.\_uv\_map.end())\ \{}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ai).first\ <\ (*bi).first)\ \{}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((*bi).first\ <\ (*ai).first)\ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ compare\ =\ (*ai).second-\/>compare\_to(*(*bi).second);}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (compare\ !=\ 0)\ \{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ compare;}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \}}
\DoxyCodeLine{00591\ \ \ \ \ ++ai;}
\DoxyCodeLine{00592\ \ \ \ \ ++bi;}
\DoxyCodeLine{00593\ \ \ \}}
\DoxyCodeLine{00594\ \ \ \textcolor{keywordflow}{if}\ (bi\ !=\ other.\_uv\_map.end())\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00596\ \ \ \}}
\DoxyCodeLine{00597\ \ \ \textcolor{keywordflow}{if}\ (ai\ !=\ \_uv\_map.end())\ \{}
\DoxyCodeLine{00598\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00599\ \ \ \}}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \textcolor{comment}{//\ Merge-\/compare\ the\ aux\ maps.}}
\DoxyCodeLine{00602\ \ \ AuxMap::const\_iterator\ ci,\ di;}
\DoxyCodeLine{00603\ \ \ ci\ =\ \_aux\_map.begin();}
\DoxyCodeLine{00604\ \ \ di\ =\ other.\_aux\_map.begin();}
\DoxyCodeLine{00605\ \ \ \textcolor{keywordflow}{while}\ (ci\ !=\ \_aux\_map.end()\ \&\&\ di\ !=\ other.\_aux\_map.end())\ \{}
\DoxyCodeLine{00606\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ci).first\ <\ (*di).first)\ \{}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((*di).first\ <\ (*ci).first)\ \{}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ compare\ =\ (*ci).second-\/>compare\_to(*(*di).second);}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (compare\ !=\ 0)\ \{}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ compare;}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00617\ \ \ \ \ \}}
\DoxyCodeLine{00618\ \ \ \ \ ++ci;}
\DoxyCodeLine{00619\ \ \ \ \ ++di;}
\DoxyCodeLine{00620\ \ \ \}}
\DoxyCodeLine{00621\ \ \ \textcolor{keywordflow}{if}\ (di\ !=\ other.\_aux\_map.end())\ \{}
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00623\ \ \ \}}
\DoxyCodeLine{00624\ \ \ \textcolor{keywordflow}{if}\ (ci\ !=\ \_aux\_map.end())\ \{}
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00626\ \ \ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \textcolor{keywordflow}{return}\ EggAttributes::compare\_to(other);}
\DoxyCodeLine{00629\ \}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00635\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEggVertex_acda313ae1fcc875f547cf116c8739551}{EggVertex::}}}
\DoxyCodeLine{00636\ \mbox{\hyperlink{classEggVertex_acda313ae1fcc875f547cf116c8739551}{get\_num\_local\_coord}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00637\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ PrimitiveRef::const\_iterator\ pri;}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{00642\ \ \ \textcolor{keywordflow}{for}\ (pri\ =\ \mbox{\hyperlink{classEggVertex_a682858c0d81151d5aea082bb66281016}{pref\_begin}}();\ pri\ !=\ \mbox{\hyperlink{classEggVertex_a922be1e4b661a47eb52846db2063515d}{pref\_end}}();\ ++pri)\ \{}
\DoxyCodeLine{00643\ \ \ \ \ \mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *prim\ =\ *pri;}
\DoxyCodeLine{00644\ \ \ \ \ count\ +=\ (prim-\/>is\_local\_coord()\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00645\ \ \ \}}
\DoxyCodeLine{00646\ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00647\ \}}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00653\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEggVertex_af6b66bfd0f99d4b8464866415d4bc7a2}{EggVertex::}}}
\DoxyCodeLine{00654\ \mbox{\hyperlink{classEggVertex_af6b66bfd0f99d4b8464866415d4bc7a2}{get\_num\_global\_coord}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00655\ \ \ test\_pref\_integrity();}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ PrimitiveRef::const\_iterator\ pri;}
\DoxyCodeLine{00658\ }
\DoxyCodeLine{00659\ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{00660\ \ \ \textcolor{keywordflow}{for}\ (pri\ =\ \mbox{\hyperlink{classEggVertex_a682858c0d81151d5aea082bb66281016}{pref\_begin}}();\ pri\ !=\ \mbox{\hyperlink{classEggVertex_a922be1e4b661a47eb52846db2063515d}{pref\_end}}();\ ++pri)\ \{}
\DoxyCodeLine{00661\ \ \ \ \ \mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *prim\ =\ *pri;}
\DoxyCodeLine{00662\ \ \ \ \ count\ +=\ (prim-\/>is\_local\_coord()\ ?\ 0\ :\ 1);}
\DoxyCodeLine{00663\ \ \ \}}
\DoxyCodeLine{00664\ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00665\ \}}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00671\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_a67cbffa9ee6d029b940f1381df434f8f}{EggVertex::}}}
\DoxyCodeLine{00672\ \mbox{\hyperlink{classEggVertex_a67cbffa9ee6d029b940f1381df434f8f}{transform}}(\textcolor{keyword}{const}\ LMatrix4d\ \&mat)\ \{}
\DoxyCodeLine{00673\ \ \ \_pos\ =\ \_pos\ *\ mat;}
\DoxyCodeLine{00674\ }
\DoxyCodeLine{00675\ \ \ EggMorphVertexList::iterator\ mi;}
\DoxyCodeLine{00676\ \ \ \textcolor{keywordflow}{for}\ (mi\ =\ \_dxyzs.begin();\ mi\ !=\ \_dxyzs.end();\ ++mi)\ \{}
\DoxyCodeLine{00677\ \ \ \ \ \textcolor{comment}{//\ We\ can\ safely\ cast\ the\ morph\ object\ to\ a\ non-\/const,\ because\ we're\ not}}
\DoxyCodeLine{00678\ \ \ \ \ \textcolor{comment}{//\ changing\ its\ name,\ which\ is\ the\ only\ thing\ the\ set\ cares\ about}}
\DoxyCodeLine{00679\ \ \ \ \ \textcolor{comment}{//\ preserving.}}
\DoxyCodeLine{00680\ \ \ \ \ \mbox{\hyperlink{classEggMorph}{EggMorphVertex}}\ \&morph\ =\ (\mbox{\hyperlink{classEggMorph}{EggMorphVertex}}\ \&)(*mi);}
\DoxyCodeLine{00681\ }
\DoxyCodeLine{00682\ \ \ \ \ morph.set\_offset((*mi).get\_offset()\ *\ mat);}
\DoxyCodeLine{00683\ \ \ \}}
\DoxyCodeLine{00684\ }
\DoxyCodeLine{00685\ \ \ UVMap::iterator\ ui;}
\DoxyCodeLine{00686\ \ \ \textcolor{keywordflow}{for}\ (ui\ =\ \_uv\_map.begin();\ ui\ !=\ \_uv\_map.end();\ ++ui)\ \{}
\DoxyCodeLine{00687\ \ \ \ \ (*ui).second-\/>transform(mat);}
\DoxyCodeLine{00688\ \ \ \}}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ EggAttributes::transform(mat);}
\DoxyCodeLine{00691\ \}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00701\ EggVertex::GroupRef::const\_iterator\ \mbox{\hyperlink{classEggVertex_adbd2aa922e8cdecb99ab87c4671aa2ff}{EggVertex::}}}
\DoxyCodeLine{00702\ \mbox{\hyperlink{classEggVertex_adbd2aa922e8cdecb99ab87c4671aa2ff}{gref\_begin}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00703\ \ \ \textcolor{keywordflow}{return}\ \_gref.begin();}
\DoxyCodeLine{00704\ \}}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00713\ EggVertex::GroupRef::const\_iterator\ \mbox{\hyperlink{classEggVertex_a96f584fddd8427c96b94265107f4b395}{EggVertex::}}}
\DoxyCodeLine{00714\ \mbox{\hyperlink{classEggVertex_a96f584fddd8427c96b94265107f4b395}{gref\_end}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00715\ \ \ \textcolor{keywordflow}{return}\ \_gref.end();}
\DoxyCodeLine{00716\ \}}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00723\ EggVertex::GroupRef::size\_type\ \mbox{\hyperlink{classEggVertex_aa19b603fe279379b50408f2a82562fb0}{EggVertex::}}}
\DoxyCodeLine{00724\ \mbox{\hyperlink{classEggVertex_aa19b603fe279379b50408f2a82562fb0}{gref\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00725\ \ \ \textcolor{keywordflow}{return}\ \_gref.size();}
\DoxyCodeLine{00726\ \}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00732\ \textcolor{keywordtype}{bool}\ EggVertex::}
\DoxyCodeLine{00733\ has\_gref(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00734\ \ \ \textcolor{keywordflow}{return}\ \_gref.count((\mbox{\hyperlink{classEggGroup}{EggGroup}}\ *)group)\ !=\ 0;}
\DoxyCodeLine{00735\ \}}
\DoxyCodeLine{00736\ }
\DoxyCodeLine{00746\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_ac905015a8da4b0960a46b2b97bdabc0b}{EggVertex::}}}
\DoxyCodeLine{00747\ \mbox{\hyperlink{classEggVertex_ac905015a8da4b0960a46b2b97bdabc0b}{copy\_grefs\_from}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ \&other)\ \{}
\DoxyCodeLine{00748\ \ \ \textcolor{keywordflow}{if}\ (\&other\ ==\ \textcolor{keyword}{this})\ \{}
\DoxyCodeLine{00749\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00750\ \ \ \}}
\DoxyCodeLine{00751\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00752\ \ \ other.test\_gref\_integrity();}
\DoxyCodeLine{00753\ }
\DoxyCodeLine{00754\ \ \ \mbox{\hyperlink{classEggVertex_a3080b9a649778ada0fbb9487663215e5}{clear\_grefs}}();}
\DoxyCodeLine{00755\ \ \ test\_gref\_integrity();}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ GroupRef::const\_iterator\ gri;}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \ \ \textcolor{keywordflow}{for}\ (gri\ =\ other.\mbox{\hyperlink{classEggVertex_adbd2aa922e8cdecb99ab87c4671aa2ff}{gref\_begin}}();\ gri\ !=\ other.\mbox{\hyperlink{classEggVertex_a96f584fddd8427c96b94265107f4b395}{gref\_end}}();\ ++gri)\ \{}
\DoxyCodeLine{00760\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ *gri;}
\DoxyCodeLine{00761\ \ \ \ \ nassertv(group\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ \ \ \ \ group-\/>ref\_vertex(\textcolor{keyword}{this},\ group-\/>get\_vertex\_membership(\&other));}
\DoxyCodeLine{00764\ \ \ \}}
\DoxyCodeLine{00765\ \}}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00771\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggVertex_a3080b9a649778ada0fbb9487663215e5}{EggVertex::}}}
\DoxyCodeLine{00772\ \mbox{\hyperlink{classEggVertex_a3080b9a649778ada0fbb9487663215e5}{clear\_grefs}}()\ \{}
\DoxyCodeLine{00773\ \ \ \mbox{\hyperlink{classpset}{GroupRef}}\ gref\_copy\ =\ \_gref;}
\DoxyCodeLine{00774\ \ \ GroupRef::const\_iterator\ gri;}
\DoxyCodeLine{00775\ \ \ \textcolor{keywordflow}{for}\ (gri\ =\ gref\_copy.begin();\ gri\ !=\ gref\_copy.end();\ ++gri)\ \{}
\DoxyCodeLine{00776\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ *gri;}
\DoxyCodeLine{00777\ \ \ \ \ nassertv(group\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00778\ \ \ \ \ group-\/>unref\_vertex(\textcolor{keyword}{this});}
\DoxyCodeLine{00779\ \ \ \}}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \textcolor{comment}{//\ Now\ we\ should\ have\ no\ more\ refs.}}
\DoxyCodeLine{00782\ \ \ nassertv(\_gref.empty());}
\DoxyCodeLine{00783\ \}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00792\ EggVertex::PrimitiveRef::const\_iterator\ \mbox{\hyperlink{classEggVertex_a682858c0d81151d5aea082bb66281016}{EggVertex::}}}
\DoxyCodeLine{00793\ \mbox{\hyperlink{classEggVertex_a682858c0d81151d5aea082bb66281016}{pref\_begin}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00794\ \ \ \textcolor{keywordflow}{return}\ \_pref.begin();}
\DoxyCodeLine{00795\ \}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00804\ EggVertex::PrimitiveRef::const\_iterator\ \mbox{\hyperlink{classEggVertex_a922be1e4b661a47eb52846db2063515d}{EggVertex::}}}
\DoxyCodeLine{00805\ \mbox{\hyperlink{classEggVertex_a922be1e4b661a47eb52846db2063515d}{pref\_end}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00806\ \ \ \textcolor{keywordflow}{return}\ \_pref.end();}
\DoxyCodeLine{00807\ \}}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00814\ EggVertex::GroupRef::size\_type\ \mbox{\hyperlink{classEggVertex_ac8b028e7415a83d3d82987f65a27a21b}{EggVertex::}}}
\DoxyCodeLine{00815\ \mbox{\hyperlink{classEggVertex_ac8b028e7415a83d3d82987f65a27a21b}{pref\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00816\ \ \ \textcolor{keywordflow}{return}\ \_pref.size();}
\DoxyCodeLine{00817\ \}}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00823\ \textcolor{keywordtype}{int}\ EggVertex::}
\DoxyCodeLine{00824\ has\_pref(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *prim)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00825\ \ \ \textcolor{keywordflow}{return}\ \_pref.count((\mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *)prim);}
\DoxyCodeLine{00826\ \}}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \textcolor{preprocessor}{\#ifdef\ \_DEBUG}}
\DoxyCodeLine{00829\ }
\DoxyCodeLine{00834\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00835\ test\_gref\_integrity()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00836\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \ \ GroupRef::const\_iterator\ gri;}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \ \ \textcolor{keywordflow}{for}\ (gri\ =\ \mbox{\hyperlink{classEggVertex_adbd2aa922e8cdecb99ab87c4671aa2ff}{gref\_begin}}();\ gri\ !=\ \mbox{\hyperlink{classEggVertex_a96f584fddd8427c96b94265107f4b395}{gref\_end}}();\ ++gri)\ \{}
\DoxyCodeLine{00841\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ *gri;}
\DoxyCodeLine{00842\ \ \ \ \ nassertv(group\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00843\ \ \ \ \ group-\/>test\_ref\_count\_integrity();}
\DoxyCodeLine{00844\ }
\DoxyCodeLine{00845\ \ \ \ \ \textcolor{keywordtype}{double}\ membership\ =\ group-\/>get\_vertex\_membership(\textcolor{keyword}{this});}
\DoxyCodeLine{00846\ \ \ \ \ nassertv(membership\ !=\ 0.0);}
\DoxyCodeLine{00847\ \ \ \}}
\DoxyCodeLine{00848\ \}}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00854\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00855\ test\_pref\_integrity()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00856\ \ \ test\_ref\_count\_integrity();}
\DoxyCodeLine{00857\ }
\DoxyCodeLine{00858\ \ \ PrimitiveRef::const\_iterator\ pri;}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \textcolor{keywordflow}{for}\ (pri\ =\ \mbox{\hyperlink{classEggVertex_a682858c0d81151d5aea082bb66281016}{pref\_begin}}();\ pri\ !=\ \mbox{\hyperlink{classEggVertex_a922be1e4b661a47eb52846db2063515d}{pref\_end}}();\ ++pri)\ \{}
\DoxyCodeLine{00861\ \ \ \ \ \mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *prim\ =\ *pri;}
\DoxyCodeLine{00862\ \ \ \ \ nassertv(prim\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00863\ \ \ \ \ prim-\/>test\_ref\_count\_integrity();}
\DoxyCodeLine{00864\ }
\DoxyCodeLine{00865\ \ \ \ \ EggPrimitive::iterator\ vi;}
\DoxyCodeLine{00866\ \ \ \ \ vi\ =\ find(prim-\/>begin(),\ prim-\/>end(),\ \textcolor{keyword}{this});}
\DoxyCodeLine{00867\ \ \ \ \ nassertv(vi\ !=\ prim-\/>end());}
\DoxyCodeLine{00868\ \ \ \}}
\DoxyCodeLine{00869\ \}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00876\ \textcolor{keywordtype}{void}\ EggVertex::}
\DoxyCodeLine{00877\ output(ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00878\ \ \ \textcolor{keywordflow}{if}\ (get\_pool()\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00879\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}(null):"{}}\ <<\ get\_index();}
\DoxyCodeLine{00880\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00881\ \ \ \ \ out\ <<\ get\_pool()-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ get\_index();}
\DoxyCodeLine{00882\ \ \ \}}
\DoxyCodeLine{00883\ \}}

\end{DoxyCode}

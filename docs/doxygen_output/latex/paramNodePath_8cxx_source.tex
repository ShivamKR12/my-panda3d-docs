\doxysection{param\+Node\+Path.\+cxx}
\hypertarget{paramNodePath_8cxx_source}{}\label{paramNodePath_8cxx_source}\index{panda/src/pgraph/paramNodePath.cxx@{panda/src/pgraph/paramNodePath.cxx}}
\mbox{\hyperlink{paramNodePath_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{paramNodePath_8h}{paramNodePath.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dcast_8h}{dcast.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandaNode_8h}{pandaNode.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{light_8h}{light.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ParamNodePath::\_type\_handle;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00024\ \mbox{\hyperlink{classParamNodePath_afe11e9f3570ba944370fb8a6a587aa28}{ParamNodePath::}}}
\DoxyCodeLine{00025\ \mbox{\hyperlink{classParamNodePath_afe11e9f3570ba944370fb8a6a587aa28}{ParamNodePath}}(\mbox{\hyperlink{classNodePath}{NodePath}}\ node\_path)\ :}
\DoxyCodeLine{00026\ \ \ \_node\_path(std::move(node\_path))}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \textcolor{comment}{//\ The\ reason\ to\ construct\ a\ ParamNodePath\ is\ often\ to\ apply\ a\ light\ to\ a}}
\DoxyCodeLine{00029\ \ \ \textcolor{comment}{//\ shader\ input,\ so\ we\ want\ to\ keep\ track\ of\ the\ fact\ that\ the\ light\ is\ in}}
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ use.}}
\DoxyCodeLine{00031\ \ \ \textcolor{keywordflow}{if}\ (!\_node\_path.is\_empty())\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classLight}{Light}}\ *light\ =\ \_node\_path.node()-\/>as\_light();}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{if}\ (light\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ light-\/>\mbox{\hyperlink{classLight_a6a3d2cf9f7cf89c89e51b1adf814ec82}{attrib\_ref}}();}
\DoxyCodeLine{00035\ \ \ \ \ \}}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00042\ ParamNodePath::}
\DoxyCodeLine{00043\ \string~ParamNodePath()\ \{}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordflow}{if}\ (!\_node\_path.is\_empty())\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classLight}{Light}}\ *light\ =\ \_node\_path.node()-\/>\mbox{\hyperlink{classPandaNode_af78c62764c93b98f10de8595b5cff167}{as\_light}}();}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{if}\ (light\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ light-\/>\mbox{\hyperlink{classLight_ae010fdd974ea227f0aecf223d57ed4d3}{attrib\_unref}}();}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \}}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ \textcolor{keywordtype}{void}\ ParamNodePath::}
\DoxyCodeLine{00056\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00057\ \ \ out\ <<\ \textcolor{stringliteral}{"{}node\ path\ "{}}\ <<\ \_node\_path;}
\DoxyCodeLine{00058\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00063\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classParamNodePath_a8a2884212ea58f3dbb300c8696cf943f}{ParamNodePath::}}}
\DoxyCodeLine{00064\ \mbox{\hyperlink{classParamNodePath_a8a2884212ea58f3dbb300c8696cf943f}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00065\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classParamNodePath_aad5e740cc7cf7d76c5ac1f8f3f75f43f}{make\_from\_bam}});}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00072\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classParamNodePath_a22ec9f8c09e3d776ad10555b393efca9}{ParamNodePath::}}}
\DoxyCodeLine{00073\ \mbox{\hyperlink{classParamNodePath_a22ec9f8c09e3d776ad10555b393efca9}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\ \{}
\DoxyCodeLine{00074\ \ \ ParamValueBase::write\_datagram(manager,\ dg);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ <\ 40)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Before\ bam\ 6.40,\ we\ did\ not\ support\ writing\ NodePaths.\ \ Instaed,\ we}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ write\ the\ PandaNode\ pointer\ and\ pray\ there\ is\ an\ unambiguous\ path.}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_node\_path.is\_empty())\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ manager-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(dg,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00081\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ manager-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(dg,\ \_node\_path.node());}
\DoxyCodeLine{00083\ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \_node\_path.\mbox{\hyperlink{classNodePath_af7c19931d23f86dab9de3c64850b180f}{write\_datagram}}(manager,\ dg);}
\DoxyCodeLine{00086\ \ \ \}}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00093\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classParamNodePath_ac216f31eb652fac6631469296fbb4371}{ParamNodePath::}}}
\DoxyCodeLine{00094\ \mbox{\hyperlink{classParamNodePath_ac216f31eb652fac6631469296fbb4371}{complete\_pointers}}(\mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ **p\_list,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00095\ \ \ \textcolor{keywordtype}{int}\ pi\ =\ \mbox{\hyperlink{classTypedWritable_addc29bb978851cacca2196f8a1f35014}{ParamValueBase::complete\_pointers}}(p\_list,\ manager);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 40)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ pi\ +=\ \_node\_path.\mbox{\hyperlink{classNodePath_a7668ffdd889f20ec62c2c5dd8b87c350}{complete\_pointers}}(p\_list\ +\ pi,\ manager);}
\DoxyCodeLine{00099\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \_node\_path\ =\ \mbox{\hyperlink{classNodePath}{NodePath}}(DCAST(\mbox{\hyperlink{classPandaNode}{PandaNode}},\ p\_list[pi++]));}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{if}\ (!\_node\_path.is\_empty())\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{classLight}{Light}}\ *light\ =\ \_node\_path.node()-\/>\mbox{\hyperlink{classPandaNode_af78c62764c93b98f10de8595b5cff167}{as\_light}}();}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{if}\ (light\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ light-\/>\mbox{\hyperlink{classLight_a6a3d2cf9f7cf89c89e51b1adf814ec82}{attrib\_ref}}();}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{return}\ pi;}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00118\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classParamNodePath_aad5e740cc7cf7d76c5ac1f8f3f75f43f}{ParamNodePath::}}}
\DoxyCodeLine{00119\ \mbox{\hyperlink{classParamNodePath_aad5e740cc7cf7d76c5ac1f8f3f75f43f}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00120\ \ \ \mbox{\hyperlink{classParamNodePath}{ParamNodePath}}\ *param\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classParamNodePath_afe11e9f3570ba944370fb8a6a587aa28}{ParamNodePath}};}
\DoxyCodeLine{00121\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00122\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00125\ \ \ param-\/>fillin(scan,\ manager);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{return}\ param;}
\DoxyCodeLine{00128\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00134\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classParamNodePath_a35d11009bba2dd2067af9416fe9c9462}{ParamNodePath::}}}
\DoxyCodeLine{00135\ \mbox{\hyperlink{classParamNodePath_a35d11009bba2dd2067af9416fe9c9462}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classTypedWritable_a3ad6cc1cd23bc3783d83edb3302bb43c}{ParamValueBase::fillin}}(scan,\ manager);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \textcolor{keywordflow}{if}\ (!\_node\_path.is\_empty())\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classLight}{Light}}\ *light\ =\ \_node\_path.node()-\/>\mbox{\hyperlink{classPandaNode_af78c62764c93b98f10de8595b5cff167}{as\_light}}();}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{if}\ (light\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ light-\/>\mbox{\hyperlink{classLight_ae010fdd974ea227f0aecf223d57ed4d3}{attrib\_unref}}();}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ \ \ \ \ \_node\_path.clear();}
\DoxyCodeLine{00144\ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 40)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \_node\_path.\mbox{\hyperlink{classNodePath_a4df73e7daf4f8f14964f00debe20108d}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00148\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00149\ \ \ \ \ manager-\/>\mbox{\hyperlink{classBamReader_ac0ecc0609d9c6de514145777b3336435}{read\_pointer}}(scan);}
\DoxyCodeLine{00150\ \ \ \}}
\DoxyCodeLine{00151\ \}}

\end{DoxyCode}

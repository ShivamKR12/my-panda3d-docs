\doxysection{auto\+\_\+bind.\+cxx}
\hypertarget{auto__bind_8cxx_source}{}\label{auto__bind_8cxx_source}\index{panda/src/chan/auto\_bind.cxx@{panda/src/chan/auto\_bind.cxx}}
\mbox{\hyperlink{auto__bind_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{auto__bind_8h}{auto\_bind.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{animBundleNode_8h}{animBundleNode.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{partBundleNode_8h}{partBundleNode.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__chan_8h}{config\_chan.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__utils_8h}{string\_utils.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{partGroup_8h}{partGroup.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset<AnimBundle\ *>}}\ \mbox{\hyperlink{classpset}{AnimBundles}};}
\DoxyCodeLine{00024\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<string,\ AnimBundles>}}\ \mbox{\hyperlink{classpmap}{Anims}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset<PartBundle\ *>}}\ \mbox{\hyperlink{classpset}{PartBundles}};}
\DoxyCodeLine{00027\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<string,\ PartBundles>}}\ \mbox{\hyperlink{classpmap}{Parts}};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00036\ bind\_anims(\textcolor{keyword}{const}\ \mbox{\hyperlink{classpset}{PartBundles}}\ \&parts,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classpset}{AnimBundles}}\ \&anims,}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAnimControlCollection}{AnimControlCollection}}\ \&controls,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hierarchy\_match\_flags)\ \{}
\DoxyCodeLine{00039\ \ \ PartBundles::const\_iterator\ pbi;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keywordflow}{for}\ (pbi\ =\ parts.begin();\ pbi\ !=\ parts.end();\ ++pbi)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classPartBundle}{PartBundle}}\ *part\ =\ (*pbi);}
\DoxyCodeLine{00043\ \ \ \ \ AnimBundles::const\_iterator\ abi;}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{for}\ (abi\ =\ anims.begin();\ abi\ !=\ anims.end();\ ++abi)\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \mbox{\hyperlink{classAnimBundle}{AnimBundle}}\ *anim\ =\ (*abi);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (chan\_cat.is\_info())\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ chan\_cat.info()}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Attempting\ to\ bind\ "{}}\ <<\ *part\ <<\ \textcolor{stringliteral}{"{}\ to\ "{}}\ <<\ *anim\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ PT(\mbox{\hyperlink{classAnimControl}{AnimControl}})\ control\ =}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ part-\/>bind\_anim(anim,\ hierarchy\_match\_flags);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ name\ =\ (*abi)-\/>get\_name();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (name.empty())\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ name\ =\ anim-\/>get\_name();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (control\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (controls.find\_anim(name)\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ That\ name's\ already\ used;\ synthesize\ another\ one.}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ 0;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ new\_name;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ index++;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ new\_name\ =\ name\ +\ \textcolor{charliteral}{'.'}\ +\ format\_string(index);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (controls.find\_anim(new\_name)\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ name\ =\ new\_name;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ controls.store\_anim(control,\ name);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (chan\_cat.is\_info())\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (control\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ chan\_cat.info()}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Bind\ failed.\(\backslash\)n"{}};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ chan\_cat.info()}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Bind\ succeeded,\ index\ "{}}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ control-\/>get\_channel\_index()\ <<\ \textcolor{stringliteral}{"{};\ accessible\ as\ "{}}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ name\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00091\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00092\ r\_find\_bundles(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node,\ \mbox{\hyperlink{classpmap}{Anims}}\ \&anims,\ \mbox{\hyperlink{classpmap}{Parts}}\ \&parts)\ \{}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{if}\ (node-\/>is\_of\_type(AnimBundleNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{classAnimBundleNode}{AnimBundleNode}}\ *bn\ =\ DCAST(\mbox{\hyperlink{classAnimBundleNode}{AnimBundleNode}},\ node);}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{classAnimBundle}{AnimBundle}}\ *bundle\ =\ bn-\/>get\_bundle();}
\DoxyCodeLine{00096\ \ \ \ \ anims[bundle-\/>get\_name()].insert(bundle);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (node-\/>is\_of\_type(PartBundleNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classPartBundleNode}{PartBundleNode}}\ *bn\ =\ DCAST(\mbox{\hyperlink{classPartBundleNode}{PartBundleNode}},\ node);}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_bundles\ =\ bn-\/>get\_num\_bundles();}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_bundles;\ ++i)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \mbox{\hyperlink{classPartBundle}{PartBundle}}\ *bundle\ =\ bn-\/>get\_bundle(i);}
\DoxyCodeLine{00103\ \ \ \ \ \ \ parts[bundle-\/>get\_name()].insert(bundle);}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ PandaNode::Children\ cr\ =\ node-\/>get\_children();}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ cr.get\_num\_children();}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_children;\ i++)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ r\_find\_bundles(cr.get\_child(i),\ anims,\ parts);}
\DoxyCodeLine{00111\ \ \ \}}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00123\ \mbox{\hyperlink{auto__bind_8cxx_aaa062215ebcaaf60c8a7a1bc0e96d4e2}{auto\_bind}}(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *root\_node,\ \mbox{\hyperlink{classAnimControlCollection}{AnimControlCollection}}\ \&controls,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ hierarchy\_match\_flags)\ \{}
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ First,\ locate\ all\ the\ bundles\ in\ the\ subgraph.}}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classpmap}{Anims}}\ anims;}
\DoxyCodeLine{00127\ \ \ \mbox{\hyperlink{classpset}{AnimBundles}}\ extra\_anims;}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{classpmap}{Parts}}\ parts;}
\DoxyCodeLine{00129\ \ \ \mbox{\hyperlink{classpset}{PartBundles}}\ extra\_parts;}
\DoxyCodeLine{00130\ \ \ r\_find\_bundles(root\_node,\ anims,\ parts);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \textcolor{keywordflow}{if}\ (chan\_cat.is\_debug())\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{int}\ anim\_count\ =\ 0;}
\DoxyCodeLine{00134\ \ \ \ \ Anims::const\_iterator\ ai;}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{for}\ (ai\ =\ anims.begin();\ ai\ !=\ anims.end();\ ++ai)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ anim\_count\ +=\ (int)(*ai).second.size();}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ \ \ \ \ chan\_cat.debug()}
\DoxyCodeLine{00139\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Found\ "{}}\ <<\ anim\_count\ <<\ \textcolor{stringliteral}{"{}\ anims:\(\backslash\)n"{}};}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{for}\ (ai\ =\ anims.begin();\ ai\ !=\ anims.end();\ ++ai)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ (*ai).first;}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ai).second.size()\ !=\ 1)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}*"{}}\ <<\ ((*ai).second.size());}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00147\ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00149\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordtype}{int}\ part\_count\ =\ 0;}
\DoxyCodeLine{00152\ \ \ \ \ Parts::const\_iterator\ pi;}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ parts.begin();\ pi\ !=\ parts.end();\ ++pi)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ part\_count\ +=\ (int)(*pi).second.size();}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ chan\_cat.debug()}
\DoxyCodeLine{00157\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Found\ "{}}\ <<\ part\_count\ <<\ \textcolor{stringliteral}{"{}\ parts:\(\backslash\)n"{}};}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ parts.begin();\ pi\ !=\ parts.end();\ ++pi)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ (*pi).first;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*pi).second.size()\ !=\ 1)\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}*"{}}\ <<\ ((*pi).second.size());}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ \ \ \ \ \}}
\DoxyCodeLine{00166\ \ \ \ \ chan\_cat.debug(\textcolor{keyword}{false})}
\DoxyCodeLine{00167\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00168\ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \textcolor{comment}{//\ Now,\ match\ up\ the\ bundles\ by\ name.}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ Anims::const\_iterator\ ai\ =\ anims.begin();}
\DoxyCodeLine{00173\ \ \ Parts::const\_iterator\ pi\ =\ parts.begin();}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \textcolor{keywordflow}{while}\ (ai\ !=\ anims.end()\ \&\&\ pi\ !=\ parts.end())\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{if}\ ((*ai).first\ <\ (*pi).first)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ an\ anim\ with\ no\ matching\ parts.}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hierarchy\_match\_flags\ \&\ PartGroup::HMF\_ok\_wrong\_root\_name)\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ AnimBundles::const\_iterator\ abi;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (abi\ =\ (*ai).second.begin();\ abi\ !=\ (*ai).second.end();\ ++abi)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ extra\_anims.insert(*abi);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ ++ai;}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((*pi).first\ <\ (*ai).first)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \textcolor{comment}{//\ And\ here's\ a\ part\ with\ no\ matching\ anims.}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hierarchy\_match\_flags\ \&\ PartGroup::HMF\_ok\_wrong\_root\_name)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ PartBundles::const\_iterator\ pbi;}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (pbi\ =\ (*pi).second.begin();\ pbi\ !=\ (*pi).second.end();\ ++pbi)\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ extra\_parts.insert(*pbi);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ ++pi;}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \textcolor{comment}{//\ But\ here\ we\ have\ (at\ least\ one)\ match!}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ bind\_anims((*pi).second,\ (*ai).second,\ controls,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hierarchy\_match\_flags);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ ++pi;}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ don't\ increment\ the\ anim\ counter\ yet.\ \ That\ way,\ the\ same\ anim\ may}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \textcolor{comment}{//\ bind\ to\ multiple\ parts,\ if\ they\ all\ share\ the\ same\ name.}}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ \ \ \}}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \textcolor{keywordflow}{if}\ (hierarchy\_match\_flags\ \&\ PartGroup::HMF\_ok\_wrong\_root\_name)\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{comment}{//\ Continue\ searching\ through\ the\ remaining\ anims\ and\ parts.}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{while}\ (ai\ !=\ anims.end())\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ an\ anim\ with\ no\ matching\ parts.}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hierarchy\_match\_flags\ \&\ PartGroup::HMF\_ok\_wrong\_root\_name)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ AnimBundles::const\_iterator\ abi;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (abi\ =\ (*ai).second.begin();\ abi\ !=\ (*ai).second.end();\ ++abi)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ extra\_anims.insert(*abi);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ ++ai;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{while}\ (pi\ !=\ parts.end())\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \textcolor{comment}{//\ And\ here's\ a\ part\ with\ no\ matching\ anims.}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hierarchy\_match\_flags\ \&\ PartGroup::HMF\_ok\_wrong\_root\_name)\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ PartBundles::const\_iterator\ pbi;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (pbi\ =\ (*pi).second.begin();\ pbi\ !=\ (*pi).second.end();\ ++pbi)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ extra\_parts.insert(*pbi);}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ ++pi;}
\DoxyCodeLine{00230\ \ \ \ \ \}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ bind\_anims(extra\_parts,\ extra\_anims,\ controls,}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hierarchy\_match\_flags);}
\DoxyCodeLine{00234\ \ \ \}}
\DoxyCodeLine{00235\ \}}

\end{DoxyCode}

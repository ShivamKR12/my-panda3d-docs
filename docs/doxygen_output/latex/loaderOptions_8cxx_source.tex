\doxysection{loader\+Options.\+cxx}
\hypertarget{loaderOptions_8cxx_source}{}\label{loaderOptions_8cxx_source}\index{panda/src/putil/loaderOptions.cxx@{panda/src/putil/loaderOptions.cxx}}
\mbox{\hyperlink{loaderOptions_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{loaderOptions_8h}{loaderOptions.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__putil_8h}{config\_putil.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00023\ LoaderOptions::}
\DoxyCodeLine{00024\ LoaderOptions(\textcolor{keywordtype}{int}\ flags)\ :}
\DoxyCodeLine{00025\ \ \ \_flags(flags),}
\DoxyCodeLine{00026\ \ \ \_texture\_flags(0),}
\DoxyCodeLine{00027\ \ \ \_texture\_format(0),}
\DoxyCodeLine{00028\ \ \ \_texture\_compress(0),}
\DoxyCodeLine{00029\ \ \ \_texture\_quality(0),}
\DoxyCodeLine{00030\ \ \ \_texture\_num\_views(0),}
\DoxyCodeLine{00031\ \ \ \_auto\_texture\_scale(ATS\_unspecified)}
\DoxyCodeLine{00032\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ Shadowing\ the\ variables\ in\ config\_putil\ for\ static\ init\ ordering\ issues.}}
\DoxyCodeLine{00034\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}\ *preload\_textures;}
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}\ *preload\_simple\_textures;}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}\ *compressed\_textures;}
\DoxyCodeLine{00037\ \ \ \textcolor{keywordflow}{if}\ (preload\_textures\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00038\ \ \ \ \ preload\_textures\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}(\textcolor{stringliteral}{"{}preload-\/textures"{}},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00039\ \ \ \}}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{if}\ (preload\_simple\_textures\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00041\ \ \ \ \ preload\_simple\_textures\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}(\textcolor{stringliteral}{"{}preload-\/simple-\/textures"{}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{if}\ (compressed\_textures\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00044\ \ \ \ \ compressed\_textures\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}(\textcolor{stringliteral}{"{}compressed-\/textures"{}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{keywordflow}{if}\ (*preload\_textures)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \_texture\_flags\ |=\ TF\_preload;}
\DoxyCodeLine{00049\ \ \ \}}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (*preload\_simple\_textures)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \_texture\_flags\ |=\ TF\_preload\_simple;}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{if}\ (*compressed\_textures)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \_texture\_flags\ |=\ TF\_allow\_compression;}
\DoxyCodeLine{00055\ \ \ \}}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00061\ \textcolor{keywordtype}{void}\ LoaderOptions::}
\DoxyCodeLine{00062\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00063\ \ \ out\ <<\ \textcolor{stringliteral}{"{}LoaderOptions("{}};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{string}\ sep\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00066\ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_search"{}},\ LF\_search);}
\DoxyCodeLine{00067\ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_report\_errors"{}},\ LF\_report\_errors);}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ LF\_convert\_anim)\ ==\ LF\_convert\_anim)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_convert\_anim"{}},\ LF\_convert\_anim);}
\DoxyCodeLine{00070\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00071\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_convert\_skeleton"{}},\ LF\_convert\_skeleton);}
\DoxyCodeLine{00072\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_convert\_channels"{}},\ LF\_convert\_channels);}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ LF\_no\_cache)\ ==\ LF\_no\_cache)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_no\_cache"{}},\ LF\_no\_cache);}
\DoxyCodeLine{00076\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00077\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_no\_disk\_cache"{}},\ LF\_no\_disk\_cache);}
\DoxyCodeLine{00078\ \ \ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_no\_ram\_cache"{}},\ LF\_no\_ram\_cache);}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \ \ write\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}LF\_allow\_instance"{}},\ LF\_allow\_instance);}
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{if}\ (sep.empty())\ \{}
\DoxyCodeLine{00082\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}0"{}};}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ out\ <<\ \textcolor{stringliteral}{"{},\ "{}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ sep\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00088\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_preload"{}},\ TF\_preload);}
\DoxyCodeLine{00089\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_preload\_simple"{}},\ TF\_preload\_simple);}
\DoxyCodeLine{00090\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_allow\_1d"{}},\ TF\_allow\_1d);}
\DoxyCodeLine{00091\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_generate\_mipmaps"{}},\ TF\_generate\_mipmaps);}
\DoxyCodeLine{00092\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_allow\_compression"{}},\ TF\_allow\_compression);}
\DoxyCodeLine{00093\ \ \ write\_texture\_flag(out,\ sep,\ \textcolor{stringliteral}{"{}TF\_no\_filters"{}},\ TF\_no\_filters);}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{if}\ (sep.empty())\ \{}
\DoxyCodeLine{00095\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}0"{}};}
\DoxyCodeLine{00096\ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \textcolor{keywordflow}{if}\ (\_auto\_texture\_scale\ !=\ ATS\_unspecified)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{},\ ATS\_"{}}\ <<\ \_auto\_texture\_scale;}
\DoxyCodeLine{00100\ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ out\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{void}\ LoaderOptions::}
\DoxyCodeLine{00109\ write\_flag(std::ostream\ \&out,\ \textcolor{keywordtype}{string}\ \&sep,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&flag\_name,\ \textcolor{keywordtype}{int}\ flag)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ flag)\ ==\ flag)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ out\ <<\ sep\ <<\ flag\_name;}
\DoxyCodeLine{00113\ \ \ \ \ sep\ =\ \textcolor{stringliteral}{"{}\ |\ "{}};}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00120\ \textcolor{keywordtype}{void}\ LoaderOptions::}
\DoxyCodeLine{00121\ write\_texture\_flag(std::ostream\ \&out,\ \textcolor{keywordtype}{string}\ \&sep,}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&flag\_name,\ \textcolor{keywordtype}{int}\ flag)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordflow}{if}\ ((\_texture\_flags\ \&\ flag)\ ==\ flag)\ \{}
\DoxyCodeLine{00124\ \ \ \ \ out\ <<\ sep\ <<\ flag\_name;}
\DoxyCodeLine{00125\ \ \ \ \ sep\ =\ \textcolor{stringliteral}{"{}\ |\ "{}};}
\DoxyCodeLine{00126\ \ \ \}}
\DoxyCodeLine{00127\ \}}

\end{DoxyCode}

\doxysection{disc\+Emitter.\+cxx}
\hypertarget{discEmitter_8cxx_source}{}\label{discEmitter_8cxx_source}\index{panda/src/particlesystem/discEmitter.cxx@{panda/src/particlesystem/discEmitter.cxx}}
\mbox{\hyperlink{discEmitter_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{discEmitter_8h}{discEmitter.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00019\ DiscEmitter::}
\DoxyCodeLine{00020\ DiscEmitter()\ \{}
\DoxyCodeLine{00021\ \ \ \_radius\ =\ 1.0f;}
\DoxyCodeLine{00022\ \ \ \_inner\_aoe\ =\ \_outer\_aoe\ =\ 0.0f;}
\DoxyCodeLine{00023\ \ \ \_inner\_magnitude\ =\ \_outer\_magnitude\ =\ 1.0f;}
\DoxyCodeLine{00024\ \ \ \_cubic\_lerping\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00030\ DiscEmitter::}
\DoxyCodeLine{00031\ DiscEmitter(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDiscEmitter}{DiscEmitter}}\ \&copy)\ :}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classBaseParticleEmitter}{BaseParticleEmitter}}(copy)\ \{}
\DoxyCodeLine{00033\ \ \ \_radius\ =\ copy.\_radius;}
\DoxyCodeLine{00034\ \ \ \_inner\_aoe\ =\ copy.\_inner\_aoe;}
\DoxyCodeLine{00035\ \ \ \_outer\_aoe\ =\ copy.\_outer\_aoe;}
\DoxyCodeLine{00036\ \ \ \_inner\_magnitude\ =\ copy.\_inner\_magnitude;}
\DoxyCodeLine{00037\ \ \ \_outer\_magnitude\ =\ copy.\_outer\_magnitude;}
\DoxyCodeLine{00038\ \ \ \_cubic\_lerping\ =\ copy.\_cubic\_lerping;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \_distance\_from\_center\ =\ copy.\_distance\_from\_center;}
\DoxyCodeLine{00041\ \ \ \_sinf\_theta\ =\ copy.\_sinf\_theta;}
\DoxyCodeLine{00042\ \ \ \_cosf\_theta\ =\ copy.\_cosf\_theta;}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00048\ DiscEmitter::}
\DoxyCodeLine{00049\ \string~DiscEmitter()\ \{}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ \mbox{\hyperlink{classBaseParticleEmitter}{BaseParticleEmitter}}\ *DiscEmitter::}
\DoxyCodeLine{00056\ make\_copy()\ \{}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classDiscEmitter}{DiscEmitter}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00058\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00063\ \textcolor{keywordtype}{void}\ DiscEmitter::}
\DoxyCodeLine{00064\ assign\_initial\_position(LPoint3\&\ pos)\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ position}}
\DoxyCodeLine{00066\ \ \ PN\_stdfloat\ theta\ =\ NORMALIZED\_RAND()\ *\ 2.0f\ *\ MathNumbers::pi\_f;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \_distance\_from\_center\ =\ NORMALIZED\_RAND();}
\DoxyCodeLine{00069\ \ \ PN\_stdfloat\ r\_scalar\ =\ \_distance\_from\_center\ *\ \_radius;}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \_sinf\_theta\ =\ sinf(theta);}
\DoxyCodeLine{00072\ \ \ \_cosf\_theta\ =\ cosf(theta);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ PN\_stdfloat\ new\_x\ =\ \_cosf\_theta\ *\ r\_scalar;}
\DoxyCodeLine{00075\ \ \ PN\_stdfloat\ new\_y\ =\ \_sinf\_theta\ *\ r\_scalar;}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ pos.set(new\_x,\ new\_y,\ 0.0f);}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00083\ \textcolor{keywordtype}{void}\ DiscEmitter::}
\DoxyCodeLine{00084\ assign\_initial\_velocity(LVector3\&\ vel)\ \{}
\DoxyCodeLine{00085\ \ \ PN\_stdfloat\ aoe,\ mag;}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ lerp\ type}}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordflow}{if}\ (\_cubic\_lerping\ ==\ \textcolor{keyword}{true})\ \{}
\DoxyCodeLine{00089\ \ \ \ \ aoe\ =\ CLERP(\_distance\_from\_center,\ \_inner\_aoe,\ \_outer\_aoe);}
\DoxyCodeLine{00090\ \ \ \ \ mag\ =\ CLERP(\_distance\_from\_center,\ \_inner\_magnitude,\ \_outer\_magnitude);}
\DoxyCodeLine{00091\ \ \ \}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00093\ \ \ \ \ aoe\ =\ LERP(\_distance\_from\_center,\ \_inner\_aoe,\ \_outer\_aoe);}
\DoxyCodeLine{00094\ \ \ \ \ mag\ =\ LERP(\_distance\_from\_center,\ \_inner\_magnitude,\ \_outer\_magnitude);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ velocity}}
\DoxyCodeLine{00098\ \ \ PN\_stdfloat\ vel\_z\ =\ mag\ *\ sinf(deg\_2\_rad(aoe));}
\DoxyCodeLine{00099\ \ \ PN\_stdfloat\ abs\_diff\ =\ fabs((mag\ *\ mag)\ -\/\ (vel\_z\ *\ vel\_z));}
\DoxyCodeLine{00100\ \ \ PN\_stdfloat\ root\_mag\_minus\_z\_squared\ =\ sqrtf(abs\_diff);}
\DoxyCodeLine{00101\ \ \ PN\_stdfloat\ vel\_x\ =\ \_cosf\_theta\ *\ root\_mag\_minus\_z\_squared;}
\DoxyCodeLine{00102\ \ \ PN\_stdfloat\ vel\_y\ =\ \_sinf\_theta\ *\ root\_mag\_minus\_z\_squared;}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ quick\ and\ dirty}}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{if}((aoe\ >\ 90.0f)\ \&\&\ (aoe\ <\ 270.0f))}
\DoxyCodeLine{00106\ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ vel\_x\ =\ -\/vel\_x;}
\DoxyCodeLine{00108\ \ \ \ \ vel\_y\ =\ -\/vel\_y;}
\DoxyCodeLine{00109\ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ vel.set(vel\_x,\ vel\_y,\ vel\_z);}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ DiscEmitter::}
\DoxyCodeLine{00118\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00119\ \textcolor{preprocessor}{\ \ \#ifndef\ NDEBUG\ }\textcolor{comment}{//[}}
\DoxyCodeLine{00120\ \ \ out<<\textcolor{stringliteral}{"{}DiscEmitter"{}};}
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\ \ \#endif\ }\textcolor{comment}{//]\ NDEBUG}}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00127\ \textcolor{keywordtype}{void}\ DiscEmitter::}
\DoxyCodeLine{00128\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\ \ \#ifndef\ NDEBUG\ }\textcolor{comment}{//[}}
\DoxyCodeLine{00130\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}});\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}DiscEmitter:\(\backslash\)n"{}};}
\DoxyCodeLine{00131\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_radius\ "{}}<<\_radius<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00132\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_outer\_aoe\ "{}}<<\_outer\_aoe<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00133\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_inner\_aoe\ "{}}<<\_inner\_aoe<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00134\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_outer\_magnitude\ "{}}<<\_outer\_magnitude<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00135\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_inner\_magnitude\ "{}}<<\_inner\_magnitude<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00136\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_cubic\_lerping\ "{}}<<\_cubic\_lerping<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00137\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_distance\_from\_center\ "{}}<<\_distance\_from\_center<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00138\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_sinf\_theta\ "{}}<<\_sinf\_theta<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00139\ \ \ out.width(\mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);\ out<<\textcolor{stringliteral}{"{}"{}};\ out<<\textcolor{stringliteral}{"{}\_cosf\_theta\ "{}}<<\_cosf\_theta<<\textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00140\ \ \ BaseParticleEmitter::write(out,\ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}+2);}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\ \ \#endif\ }\textcolor{comment}{//]\ NDEBUG}}
\DoxyCodeLine{00142\ \}}

\end{DoxyCode}

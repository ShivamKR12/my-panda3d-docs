\doxysection{filename\+Unifier.\+cxx}
\hypertarget{filenameUnifier_8cxx_source}{}\label{filenameUnifier_8cxx_source}\index{pandatool/src/palettizer/filenameUnifier.cxx@{pandatool/src/palettizer/filenameUnifier.cxx}}
\mbox{\hyperlink{filenameUnifier_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filenameUnifier_8h}{filenameUnifier.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{executionEnvironment_8h}{executionEnvironment.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \mbox{\hyperlink{classFilename}{Filename}}\ FilenameUnifier::\_txa\_filename;}
\DoxyCodeLine{00019\ \mbox{\hyperlink{classFilename}{Filename}}\ FilenameUnifier::\_txa\_dir;}
\DoxyCodeLine{00020\ \mbox{\hyperlink{classFilename}{Filename}}\ FilenameUnifier::\_rel\_dirname;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \mbox{\hyperlink{classpmap}{FilenameUnifier::CanonicalFilenames}}\ FilenameUnifier::\_canonical\_filenames;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00030\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classFilenameUnifier_a0131bdce1efb7d68e4e7076eb40b1162}{FilenameUnifier::}}}
\DoxyCodeLine{00031\ \mbox{\hyperlink{classFilenameUnifier_a0131bdce1efb7d68e4e7076eb40b1162}{set\_txa\_filename}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&txa\_filename)\ \{}
\DoxyCodeLine{00032\ \ \ \_txa\_filename\ =\ txa\_filename;}
\DoxyCodeLine{00033\ \ \ \_txa\_dir\ =\ txa\_filename.get\_dirname();}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{if}\ (\_txa\_dir.empty())\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \_txa\_dir\ =\ \textcolor{stringliteral}{"{}."{}};}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(\_txa\_dir);}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00048\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classFilenameUnifier_a76efabe6474d7bb0c1e66646cd361a48}{FilenameUnifier::}}}
\DoxyCodeLine{00049\ \mbox{\hyperlink{classFilenameUnifier_a76efabe6474d7bb0c1e66646cd361a48}{set\_rel\_dirname}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&rel\_dirname)\ \{}
\DoxyCodeLine{00050\ \ \ \_rel\_dirname\ =\ rel\_dirname;}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordflow}{if}\ (!\_rel\_dirname.empty())\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(\_rel\_dirname);}
\DoxyCodeLine{00053\ \ \ \}}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00060\ \mbox{\hyperlink{classFilename}{Filename}}\ \mbox{\hyperlink{classFilenameUnifier_a46fa16ab38e9daf0a59044f4501b2d49}{FilenameUnifier::}}}
\DoxyCodeLine{00061\ \mbox{\hyperlink{classFilenameUnifier_a46fa16ab38e9daf0a59044f4501b2d49}{make\_bam\_filename}}(\mbox{\hyperlink{classFilename}{Filename}}\ filename)\ \{}
\DoxyCodeLine{00062\ \ \ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(filename);}
\DoxyCodeLine{00063\ \ \ filename.\mbox{\hyperlink{classFilename_ad4b5858950028cbfdba4e703f97e94c7}{make\_relative\_to}}(\_txa\_dir);}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ filename;}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00071\ \mbox{\hyperlink{classFilename}{Filename}}\ \mbox{\hyperlink{classFilenameUnifier_a113b74f22e5ce89877ca3929fb81f3db}{FilenameUnifier::}}}
\DoxyCodeLine{00072\ \mbox{\hyperlink{classFilenameUnifier_a113b74f22e5ce89877ca3929fb81f3db}{get\_bam\_filename}}(\mbox{\hyperlink{classFilename}{Filename}}\ filename)\ \{}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{if}\ (!filename.empty())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ filename.\mbox{\hyperlink{classFilename_ae7676d5949ee4b0023c4fa8396480719}{make\_absolute}}(\_txa\_dir);}
\DoxyCodeLine{00075\ \ \ \}}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{return}\ filename;}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00083\ \mbox{\hyperlink{classFilename}{Filename}}\ \mbox{\hyperlink{classFilenameUnifier_ae38af3afdefe9f906ec05c714c5d7261}{FilenameUnifier::}}}
\DoxyCodeLine{00084\ \mbox{\hyperlink{classFilenameUnifier_ae38af3afdefe9f906ec05c714c5d7261}{make\_egg\_filename}}(\mbox{\hyperlink{classFilename}{Filename}}\ filename)\ \{}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordflow}{if}\ (!filename.empty())\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(filename);}
\DoxyCodeLine{00087\ \ \ \ \ filename.\mbox{\hyperlink{classFilename_ad4b5858950028cbfdba4e703f97e94c7}{make\_relative\_to}}(\_rel\_dirname);}
\DoxyCodeLine{00088\ \ \ \}}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{return}\ filename;}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00096\ \mbox{\hyperlink{classFilename}{Filename}}\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::}}}
\DoxyCodeLine{00097\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{make\_user\_filename}}(\mbox{\hyperlink{classFilename}{Filename}}\ filename)\ \{}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordflow}{if}\ (!filename.empty())\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(filename);}
\DoxyCodeLine{00100\ \ \ \ \ filename.\mbox{\hyperlink{classFilename_ad4b5858950028cbfdba4e703f97e94c7}{make\_relative\_to}}(ExecutionEnvironment::get\_cwd());}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ filename;}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00110\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{FilenameUnifier::}}}
\DoxyCodeLine{00111\ \mbox{\hyperlink{classFilenameUnifier_aa6e11644579465354bc3250a8185cacc}{make\_canonical}}(\mbox{\hyperlink{classFilename}{Filename}}\ \&filename)\ \{}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{if}\ (filename.empty())\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ orig\_dirname\ =\ filename.get\_dirname();}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ CanonicalFilenames::iterator\ fi;}
\DoxyCodeLine{00119\ \ \ fi\ =\ \_canonical\_filenames.find(orig\_dirname);}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{if}\ (fi\ !=\ \_canonical\_filenames.end())\ \{}
\DoxyCodeLine{00121\ \ \ \ \ filename.\mbox{\hyperlink{classFilename_a78b6d5a0229fd9d7ca51d6674d47a8c3}{set\_dirname}}((*fi).second);}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ new\_dirname\ =\ orig\_dirname;}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{if}\ (new\_dirname.empty())\ \{}
\DoxyCodeLine{00127\ \ \ \ \ new\_dirname\ =\ \textcolor{stringliteral}{"{}."{}};}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ \ \ new\_dirname.\mbox{\hyperlink{classFilename_aae0841e487db8763ec578db102d87bc6}{make\_canonical}}();}
\DoxyCodeLine{00130\ \ \ filename.\mbox{\hyperlink{classFilename_a78b6d5a0229fd9d7ca51d6674d47a8c3}{set\_dirname}}(new\_dirname);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \_canonical\_filenames.insert(CanonicalFilenames::value\_type(orig\_dirname,\ new\_dirname));}
\DoxyCodeLine{00133\ \}}

\end{DoxyCode}

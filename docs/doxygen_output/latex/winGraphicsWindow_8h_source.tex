\doxysection{win\+Graphics\+Window.\+h}
\hypertarget{winGraphicsWindow_8h_source}{}\label{winGraphicsWindow_8h_source}\index{panda/src/windisplay/winGraphicsWindow.h@{panda/src/windisplay/winGraphicsWindow.h}}
\mbox{\hyperlink{winGraphicsWindow_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ WINGRAPHICSWINDOW\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ WINGRAPHICSWINDOW\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsWindow_8h}{graphicsWindow.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#ifndef\ WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\ \ \ \ \#define\ WIN32\_LEAN\_AND\_MEAN\ 1}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{windows_8h}{windows.h}}>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classWinGraphicsPipe}{WinGraphicsPipe}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ PM\_ACTIVE\ \ \ (WM\_APP+123)}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ PM\_INACTIVE\ \ (WM\_APP+124)}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ MAX\_TOUCHES\ 20}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordtype}{int}\ width;}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordtype}{int}\ height;}
\DoxyCodeLine{00037\ \}\ \mbox{\hyperlink{structWINDOW__METRICS}{WINDOW\_METRICS}};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#if\ WINVER\ <\ 0x0601}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ Not\ used\ on\ Windows\ XP,\ but\ we\ still\ need\ to\ define\ it.}}
\DoxyCodeLine{00041\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structtagTOUCHINPUT}{tagTOUCHINPUT}}\ \{}
\DoxyCodeLine{00042\ \ \ LONG\ x;}
\DoxyCodeLine{00043\ \ \ LONG\ y;}
\DoxyCodeLine{00044\ \ \ HANDLE\ hSource;}
\DoxyCodeLine{00045\ \ \ DWORD\ dwID;}
\DoxyCodeLine{00046\ \ \ DWORD\ dwFlags;}
\DoxyCodeLine{00047\ \ \ DWORD\ dwMask;}
\DoxyCodeLine{00048\ \ \ DWORD\ dwTime;}
\DoxyCodeLine{00049\ \ \ ULONG\_PTR\ dwExtraInfo;}
\DoxyCodeLine{00050\ \ \ DWORD\ cxContact;}
\DoxyCodeLine{00051\ \ \ DWORD\ cyContact;}
\DoxyCodeLine{00052\ \}\ \mbox{\hyperlink{structtagTOUCHINPUT}{TOUCHINPUT}},\ *\mbox{\hyperlink{structtagTOUCHINPUT}{PTOUCHINPUT}};}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{class\ }EXPCL\_PANDAWIN\ \mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classGraphicsWindow}{GraphicsWindow}}\ \{}
\DoxyCodeLine{00065\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}}\ *pipe,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&name,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ \&fb\_prop,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&win\_prop,}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *host);}
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classWinGraphicsWindow}{\string~WinGraphicsWindow}}();}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPointerData}{PointerData}}\ \mbox{\hyperlink{classGraphicsWindow_a738bdbbf23a0bebbaf2914858e73440f}{get\_pointer}}(\textcolor{keywordtype}{int}\ device)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00076\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGraphicsWindow_a23730a7be129d514419f0903b36bed86}{move\_pointer}}(\textcolor{keywordtype}{int}\ device,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGraphicsWindow_a9320c164027366893e4f5494897c1939}{close\_ime}}();}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGraphicsWindow_ac73229408c1c588f30e690a8f4947917}{process\_events}}();}
\DoxyCodeLine{00081\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGraphicsWindow_adeb1896f5f72fd2959b76dbfb8ca1fe9}{set\_properties\_now}}(\mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&properties);}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordtype}{void}\ receive\_windows\_message(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ msg,\ \textcolor{keywordtype}{int}\ wparam,\ \textcolor{keywordtype}{int}\ lparam);}
\DoxyCodeLine{00083\ \ \ \textcolor{keyword}{virtual}\ LONG\ window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam);}
\DoxyCodeLine{00084\ \ \ \textcolor{keyword}{static}\ LONG\ WINAPI\ static\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam);}
\DoxyCodeLine{00085\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ handle\_mouse\_motion(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y);}
\DoxyCodeLine{00086\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ handle\_mouse\_exit();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ INLINE\ HWND\ get\_ime\_hwnd();}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ add\_window\_proc(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGraphicsWindowProc}{GraphicsWindowProc}}*\ wnd\_proc\_object\ );}
\DoxyCodeLine{00091\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ remove\_window\_proc(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGraphicsWindowProc}{GraphicsWindowProc}}*\ wnd\_proc\_object\ );}
\DoxyCodeLine{00092\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ clear\_window\_procs();}
\DoxyCodeLine{00093\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGraphicsWindow_acf325148fd9ea2be043e0aca9398af29}{supports\_window\_procs}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGraphicsWindow_a21c0ba2607b969ea5ce39b5038249308}{is\_touch\_event}}(\mbox{\hyperlink{classGraphicsWindowProcCallbackData}{GraphicsWindowProcCallbackData}}*\ callbackData);}
\DoxyCodeLine{00096\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classGraphicsWindow_a95020e13b5a7bc766099dad1b8a4af64}{get\_num\_touches}}();}
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTouchInfo}{TouchInfo}}\ \mbox{\hyperlink{classGraphicsWindow_ae2e8bbc13e7f7c05621b341546c25ea9}{get\_touch\_info}}(\textcolor{keywordtype}{int}\ index);}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00100\ \ \ \textcolor{keywordtype}{void}\ trigger\_flip();}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGraphicsWindow_ac9416f2e970aea3f5233c90e79b2a1ff}{close\_window}}();}
\DoxyCodeLine{00102\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGraphicsWindow_a74bf91d5896d89c13bc7d9c72b7f3009}{open\_window}}();}
\DoxyCodeLine{00103\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ fullscreen\_minimized(\mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&properties);}
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ fullscreen\_restored(\mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&properties);}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGraphicsWindow_a073386f275477332edaee9e53dc09bf8}{do\_reshape\_request}}(\textcolor{keywordtype}{int}\ x\_origin,\ \textcolor{keywordtype}{int}\ y\_origin,\ \textcolor{keywordtype}{bool}\ has\_origin,}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ handle\_reshape();}
\DoxyCodeLine{00110\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ do\_fullscreen\_resize(\textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \textcolor{keywordtype}{bool}\ do\_fullscreen\_switch(\textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ do\_fullscreen\_switch();}
\DoxyCodeLine{00114\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ do\_windowed\_switch();}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{bool}\ do\_fullscreen\_enable(\textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00116\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ do\_fullscreen\_enable();}
\DoxyCodeLine{00117\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ do\_fullscreen\_disable();}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ calculate\_metrics(\textcolor{keywordtype}{bool}\ fullscreen,\ DWORD\ style,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structWINDOW__METRICS}{WINDOW\_METRICS}}\ \&metrics,\ \textcolor{keywordtype}{bool}\ \&has\_origin);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ DWORD\ make\_style(\textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&properties);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ reconsider\_fullscreen\_size(DWORD\ \&x\_size,\ DWORD\ \&y\_size,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DWORD\ \&bitdepth);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ support\_overlay\_window(\textcolor{keywordtype}{bool}\ flag);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordtype}{bool}\ open\_graphic\_window();}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{void}\ adjust\_z\_order();}
\DoxyCodeLine{00132\ \ \ \textcolor{keywordtype}{void}\ adjust\_z\_order(WindowProperties::ZOrder\ last\_z\_order,}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WindowProperties::ZOrder\ this\_z\_order);}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordtype}{void}\ initialize\_input\_devices();}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordtype}{bool}\ enable\_raw\_input();}
\DoxyCodeLine{00136\ \ \ \textcolor{keywordtype}{void}\ handle\_raw\_input(HRAWINPUT\ hraw);}
\DoxyCodeLine{00137\ \ \ \textcolor{keywordtype}{void}\ track\_mouse\_leaving(HWND\ hwnd);}
\DoxyCodeLine{00138\ \ \ \textcolor{keywordtype}{bool}\ confine\_cursor();}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordtype}{void}\ set\_focus();}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ process\_1\_event();}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \textcolor{keywordtype}{void}\ handle\_keypress(\mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ key,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{double}\ time);}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{void}\ handle\_keyresume(\mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ key,\ \textcolor{keywordtype}{double}\ time);}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordtype}{void}\ handle\_keyrelease(\mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ key,\ \textcolor{keywordtype}{double}\ time);}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordtype}{void}\ handle\_raw\_keypress(\mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ key,\ \textcolor{keywordtype}{double}\ time);}
\DoxyCodeLine{00147\ \ \ \textcolor{keywordtype}{void}\ handle\_raw\_keyrelease(\mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ key,\ \textcolor{keywordtype}{double}\ time);}
\DoxyCodeLine{00148\ \ \ \mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ lookup\_key(WPARAM\ wparam)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{classButtonHandle}{ButtonHandle}}\ lookup\_raw\_key(LPARAM\ lparam)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00150\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classButtonMap}{ButtonMap}}\ *\mbox{\hyperlink{classGraphicsWindow_af42c2aea7300bdcab1409bf6a766728f}{get\_keyboard\_map}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ \ \ INLINE\ \textcolor{keywordtype}{int}\ translate\_mouse(\textcolor{keywordtype}{int}\ pos)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00152\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_cursor\_in\_window();}
\DoxyCodeLine{00153\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_cursor\_out\_of\_window();}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ get\_message\_time();}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \textcolor{keywordtype}{void}\ resend\_lost\_keypresses();}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ release\_all\_buttons();}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ update\_cursor\_window(\mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ *to\_window);}
\DoxyCodeLine{00160\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ hide\_or\_show\_cursor(\textcolor{keywordtype}{bool}\ hide\_cursor);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ find\_acceptable\_display\_mode(DWORD\ dwWidth,\ DWORD\ dwHeight,}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DWORD\ bpp,\ DEVMODE\ \&dm);}
\DoxyCodeLine{00164\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_error\_message(DWORD\ message\_id\ =\ 0);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00167\ \ \ HWND\ \_hWnd;}
\DoxyCodeLine{00168\ \ \ HWND\ \_hparent;}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00171\ \ \ HWND\ \_ime\_hWnd;}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{bool}\ \_ime\_open;}
\DoxyCodeLine{00173\ \ \ \textcolor{keywordtype}{bool}\ \_ime\_active;}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{bool}\ \_tracking\_mouse\_leaving;}
\DoxyCodeLine{00175\ \ \ HANDLE\ \_input\_device\_handle[32];}
\DoxyCodeLine{00176\ \ \ HCURSOR\ \_cursor;}
\DoxyCodeLine{00177\ \ \ DEVMODE\ \_fullscreen\_display\_mode;}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{bool}\ \_lost\_keypresses;}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ These\ are\ used\ to\ store\ the\ status\ of\ the\ individual\ left\ and\ right}}
\DoxyCodeLine{00182\ \ \ \textcolor{comment}{//\ shift,\ control,\ and\ alt\ keys.\ \ Keyboard\ events\ are\ not\ sent\ for\ these}}
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//\ individual\ keys,\ but\ for\ each\ pair\ as\ a\ whole.\ \ The\ status\ of\ each\ key}}
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ must\ be\ checked\ as\ keypress\ and\ keyrelease\ events\ are\ received.}}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{bool}\ \_lshift\_down;}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordtype}{bool}\ \_rshift\_down;}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordtype}{bool}\ \_lcontrol\_down;}
\DoxyCodeLine{00188\ \ \ \textcolor{keywordtype}{bool}\ \_rcontrol\_down;}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordtype}{bool}\ \_lalt\_down;}
\DoxyCodeLine{00190\ \ \ \textcolor{keywordtype}{bool}\ \_ralt\_down;}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \mbox{\hyperlink{classGraphicsWindowInputDevice}{GraphicsWindowInputDevice}}\ *\_input;}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordtype}{bool}\ \_raw\_input\_enabled\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ following\ adds\ support\ platform\ specfic\ window\ processing\ functions.}}
\DoxyCodeLine{00196\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset<GraphicsWindowProc*>}}\ \mbox{\hyperlink{classpset}{WinProcClasses}};}
\DoxyCodeLine{00197\ \ \ \mbox{\hyperlink{classpset}{WinProcClasses}}\ \_window\_proc\_classes;}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ UINT\ \_num\_touches;}
\DoxyCodeLine{00200\ \ \ \mbox{\hyperlink{structtagTOUCHINPUT}{TOUCHINPUT}}\ \_touches[MAX\_TOUCHES];}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \textcolor{keywordtype}{bool}\ \_in\_adjust\_z\_order\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ We\ need\ this\ map\ to\ support\ per-\/window\ calls\ to\ window\_proc().}}
\DoxyCodeLine{00206\ \ \ \textcolor{keyword}{typedef}\ std::map<HWND,\ WinGraphicsWindow\ *>\ WindowHandles;}
\DoxyCodeLine{00207\ \ \ \textcolor{keyword}{static}\ WindowHandles\ \_window\_handles;}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{//\ And\ we\ need\ a\ static\ pointer\ to\ the\ current\ WinGraphicsWindow\ we\ are}}
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ creating\ at\ the\ moment,\ since\ CreateWindow()\ starts\ generating\ window}}
\DoxyCodeLine{00211\ \ \ \textcolor{comment}{//\ events\ before\ it\ gives\ us\ the\ window\ handle.}}
\DoxyCodeLine{00212\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ *\_creating\_window;}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \textcolor{comment}{/*}}
\DoxyCodeLine{00215\ \textcolor{comment}{\ *\ This\ tracks\ the\ current\ GraphicsWindow\ whose\ client\ area\ contains\ the}}
\DoxyCodeLine{00216\ \textcolor{comment}{\ *\ mouse.\ \ There\ will\ only\ be\ one\ of\ these\ at\ a\ time,\ and\ storing\ the\ pointer}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ *\ here\ allows\ us\ to\ handle\ ambiguities\ in\ the\ order\ in\ which\ messages\ are}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ *\ passed\ from\ Windows\ to\ the\ various\ windows\ we\ manage.\ \ This\ pointer\ is\ used}}
\DoxyCodeLine{00219\ \textcolor{comment}{\ *\ by\ set\_cursor\_in\_window()\ to\ determine\ when\ it\ is\ time\ to\ call}}
\DoxyCodeLine{00220\ \textcolor{comment}{\ *\ update\_cursor()\ to\ hide\ the\ cursor\ (or\ do\ other\ related\ operations).}}
\DoxyCodeLine{00221\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00222\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ *\_cursor\_window;}
\DoxyCodeLine{00223\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_cursor\_hidden;}
\DoxyCodeLine{00224\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_got\_saved\_params;}
\DoxyCodeLine{00225\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \_saved\_mouse\_trails;}
\DoxyCodeLine{00226\ \ \ \textcolor{keyword}{static}\ BOOL\ \_saved\_cursor\_shadow;}
\DoxyCodeLine{00227\ \ \ \textcolor{keyword}{static}\ BOOL\ \_saved\_mouse\_vanish;}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ The\ mouse\ constraints\ before\ applying\ mouse\ mode\ M\_confined.}}
\DoxyCodeLine{00230\ \ \ \textcolor{keyword}{static}\ RECT\ \_mouse\_unconfined\_cliprect;}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ Since\ the\ Panda\ API\ requests\ icons\ and\ cursors\ by\ filename,\ we\ need\ a}}
\DoxyCodeLine{00233\ \ \ \textcolor{comment}{//\ table\ mapping\ filenames\ to\ handles,\ so\ we\ can\ avoid\ re-\/reading\ the\ file}}
\DoxyCodeLine{00234\ \ \ \textcolor{comment}{//\ each\ time\ we\ change\ icons.}}
\DoxyCodeLine{00235\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<Filename,\ HANDLE>}}\ \mbox{\hyperlink{classpmap}{IconFilenames}};}
\DoxyCodeLine{00236\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classpmap}{IconFilenames}}\ \_icon\_filenames;}
\DoxyCodeLine{00237\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classpmap}{IconFilenames}}\ \_cursor\_filenames;}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \textcolor{keyword}{static}\ HICON\ get\_icon(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&filename);}
\DoxyCodeLine{00240\ \ \ \textcolor{keyword}{static}\ HCURSOR\ get\_cursor(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&filename);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{//\ The\ table\ of\ window\ classes\ we\ have\ registered.\ \ We\ need\ to\ register\ a}}
\DoxyCodeLine{00243\ \ \ \textcolor{comment}{//\ different\ window\ class\ for\ each\ different\ window\ icon\ (the\ cursor\ we\ can}}
\DoxyCodeLine{00244\ \ \ \textcolor{comment}{//\ specify\ dynamically,\ later).\ \ We\ might\ have\ other\ requirements\ too,}}
\DoxyCodeLine{00245\ \ \ \textcolor{comment}{//\ later.}}
\DoxyCodeLine{00246\ \ \ \textcolor{keyword}{class\ }WindowClass\ \{}
\DoxyCodeLine{00247\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00248\ \ \ \ \ INLINE\ WindowClass(\textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&props);}
\DoxyCodeLine{00249\ \ \ \ \ INLINE\ \textcolor{keywordtype}{bool}\ operator\ <\ (\textcolor{keyword}{const}\ WindowClass\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ std::wstring\ \_name;}
\DoxyCodeLine{00252\ \ \ \ \ HICON\ \_icon;}
\DoxyCodeLine{00253\ \ \ \};}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset<WindowClass>}}\ \mbox{\hyperlink{classpset}{WindowClasses}};}
\DoxyCodeLine{00256\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classpset}{WindowClasses}}\ \_window\_classes;}
\DoxyCodeLine{00257\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \_window\_class\_index;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ WindowClass\ \&register\_window\_class(\textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&props);}
\DoxyCodeLine{00260\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{//\ This\ subclass\ of\ WindowHandle\ is\ stored\ in\ \_window\_handle\ to\ represent}}
\DoxyCodeLine{00262\ \ \ \textcolor{comment}{//\ this\ particular\ window.\ \ We\ use\ it\ to\ add\ hooks\ for\ communicating\ with}}
\DoxyCodeLine{00263\ \ \ \textcolor{comment}{//\ the\ parent\ window,\ in\ particular\ to\ receive\ keyboard\ events\ from\ the}}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ parent\ window\ when\ necessary.}}
\DoxyCodeLine{00265\ \ \ \textcolor{keyword}{class\ }WinWindowHandle\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classWindowHandle}{WindowHandle}}\ \{}
\DoxyCodeLine{00266\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00267\ \ \ \ \ WinWindowHandle(\mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ *window,}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowHandle}{WindowHandle}}\ \&copy);}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordtype}{void}\ clear\_window();}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ receive\_windows\_message(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ msg,\ \textcolor{keywordtype}{int}\ wparam,\ \textcolor{keywordtype}{int}\ lparam);}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{comment}{//\ Not\ reference-\/counted,\ to\ avoid\ a\ circular\ reference\ count.}}
\DoxyCodeLine{00276\ \ \ \ \ \mbox{\hyperlink{classWinGraphicsWindow}{WinGraphicsWindow}}\ *\_window;}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00283\ \ \ \ \ \ \ WindowHandle::init\_type();}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}WinWindowHandle"{}},}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WindowHandle::get\_class\_type());}
\DoxyCodeLine{00286\ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ force\_init\_type()\ \{init\_type();\ \textcolor{keywordflow}{return}\ get\_class\_type();\}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00294\ \ \ \};}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00297\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00299\ \ \ \}}
\DoxyCodeLine{00300\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00301\ \ \ \ \ GraphicsWindow::init\_type();}
\DoxyCodeLine{00302\ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}WinGraphicsWindow"{}},}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GraphicsWindow::get\_class\_type());}
\DoxyCodeLine{00304\ \ \ \ \ WinWindowHandle::init\_type();}
\DoxyCodeLine{00305\ \ \ \}}
\DoxyCodeLine{00306\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00308\ \ \ \}}
\DoxyCodeLine{00309\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ force\_init\_type()\ \{init\_type();\ \textcolor{keywordflow}{return}\ get\_class\_type();\}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00312\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00313\ \};}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#define\ PRINT\_LAST\_ERROR\ 0}}
\DoxyCodeLine{00316\ \textcolor{keyword}{extern}\ EXPCL\_PANDAWIN\ \textcolor{keywordtype}{void}\ PrintErrorMessage(DWORD\ msgID);}
\DoxyCodeLine{00317\ \textcolor{keyword}{extern}\ EXPCL\_PANDAWIN\ \textcolor{keywordtype}{void}\ ClearToBlack(HWND\ hWnd,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&props);}
\DoxyCodeLine{00318\ \textcolor{keyword}{extern}\ EXPCL\_PANDAWIN\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{winGraphicsWindow_8h_a967a5c1c0f46c865c223f369aea4f312}{get\_client\_rect\_screen}}(HWND\ hwnd,\ RECT\ *view\_rect);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\#include\ "{}winGraphicsWindow.I"{}}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

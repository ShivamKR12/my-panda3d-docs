\doxysection{tiny\+Texture\+Context.\+cxx}
\hypertarget{tinyTextureContext_8cxx_source}{}\label{tinyTextureContext_8cxx_source}\index{panda/src/tinydisplay/tinyTextureContext.cxx@{panda/src/tinydisplay/tinyTextureContext.cxx}}
\mbox{\hyperlink{tinyTextureContext_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tinyTextureContext_8h}{tinyTextureContext.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}zgl.h"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ TinyTextureContext::\_type\_handle;}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ \mbox{\hyperlink{classTinyTextureContext_a8c4b209b56b5d2e74067335bf2e6b688}{TinyTextureContext::}}}
\DoxyCodeLine{00023\ \mbox{\hyperlink{classTinyTextureContext_a8c4b209b56b5d2e74067335bf2e6b688}{\string~TinyTextureContext}}()\ \{}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{structGLTexture}{GLTexture}}\ *gltex\ =\ \&\_gltex;}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{if}\ (gltex-\/>allocated\_buffer\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00026\ \ \ \ \ nassertv(gltex-\/>num\_levels\ !=\ 0);}
\DoxyCodeLine{00027\ \ \ \ \ get\_class\_type().\mbox{\hyperlink{classTypeHandle_a532dfc7c439beb0aadb5ed26781b35c8}{deallocate\_array}}(gltex-\/>allocated\_buffer);}
\DoxyCodeLine{00028\ \ \ \ \ gltex-\/>allocated\_buffer\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00029\ \ \ \ \ gltex-\/>total\_bytecount\ =\ 0;}
\DoxyCodeLine{00030\ \ \ \ \ gltex-\/>num\_levels\ =\ 0;}
\DoxyCodeLine{00031\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00032\ \ \ \ \ nassertv(gltex-\/>num\_levels\ ==\ 0);}
\DoxyCodeLine{00033\ \ \ \}}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{if}\ (gltex-\/>views\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00035\ \ \ \ \ nassertv(gltex-\/>num\_views\ !=\ 0);}
\DoxyCodeLine{00036\ \ \ \ \ get\_class\_type().\mbox{\hyperlink{classTypeHandle_a532dfc7c439beb0aadb5ed26781b35c8}{deallocate\_array}}(gltex-\/>views);}
\DoxyCodeLine{00037\ \ \ \ \ gltex-\/>views\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00038\ \ \ \ \ gltex-\/>num\_views\ =\ 0;}
\DoxyCodeLine{00039\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00040\ \ \ \ \ nassertv(gltex-\/>num\_views\ ==\ 0);}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00054\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTinyTextureContext_a2b3eef005e7a533f743343f33853b168}{TinyTextureContext::}}}
\DoxyCodeLine{00055\ \mbox{\hyperlink{classTinyTextureContext_a2b3eef005e7a533f743343f33853b168}{evict\_lru}}()\ \{}
\DoxyCodeLine{00056\ \ \ dequeue\_lru();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \mbox{\hyperlink{structGLTexture}{GLTexture}}\ *gltex\ =\ \&\_gltex;}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{if}\ (gltex-\/>allocated\_buffer\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00060\ \ \ \ \ nassertv(gltex-\/>num\_levels\ !=\ 0);}
\DoxyCodeLine{00061\ \ \ \ \ get\_class\_type().\mbox{\hyperlink{classTypeHandle_a532dfc7c439beb0aadb5ed26781b35c8}{deallocate\_array}}(gltex-\/>allocated\_buffer);}
\DoxyCodeLine{00062\ \ \ \ \ gltex-\/>allocated\_buffer\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00063\ \ \ \ \ gltex-\/>total\_bytecount\ =\ 0;}
\DoxyCodeLine{00064\ \ \ \ \ gltex-\/>num\_levels\ =\ 0;}
\DoxyCodeLine{00065\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00066\ \ \ \ \ nassertv(gltex-\/>num\_levels\ ==\ 0);}
\DoxyCodeLine{00067\ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ update\_data\_size\_bytes(0);}
\DoxyCodeLine{00070\ \ \ mark\_unloaded();}
\DoxyCodeLine{00071\ \}}

\end{DoxyCode}

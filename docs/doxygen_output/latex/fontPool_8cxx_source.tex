\doxysection{font\+Pool.\+cxx}
\hypertarget{fontPool_8cxx_source}{}\label{fontPool_8cxx_source}\index{panda/src/text/fontPool.cxx@{panda/src/text/fontPool.cxx}}
\mbox{\hyperlink{fontPool_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{fontPool_8h}{fontPool.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{staticTextFont_8h}{staticTextFont.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dynamicTextFont_8h}{dynamicTextFont.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__putil_8h}{config\_putil.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__express_8h}{config\_express.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{virtualFileSystem_8h}{virtualFileSystem.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nodePath_8h}{nodePath.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{loader_8h}{loader.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightMutexHolder_8h}{lightMutexHolder.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \mbox{\hyperlink{classFontPool}{FontPool}}\ *FontPool::\_global\_ptr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00031\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00032\ write(std::ostream\ \&out)\ \{}
\DoxyCodeLine{00033\ \ \ get\_ptr()-\/>ns\_list\_contents(out);}
\DoxyCodeLine{00034\ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00039\ \textcolor{keywordtype}{bool}\ FontPool::}
\DoxyCodeLine{00040\ ns\_has\_font(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&str)\ \{}
\DoxyCodeLine{00041\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{keywordtype}{string}\ index\_str;}
\DoxyCodeLine{00044\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ filename;}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{int}\ face\_index;}
\DoxyCodeLine{00046\ \ \ lookup\_filename(str,\ index\_str,\ filename,\ face\_index);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ Fonts::const\_iterator\ ti;}
\DoxyCodeLine{00049\ \ \ ti\ =\ \_fonts.find(index\_str);}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (ti\ !=\ \_fonts.end())\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ This\ font\ was\ previously\ loaded.}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00053\ \ \ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00061\ \mbox{\hyperlink{classTextFont}{TextFont}}\ *FontPool::}
\DoxyCodeLine{00062\ ns\_load\_font(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&str)\ \{}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{string}\ index\_str;}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ filename;}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{int}\ face\_index;}
\DoxyCodeLine{00066\ \ \ lookup\_filename(str,\ index\_str,\ filename,\ face\_index);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \{}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ Fonts::const\_iterator\ ti;}
\DoxyCodeLine{00072\ \ \ \ \ ti\ =\ \_fonts.find(index\_str);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{if}\ (ti\ !=\ \_fonts.end())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ font\ was\ previously\ loaded.}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*ti).second;}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ text\_cat.info()}
\DoxyCodeLine{00080\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Loading\ font\ "{}}\ <<\ filename\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{//\ Now,\ figure\ out\ how\ to\ load\ the\ font.\ \ If\ its\ filename\ extension\ is\ "{}egg"{}}}
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{//\ or\ "{}bam"{},\ or\ if\ it's\ unspecified,\ assume\ it's\ a\ model\ file,\ representing}}
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ a\ static\ font.}}
\DoxyCodeLine{00085\ \ \ PT(\mbox{\hyperlink{classTextFont}{TextFont}})\ font;}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keywordtype}{string}\ extension\ =\ filename.get\_extension();}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordflow}{if}\ (extension.empty()\ ||\ extension\ ==\ \textcolor{stringliteral}{"{}egg"{}}\ ||\ extension\ ==\ \textcolor{stringliteral}{"{}bam"{}})\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{classLoader}{Loader}}\ *model\_loader\ =\ Loader::get\_global\_ptr();}
\DoxyCodeLine{00090\ \ \ \ \ PT(\mbox{\hyperlink{classPandaNode}{PandaNode}})\ node\ =\ model\_loader-\/>load\_sync(filename);}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (node\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \textcolor{comment}{//\ It\ is\ a\ model.\ \ Elevate\ all\ the\ priorities\ by\ 1,\ and\ make\ a\ font\ out}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \textcolor{comment}{//\ of\ it.}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \textcolor{comment}{//\ On\ second\ thought,\ why\ should\ we\ elevate\ the\ priorities?\ \ The}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \textcolor{comment}{//\ DynamicTextFont\ doesn't\ do\ this,\ and\ doing\ so\ for\ the\ StaticTextFont}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \textcolor{comment}{//\ only\ causes\ problems\ (it\ changes\ the\ default\ ColorAttrib\ from\ pri\ -\/1}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \textcolor{comment}{//\ to\ pri\ 0).}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ \ NodePath\ np(node);}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ \ \ np.adjust\_all\_priorities(1);}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ \ */}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ font\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classStaticTextFont}{StaticTextFont}}(node);}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{preprocessor}{\#ifdef\ HAVE\_FREETYPE}}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{if}\ (font\ ==\ \textcolor{keyword}{nullptr}\ ||\ !font-\/>is\_valid())\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ If\ we\ couldn't\ load\ the\ font\ as\ a\ model,\ try\ using\ FreeType\ to\ load\ it}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ as\ a\ font\ file.}}
\DoxyCodeLine{00112\ \ \ \ \ font\ =\ \textcolor{keyword}{new}\ DynamicTextFont(filename,\ face\_index);}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{if}\ (font\ ==\ \textcolor{keyword}{nullptr}\ ||\ !font-\/>is\_valid())\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ This\ font\ was\ not\ found\ or\ could\ not\ be\ read.}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00119\ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \{}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ Look\ again.\ \ It\ may\ have\ been\ loaded\ by\ another\ thread.}}
\DoxyCodeLine{00126\ \ \ \ \ Fonts::const\_iterator\ ti;}
\DoxyCodeLine{00127\ \ \ \ \ ti\ =\ \_fonts.find(index\_str);}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (ti\ !=\ \_fonts.end())\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ font\ was\ previously\ loaded.}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (*ti).second;}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \_fonts[index\_str]\ =\ font;}
\DoxyCodeLine{00134\ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \textcolor{keywordflow}{return}\ font;}
\DoxyCodeLine{00137\ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00142\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00143\ ns\_add\_font(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&str,\ \mbox{\hyperlink{classTextFont}{TextFont}}\ *font)\ \{}
\DoxyCodeLine{00144\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \textcolor{keywordtype}{string}\ index\_str;}
\DoxyCodeLine{00147\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ filename;}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordtype}{int}\ face\_index;}
\DoxyCodeLine{00149\ \ \ lookup\_filename(str,\ index\_str,\ filename,\ face\_index);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{//\ We\ blow\ away\ whatever\ font\ was\ there\ previously,\ if\ any.}}
\DoxyCodeLine{00152\ \ \ \_fonts[index\_str]\ =\ font;}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00158\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00159\ ns\_release\_font(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&str)\ \{}
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{keywordtype}{string}\ index\_str;}
\DoxyCodeLine{00163\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ filename;}
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{int}\ face\_index;}
\DoxyCodeLine{00165\ \ \ lookup\_filename(str,\ index\_str,\ filename,\ face\_index);}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ Fonts::iterator\ ti;}
\DoxyCodeLine{00168\ \ \ ti\ =\ \_fonts.find(index\_str);}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordflow}{if}\ (ti\ !=\ \_fonts.end())\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \_fonts.erase(ti);}
\DoxyCodeLine{00171\ \ \ \}}
\DoxyCodeLine{00172\ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00177\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00178\ ns\_release\_all\_fonts()\ \{}
\DoxyCodeLine{00179\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \_fonts.clear();}
\DoxyCodeLine{00182\ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00187\ \textcolor{keywordtype}{int}\ FontPool::}
\DoxyCodeLine{00188\ ns\_garbage\_collect()\ \{}
\DoxyCodeLine{00189\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{keywordtype}{int}\ num\_released\ =\ 0;}
\DoxyCodeLine{00192\ \ \ Fonts\ new\_set;}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ Fonts::iterator\ ti;}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{for}\ (ti\ =\ \_fonts.begin();\ ti\ !=\ \_fonts.end();\ ++ti)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \mbox{\hyperlink{classTextFont}{TextFont}}\ *font\ =\ (*ti).second;}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{if}\ (font-\/>get\_ref\_count()\ ==\ 1)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (text\_cat.is\_debug())\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ text\_cat.debug()}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Releasing\ "{}}\ <<\ (*ti).first\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ num\_released++;}
\DoxyCodeLine{00203\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ new\_set.insert(new\_set.end(),\ *ti);}
\DoxyCodeLine{00205\ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \_fonts.swap(new\_set);}
\DoxyCodeLine{00209\ \ \ \textcolor{keywordflow}{return}\ num\_released;}
\DoxyCodeLine{00210\ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00215\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00216\ ns\_list\_contents(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00217\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ out\ <<\ \_fonts.size()\ <<\ \textcolor{stringliteral}{"{}\ fonts:\(\backslash\)n"{}};}
\DoxyCodeLine{00220\ \ \ Fonts::const\_iterator\ ti;}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{for}\ (ti\ =\ \_fonts.begin();\ ti\ !=\ \_fonts.end();\ ++ti)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \mbox{\hyperlink{classTextFont}{TextFont}}\ *font\ =\ (*ti).second;}
\DoxyCodeLine{00223\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ \ "{}}\ <<\ (*ti).first}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ (count\ =\ "{}}\ <<\ font-\/>get\_ref\_count()\ <<\ \textcolor{stringliteral}{"{})\(\backslash\)n"{}};}
\DoxyCodeLine{00225\ \ \ \}}
\DoxyCodeLine{00226\ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00236\ \textcolor{keywordtype}{void}\ FontPool::}
\DoxyCodeLine{00237\ lookup\_filename(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&str,\ \textcolor{keywordtype}{string}\ \&index\_str,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ \&filename,\ \textcolor{keywordtype}{int}\ \&face\_index)\ \{}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordtype}{int}\ colon\ =\ (int)str.length()\ -\/\ 1;}
\DoxyCodeLine{00240\ \ \ \textcolor{comment}{//\ Scan\ backwards\ over\ digits\ for\ a\ colon.}}
\DoxyCodeLine{00241\ \ \ \textcolor{keywordflow}{while}\ (colon\ >=\ 0\ \&\&\ isdigit(str[colon]))\ \{}
\DoxyCodeLine{00242\ \ \ \ \ -\/-\/colon;}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ \ \ \textcolor{keywordflow}{if}\ (colon\ >=\ 0\ \&\&\ str[colon]\ ==\ \textcolor{charliteral}{':'})\ \{}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{string}\ digits\ =\ str.substr(colon\ +\ 1);}
\DoxyCodeLine{00246\ \ \ \ \ filename\ =\ str.substr(0,\ colon);}
\DoxyCodeLine{00247\ \ \ \ \ face\_index\ =\ atoi(digits.c\_str());}
\DoxyCodeLine{00248\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00249\ \ \ \ \ filename\ =\ str;}
\DoxyCodeLine{00250\ \ \ \ \ face\_index\ =\ 0;}
\DoxyCodeLine{00251\ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ Now\ look\ up\ the\ filename\ on\ the\ model\ path.}}
\DoxyCodeLine{00254\ \ \ \mbox{\hyperlink{classVirtualFileSystem}{VirtualFileSystem}}\ *vfs\ =\ VirtualFileSystem::get\_global\_ptr();}
\DoxyCodeLine{00255\ \ \ vfs-\/>resolve\_filename(filename,\ get\_model\_path());}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \mbox{\hyperlink{classstd_1_1ostringstream}{std::ostringstream}}\ strm;}
\DoxyCodeLine{00258\ \ \ strm\ <<\ filename\ <<\ \textcolor{stringliteral}{"{}:"{}}\ <<\ face\_index;}
\DoxyCodeLine{00259\ \ \ index\_str\ =\ strm.str();}
\DoxyCodeLine{00260\ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00266\ \mbox{\hyperlink{classFontPool}{FontPool}}\ *FontPool::}
\DoxyCodeLine{00267\ get\_ptr()\ \{}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{if}\ (\_global\_ptr\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \_global\_ptr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classFontPool}{FontPool}};}
\DoxyCodeLine{00270\ \ \ \}}
\DoxyCodeLine{00271\ \ \ \textcolor{keywordflow}{return}\ \_global\_ptr;}
\DoxyCodeLine{00272\ \}}

\end{DoxyCode}

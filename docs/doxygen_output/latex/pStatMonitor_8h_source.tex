\doxysection{p\+Stat\+Monitor.\+h}
\hypertarget{pStatMonitor_8h_source}{}\label{pStatMonitor_8h_source}\index{pandatool/src/pstatserver/pStatMonitor.h@{pandatool/src/pstatserver/pStatMonitor.h}}
\mbox{\hyperlink{pStatMonitor_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ PSTATMONITOR\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ PSTATMONITOR\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandatoolbase_8h}{pandatoolbase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatClientData_8h}{pStatClientData.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatView_8h}{pStatView.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{referenceCount_8h}{referenceCount.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{luse_8h}{luse.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}};}
\DoxyCodeLine{00029\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatGraph}{PStatGraph}};}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatServer}{PStatServer}};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ \{}
\DoxyCodeLine{00041\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ The\ following\ functions\ are\ primarily\ for\ use\ by\ internal\ classes\ to\ set}}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ up\ the\ monitor.}}
\DoxyCodeLine{00044\ \ \ \mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}(\mbox{\hyperlink{classPStatServer}{PStatServer}}\ *server\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatMonitor}{\string~PStatMonitor}}();}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a9c99005c8196153073e759a2d0d54bbd}{hello\_from}}(\textcolor{keyword}{const}\ std::string\ \&hostname,\ \textcolor{keyword}{const}\ std::string\ \&progname,}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pid);}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a46ff476016645d996df8e54dca2a5a71}{bad\_version}}(\textcolor{keyword}{const}\ std::string\ \&hostname,\ \textcolor{keyword}{const}\ std::string\ \&progname,}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pid,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ client\_major,\ \textcolor{keywordtype}{int}\ client\_minor,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ server\_major,\ \textcolor{keywordtype}{int}\ server\_minor);}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a424ba0b66c327e793a7aef9260946ac8}{set\_client\_data}}(\mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data);}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_aace5334b65153a6e02b9853cad6f915e}{write}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&fn)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a0e003c0bf21c1d000fd41185a261412b}{read}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&fn);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}();}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a002afbd26111ae231bc865c1873a5aff}{save\_default\_graphs}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ The\ following\ functions\ are\ for\ use\ by\ user\ code\ to\ determine\ information}}
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ about\ the\ client\ data\ available.}}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_ab078853264c369bb4e2295cef87fbaa5}{is\_alive}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{close}}();}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ INLINE\ \mbox{\hyperlink{classPStatServer}{PStatServer}}\ *get\_server();}
\DoxyCodeLine{00067\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *get\_client\_data()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00068\ \ \ INLINE\ std::string\ get\_collector\_name(\textcolor{keywordtype}{int}\ collector\_index);}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{const}\ LRGBColor\ \&\mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{get\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index);}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a9f50836f722b9738e258b90a65402855}{set\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keyword}{const}\ LRGBColor\ \&\mbox{\hyperlink{structcolor}{color}});}
\DoxyCodeLine{00071\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a5bb70f1407a516074a7fa71a724c9137}{clear\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index);}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_client\_known()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00074\ \ \ INLINE\ std::string\ get\_client\_hostname()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00075\ \ \ INLINE\ std::string\ get\_client\_progname()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00076\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_client\_pid()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_read\_filename()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00078\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&get\_read\_filename()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\textcolor{keywordtype}{int}\ thread\_index);}
\DoxyCodeLine{00081\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&\mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{int}\ thread\_index);}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \textcolor{comment}{//\ The\ following\ virtual\ methods\ may\ be\ overridden\ by\ a\ derived\ monitor}}
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ class\ to\ customize\ behavior.}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keyword}{virtual}\ std::string\ get\_monitor\_name()=0;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a4f6bd302d4a1e029c8f89058b6495b58}{initialized}}();}
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a04677a5732061e83d61e78549b3f056c}{got\_hello}}();}
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aabfbfe8a5deaf26de30d5d87867e952b}{got\_bad\_version}}(\textcolor{keywordtype}{int}\ client\_major,\ \textcolor{keywordtype}{int}\ client\_minor,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ server\_major,\ \textcolor{keywordtype}{int}\ server\_minor);}
\DoxyCodeLine{00092\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_aa8479c401e3c517b15865ccccd133c39}{new\_collector}}(\textcolor{keywordtype}{int}\ collector\_index);}
\DoxyCodeLine{00093\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_abb727676843b37f233da4f8997a16cc2}{new\_thread}}(\textcolor{keywordtype}{int}\ thread\_index);}
\DoxyCodeLine{00094\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a4bc7717cc967e0e4eb861979210b3aba}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number);}
\DoxyCodeLine{00095\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_ae23d79e0e27774d3ce19d4c4d4519765}{remove\_thread}}(\textcolor{keywordtype}{int}\ thread\_index);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a031beffdda0cb7849b486ab8736f04d2}{lost\_connection}}();}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a20f9ef2533122ec6394066f33e26c732}{idle}}();}
\DoxyCodeLine{00099\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_a7f8a6afaafdf7482600ec3aee96ba68e}{has\_idle}}();}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatMonitor_ad199aab6e022c13dada6b9429ca1e69e}{is\_thread\_safe}}();}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a6e39c108708b043847909be7a1b7f8ee}{user\_guide\_bars\_changed}}();}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_ac624bc669de170e76dd7dbce557c4aa1}{open\_timeline}}();}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a16f747de6c185cef0802f114c413ddba}{open\_strip\_chart}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level);}
\DoxyCodeLine{00107\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a1b28b7f667978981b41b5ed393161ed8}{open\_flame\_graph}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index\ =\ -\/1,\ \textcolor{keywordtype}{int}\ frame\_number\ =\ -\/1);}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classPStatMonitor_a344e95530770709157e7780b90608cda}{open\_piano\_roll}}(\textcolor{keywordtype}{int}\ thread\_index);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a8d27e35f8e7df7e7519f1f8ed922b5af}{write\_datagram}}(\mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatMonitor_a0f0f06a831ee530c86a8166d65280a76}{read\_datagram}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan);}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00114\ \ \ \mbox{\hyperlink{classPStatServer}{PStatServer}}\ *\_server;}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00117\ \ \ PT(\mbox{\hyperlink{classPStatClientData}{PStatClientData}})\ \_client\_data;}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \textcolor{keywordtype}{bool}\ \_client\_known;}
\DoxyCodeLine{00120\ \ \ std::string\ \_client\_hostname;}
\DoxyCodeLine{00121\ \ \ std::string\ \_client\_progname;}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordtype}{int}\ \_client\_pid;}
\DoxyCodeLine{00123\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ \_read\_filename;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<int,\ PStatView>}}\ \mbox{\hyperlink{classpmap}{Views}};}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classpmap}{Views}}\ \_views;}
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<int,\ Views>}}\ \mbox{\hyperlink{classpmap}{LevelViews}};}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{classpmap}{LevelViews}}\ \_level\_views;}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap<int,\ LRGBColor>}}\ \mbox{\hyperlink{classpmap}{Colors}};}
\DoxyCodeLine{00131\ \ \ \mbox{\hyperlink{classpmap}{Colors}}\ \_colors;}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00134\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset<PStatGraph\ *>}}\ \mbox{\hyperlink{classpset}{Graphs}};}
\DoxyCodeLine{00135\ \ \ \mbox{\hyperlink{classpset}{Graphs}}\ \_timelines;}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classpset}{Graphs}}\ \_strip\_charts;}
\DoxyCodeLine{00137\ \ \ \mbox{\hyperlink{classpset}{Graphs}}\ \_flame\_graphs;}
\DoxyCodeLine{00138\ \ \ \mbox{\hyperlink{classpset}{Graphs}}\ \_piano\_rolls;}
\DoxyCodeLine{00139\ \};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#include\ "{}pStatMonitor.I"{}}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

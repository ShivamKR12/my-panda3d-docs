\doxysection{transform\+State.\+h}
\hypertarget{transformState_8h_source}{}\label{transformState_8h_source}\index{panda/src/pgraph/transformState.h@{panda/src/pgraph/transformState.h}}
\mbox{\hyperlink{transformState_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ TRANSFORMSTATE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ TRANSFORMSTATE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nodeCachedReferenceCount_8h}{nodeCachedReferenceCount.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{luse_8h}{luse.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}event.h"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{updateSeq_8h}{updateSeq.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollector_8h}{pStatCollector.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomEnums_8h}{geomEnums.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightReMutex_8h}{lightReMutex.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightReMutexHolder_8h}{lightReMutexHolder.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightMutex_8h}{lightMutex.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightMutexHolder_8h}{lightMutexHolder.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__pgraph_8h}{config\_pgraph.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{deletedChain_8h}{deletedChain.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{simpleHashMap_8h}{simpleHashMap.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cacheStats_8h}{cacheStats.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{extension_8h}{extension.h}}"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classGraphicsStateGuardianBase}{GraphicsStateGuardianBase}};}
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classFactoryParams}{FactoryParams}};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_PGRAPH\ \mbox{\hyperlink{classTransformState}{TransformState}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classNodeCachedReferenceCount}{NodeCachedReferenceCount}}\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{classTransformState}{TransformState}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00059\ \ \ \mbox{\hyperlink{classTransformState}{TransformState}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&copy)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTransformState}{\string~TransformState}}();}
\DoxyCodeLine{00061\ \ \ ALLOC\_DELETED\_CHAIN(\mbox{\hyperlink{classTransformState}{TransformState}});}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&operator\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&copy)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ PUBLISHED:}
\DoxyCodeLine{00066\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ operator\ !=\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00067\ \ \ INLINE\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcompare__to}{compare\_to}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcompare__to}{compare\_to}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&other,\ \textcolor{keywordtype}{bool}\ uniquify\_matrix)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{bool}\ operator\ ==\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00070\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_hash()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_identity();}
\DoxyCodeLine{00073\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_invalid();}
\DoxyCodeLine{00074\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos(\textcolor{keyword}{const}\ LVecBase3\ \&pos);}
\DoxyCodeLine{00075\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_hpr(\textcolor{keyword}{const}\ LVecBase3\ \&hpr);}
\DoxyCodeLine{00076\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_quat(\textcolor{keyword}{const}\ LQuaternion\ \&quat);}
\DoxyCodeLine{00077\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_hpr(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&hpr);}
\DoxyCodeLine{00079\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_quat(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LQuaternion\ \&quat);}
\DoxyCodeLine{00081\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_scale(PN\_stdfloat\ scale);}
\DoxyCodeLine{00082\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_scale(\textcolor{keyword}{const}\ LVecBase3\ \&scale);}
\DoxyCodeLine{00083\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_shear(\textcolor{keyword}{const}\ LVecBase3\ \&shear);}
\DoxyCodeLine{00084\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_hpr\_scale(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&hpr,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&scale);}
\DoxyCodeLine{00087\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_quat\_scale(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LQuaternion\ \&quat,}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&scale);}
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_hpr\_scale\_shear(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&hpr,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&scale,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&shear);}
\DoxyCodeLine{00094\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_quat\_scale\_shear(\textcolor{keyword}{const}\ LVecBase3\ \&pos,}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LQuaternion\ \&quat,}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&scale,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase3\ \&shear);}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_mat(\textcolor{keyword}{const}\ LMatrix4\ \&mat);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos2d(\textcolor{keyword}{const}\ LVecBase2\ \&pos);}
\DoxyCodeLine{00102\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_rotate2d(PN\_stdfloat\ rotate);}
\DoxyCodeLine{00103\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_rotate2d(\textcolor{keyword}{const}\ LVecBase2\ \&pos,}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ rotate);}
\DoxyCodeLine{00105\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_scale2d(PN\_stdfloat\ scale);}
\DoxyCodeLine{00106\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_scale2d(\textcolor{keyword}{const}\ LVecBase2\ \&scale);}
\DoxyCodeLine{00107\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_shear2d(PN\_stdfloat\ shear);}
\DoxyCodeLine{00108\ \ \ INLINE\ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_rotate\_scale2d(\textcolor{keyword}{const}\ LVecBase2\ \&pos,}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ rotate,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase2\ \&scale);}
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_pos\_rotate\_scale\_shear2d(\textcolor{keyword}{const}\ LVecBase2\ \&pos,}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ rotate,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase2\ \&scale,}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ shear);}
\DoxyCodeLine{00115\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ make\_mat3(\textcolor{keyword}{const}\ LMatrix3\ \&mat);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_identity()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00119\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_invalid()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00120\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_singular()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00121\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_2d()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_components()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00124\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ components\_given()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00125\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ hpr\_given()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00126\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ quat\_given()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00127\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_pos()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00128\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_hpr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00129\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00130\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00131\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_identity\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00132\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_uniform\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00133\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_shear()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00134\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_nonzero\_shear()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00135\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_mat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#ifdef\ CPPPARSER}}
\DoxyCodeLine{00138\ \ \ \textcolor{comment}{//\ Force\ interrogate\ to\ make\ a\ copy\ as\ a\ temporary\ solution\ for\ \#1625.}}
\DoxyCodeLine{00139\ \ \ LPoint3\ get\_pos()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00140\ \ \ LVecBase3\ get\_hpr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00141\ \ \ LQuaternion\ get\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ \ \ LQuaternion\ get\_norm\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00143\ \ \ LVecBase3\ get\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00144\ \ \ PN\_stdfloat\ get\_uniform\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00145\ \ \ LVecBase3\ get\_shear()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00146\ \ \ LMatrix4\ get\_mat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00148\ \ \ INLINE\ \textcolor{keyword}{const}\ LPoint3\ \&get\_pos()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00149\ \ \ INLINE\ \textcolor{keyword}{const}\ LVecBase3\ \&get\_hpr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00150\ \ \ INLINE\ \textcolor{keyword}{const}\ LQuaternion\ \&get\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ \ \ INLINE\ \textcolor{keyword}{const}\ LQuaternion\ \&get\_norm\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00152\ \ \ INLINE\ \textcolor{keyword}{const}\ LVecBase3\ \&get\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00153\ \ \ INLINE\ PN\_stdfloat\ get\_uniform\_scale()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00154\ \ \ INLINE\ \textcolor{keyword}{const}\ LVecBase3\ \&get\_shear()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00155\ \ \ INLINE\ \textcolor{keyword}{const}\ LMatrix4\ \&get\_mat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00157\ \ \ INLINE\ \textcolor{keyword}{const}\ LMatrix4\ *get\_inverse\_mat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ INLINE\ LVecBase2\ get\_pos2d()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00160\ \ \ INLINE\ PN\_stdfloat\ get\_rotate2d()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00161\ \ \ INLINE\ LVecBase2\ get\_scale2d()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00162\ \ \ INLINE\ PN\_stdfloat\ get\_shear2d()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00163\ \ \ INLINE\ LMatrix3\ get\_mat3()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ MAKE\_PROPERTY(pos,\ get\_pos);}
\DoxyCodeLine{00166\ \ \ MAKE\_PROPERTY(hpr,\ get\_hpr);}
\DoxyCodeLine{00167\ \ \ MAKE\_PROPERTY(quat,\ get\_quat);}
\DoxyCodeLine{00168\ \ \ MAKE\_PROPERTY(norm\_quat,\ get\_norm\_quat);}
\DoxyCodeLine{00169\ \ \ MAKE\_PROPERTY(scale,\ get\_scale);}
\DoxyCodeLine{00170\ \ \ MAKE\_PROPERTY(shear,\ get\_shear);}
\DoxyCodeLine{00171\ \ \ MAKE\_PROPERTY(mat,\ get\_mat);}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_pos(\textcolor{keyword}{const}\ LVecBase3\ \&pos)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00174\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_hpr(\textcolor{keyword}{const}\ LVecBase3\ \&hpr)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00175\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_quat(\textcolor{keyword}{const}\ LQuaternion\ \&quat)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00176\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_scale(\textcolor{keyword}{const}\ LVecBase3\ \&scale)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00177\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_shear(\textcolor{keyword}{const}\ LVecBase3\ \&shear)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_pos2d(\textcolor{keyword}{const}\ LVecBase2\ \&pos)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00180\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_rotate2d(PN\_stdfloat\ rotate)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00181\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_scale2d(\textcolor{keyword}{const}\ LVecBase2\ \&scale)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00182\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ set\_shear2d(PN\_stdfloat\ shear)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ compose(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00185\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ invert\_compose(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ INLINE\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ get\_inverse()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00188\ \ \ INLINE\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ get\_unique()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ INLINE\ \textcolor{keywordtype}{int}\ get\_geom\_rendering(\textcolor{keywordtype}{int}\ geom\_rendering)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ unref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ INLINE\ \textcolor{keywordtype}{void}\ cache\_ref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00195\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ cache\_unref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00196\ \ \ INLINE\ \textcolor{keywordtype}{void}\ node\_ref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00197\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ node\_unref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_composition\_cache\_num\_entries()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00200\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_invert\_composition\_cache\_num\_entries()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_composition\_cache\_size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00203\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *get\_composition\_cache\_source(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00204\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *get\_composition\_cache\_result(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00205\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_invert\_composition\_cache\_size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00206\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *get\_invert\_composition\_cache\_source(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00207\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *get\_invert\_composition\_cache\_result(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordtype}{bool}\ validate\_composition\_cache()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00209\ \ \ PY\_EXTENSION(PyObject\ *get\_composition\_cache()\ \textcolor{keyword}{const});}
\DoxyCodeLine{00210\ \ \ PY\_EXTENSION(PyObject\ *get\_invert\_composition\_cache()\ \textcolor{keyword}{const});}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{keywordtype}{void}\ output(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordtype}{void}\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordtype}{void}\ write\_composition\_cache(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ get\_num\_states();}
\DoxyCodeLine{00217\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ get\_num\_unused\_states();}
\DoxyCodeLine{00218\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ clear\_cache();}
\DoxyCodeLine{00219\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ garbage\_collect();}
\DoxyCodeLine{00220\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ list\_cycles(std::ostream\ \&out);}
\DoxyCodeLine{00221\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ list\_states(std::ostream\ \&out);}
\DoxyCodeLine{00222\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ validate\_states();}
\DoxyCodeLine{00223\ \ \ PY\_EXTENSION(\textcolor{keyword}{static}\ PyObject\ *get\_states());}
\DoxyCodeLine{00224\ \ \ PY\_EXTENSION(\textcolor{keyword}{static}\ PyObject\ *get\_unused\_states());}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00227\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_states();}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ flush\_level();}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ INLINE\ \textcolor{keywordtype}{void}\ cache\_ref\_only()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00234\ \ \ INLINE\ \textcolor{keywordtype}{void}\ cache\_unref\_only()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00237\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ do\_cache\_unref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00238\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ do\_node\_unref()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{keyword}{class\ }CompositionCycleDescEntry\ \{}
\DoxyCodeLine{00241\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00242\ \ \ \ \ INLINE\ CompositionCycleDescEntry(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *obj,}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *result,}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ inverted);}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *\_obj;}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *\_result;}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordtype}{bool}\ \_inverted;}
\DoxyCodeLine{00249\ \ \ \};}
\DoxyCodeLine{00250\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<CompositionCycleDescEntry>}}\ \mbox{\hyperlink{classpvector}{CompositionCycleDesc}};}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ return\_new(\mbox{\hyperlink{classTransformState}{TransformState}}\ *state);}
\DoxyCodeLine{00253\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ return\_unique(\mbox{\hyperlink{classTransformState}{TransformState}}\ *state);}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ do\_compose(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00256\ \ \ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ do\_invert\_compose(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00257\ \ \ \textcolor{keywordtype}{void}\ detect\_and\_break\_cycles();}
\DoxyCodeLine{00258\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ r\_detect\_cycles(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *start\_state,}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *current\_state,}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ length,\ \mbox{\hyperlink{classUpdateSeq}{UpdateSeq}}\ this\_seq,}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpvector}{CompositionCycleDesc}}\ *cycle\_desc);}
\DoxyCodeLine{00262\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ r\_detect\_reverse\_cycles(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *start\_state,}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *current\_state,}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ length,\ \mbox{\hyperlink{classUpdateSeq}{UpdateSeq}}\ this\_seq,}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpvector}{CompositionCycleDesc}}\ *cycle\_desc);}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \textcolor{keywordtype}{void}\ release\_new();}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordtype}{void}\ remove\_cache\_pointers();}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ This\ mutex\ protects\ \_states.\ \ It\ also\ protects\ any\ modification\ to\ the}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{//\ cache,\ which\ is\ encoded\ in\ \_composition\_cache\ and}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ \_invert\_composition\_cache.}}
\DoxyCodeLine{00274\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classLightReMutex}{LightReMutex}}\ *\_states\_lock;}
\DoxyCodeLine{00275\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap<const\ TransformState\ *,\ std::nullptr\_t,\ indirect\_equals\_hash<const\ TransformState\ *>}}\ >\ \mbox{\hyperlink{classSimpleHashMap}{States}};}
\DoxyCodeLine{00276\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classSimpleHashMap}{States}}\ \_states;}
\DoxyCodeLine{00277\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ \_identity\_state;}
\DoxyCodeLine{00278\ \ \ \textcolor{keyword}{static}\ CPT(\mbox{\hyperlink{classTransformState}{TransformState}})\ \_invalid\_state;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \textcolor{comment}{//\ This\ iterator\ records\ the\ entry\ corresponding\ to\ this\ TransformState}}
\DoxyCodeLine{00281\ \ \ \textcolor{comment}{//\ object\ in\ the\ above\ global\ set.\ \ We\ keep\ the\ index\ around\ so\ we\ can}}
\DoxyCodeLine{00282\ \ \ \textcolor{comment}{//\ remove\ it\ when\ the\ TransformState\ destructs.}}
\DoxyCodeLine{00283\ \ \ \textcolor{keywordtype}{int}\ \_saved\_entry\ =\ -\/1;}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \textcolor{comment}{//\ This\ data\ structure\ manages\ the\ job\ of\ caching\ the\ composition\ of\ two}}
\DoxyCodeLine{00286\ \ \ \textcolor{comment}{//\ TransformStates.\ \ It's\ complicated\ because\ we\ have\ to\ be\ sure\ to\ remove}}
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{//\ the\ entry\ if\ *either*\ of\ the\ input\ TransformStates\ destructs.\ \ To}}
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ implement\ this,\ we\ always\ record\ Composition\ entries\ in\ pairs,\ one\ in}}
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{//\ each\ of\ the\ two\ involved\ TransformState\ objects.}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ The\ first\ element\ of\ the\ map\ is\ the\ object\ we\ compose\ with.\ \ This\ is\ not}}
\DoxyCodeLine{00292\ \ \ \textcolor{comment}{//\ reference\ counted\ within\ this\ map;\ instead\ we\ store\ a\ companion\ pointer}}
\DoxyCodeLine{00293\ \ \ \textcolor{comment}{//\ in\ the\ other\ object,\ and\ remove\ the\ references\ explicitly\ when\ either}}
\DoxyCodeLine{00294\ \ \ \textcolor{comment}{//\ object\ destructs.}}
\DoxyCodeLine{00295\ \ \ \textcolor{keyword}{class\ }Composition\ \{}
\DoxyCodeLine{00296\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//\ \_result\ is\ reference\ counted\ if\ and\ only\ if\ it\ is\ not\ the\ same\ pointer}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{comment}{//\ as\ this.}}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ *\_result;}
\DoxyCodeLine{00300\ \ \ \};}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap<const\ TransformState\ *,\ Composition,\ pointer\_hash>}}\ \mbox{\hyperlink{classSimpleHashMap}{CompositionCache}};}
\DoxyCodeLine{00303\ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{classSimpleHashMap}{CompositionCache}}\ \_composition\_cache;}
\DoxyCodeLine{00304\ \ \ \textcolor{keyword}{mutable}\ \mbox{\hyperlink{classSimpleHashMap}{CompositionCache}}\ \_invert\_composition\_cache;}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{//\ This\ is\ used\ to\ mark\ nodes\ as\ we\ visit\ them\ to\ detect\ cycles.}}
\DoxyCodeLine{00307\ \ \ \mbox{\hyperlink{classUpdateSeq}{UpdateSeq}}\ \_cycle\_detect;}
\DoxyCodeLine{00308\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classUpdateSeq}{UpdateSeq}}\ \_last\_cycle\_detect;}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{//\ This\ keeps\ track\ of\ our\ current\ position\ through\ the\ garbage\ collection}}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{//\ cycle.}}
\DoxyCodeLine{00312\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \_garbage\_index;}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_uniquify\_matrix;}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cache\_update\_pcollector;}
\DoxyCodeLine{00317\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_garbage\_collect\_pcollector;}
\DoxyCodeLine{00318\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_compose\_pcollector;}
\DoxyCodeLine{00319\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_invert\_pcollector;}
\DoxyCodeLine{00320\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_calc\_pcollector;}
\DoxyCodeLine{00321\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_break\_cycles\_pcollector;}
\DoxyCodeLine{00322\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_new\_pcollector;}
\DoxyCodeLine{00323\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_validate\_pcollector;}
\DoxyCodeLine{00324\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_hash\_pcollector;}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_node\_counter;}
\DoxyCodeLine{00327\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cache\_counter;}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00330\ \ \ \textcolor{comment}{//\ This\ is\ the\ actual\ data\ within\ the\ TransformState.}}
\DoxyCodeLine{00331\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_hash()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00332\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_singular()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00333\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_components()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00334\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_hpr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00335\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00336\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_norm\_quat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00337\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_mat()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00338\ \ \ \textcolor{keywordtype}{void}\ calc\_hash()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00339\ \ \ \textcolor{keywordtype}{void}\ calc\_singular();}
\DoxyCodeLine{00340\ \ \ INLINE\ \textcolor{keywordtype}{void}\ calc\_components();}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordtype}{void}\ do\_calc\_components();}
\DoxyCodeLine{00342\ \ \ INLINE\ \textcolor{keywordtype}{void}\ calc\_hpr();}
\DoxyCodeLine{00343\ \ \ \textcolor{keywordtype}{void}\ do\_calc\_hpr();}
\DoxyCodeLine{00344\ \ \ \textcolor{keywordtype}{void}\ calc\_quat();}
\DoxyCodeLine{00345\ \ \ \textcolor{keywordtype}{void}\ calc\_norm\_quat();}
\DoxyCodeLine{00346\ \ \ INLINE\ \textcolor{keywordtype}{void}\ calc\_mat();}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordtype}{void}\ do\_calc\_mat();}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_uniform\_scale();}
\DoxyCodeLine{00350\ \ \ INLINE\ \textcolor{keywordtype}{void}\ check\_uniform\_scale2d();}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_destructing();}
\DoxyCodeLine{00353\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_destructing()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ INLINE\ \textcolor{keywordtype}{void}\ consider\_update\_pstats(\textcolor{keywordtype}{int}\ old\_referenced\_bits)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00356\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ update\_pstats(\textcolor{keywordtype}{int}\ old\_referenced\_bits,\ \textcolor{keywordtype}{int}\ new\_referenced\_bits);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \textcolor{keyword}{enum}\ Flags\ \{}
\DoxyCodeLine{00359\ \ \ \ \ F\_is\_identity\ \ \ \ \ \ \ \ =\ 0x00000001,}
\DoxyCodeLine{00360\ \ \ \ \ F\_is\_singular\ \ \ \ \ \ \ \ =\ 0x00000002,}
\DoxyCodeLine{00361\ \ \ \ \ F\_singular\_known\ \ \ \ \ =\ 0x00000004,\ \ \textcolor{comment}{//\ set\ if\ we\ know\ F\_is\_singular}}
\DoxyCodeLine{00362\ \ \ \ \ F\_components\_given\ \ \ =\ 0x00000008,}
\DoxyCodeLine{00363\ \ \ \ \ F\_components\_known\ \ \ =\ 0x00000010,\ \ \textcolor{comment}{//\ set\ if\ we\ know\ F\_has\_components}}
\DoxyCodeLine{00364\ \ \ \ \ F\_has\_components\ \ \ \ \ =\ 0x00000020,}
\DoxyCodeLine{00365\ \ \ \ \ F\_mat\_known\ \ \ \ \ \ \ \ \ \ =\ 0x00000040,\ \ \textcolor{comment}{//\ set\ if\ \_mat\ is\ defined}}
\DoxyCodeLine{00366\ \ \ \ \ F\_is\_invalid\ \ \ \ \ \ \ \ \ =\ 0x00000080,}
\DoxyCodeLine{00367\ \ \ \ \ F\_quat\_given\ \ \ \ \ \ \ \ \ =\ 0x00000100,}
\DoxyCodeLine{00368\ \ \ \ \ F\_quat\_known\ \ \ \ \ \ \ \ \ =\ 0x00000200,\ \ \textcolor{comment}{//\ set\ if\ \_quat\ is\ defined}}
\DoxyCodeLine{00369\ \ \ \ \ F\_hpr\_given\ \ \ \ \ \ \ \ \ \ =\ 0x00000400,}
\DoxyCodeLine{00370\ \ \ \ \ F\_hpr\_known\ \ \ \ \ \ \ \ \ \ =\ 0x00000800,\ \ \textcolor{comment}{//\ set\ if\ \_hpr\ is\ defined}}
\DoxyCodeLine{00371\ \ \ \ \ F\_uniform\_scale\ \ \ \ \ \ =\ 0x00001000,}
\DoxyCodeLine{00372\ \ \ \ \ F\_identity\_scale\ \ \ \ \ =\ 0x00002000,}
\DoxyCodeLine{00373\ \ \ \ \ F\_has\_nonzero\_shear\ \ =\ 0x00004000,}
\DoxyCodeLine{00374\ \ \ \ \ F\_is\_destructing\ \ \ \ \ =\ 0x00008000,}
\DoxyCodeLine{00375\ \ \ \ \ F\_is\_2d\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x00010000,}
\DoxyCodeLine{00376\ \ \ \ \ F\_norm\_quat\_known\ \ \ \ =\ 0x00040000,}
\DoxyCodeLine{00377\ \ \ \};}
\DoxyCodeLine{00378\ \ \ LPoint3\ \_pos;}
\DoxyCodeLine{00379\ \ \ LVecBase3\ \_hpr,\ \_scale,\ \_shear;}
\DoxyCodeLine{00380\ \ \ LQuaternion\ \_quat,\ \_norm\_quat;}
\DoxyCodeLine{00381\ \ \ LMatrix4\ \_mat;}
\DoxyCodeLine{00382\ \ \ LMatrix4\ *\_inv\_mat\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \textcolor{keyword}{enum}\ HashValue\ :\ AtomicAdjust::Integer\ \{}
\DoxyCodeLine{00385\ \ \ \ \ H\_unknown\ =\ 0,}
\DoxyCodeLine{00386\ \ \ \ \ H\_identity\ =\ 1,}
\DoxyCodeLine{00387\ \ \ \ \ H\_invalid\ =\ 2,}
\DoxyCodeLine{00388\ \ \ \};}
\DoxyCodeLine{00389\ \ \ \textcolor{keyword}{mutable}\ AtomicAdjust::Integer\ \_hash\ =\ H\_unknown;}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \_flags;}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \textcolor{comment}{//\ This\ mutex\ protects\ \_flags,\ and\ all\ of\ the\ above\ computed\ values.}}
\DoxyCodeLine{00394\ \ \ \mbox{\hyperlink{classLightMutex}{LightMutex}}\ \_lock;}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classCacheStats}{CacheStats}}\ \_cache\_stats;}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00399\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ register\_with\_read\_factory();}
\DoxyCodeLine{00400\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ write\_datagram(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg);}
\DoxyCodeLine{00401\ \ \ \textcolor{keyword}{static}\ PT(\mbox{\hyperlink{classTypedWritableReferenceCount}{TypedWritableReferenceCount}})\ change\_this(\mbox{\hyperlink{classTypedWritableReferenceCount}{TypedWritableReferenceCount}}\ *old\_ptr,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager);}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00404\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *make\_from\_bam(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params);}
\DoxyCodeLine{00405\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTransformState_af0b514bc6fb4d08c8274cbccad10f0f6}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager);}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00408\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00410\ \ \ \}}
\DoxyCodeLine{00411\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00412\ \ \ \ \ NodeCachedReferenceCount::init\_type();}
\DoxyCodeLine{00413\ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}TransformState"{}},}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NodeCachedReferenceCount::get\_class\_type());}
\DoxyCodeLine{00415\ \ \ \}}
\DoxyCodeLine{00416\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00418\ \ \ \}}
\DoxyCodeLine{00419\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ force\_init\_type()\ \{init\_type();\ \textcolor{keywordflow}{return}\ get\_class\_type();\}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00422\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classExtension}{Extension}}<\mbox{\hyperlink{classTransformState}{TransformState}}>;}
\DoxyCodeLine{00425\ \};}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \textcolor{comment}{//\ We\ can\ safely\ redefine\ this\ as\ a\ no-\/op.}}
\DoxyCodeLine{00428\ \textcolor{keyword}{template}<>}
\DoxyCodeLine{00429\ INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPointerToBase}{PointerToBase<TransformState>::update\_type}}(To\ *ptr)\ \{\}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ INLINE\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTransformState}{TransformState}}\ \&state)\ \{}
\DoxyCodeLine{00432\ \ \ state.output(out);}
\DoxyCodeLine{00433\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00434\ \}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \textcolor{preprocessor}{\#include\ "{}transformState.I"{}}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ !TRANSFORMSTATE\_H}}

\end{DoxyCode}

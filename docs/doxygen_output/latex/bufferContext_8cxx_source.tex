\doxysection{buffer\+Context.\+cxx}
\hypertarget{bufferContext_8cxx_source}{}\label{bufferContext_8cxx_source}\index{panda/src/gobj/bufferContext.cxx@{panda/src/gobj/bufferContext.cxx}}
\mbox{\hyperlink{bufferContext_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bufferContext_8h}{bufferContext.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightMutexHolder_8h}{lightMutexHolder.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ BufferContext::\_type\_handle;}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ BufferContext::}
\DoxyCodeLine{00023\ BufferContext(\mbox{\hyperlink{classBufferResidencyTracker}{BufferResidencyTracker}}\ *residency,\ \mbox{\hyperlink{classTypedWritableReferenceCount}{TypedWritableReferenceCount}}\ *\textcolor{keywordtype}{object})\ :}
\DoxyCodeLine{00024\ \ \ \_object(object),}
\DoxyCodeLine{00025\ \ \ \_residency(residency),}
\DoxyCodeLine{00026\ \ \ \_residency\_state(0),}
\DoxyCodeLine{00027\ \ \ \_data\_size\_bytes(0),}
\DoxyCodeLine{00028\ \ \ \_owning\_chain(nullptr)}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ set\_owning\_chain(\&residency-\/>\_chains[0]);}
\DoxyCodeLine{00031\ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00036\ BufferContext::}
\DoxyCodeLine{00037\ \string~BufferContext()\ \{}
\DoxyCodeLine{00038\ \ \ set\_owning\_chain(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ BufferContext::}
\DoxyCodeLine{00045\ set\_owning\_chain(\mbox{\hyperlink{classBufferContextChain}{BufferContextChain}}\ *chain)\ \{}
\DoxyCodeLine{00046\ \ \ \textcolor{keywordflow}{if}\ (chain\ !=\ \_owning\_chain)\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_owning\_chain\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_owning\_chain-\/>\_lock);}
\DoxyCodeLine{00049\ \ \ \ \ \ \ -\/-\/(\_owning\_chain-\/>\_count);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \_owning\_chain-\/>adjust\_bytes(-\/(\textcolor{keywordtype}{int})\_data\_size\_bytes);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ remove\_from\_list();}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \_owning\_chain\ =\ chain;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_owning\_chain\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_owning\_chain-\/>\_lock);}
\DoxyCodeLine{00058\ \ \ \ \ \ \ ++(\_owning\_chain-\/>\_count);}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \_owning\_chain-\/>adjust\_bytes((\textcolor{keywordtype}{int})\_data\_size\_bytes);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ insert\_before(\_owning\_chain);}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ \}}

\end{DoxyCode}

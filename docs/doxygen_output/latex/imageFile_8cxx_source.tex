\doxysection{image\+File.\+cxx}
\hypertarget{imageFile_8cxx_source}{}\label{imageFile_8cxx_source}\index{pandatool/src/palettizer/imageFile.cxx@{pandatool/src/palettizer/imageFile.cxx}}
\mbox{\hyperlink{imageFile_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{imageFile_8h}{imageFile.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{palettizer_8h}{palettizer.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filenameUnifier_8h}{filenameUnifier.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{paletteGroup_8h}{paletteGroup.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnmImage_8h}{pnmImage.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnmFileType_8h}{pnmFileType.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggTexture_8h}{eggTexture.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ImageFile::\_type\_handle;}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00034\ ImageFile::}
\DoxyCodeLine{00035\ ImageFile()\ \{}
\DoxyCodeLine{00036\ \ \ \_alpha\_file\_channel\ =\ 0;}
\DoxyCodeLine{00037\ \ \ \_size\_known\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00038\ \ \ \_x\_size\ =\ 0;}
\DoxyCodeLine{00039\ \ \ \_y\_size\ =\ 0;}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00050\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a6771d6effc34186a92f1a4fb96673c96}{ImageFile::}}}
\DoxyCodeLine{00051\ \mbox{\hyperlink{classImageFile_a6771d6effc34186a92f1a4fb96673c96}{make\_shadow\_image}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&basename)\ \{}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{bool}\ any\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\_color\_type\ !=\ pal-\/>\_shadow\_color\_type\ ||}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \_properties.\_alpha\_type\ !=\ pal-\/>\_shadow\_alpha\_type)\ \{}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \_properties.\_color\_type\ =\ pal-\/>\_shadow\_color\_type;}
\DoxyCodeLine{00058\ \ \ \ \ \_properties.\_alpha\_type\ =\ pal-\/>\_shadow\_alpha\_type;}
\DoxyCodeLine{00059\ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00060\ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{set\_filename}}(pal-\/>\_shadow\_dirname,\ basename))\ \{}
\DoxyCodeLine{00063\ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{return}\ any\_changed;}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00072\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a8cb520e04d22bfa018507b7b7cce0778}{ImageFile::}}}
\DoxyCodeLine{00073\ \mbox{\hyperlink{classImageFile_a8cb520e04d22bfa018507b7b7cce0778}{is\_size\_known}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{return}\ \_size\_known;}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00081\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classImageFile_a46db3bdd06728c9e0eb072de9c443971}{ImageFile::}}}
\DoxyCodeLine{00082\ \mbox{\hyperlink{classImageFile_a46db3bdd06728c9e0eb072de9c443971}{get\_x\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00083\ \ \ nassertr(\mbox{\hyperlink{classImageFile_a8cb520e04d22bfa018507b7b7cce0778}{is\_size\_known}}(),\ 0);}
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{return}\ \_x\_size;}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00091\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classImageFile_aa148095591a031e70c277afc701285de}{ImageFile::}}}
\DoxyCodeLine{00092\ \mbox{\hyperlink{classImageFile_aa148095591a031e70c277afc701285de}{get\_y\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00093\ \ \ nassertr(\mbox{\hyperlink{classImageFile_a8cb520e04d22bfa018507b7b7cce0778}{is\_size\_known}}(),\ 0);}
\DoxyCodeLine{00094\ \ \ \textcolor{keywordflow}{return}\ \_y\_size;}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00101\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_acee69bdcdf3a6ca8859dad1d44b26fd1}{ImageFile::}}}
\DoxyCodeLine{00102\ \mbox{\hyperlink{classImageFile_acee69bdcdf3a6ca8859dad1d44b26fd1}{has\_num\_channels}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{return}\ \_properties.\mbox{\hyperlink{classTextureProperties_aeaf0f8f1fefd904a6aae1b59ae738cd4}{has\_num\_channels}}();}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00110\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classImageFile_a0f7704c3102bad423ef6dc60b3aaa3c0}{ImageFile::}}}
\DoxyCodeLine{00111\ \mbox{\hyperlink{classImageFile_a0f7704c3102bad423ef6dc60b3aaa3c0}{get\_num\_channels}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{return}\ \_properties.\mbox{\hyperlink{classTextureProperties_a3d273d91a9feadd8021589c9ddde04c6}{get\_num\_channels}}();}
\DoxyCodeLine{00113\ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00118\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureProperties}{TextureProperties}}\ \&\mbox{\hyperlink{classImageFile_a68510fd0274d1e4d944fefcc8f06dd24}{ImageFile::}}}
\DoxyCodeLine{00119\ \mbox{\hyperlink{classImageFile_a68510fd0274d1e4d944fefcc8f06dd24}{get\_properties}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{return}\ \_properties;}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00127\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_af3ac444fc223c602f2c9b19c518cbd8f}{ImageFile::}}}
\DoxyCodeLine{00128\ \mbox{\hyperlink{classImageFile_af3ac444fc223c602f2c9b19c518cbd8f}{clear\_basic\_properties}}()\ \{}
\DoxyCodeLine{00129\ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_a4596187b5e1a3fde59c1af480346acb7}{clear\_basic}}();}
\DoxyCodeLine{00130\ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a8e693386f9d94011824c2cd48d0a349c}{ImageFile::}}}
\DoxyCodeLine{00137\ \mbox{\hyperlink{classImageFile_a8e693386f9d94011824c2cd48d0a349c}{update\_properties}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureProperties}{TextureProperties}}\ \&properties)\ \{}
\DoxyCodeLine{00138\ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_a4ba6cb1962d8c6c2b2cf59560fb05efa}{update\_properties}}(properties);}
\DoxyCodeLine{00139\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00149\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{ImageFile::}}}
\DoxyCodeLine{00150\ \mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{set\_filename}}(\mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *group,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&basename)\ \{}
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{//\ Synthesize\ the\ directory\ name\ based\ on\ the\ map\_dirname\ set\ to\ the}}
\DoxyCodeLine{00152\ \ \ \textcolor{comment}{//\ palettizer,\ and\ the\ group's\ dirname.}}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordtype}{string}\ dirname;}
\DoxyCodeLine{00154\ \ \ string::iterator\ pi;}
\DoxyCodeLine{00155\ \ \ pi\ =\ pal-\/>\_map\_dirname.begin();}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{while}\ (pi\ !=\ pal-\/>\_map\_dirname.end())\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{if}\ (*pi\ ==\ \textcolor{charliteral}{'\%'})\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ ++pi;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (*pi)\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\%'}:}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ dirname\ +=\ \textcolor{charliteral}{'\%'};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'g'}:}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (group\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ dirname\ +=\ group-\/>get\_dirname();}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ dirname\ +=\ *pi;}
\DoxyCodeLine{00172\ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ ++pi;}
\DoxyCodeLine{00174\ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{set\_filename}}(dirname,\ basename);}
\DoxyCodeLine{00177\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00187\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{ImageFile::}}}
\DoxyCodeLine{00188\ \mbox{\hyperlink{classImageFile_a25922ed51f2f82015446a140bad6c212}{set\_filename}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&dirname,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&basename)\ \{}
\DoxyCodeLine{00189\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ orig\_filename\ =\ \_filename;}
\DoxyCodeLine{00190\ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ orig\_alpha\_filename\ =\ \_alpha\_filename;}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \_filename\ =\ \mbox{\hyperlink{classFilename}{Filename}}(dirname,\ basename);}
\DoxyCodeLine{00193\ \ \ \_filename.\mbox{\hyperlink{classFilename_a741ce752b93d24e2e87bff42f6a0b828}{standardize}}();}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ Since\ we\ use\ set\_extension()\ here,\ if\ the\ file\ already\ contains\ a}}
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ filename\ extension\ it\ will\ be\ lost.}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \textcolor{comment}{//\ It\ is\ particularly\ important\ to\ note\ that\ a\ single\ embedded\ dot\ will}}
\DoxyCodeLine{00199\ \ \ \textcolor{comment}{//\ appear\ to\ begin\ a\ filename\ extension,\ so\ if\ the\ filename\ does\ *not*}}
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ contain\ an\ extension,\ but\ does\ contain\ an\ embedded\ dot,\ the\ filename\ will}}
\DoxyCodeLine{00201\ \ \ \textcolor{comment}{//\ be\ truncated\ at\ that\ dot.\ \ It\ is\ therefore\ important\ that\ the\ supplied}}
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ basename\ always\ contains\ either\ an\ extension\ or\ a\ terminating\ dot.}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\_color\_type\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \_filename.\mbox{\hyperlink{classFilename_ab41121b22b7bddd945d9d76f1d550bc0}{set\_extension}}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ (\_properties.\_color\_type-\/>\mbox{\hyperlink{classPNMFileType_ab42ac14ccc33aceb81a3716f143387ea}{get\_suggested\_extension}}());}
\DoxyCodeLine{00207\ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\_alpha\_type\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \_alpha\_filename\ =\ \_filename.get\_fullpath\_wo\_extension()\ +\ \textcolor{stringliteral}{"{}\_a."{}};}
\DoxyCodeLine{00211\ \ \ \ \ \_alpha\_filename.\mbox{\hyperlink{classFilename_ab41121b22b7bddd945d9d76f1d550bc0}{set\_extension}}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ (\_properties.\_alpha\_type-\/>\mbox{\hyperlink{classPNMFileType_ab42ac14ccc33aceb81a3716f143387ea}{get\_suggested\_extension}}());}
\DoxyCodeLine{00213\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \_alpha\_filename\ =\ \mbox{\hyperlink{classFilename}{Filename}}();}
\DoxyCodeLine{00215\ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \textcolor{keywordflow}{return}\ (\_filename\ !=\ orig\_filename\ ||}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \_alpha\_filename\ !=\ orig\_alpha\_filename);}
\DoxyCodeLine{00219\ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00224\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&\mbox{\hyperlink{classImageFile_a69f521bc509e33c633fa895d439ec8be}{ImageFile::}}}
\DoxyCodeLine{00225\ \mbox{\hyperlink{classImageFile_a69f521bc509e33c633fa895d439ec8be}{get\_filename}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{return}\ \_filename;}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00234\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&\mbox{\hyperlink{classImageFile_a726ded74979087b58a896845ab6bfe91}{ImageFile::}}}
\DoxyCodeLine{00235\ \mbox{\hyperlink{classImageFile_a726ded74979087b58a896845ab6bfe91}{get\_alpha\_filename}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{return}\ \_alpha\_filename;}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00245\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classImageFile_aaa6075d71c6a5595ec8f4f6fa48536e1}{ImageFile::}}}
\DoxyCodeLine{00246\ \mbox{\hyperlink{classImageFile_aaa6075d71c6a5595ec8f4f6fa48536e1}{get\_alpha\_file\_channel}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{return}\ \_alpha\_file\_channel;}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00255\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a60f4be41af970662c8ff88d822d65f04}{ImageFile::}}}
\DoxyCodeLine{00256\ \mbox{\hyperlink{classImageFile_a60f4be41af970662c8ff88d822d65f04}{exists}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00257\ \ \ \textcolor{keywordflow}{if}\ (!\_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00259\ \ \ \}}
\DoxyCodeLine{00260\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\_alpha\_type\ !=\ \textcolor{keyword}{nullptr}\ \&\&}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_af72ff25fd53bed09be7f270dd57e14bb}{uses\_alpha}}()\ \&\&}
\DoxyCodeLine{00262\ \ \ \ \ \ \ !\_alpha\_filename.empty())\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_alpha\_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00269\ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00276\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a6c6534d7b165abf8c070115788c5901a}{ImageFile::}}}
\DoxyCodeLine{00277\ \mbox{\hyperlink{classImageFile_a6c6534d7b165abf8c070115788c5901a}{read}}(\mbox{\hyperlink{classPNMImage}{PNMImage}}\ \&image)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00278\ \ \ nassertr(!\_filename.empty(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ image.set\_type(\_properties.\_color\_type);}
\DoxyCodeLine{00281\ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Reading\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00282\ \ \ \textcolor{keywordflow}{if}\ (!image.read(\_filename))\ \{}
\DoxyCodeLine{00283\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ read.\(\backslash\)n"{}};}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00285\ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \textcolor{keywordflow}{if}\ (!\_alpha\_filename.empty()\ \&\&\ \_alpha\_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{comment}{//\ Read\ in\ a\ separate\ color\ image\ and\ an\ alpha\ channel\ image.}}
\DoxyCodeLine{00289\ \ \ \ \ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ alpha\_image;}
\DoxyCodeLine{00290\ \ \ \ \ alpha\_image.set\_type(\_properties.\_alpha\_type);}
\DoxyCodeLine{00291\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Reading\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_alpha\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{if}\ (!alpha\_image.read(\_alpha\_filename))\ \{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ read.\(\backslash\)n"{}};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00295\ \ \ \ \ \}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordflow}{if}\ (image.get\_x\_size()\ !=\ alpha\_image.get\_x\_size()\ ||}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ image.get\_y\_size()\ !=\ alpha\_image.get\_y\_size())\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00299\ \ \ \ \ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ image.add\_alpha();}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_alpha\_file\_channel\ ==\ 4\ ||}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ (\_alpha\_file\_channel\ ==\ 2\ \&\&\ alpha\_image.get\_num\_channels()\ ==\ 2))\ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ the\ alpha\ channel.}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ image.get\_x\_size();\ x++)\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ image.get\_y\_size();\ y++)\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ image.set\_alpha(x,\ y,\ alpha\_image.get\_alpha(x,\ y));}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_alpha\_file\_channel\ >=\ 1\ \&\&\ \_alpha\_file\_channel\ <=\ 3\ \&\&}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alpha\_image.get\_num\_channels()\ >=\ 3)\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ the\ appropriate\ red,\ green,\ or\ blue\ channel.}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ image.get\_x\_size();\ x++)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ image.get\_y\_size();\ y++)\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ image.set\_alpha(x,\ y,\ alpha\_image.get\_channel\_val(x,\ y,\ \_alpha\_file\_channel\ -\/\ 1));}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ the\ grayscale\ channel.}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ image.get\_x\_size();\ x++)\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ image.get\_y\_size();\ y++)\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ image.set\_alpha(x,\ y,\ alpha\_image.get\_gray(x,\ y));}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00328\ \ \ \ \ \}}
\DoxyCodeLine{00329\ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00338\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageFile_a16e0af799f35acf2c0169e6bf6f61d1c}{ImageFile::}}}
\DoxyCodeLine{00339\ \mbox{\hyperlink{classImageFile_a16e0af799f35acf2c0169e6bf6f61d1c}{write}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ \&image)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00340\ \ \ nassertr(!\_filename.empty(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \textcolor{keywordflow}{if}\ (!image.has\_alpha()\ ||}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \_properties.\_alpha\_type\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_alpha\_filename.empty()\ \&\&\ \_alpha\_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Deleting\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_alpha\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \_alpha\_filename.\mbox{\hyperlink{classFilename_a722fac5764b2c91628bbbf4ddc8c6254}{unlink}}();}
\DoxyCodeLine{00347\ \ \ \ \ \}}
\DoxyCodeLine{00348\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Writing\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00349\ \ \ \ \ \_filename.\mbox{\hyperlink{classFilename_aa3072a14bec6fccd0e7befca5863a35c}{make\_dir}}();}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordflow}{if}\ (!image.write(\_filename,\ \_properties.\_color\_type))\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ write.\(\backslash\)n"{}};}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00353\ \ \ \ \ \}}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00355\ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{//\ Write\ out\ a\ separate\ color\ image\ and\ an\ alpha\ channel\ image.}}
\DoxyCodeLine{00358\ \ \ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ alpha\_image(image.get\_x\_size(),\ image.get\_y\_size(),\ 1,}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image.get\_maxval());}
\DoxyCodeLine{00360\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ image.get\_y\_size();\ y++)\ \{}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ image.get\_x\_size();\ x++)\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ alpha\_image.set\_gray\_val(x,\ y,\ image.get\_alpha\_val(x,\ y));}
\DoxyCodeLine{00363\ \ \ \ \ \}}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ image\_copy(image);}
\DoxyCodeLine{00367\ \ \ image\_copy.remove\_alpha();}
\DoxyCodeLine{00368\ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Writing\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00369\ \ \ \_filename.\mbox{\hyperlink{classFilename_aa3072a14bec6fccd0e7befca5863a35c}{make\_dir}}();}
\DoxyCodeLine{00370\ \ \ \textcolor{keywordflow}{if}\ (!image\_copy.write(\_filename,\ \_properties.\_color\_type))\ \{}
\DoxyCodeLine{00371\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ write.\(\backslash\)n"{}};}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00373\ \ \ \}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Writing\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_alpha\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00376\ \ \ \_alpha\_filename.\mbox{\hyperlink{classFilename_aa3072a14bec6fccd0e7befca5863a35c}{make\_dir}}();}
\DoxyCodeLine{00377\ \ \ \textcolor{keywordflow}{if}\ (!alpha\_image.write(\_alpha\_filename,\ \_properties.\_alpha\_type))\ \{}
\DoxyCodeLine{00378\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ write.\(\backslash\)n"{}};}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00380\ \ \ \}}
\DoxyCodeLine{00381\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00382\ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00387\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a373c5648d1d83d7313c2130e0f6c0986}{ImageFile::}}}
\DoxyCodeLine{00388\ \mbox{\hyperlink{classImageFile_a373c5648d1d83d7313c2130e0f6c0986}{unlink}}()\ \{}
\DoxyCodeLine{00389\ \ \ \textcolor{keywordflow}{if}\ (!\_filename.empty()\ \&\&\ \_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00390\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Deleting\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00391\ \ \ \ \ \_filename.\mbox{\hyperlink{classFilename_a722fac5764b2c91628bbbf4ddc8c6254}{unlink}}();}
\DoxyCodeLine{00392\ \ \ \}}
\DoxyCodeLine{00393\ \ \ \textcolor{keywordflow}{if}\ (!\_alpha\_filename.empty()\ \&\&\ \_alpha\_filename.\mbox{\hyperlink{classFilename_af8a2ef9ed26abbed32786e6d8025c2c7}{exists}}())\ \{}
\DoxyCodeLine{00394\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Deleting\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_alpha\_filename)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00395\ \ \ \ \ \_alpha\_filename.\mbox{\hyperlink{classFilename_a722fac5764b2c91628bbbf4ddc8c6254}{unlink}}();}
\DoxyCodeLine{00396\ \ \ \}}
\DoxyCodeLine{00397\ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00402\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a07a0ef713ff80880fc1ada6c616c98b1}{ImageFile::}}}
\DoxyCodeLine{00403\ \mbox{\hyperlink{classImageFile_a07a0ef713ff80880fc1ada6c616c98b1}{update\_egg\_tex}}(\mbox{\hyperlink{classEggTexture}{EggTexture}}\ *egg\_tex)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00404\ \ \ nassertv(egg\_tex\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ egg\_tex-\/>set\_filename(\mbox{\hyperlink{classFilenameUnifier_ae38af3afdefe9f906ec05c714c5d7261}{FilenameUnifier::make\_egg\_filename}}(\_filename));}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\mbox{\hyperlink{classTextureProperties_af72ff25fd53bed09be7f270dd57e14bb}{uses\_alpha}}()\ \&\&}
\DoxyCodeLine{00409\ \ \ \ \ \ \ !\_alpha\_filename.empty())\ \{}
\DoxyCodeLine{00410\ \ \ \ \ egg\_tex-\/>set\_alpha\_filename(\mbox{\hyperlink{classFilenameUnifier_ae38af3afdefe9f906ec05c714c5d7261}{FilenameUnifier::make\_egg\_filename}}(\_alpha\_filename));}
\DoxyCodeLine{00411\ \ \ \ \ egg\_tex-\/>set\_alpha\_file\_channel(\_alpha\_file\_channel);}
\DoxyCodeLine{00412\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00413\ \ \ \ \ egg\_tex-\/>clear\_alpha\_filename();}
\DoxyCodeLine{00414\ \ \ \ \ egg\_tex-\/>clear\_alpha\_file\_channel();}
\DoxyCodeLine{00415\ \ \ \}}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_a36ff659e16de9fdfffcd9484e0278355}{update\_egg\_tex}}(egg\_tex);}
\DoxyCodeLine{00418\ \}}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00423\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a5f8698528c6fadc9c91704f3fe2960d5}{ImageFile::}}}
\DoxyCodeLine{00424\ \mbox{\hyperlink{classImageFile_a5f8698528c6fadc9c91704f3fe2960d5}{output\_filename}}(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00425\ \ \ out\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_filename);}
\DoxyCodeLine{00426\ \ \ \textcolor{keywordflow}{if}\ (\_properties.\mbox{\hyperlink{classTextureProperties_af72ff25fd53bed09be7f270dd57e14bb}{uses\_alpha}}()\ \&\&\ !\_alpha\_filename.empty())\ \{}
\DoxyCodeLine{00427\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ \mbox{\hyperlink{classFilenameUnifier_ac3f46416da159363ddebc38e01aff108}{FilenameUnifier::make\_user\_filename}}(\_alpha\_filename);}
\DoxyCodeLine{00428\ \ \ \}}
\DoxyCodeLine{00429\ \}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00435\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a729e8e1459d0a2f61c0e02ff3385e52d}{ImageFile::}}}
\DoxyCodeLine{00436\ \mbox{\hyperlink{classImageFile_a729e8e1459d0a2f61c0e02ff3385e52d}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *writer,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&datagram)\ \{}
\DoxyCodeLine{00437\ \ \ TypedWritable::write\_datagram(writer,\ datagram);}
\DoxyCodeLine{00438\ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_acb078da187f77d48083de8264689799b}{write\_datagram}}(writer,\ datagram);}
\DoxyCodeLine{00439\ \ \ datagram.add\_string(\mbox{\hyperlink{classFilenameUnifier_a46fa16ab38e9daf0a59044f4501b2d49}{FilenameUnifier::make\_bam\_filename}}(\_filename));}
\DoxyCodeLine{00440\ \ \ datagram.add\_string(\mbox{\hyperlink{classFilenameUnifier_a46fa16ab38e9daf0a59044f4501b2d49}{FilenameUnifier::make\_bam\_filename}}(\_alpha\_filename));}
\DoxyCodeLine{00441\ \ \ datagram.add\_uint8(\_alpha\_file\_channel);}
\DoxyCodeLine{00442\ \ \ datagram.add\_bool(\_size\_known);}
\DoxyCodeLine{00443\ \ \ datagram.add\_int32(\_x\_size);}
\DoxyCodeLine{00444\ \ \ datagram.add\_int32(\_y\_size);}
\DoxyCodeLine{00445\ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00453\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classImageFile_a6461db944a289b1eeca4526c77764f2b}{ImageFile::}}}
\DoxyCodeLine{00454\ \mbox{\hyperlink{classImageFile_a6461db944a289b1eeca4526c77764f2b}{complete\_pointers}}(\mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ **p\_list,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00455\ \ \ \textcolor{keywordtype}{int}\ pi\ =\ \mbox{\hyperlink{classTypedWritable_addc29bb978851cacca2196f8a1f35014}{TypedWritable::complete\_pointers}}(p\_list,\ manager);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ pi\ +=\ \_properties.\mbox{\hyperlink{classTextureProperties_a871a4480e57067ae5d34a3d8969f67b6}{complete\_pointers}}(p\_list\ +\ pi,\ manager);}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \textcolor{keywordflow}{return}\ pi;}
\DoxyCodeLine{00460\ \}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00466\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImageFile_a928f0e13bd399247ce8a7179e19af945}{ImageFile::}}}
\DoxyCodeLine{00467\ \mbox{\hyperlink{classImageFile_a928f0e13bd399247ce8a7179e19af945}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00468\ \ \ \mbox{\hyperlink{classTypedWritable_a3ad6cc1cd23bc3783d83edb3302bb43c}{TypedWritable::fillin}}(scan,\ manager);}
\DoxyCodeLine{00469\ \ \ \_properties.\mbox{\hyperlink{classTextureProperties_ab2de5d255ee99115718e3544d1b2dfac}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00470\ \ \ \_filename\ =\ \mbox{\hyperlink{classFilenameUnifier_a113b74f22e5ce89877ca3929fb81f3db}{FilenameUnifier::get\_bam\_filename}}(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}());}
\DoxyCodeLine{00471\ \ \ \_alpha\_filename\ =\ \mbox{\hyperlink{classFilenameUnifier_a113b74f22e5ce89877ca3929fb81f3db}{FilenameUnifier::get\_bam\_filename}}(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}());}
\DoxyCodeLine{00472\ \ \ \textcolor{keywordflow}{if}\ (Palettizer::\_read\_pi\_version\ >=\ 10)\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \_alpha\_file\_channel\ =\ scan.get\_uint8();}
\DoxyCodeLine{00474\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \_alpha\_file\_channel\ =\ 0;}
\DoxyCodeLine{00476\ \ \ \}}
\DoxyCodeLine{00477\ \ \ \_size\_known\ =\ scan.get\_bool();}
\DoxyCodeLine{00478\ \ \ \_x\_size\ =\ scan.get\_int32();}
\DoxyCodeLine{00479\ \ \ \_y\_size\ =\ scan.get\_int32();}
\DoxyCodeLine{00480\ \}}

\end{DoxyCode}

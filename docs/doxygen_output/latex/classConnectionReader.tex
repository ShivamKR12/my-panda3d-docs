\doxysection{Connection\+Reader Class Reference}
\hypertarget{classConnectionReader}{}\label{classConnectionReader}\index{ConnectionReader@{ConnectionReader}}


{\ttfamily \#include $<$connection\+Reader.\+h$>$}

Inheritance diagram for Connection\+Reader\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.609195cm]{classConnectionReader}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classConnectionReader_a130c22dbca68c2f606257f7820c83679}\label{classConnectionReader_a130c22dbca68c2f606257f7820c83679} 
typedef \mbox{\hyperlink{classpvector}{pvector}}$<$ \mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*} $>$ {\bfseries Sockets}
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classConnectionReader_a7f4b96b7c0c99e244eb82be24ddca7b1}{flush\+\_\+read\+\_\+connection}} (\mbox{\hyperlink{classConnection}{Connection}} \texorpdfstring{$\ast$}{*}connection)
\item 
virtual void \mbox{\hyperlink{classConnectionReader_abffdacd53d73c7dfd3744dfed15527be}{receive\+\_\+datagram}} (const \mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&datagram)=0
\item 
void \mbox{\hyperlink{classConnectionReader_a15d92c47111b53e5f98510b0993719aa}{clear\+\_\+manager}} ()
\item 
void \mbox{\hyperlink{classConnectionReader_a2e540c3a197e57487cfc632e8dc1f032}{finish\+\_\+socket}} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\item 
virtual bool \mbox{\hyperlink{classConnectionReader_abaef05800c70cd849c97aa1a62807e73}{process\+\_\+incoming\+\_\+data}} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\item 
\Hypertarget{classConnectionReader_a9bbf5921dcc4ae98da98f8370b500242}\label{classConnectionReader_a9bbf5921dcc4ae98da98f8370b500242} 
virtual bool {\bfseries process\+\_\+incoming\+\_\+udp\+\_\+data} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\item 
\Hypertarget{classConnectionReader_afed7b9731cd333196e86d8355626c7c1}\label{classConnectionReader_afed7b9731cd333196e86d8355626c7c1} 
virtual bool {\bfseries process\+\_\+incoming\+\_\+tcp\+\_\+data} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\item 
\Hypertarget{classConnectionReader_a5b17c05dce685737ef5463f61421743f}\label{classConnectionReader_a5b17c05dce685737ef5463f61421743f} 
virtual bool {\bfseries process\+\_\+raw\+\_\+incoming\+\_\+udp\+\_\+data} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\item 
\Hypertarget{classConnectionReader_a9f9616f9e39108a1d9d92ccc64450774}\label{classConnectionReader_a9f9616f9e39108a1d9d92ccc64450774} 
virtual bool {\bfseries process\+\_\+raw\+\_\+incoming\+\_\+tcp\+\_\+data} (\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}sinfo)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classConnectionReader_ab581a8a7953669b946f7dc37e51bf732}\label{classConnectionReader_ab581a8a7953669b946f7dc37e51bf732} 
\mbox{\hyperlink{classConnectionManager}{Connection\+Manager}} \texorpdfstring{$\ast$}{*} {\bfseries \+\_\+manager}
\item 
\Hypertarget{classConnectionReader_a0ddfab66759182a91eaca40970122313}\label{classConnectionReader_a0ddfab66759182a91eaca40970122313} 
\mbox{\hyperlink{classpvector}{Sockets}} {\bfseries \+\_\+sockets}
\item 
\Hypertarget{classConnectionReader_a48da02b1c96e0f7aecd595eca008268d}\label{classConnectionReader_a48da02b1c96e0f7aecd595eca008268d} 
\mbox{\hyperlink{classpvector}{Sockets}} {\bfseries \+\_\+removed\+\_\+sockets}
\item 
\Hypertarget{classConnectionReader_ac622a8874adb32246d5a71cdad920d00}\label{classConnectionReader_ac622a8874adb32246d5a71cdad920d00} 
\mbox{\hyperlink{classLightMutex}{Light\+Mutex}} {\bfseries \+\_\+sockets\+\_\+mutex}
\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classConnectionReader_aaeb08ae6da3a23c3562ab2c1fcfa6a0a}\label{classConnectionReader_aaeb08ae6da3a23c3562ab2c1fcfa6a0a} 
class {\bfseries Connection\+Manager}
\item 
\Hypertarget{classConnectionReader_a1076ae4724e311acbbd385125d43e82a}\label{classConnectionReader_a1076ae4724e311acbbd385125d43e82a} 
class {\bfseries Reader\+Thread}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is an abstract base class for a family of classes that listen for activity on a socket and respond to it, for instance by reading a datagram and serving it (or queueing it up for later service).

A \doxylink{classConnectionReader}{Connection\+Reader} may define an arbitrary number of threads (at least one) to process datagrams coming in from an arbitrary number of sockets that it is monitoring. The number of threads is specified at construction time and cannot be changed, but the set of sockets that is to be monitored may be constantly modified at will.

This is an abstract class because it doesn\textquotesingle{}t define how to process each received datagram. See \doxylink{classQueuedConnectionReader}{Queued\+Connection\+Reader}. Also note that \doxylink{classConnectionListener}{Connection\+Listener} derives from this class, extending it to accept connections on a rendezvous socket rather than read datagrams. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classConnectionReader_a15d92c47111b53e5f98510b0993719aa}\label{classConnectionReader_a15d92c47111b53e5f98510b0993719aa} 
\index{ConnectionReader@{ConnectionReader}!clear\_manager@{clear\_manager}}
\index{clear\_manager@{clear\_manager}!ConnectionReader@{ConnectionReader}}
\doxysubsubsection{\texorpdfstring{clear\_manager()}{clear\_manager()}}
{\footnotesize\ttfamily void Connection\+Reader\+::clear\+\_\+manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

This should normally only be called when the associated \doxylink{classConnectionManager}{Connection\+Manager} destructs. It resets the \doxylink{classConnectionManager}{Connection\+Manager} pointer to NULL so we don\textquotesingle{}t have a floating pointer. This makes the \doxylink{classConnectionReader}{Connection\+Reader} invalid; presumably it also will be destructed momentarily. \Hypertarget{classConnectionReader_a2e540c3a197e57487cfc632e8dc1f032}\label{classConnectionReader_a2e540c3a197e57487cfc632e8dc1f032} 
\index{ConnectionReader@{ConnectionReader}!finish\_socket@{finish\_socket}}
\index{finish\_socket@{finish\_socket}!ConnectionReader@{ConnectionReader}}
\doxysubsubsection{\texorpdfstring{finish\_socket()}{finish\_socket()}}
{\footnotesize\ttfamily void Connection\+Reader\+::finish\+\_\+socket (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}}]{sinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

To be called when a socket has been fully read and is ready for polling for additional data. \Hypertarget{classConnectionReader_a7f4b96b7c0c99e244eb82be24ddca7b1}\label{classConnectionReader_a7f4b96b7c0c99e244eb82be24ddca7b1} 
\index{ConnectionReader@{ConnectionReader}!flush\_read\_connection@{flush\_read\_connection}}
\index{flush\_read\_connection@{flush\_read\_connection}!ConnectionReader@{ConnectionReader}}
\doxysubsubsection{\texorpdfstring{flush\_read\_connection()}{flush\_read\_connection()}}
{\footnotesize\ttfamily void Connection\+Reader\+::flush\+\_\+read\+\_\+connection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classConnection}{Connection}} \texorpdfstring{$\ast$}{*}}]{connection }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Attempts to read all the possible data from the indicated connection, which has just delivered a write error (and has therefore already been closed). If the connection is not monitered by this reader, does nothing. \Hypertarget{classConnectionReader_abaef05800c70cd849c97aa1a62807e73}\label{classConnectionReader_abaef05800c70cd849c97aa1a62807e73} 
\index{ConnectionReader@{ConnectionReader}!process\_incoming\_data@{process\_incoming\_data}}
\index{process\_incoming\_data@{process\_incoming\_data}!ConnectionReader@{ConnectionReader}}
\doxysubsubsection{\texorpdfstring{process\_incoming\_data()}{process\_incoming\_data()}}
{\footnotesize\ttfamily bool Connection\+Reader\+::process\+\_\+incoming\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classConnectionReader_1_1SocketInfo}{Socket\+Info}} \texorpdfstring{$\ast$}{*}}]{sinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

This is run within a thread when the call to select() indicates there is data available on a socket. Returns true if the data is read successfully, false on failure (for instance, because the connection is closed). 

Reimplemented in \mbox{\hyperlink{classConnectionListener_a48f75f8734cf41288e115aab716ffba3}{Connection\+Listener}}.

\Hypertarget{classConnectionReader_abffdacd53d73c7dfd3744dfed15527be}\label{classConnectionReader_abffdacd53d73c7dfd3744dfed15527be} 
\index{ConnectionReader@{ConnectionReader}!receive\_datagram@{receive\_datagram}}
\index{receive\_datagram@{receive\_datagram}!ConnectionReader@{ConnectionReader}}
\doxysubsubsection{\texorpdfstring{receive\_datagram()}{receive\_datagram()}}
{\footnotesize\ttfamily virtual void Connection\+Reader\+::receive\+\_\+datagram (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&}]{datagram }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [pure virtual]}}



Implemented in \mbox{\hyperlink{classConnectionListener_a948739bc14666996c8be2009bc0a24ea}{Connection\+Listener}}, \mbox{\hyperlink{classDatagramGeneratorNet_a5332ab728f9368b859adea0fad18f2c7}{Datagram\+Generator\+Net}}, \mbox{\hyperlink{classQueuedConnectionReader_a8a80d2d1bc5191a0fd961e08cf418cf1}{Queued\+Connection\+Reader}}, and \mbox{\hyperlink{classRecentConnectionReader_a7969cf3a63ed1224860c014bacd8c643}{Recent\+Connection\+Reader}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/net/\mbox{\hyperlink{connectionReader_8h}{connection\+Reader.\+h}}\item 
panda/src/net/\mbox{\hyperlink{connectionReader_8cxx}{connection\+Reader.\+cxx}}\end{DoxyCompactItemize}

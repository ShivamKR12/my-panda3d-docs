\doxysection{material.\+cxx}
\hypertarget{material_8cxx_source}{}\label{material_8cxx_source}\index{panda/src/gobj/material.cxx@{panda/src/gobj/material.cxx}}
\mbox{\hyperlink{material_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{material_8h}{material.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ Material::\_type\_handle;}
\DoxyCodeLine{00023\ PT(\mbox{\hyperlink{classMaterial}{Material}})\ Material::\_default;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00029\ operator\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classMaterial}{Material}}\ \&copy)\ \{}
\DoxyCodeLine{00030\ \ \ Namable::operator\ =\ (copy);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{if}\ (is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00033\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00034\ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \_base\_color\ =\ copy.\_base\_color;}
\DoxyCodeLine{00037\ \ \ \_ambient\ =\ copy.\_ambient;}
\DoxyCodeLine{00038\ \ \ \_diffuse\ =\ copy.\_diffuse;}
\DoxyCodeLine{00039\ \ \ \_specular\ =\ copy.\_specular;}
\DoxyCodeLine{00040\ \ \ \_emission\ =\ copy.\_emission;}
\DoxyCodeLine{00041\ \ \ \_shininess\ =\ copy.\_shininess;}
\DoxyCodeLine{00042\ \ \ \_roughness\ =\ copy.\_roughness;}
\DoxyCodeLine{00043\ \ \ \_metallic\ =\ copy.\_metallic;}
\DoxyCodeLine{00044\ \ \ \_refractive\_index\ =\ copy.\_refractive\_index;}
\DoxyCodeLine{00045\ \ \ \_flags\ =\ (copy.\_flags\ \&\ \string~(F\_attrib\_lock\ |\ F\_used\_by\_auto\_shader))\ |\ (\_flags\ \&\ (F\_attrib\_lock\ |\ F\_used\_by\_auto\_shader));}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00059\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00060\ set\_base\_color(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{if}\ (!has\_base\_color()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00062\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ \ \ \_base\_color\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00065\ \ \ \_flags\ |=\ F\_base\_color\ |\ F\_metallic;}
\DoxyCodeLine{00066\ \ \ \_flags\ \&=\ \string~(F\_ambient\ |\ F\_diffuse\ |\ F\_specular);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Recalculate\ the\ diffuse\ and\ specular\ colors.}}
\DoxyCodeLine{00069\ \ \ \_ambient\ =\ \_base\_color;}
\DoxyCodeLine{00070\ \ \ \_diffuse\ =\ \_base\_color\ *\ (1\ -\/\ \_metallic);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00074\ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00075\ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00076\ \ \ \ \ f0\ *=\ (1\ -\/\ \_metallic);}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00079\ \ \ \_specular\ +=\ \_base\_color\ *\ \_metallic;}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00085\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00086\ clear\_base\_color()\ \{}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{if}\ (has\_base\_color()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00088\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00089\ \ \ \}}
\DoxyCodeLine{00090\ \ \ \_flags\ \&=\ \string~F\_base\_color;}
\DoxyCodeLine{00091\ \ \ \_base\_color.set(0.0f,\ 0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_ambient)\ ==\ 0)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \_ambient.set(0,\ 0,\ 0,\ 0);}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_diffuse)\ ==\ 0)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \_diffuse.set(0,\ 0,\ 0,\ 0);}
\DoxyCodeLine{00098\ \ \ \}}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_specular)\ ==\ 0)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Recalculate\ the\ specular\ color.}}
\DoxyCodeLine{00101\ \ \ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00104\ \ \ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00120\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00121\ set\_ambient(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00122\ \ \ \textcolor{keywordflow}{if}\ (!has\_ambient()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00123\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00124\ \ \ \}}
\DoxyCodeLine{00125\ \ \ \_ambient\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00126\ \ \ \_flags\ |=\ F\_ambient;}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00139\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00140\ set\_diffuse(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{if}\ (!has\_diffuse()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00142\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00143\ \ \ \}}
\DoxyCodeLine{00144\ \ \ \_diffuse\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00145\ \ \ \_flags\ |=\ F\_diffuse;}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00160\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00161\ set\_specular(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{if}\ (!has\_specular()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00163\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00164\ \ \ \}}
\DoxyCodeLine{00165\ \ \ \_specular\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00166\ \ \ \_flags\ |=\ F\_specular;}
\DoxyCodeLine{00167\ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00172\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00173\ clear\_specular()\ \{}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{if}\ (has\_specular()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00175\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00176\ \ \ \}}
\DoxyCodeLine{00177\ \ \ \_flags\ \&=\ \string~F\_specular;}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{comment}{//\ Recalculate\ the\ specular\ color\ from\ the\ refractive\ index.}}
\DoxyCodeLine{00180\ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00183\ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00184\ \ \ \ \ f0\ *=\ (1\ -\/\ \_metallic);}
\DoxyCodeLine{00185\ \ \ \}}
\DoxyCodeLine{00186\ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00187\ \ \ \_specular\ +=\ \_base\_color\ *\ \_metallic;}
\DoxyCodeLine{00188\ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00199\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00200\ set\_emission(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordflow}{if}\ (!has\_emission()\ \&\&\ is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00202\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00203\ \ \ \}}
\DoxyCodeLine{00204\ \ \ \_emission\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00205\ \ \ \_flags\ |=\ F\_emission;}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00218\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00219\ set\_shininess(PN\_stdfloat\ shininess)\ \{}
\DoxyCodeLine{00220\ \ \ \_shininess\ =\ shininess;}
\DoxyCodeLine{00221\ \ \ \_flags\ \&=\ \string~F\_roughness;}
\DoxyCodeLine{00222\ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00228\ PN\_stdfloat\ Material::}
\DoxyCodeLine{00229\ get\_roughness()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00230\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_roughness)\ ==\ 0)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ Calculate\ roughness\ from\ blinn-\/phong\ shininess.}}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordflow}{return}\ csqrt(csqrt(2\ /\ (\_shininess\ +\ 2)));}
\DoxyCodeLine{00233\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{return}\ \_roughness;}
\DoxyCodeLine{00235\ \ \ \}}
\DoxyCodeLine{00236\ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00247\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00248\ set\_roughness(PN\_stdfloat\ roughness)\ \{}
\DoxyCodeLine{00249\ \ \ \_roughness\ =\ roughness;}
\DoxyCodeLine{00250\ \ \ \_flags\ |=\ F\_roughness;}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ Calculate\ the\ specular\ exponent\ from\ the\ roughness\ as\ it\ is\ used\ in}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ Blinn-\/Phong\ shading\ model.\ \ We\ use\ the\ popular\ Disney\ method\ of\ squaring}}
\DoxyCodeLine{00254\ \ \ \textcolor{comment}{//\ the\ roughness\ to\ get\ a\ more\ perceptually\ linear\ scale.\ \ From:}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ http://graphicrants.blogspot.de/2013/08/specular-\/brdf-\/reference.html}}
\DoxyCodeLine{00256\ \ \ \textcolor{keywordflow}{if}\ (roughness\ <=\ 0\ ||\ IS\_NEARLY\_ZERO(roughness))\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \_shininess\ =\ make\_inf((PN\_stdfloat)0);}
\DoxyCodeLine{00258\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00259\ \ \ \ \ PN\_stdfloat\ alpha\ =\ roughness\ *\ roughness;}
\DoxyCodeLine{00260\ \ \ \ \ \_shininess\ =\ 2\ /\ (alpha\ *\ alpha)\ -\/\ 2;}
\DoxyCodeLine{00261\ \ \ \}}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00271\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00272\ set\_metallic(PN\_stdfloat\ metallic)\ \{}
\DoxyCodeLine{00273\ \ \ \_metallic\ =\ metallic;}
\DoxyCodeLine{00274\ \ \ \_flags\ |=\ F\_metallic;}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{//\ Recalculate\ the\ diffuse\ and\ specular.}}
\DoxyCodeLine{00277\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_diffuse)\ ==\ 0)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \_diffuse\ =\ \_base\_color\ *\ (1\ -\/\ \_metallic);}
\DoxyCodeLine{00279\ \ \ \}}
\DoxyCodeLine{00280\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_specular)\ ==\ 0)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{comment}{//\ Recalculate\ the\ specular\ color.}}
\DoxyCodeLine{00282\ \ \ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00285\ \ \ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00286\ \ \ \ \ \ \ f0\ *=\ (1\ -\/\ \_metallic);}
\DoxyCodeLine{00287\ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00289\ \ \ \ \ \_specular\ +=\ \_base\_color\ *\ \_metallic;}
\DoxyCodeLine{00290\ \ \ \}}
\DoxyCodeLine{00291\ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00296\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00297\ clear\_metallic()\ \{}
\DoxyCodeLine{00298\ \ \ \_flags\ \&=\ \string~F\_metallic;}
\DoxyCodeLine{00299\ \ \ \_metallic\ =\ 0;}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \textcolor{comment}{//\ If\ we\ had\ a\ base\ color,\ recalculate\ the\ diffuse\ and\ specular.}}
\DoxyCodeLine{00302\ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_base\_color)\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_diffuse)\ ==\ 0)\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \_diffuse\ =\ \_base\_color;}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_specular)\ ==\ 0)\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \textcolor{comment}{//\ Recalculate\ the\ specular\ color.}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00314\ \ \ \ \ \}}
\DoxyCodeLine{00315\ \ \ \}}
\DoxyCodeLine{00316\ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00326\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00327\ set\_refractive\_index(PN\_stdfloat\ refractive\_index)\ \{}
\DoxyCodeLine{00328\ \ \ \_refractive\_index\ =\ refractive\_index;}
\DoxyCodeLine{00329\ \ \ \_flags\ |=\ F\_refractive\_index;}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ F\_specular)\ ==\ 0)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{//\ Recalculate\ the\ specular\ color.}}
\DoxyCodeLine{00333\ \ \ \ \ PN\_stdfloat\ f0\ =\ 0;}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_refractive\_index\ >=\ 1)\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ f0\ =\ (\_refractive\_index\ -\/\ 1)\ /\ (\_refractive\_index\ +\ 1);}
\DoxyCodeLine{00336\ \ \ \ \ \ \ f0\ *=\ f0;}
\DoxyCodeLine{00337\ \ \ \ \ \}}
\DoxyCodeLine{00338\ \ \ \ \ \_specular.set(f0,\ f0,\ f0,\ 0);}
\DoxyCodeLine{00339\ \ \ \}}
\DoxyCodeLine{00340\ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00348\ \textcolor{keywordtype}{int}\ Material::}
\DoxyCodeLine{00349\ compare\_to(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMaterial}{Material}}\ \&other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{if}\ (\_flags\ !=\ other.\_flags)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordflow}{return}\ \_flags\ -\/\ other.\_flags;}
\DoxyCodeLine{00352\ \ \ \}}
\DoxyCodeLine{00353\ \ \ \textcolor{keywordflow}{if}\ (has\_base\_color()\ \&\&\ get\_base\_color()\ !=\ other.get\_base\_color())\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_base\_color().compare\_to(other.get\_base\_color());}
\DoxyCodeLine{00355\ \ \ \}}
\DoxyCodeLine{00356\ \ \ \textcolor{keywordflow}{if}\ (has\_ambient()\ \&\&\ get\_ambient()\ !=\ other.get\_ambient())\ \{}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_ambient().compare\_to(other.get\_ambient());}
\DoxyCodeLine{00358\ \ \ \}}
\DoxyCodeLine{00359\ \ \ \textcolor{keywordflow}{if}\ (has\_diffuse()\ \&\&\ get\_diffuse()\ !=\ other.get\_diffuse())\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_diffuse().compare\_to(other.get\_diffuse());}
\DoxyCodeLine{00361\ \ \ \}}
\DoxyCodeLine{00362\ \ \ \textcolor{keywordflow}{if}\ (has\_specular()\ \&\&\ get\_specular()\ !=\ other.get\_specular())\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_specular().compare\_to(other.get\_specular());}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ \ \ \textcolor{keywordflow}{if}\ (has\_emission()\ \&\&\ get\_emission()\ !=\ other.get\_emission())\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_emission().compare\_to(other.get\_emission());}
\DoxyCodeLine{00367\ \ \ \}}
\DoxyCodeLine{00368\ \ \ \textcolor{keywordflow}{if}\ (get\_shininess()\ !=\ other.get\_shininess())\ \{}
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_shininess()\ <\ other.get\_shininess()\ ?\ -\/1\ :\ 1;}
\DoxyCodeLine{00370\ \ \ \}}
\DoxyCodeLine{00371\ \ \ \textcolor{keywordflow}{if}\ (get\_metallic()\ !=\ other.get\_metallic())\ \{}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_metallic()\ <\ other.get\_metallic()\ ?\ -\/1\ :\ 1;}
\DoxyCodeLine{00373\ \ \ \}}
\DoxyCodeLine{00374\ \ \ \textcolor{keywordflow}{if}\ (get\_refractive\_index()\ !=\ other.get\_refractive\_index())\ \{}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_refractive\_index()\ <\ other.get\_refractive\_index()\ ?\ -\/1\ :\ 1;}
\DoxyCodeLine{00376\ \ \ \}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \textcolor{keywordflow}{return}\ strcmp(get\_name().c\_str(),\ other.get\_name().c\_str());}
\DoxyCodeLine{00379\ \}}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00384\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00385\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00386\ \ \ out\ <<\ \textcolor{stringliteral}{"{}Material\ "{}}\ <<\ get\_name();}
\DoxyCodeLine{00387\ \ \ \textcolor{keywordflow}{if}\ (has\_base\_color())\ \{}
\DoxyCodeLine{00388\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ c("{}}\ <<\ get\_base\_color()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00389\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_ambient())\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ a("{}}\ <<\ get\_ambient()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00392\ \ \ \ \ \}}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_diffuse())\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ d("{}}\ <<\ get\_diffuse()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00395\ \ \ \ \ \}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_specular())\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ s("{}}\ <<\ get\_specular()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00398\ \ \ \ \ \}}
\DoxyCodeLine{00399\ \ \ \}}
\DoxyCodeLine{00400\ \ \ \textcolor{keywordflow}{if}\ (has\_refractive\_index())\ \{}
\DoxyCodeLine{00401\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ ior"{}}\ <<\ get\_refractive\_index();}
\DoxyCodeLine{00402\ \ \ \}}
\DoxyCodeLine{00403\ \ \ \textcolor{keywordflow}{if}\ (has\_emission())\ \{}
\DoxyCodeLine{00404\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ e("{}}\ <<\ get\_emission()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00405\ \ \ \}}
\DoxyCodeLine{00406\ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_roughness)\ \{}
\DoxyCodeLine{00407\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ r"{}}\ <<\ get\_roughness();}
\DoxyCodeLine{00408\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00409\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ s"{}}\ <<\ get\_shininess();}
\DoxyCodeLine{00410\ \ \ \}}
\DoxyCodeLine{00411\ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_metallic)\ \{}
\DoxyCodeLine{00412\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ m"{}}\ <<\ \_metallic;}
\DoxyCodeLine{00413\ \ \ \}}
\DoxyCodeLine{00414\ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ l"{}}\ <<\ get\_local()}
\DoxyCodeLine{00415\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ t"{}}\ <<\ get\_twoside();}
\DoxyCodeLine{00416\ \}}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00421\ \textcolor{keywordtype}{void}\ Material::}
\DoxyCodeLine{00422\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00423\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ \textcolor{stringliteral}{"{}Material\ "{}}\ <<\ get\_name()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00424\ \ \ \textcolor{keywordflow}{if}\ (has\_base\_color())\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}base\_color\ =\ "{}}\ <<\ get\_base\_color()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00426\ \ \ \}}
\DoxyCodeLine{00427\ \ \ \textcolor{keywordflow}{if}\ (has\_ambient())\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}ambient\ =\ "{}}\ <<\ get\_ambient()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00429\ \ \ \}}
\DoxyCodeLine{00430\ \ \ \textcolor{keywordflow}{if}\ (has\_diffuse())\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}diffuse\ =\ "{}}\ <<\ get\_diffuse()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00432\ \ \ \}}
\DoxyCodeLine{00433\ \ \ \textcolor{keywordflow}{if}\ (has\_specular())\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}specular\ =\ "{}}\ <<\ get\_specular()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00435\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}refractive\_index\ =\ "{}}\ <<\ get\_refractive\_index()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00437\ \ \ \}}
\DoxyCodeLine{00438\ \ \ \textcolor{keywordflow}{if}\ (has\_emission())\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}emission\ =\ "{}}\ <<\ get\_emission()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00440\ \ \ \}}
\DoxyCodeLine{00441\ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_roughness)\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}roughness\ =\ "{}}\ <<\ get\_roughness()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00443\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}shininess\ =\ "{}}\ <<\ get\_shininess()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00445\ \ \ \}}
\DoxyCodeLine{00446\ \ \ \textcolor{keywordflow}{if}\ (has\_metallic())\ \{}
\DoxyCodeLine{00447\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}metallic\ =\ "{}}\ <<\ get\_metallic()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00448\ \ \ \}}
\DoxyCodeLine{00449\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}local\ =\ "{}}\ <<\ get\_local()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00450\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)\ <<\ \textcolor{stringliteral}{"{}twoside\ =\ "{}}\ <<\ get\_twoside()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00451\ \}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00458\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaterial_a399312963686f1936804a5622904d9ef}{Material::}}}
\DoxyCodeLine{00459\ \mbox{\hyperlink{classMaterial_a399312963686f1936804a5622904d9ef}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00460\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classMaterial_a65e00495659da3a723a4d18695050d8d}{make\_from\_bam}});}
\DoxyCodeLine{00461\ \}}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00467\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaterial_a3e9f0a5103536162e361ce3bb9aaff5d}{Material::}}}
\DoxyCodeLine{00468\ \mbox{\hyperlink{classMaterial_a3e9f0a5103536162e361ce3bb9aaff5d}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&me)\ \{}
\DoxyCodeLine{00469\ \ \ me.add\_string(get\_name());}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 39)\ \{}
\DoxyCodeLine{00472\ \ \ \ \ me.add\_int32(\_flags\ \&\ \string~F\_used\_by\_auto\_shader);}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_metallic)\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \textcolor{comment}{//\ Metalness\ workflow.}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \_base\_color.write\_datagram(me);}
\DoxyCodeLine{00477\ \ \ \ \ \ \ me.add\_stdfloat(\_metallic);}
\DoxyCodeLine{00478\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \_ambient.write\_datagram(me);}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \_diffuse.write\_datagram(me);}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \_specular.write\_datagram(me);}
\DoxyCodeLine{00482\ \ \ \ \ \}}
\DoxyCodeLine{00483\ \ \ \ \ \_emission.write\_datagram(me);}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_roughness)\ \{}
\DoxyCodeLine{00486\ \ \ \ \ \ \ me.add\_stdfloat(\_roughness);}
\DoxyCodeLine{00487\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ me.add\_stdfloat(\_shininess);}
\DoxyCodeLine{00489\ \ \ \ \ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \ \ me.add\_stdfloat(\_refractive\_index);}
\DoxyCodeLine{00492\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \_ambient.write\_datagram(me);}
\DoxyCodeLine{00494\ \ \ \ \ \_diffuse.write\_datagram(me);}
\DoxyCodeLine{00495\ \ \ \ \ \_specular.write\_datagram(me);}
\DoxyCodeLine{00496\ \ \ \ \ \_emission.write\_datagram(me);}
\DoxyCodeLine{00497\ \ \ \ \ me.add\_stdfloat(\_shininess);}
\DoxyCodeLine{00498\ \ \ \ \ me.add\_int32(\_flags\ \&\ 0x7f);}
\DoxyCodeLine{00499\ \ \ \}}
\DoxyCodeLine{00500\ \}}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00505\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classMaterial_a65e00495659da3a723a4d18695050d8d}{Material::}}}
\DoxyCodeLine{00506\ \mbox{\hyperlink{classMaterial_a65e00495659da3a723a4d18695050d8d}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00507\ \ \ \mbox{\hyperlink{classMaterial}{Material}}\ *me\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMaterial}{Material}};}
\DoxyCodeLine{00508\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00509\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00511\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00512\ \ \ me-\/>\mbox{\hyperlink{classMaterial_a701eb2bd374bbb5bc283a2fbdde88c35}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00513\ \ \ \textcolor{keywordflow}{return}\ me;}
\DoxyCodeLine{00514\ \}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00521\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMaterial_a701eb2bd374bbb5bc283a2fbdde88c35}{Material::}}}
\DoxyCodeLine{00522\ \mbox{\hyperlink{classMaterial_a701eb2bd374bbb5bc283a2fbdde88c35}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00523\ \ \ set\_name(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}());}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 39)\ \{}
\DoxyCodeLine{00526\ \ \ \ \ \_flags\ =\ scan.get\_int32();}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_metallic)\ \{}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \textcolor{comment}{//\ Metalness\ workflow:\ read\ base\ color\ and\ metallic}}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \_base\_color.read\_datagram(scan);}
\DoxyCodeLine{00531\ \ \ \ \ \ \ set\_metallic(scan.get\_stdfloat());}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \_ambient.read\_datagram(scan);}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \_diffuse.read\_datagram(scan);}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \_specular.read\_datagram(scan);}
\DoxyCodeLine{00537\ \ \ \ \ \}}
\DoxyCodeLine{00538\ \ \ \ \ \_emission.read\_datagram(scan);}
\DoxyCodeLine{00539\ }
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_roughness)\ \{}
\DoxyCodeLine{00541\ \ \ \ \ \ \ set\_roughness(scan.get\_stdfloat());}
\DoxyCodeLine{00542\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \_shininess\ =\ scan.get\_stdfloat();}
\DoxyCodeLine{00544\ \ \ \ \ \}}
\DoxyCodeLine{00545\ \ \ \ \ \_refractive\_index\ =\ scan.get\_stdfloat();}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\_flags\ \&\ (F\_base\_color\ |\ F\_metallic))\ ==\ (F\_base\_color\ |\ F\_metallic))\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ ambient,\ diffuse\ and\ specular\ settings.}}
\DoxyCodeLine{00549\ \ \ \ \ \ \ set\_base\_color(\_base\_color);}
\DoxyCodeLine{00550\ \ \ \ \ \}}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00553\ \ \ \ \ \_ambient.read\_datagram(scan);}
\DoxyCodeLine{00554\ \ \ \ \ \_diffuse.read\_datagram(scan);}
\DoxyCodeLine{00555\ \ \ \ \ \_specular.read\_datagram(scan);}
\DoxyCodeLine{00556\ \ \ \ \ \_emission.read\_datagram(scan);}
\DoxyCodeLine{00557\ \ \ \ \ \_shininess\ =\ scan.get\_stdfloat();}
\DoxyCodeLine{00558\ \ \ \ \ \_flags\ =\ scan.get\_int32();}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_flags\ \&\ F\_roughness)\ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ shininess\ we\ read\ is\ actually\ a\ roughness\ value.}}
\DoxyCodeLine{00562\ \ \ \ \ \ \ set\_roughness(\_shininess);}
\DoxyCodeLine{00563\ \ \ \ \ \}}
\DoxyCodeLine{00564\ \ \ \}}
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00566\ \ \ \textcolor{keywordflow}{if}\ (is\_used\_by\_auto\_shader())\ \{}
\DoxyCodeLine{00567\ \ \ \ \ GraphicsStateGuardianBase::mark\_rehash\_generated\_shaders();}
\DoxyCodeLine{00568\ \ \ \}}
\DoxyCodeLine{00569\ \}}

\end{DoxyCode}

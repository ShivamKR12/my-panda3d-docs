\doxysection{Datagram\+Queue Class Reference}
\hypertarget{classDatagramQueue}{}\label{classDatagramQueue}\index{DatagramQueue@{DatagramQueue}}


{\ttfamily \#include $<$datagram\+Queue.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classDatagramQueue_a9bb0adc82b7a4cc74666eb8539c1f94b}{shutdown}} ()
\item 
bool \mbox{\hyperlink{classDatagramQueue_ae83a40bf8d0f785620cef13734d98d3a}{insert}} (const \mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&data, bool block=false)
\item 
bool \mbox{\hyperlink{classDatagramQueue_adc27e2c7773fa497c486b94723a83393}{extract}} (\mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&result)
\item 
void \mbox{\hyperlink{classDatagramQueue_ab7a760d662a908f6a7f413156af691d2}{set\+\_\+max\+\_\+queue\+\_\+size}} (int max\+\_\+size)
\item 
int \mbox{\hyperlink{classDatagramQueue_a7ed1eed10cb995c1e679975a04413171}{get\+\_\+max\+\_\+queue\+\_\+size}} () const
\item 
int \mbox{\hyperlink{classDatagramQueue_af86cdbb3b1bc838be0d79b78cf45f377}{get\+\_\+current\+\_\+queue\+\_\+size}} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A thread-\/safe, FIFO queue of Net\+Datagrams. This is used by \doxylink{classConnectionWriter}{Connection\+Writer} for queuing up datagrams for its various threads to write to sockets. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classDatagramQueue_adc27e2c7773fa497c486b94723a83393}\label{classDatagramQueue_adc27e2c7773fa497c486b94723a83393} 
\index{DatagramQueue@{DatagramQueue}!extract@{extract}}
\index{extract@{extract}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{extract()}{extract()}}
{\footnotesize\ttfamily bool Datagram\+Queue\+::extract (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&}]{result }\end{DoxyParamCaption})}

Extracts a datagram from the head of the queue, if one is available. If a datagram is available, this will immediately return; otherwise, it will block until a datagram becomes available. Multiple threads may simultaneously block on extract(); when a datagram is subsequently inserted into the queue, one of the threads will return from extract() with the datagram.

The return value is true if the datagram is successfully extracted, or false if the queue was destroyed while waiting. (In the case of a false return, the thread should not attempt to operate on the queue again.) \Hypertarget{classDatagramQueue_af86cdbb3b1bc838be0d79b78cf45f377}\label{classDatagramQueue_af86cdbb3b1bc838be0d79b78cf45f377} 
\index{DatagramQueue@{DatagramQueue}!get\_current\_queue\_size@{get\_current\_queue\_size}}
\index{get\_current\_queue\_size@{get\_current\_queue\_size}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{get\_current\_queue\_size()}{get\_current\_queue\_size()}}
{\footnotesize\ttfamily int Datagram\+Queue\+::get\+\_\+current\+\_\+queue\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the current number of things in the queue. \Hypertarget{classDatagramQueue_a7ed1eed10cb995c1e679975a04413171}\label{classDatagramQueue_a7ed1eed10cb995c1e679975a04413171} 
\index{DatagramQueue@{DatagramQueue}!get\_max\_queue\_size@{get\_max\_queue\_size}}
\index{get\_max\_queue\_size@{get\_max\_queue\_size}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{get\_max\_queue\_size()}{get\_max\_queue\_size()}}
{\footnotesize\ttfamily int Datagram\+Queue\+::get\+\_\+max\+\_\+queue\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns the maximum size the queue is allowed to grow to. See \doxylink{classDatagramQueue_ab7a760d662a908f6a7f413156af691d2}{set\+\_\+max\+\_\+queue\+\_\+size()}. \Hypertarget{classDatagramQueue_ae83a40bf8d0f785620cef13734d98d3a}\label{classDatagramQueue_ae83a40bf8d0f785620cef13734d98d3a} 
\index{DatagramQueue@{DatagramQueue}!insert@{insert}}
\index{insert@{insert}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{insert()}{insert()}}
{\footnotesize\ttfamily bool Datagram\+Queue\+::insert (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classNetDatagram}{Net\+Datagram}} \&}]{data,  }\item[{bool}]{block = {\ttfamily false} }\end{DoxyParamCaption})}

Inserts the indicated datagram onto the end of the queue, and returns. If the queue is empty and any threads are waiting on the queue, this will wake one of them up. Returns true if successful, false if the queue was full.

If block is true, this will not return until successful, waiting until the queue has space available if necessary. \Hypertarget{classDatagramQueue_ab7a760d662a908f6a7f413156af691d2}\label{classDatagramQueue_ab7a760d662a908f6a7f413156af691d2} 
\index{DatagramQueue@{DatagramQueue}!set\_max\_queue\_size@{set\_max\_queue\_size}}
\index{set\_max\_queue\_size@{set\_max\_queue\_size}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{set\_max\_queue\_size()}{set\_max\_queue\_size()}}
{\footnotesize\ttfamily void Datagram\+Queue\+::set\+\_\+max\+\_\+queue\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{max\+\_\+size }\end{DoxyParamCaption})}

Sets the maximum size the queue is allowed to grow to. This is primarily for a sanity check; this is a limit beyond which we can assume something bad has happened.

It\textquotesingle{}s also a crude check against unfortunate seg faults due to the queue filling up and quietly consuming all available memory. \Hypertarget{classDatagramQueue_a9bb0adc82b7a4cc74666eb8539c1f94b}\label{classDatagramQueue_a9bb0adc82b7a4cc74666eb8539c1f94b} 
\index{DatagramQueue@{DatagramQueue}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!DatagramQueue@{DatagramQueue}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily void Datagram\+Queue\+::shutdown (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Marks the queue as shutting down, which will eventually cause all threads blocking on extract() to return false. The normal way to delete a \doxylink{classDatagramQueue}{Datagram\+Queue} will be to call first \doxylink{classDatagramQueue_a9bb0adc82b7a4cc74666eb8539c1f94b}{shutdown()} and then wait for all known threads to terminate. Then it is safe to delete the queue. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/net/\mbox{\hyperlink{datagramQueue_8h}{datagram\+Queue.\+h}}\item 
panda/src/net/\mbox{\hyperlink{datagramQueue_8cxx}{datagram\+Queue.\+cxx}}\end{DoxyCompactItemize}

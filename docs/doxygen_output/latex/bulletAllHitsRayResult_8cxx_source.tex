\doxysection{bullet\+All\+Hits\+Ray\+Result.\+cxx}
\hypertarget{bulletAllHitsRayResult_8cxx_source}{}\label{bulletAllHitsRayResult_8cxx_source}\index{panda/src/bullet/bulletAllHitsRayResult.cxx@{panda/src/bullet/bulletAllHitsRayResult.cxx}}
\mbox{\hyperlink{bulletAllHitsRayResult_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bulletAllHitsRayResult_8h}{bulletAllHitsRayResult.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00019\ BulletAllHitsRayResult::}
\DoxyCodeLine{00020\ BulletAllHitsRayResult(\textcolor{keyword}{const}\ \mbox{\hyperlink{structbtVector3}{btVector3}}\ \&from\_pos,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structbtVector3}{btVector3}}\ \&to\_pos,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBitMask}{CollideMask}}\ \&mask)}
\DoxyCodeLine{00021\ \ :\ \mbox{\hyperlink{classbtCollisionWorld}{btCollisionWorld}}::AllHitsRayResultCallback(from\_pos,\ to\_pos),\ \_mask(mask)\ \{}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structBulletAllHitsRayResult_a6861e6c63d8fb01be8d9acd149e83038}{BulletAllHitsRayResult::}}}
\DoxyCodeLine{00029\ \mbox{\hyperlink{structBulletAllHitsRayResult_a6861e6c63d8fb01be8d9acd149e83038}{needsCollision}}(btBroadphaseProxy*\ proxy0)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ btCollisionObject\ *obj0\ =\ (btCollisionObject\ *)\ proxy0-\/>m\_clientObject;}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node0\ =\ (\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *)\ obj0-\/>getUserPointer();}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{classBitMask}{CollideMask}}\ mask0\ =\ node0-\/>get\_into\_collide\_mask();}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \textcolor{keywordflow}{return}\ (\_mask\ \&\ mask0)\ !=\ 0;}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00041\ btScalar\ \mbox{\hyperlink{structBulletAllHitsRayResult_ac1086714f78acd389dbc31e8d422a750}{BulletAllHitsRayResult::}}}
\DoxyCodeLine{00042\ \mbox{\hyperlink{structBulletAllHitsRayResult_ac1086714f78acd389dbc31e8d422a750}{addSingleResult}}(btCollisionWorld::LocalRayResult\&\ rayResult,\ \textcolor{keywordtype}{bool}\ normalInWorldSpace)\ \{}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ Store\ partindex\ information}}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordflow}{if}\ (rayResult.m\_localShapeInfo)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \_shapePart.push\_back(rayResult.m\_localShapeInfo-\/>m\_shapePart);}
\DoxyCodeLine{00047\ \ \ \ \ \_triangleIndex.push\_back(rayResult.m\_localShapeInfo-\/>m\_triangleIndex);}
\DoxyCodeLine{00048\ \ \ \}}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \_shapePart.push\_back(-\/1);}
\DoxyCodeLine{00051\ \ \ \ \ \_triangleIndex.push\_back(-\/1);}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ Call\ the\ default\ implementation}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{return}\ btCollisionWorld::AllHitsRayResultCallback::addSingleResult(rayResult,\ normalInWorldSpace);}
\DoxyCodeLine{00056\ \};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00061\ LPoint3\ BulletAllHitsRayResult::}
\DoxyCodeLine{00062\ get\_from\_pos()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ btVector3\_to\_LPoint3(m\_rayFromWorld);}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00070\ LPoint3\ BulletAllHitsRayResult::}
\DoxyCodeLine{00071\ get\_to\_pos()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{keywordflow}{return}\ btVector3\_to\_LPoint3(m\_rayToWorld);}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00079\ \textcolor{keywordtype}{bool}\ BulletAllHitsRayResult::}
\DoxyCodeLine{00080\ has\_hits()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{return}\ hasHit();}
\DoxyCodeLine{00083\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00088\ PN\_stdfloat\ BulletAllHitsRayResult::}
\DoxyCodeLine{00089\ get\_closest\_hit\_fraction()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{return}\ (PN\_stdfloat)m\_closestHitFraction;}
\DoxyCodeLine{00092\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00097\ \textcolor{keywordtype}{int}\ BulletAllHitsRayResult::}
\DoxyCodeLine{00098\ get\_num\_hits()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keywordflow}{return}\ m\_collisionObjects.size();}
\DoxyCodeLine{00101\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structBulletRayHit}{BulletRayHit}}\ BulletAllHitsRayResult::}
\DoxyCodeLine{00107\ get\_hit(\textcolor{keywordtype}{int}\ idx)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ nassertr(idx\ >=\ 0\ \&\&\ idx\ <\ get\_num\_hits(),\ BulletRayHit::empty());}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{structBulletRayHit}{BulletRayHit}}\ hit;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ hit.\_object\ =\ m\_collisionObjects[idx];}
\DoxyCodeLine{00114\ \ \ hit.\_normal\ =\ m\_hitNormalWorld[idx];}
\DoxyCodeLine{00115\ \ \ hit.\_pos\ =\ m\_hitPointWorld[idx];}
\DoxyCodeLine{00116\ \ \ hit.\_fraction\ =\ m\_hitFractions[idx];}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ hit.\_shapePart\ =\ \_shapePart[idx];}
\DoxyCodeLine{00119\ \ \ hit.\_triangleIndex\ =\ \_triangleIndex[idx];}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{return}\ hit;}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00127\ PN\_stdfloat\ BulletRayHit::}
\DoxyCodeLine{00128\ get\_hit\_fraction()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \textcolor{keywordflow}{return}\ (PN\_stdfloat)\_fraction;}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00136\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *BulletRayHit::}
\DoxyCodeLine{00137\ get\_node()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{return}\ (\_object)\ ?\ (\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *)\_object-\/>getUserPointer()\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00140\ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00145\ LPoint3\ BulletRayHit::}
\DoxyCodeLine{00146\ get\_hit\_pos()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{return}\ btVector3\_to\_LPoint3(\_pos);}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00154\ LVector3\ BulletRayHit::}
\DoxyCodeLine{00155\ get\_hit\_normal()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{return}\ btVector3\_to\_LVector3(\_normal);}
\DoxyCodeLine{00158\ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00163\ \textcolor{keywordtype}{int}\ BulletRayHit::}
\DoxyCodeLine{00164\ get\_shape\_part()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{keywordflow}{return}\ \_shapePart;}
\DoxyCodeLine{00167\ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00172\ \textcolor{keywordtype}{int}\ BulletRayHit::}
\DoxyCodeLine{00173\ get\_triangle\_index()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \textcolor{keywordflow}{return}\ \_triangleIndex;}
\DoxyCodeLine{00176\ \}}

\end{DoxyCode}

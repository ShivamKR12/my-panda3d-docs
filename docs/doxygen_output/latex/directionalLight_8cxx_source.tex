\doxysection{directional\+Light.\+cxx}
\hypertarget{directionalLight_8cxx_source}{}\label{directionalLight_8cxx_source}\index{panda/src/pgraphnodes/directionalLight.cxx@{panda/src/pgraphnodes/directionalLight.cxx}}
\mbox{\hyperlink{directionalLight_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{directionalLight_8h}{directionalLight.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{orthographicLens_8h}{orthographicLens.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsStateGuardianBase_8h}{graphicsStateGuardianBase.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ DirectionalLight::\_type\_handle;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ \mbox{\hyperlink{classCycleData}{CycleData}}\ *DirectionalLight::CData::}
\DoxyCodeLine{00028\ make\_copy()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00029\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ CData(*\textcolor{keyword}{this});}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00036\ \textcolor{keywordtype}{void}\ DirectionalLight::CData::}
\DoxyCodeLine{00037\ write\_datagram(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00038\ \ \ \_specular\_color.write\_datagram(dg);}
\DoxyCodeLine{00039\ \ \ \_point.write\_datagram(dg);}
\DoxyCodeLine{00040\ \ \ \_direction.write\_datagram(dg);}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00047\ \textcolor{keywordtype}{void}\ DirectionalLight::CData::}
\DoxyCodeLine{00048\ fillin(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *)\ \{}
\DoxyCodeLine{00049\ \ \ \_specular\_color.read\_datagram(scan);}
\DoxyCodeLine{00050\ \ \ \_point.read\_datagram(scan);}
\DoxyCodeLine{00051\ \ \ \_direction.read\_datagram(scan);}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00057\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight::}}}
\DoxyCodeLine{00058\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight}}(\textcolor{keyword}{const}\ std::string\ \&name)\ :}
\DoxyCodeLine{00059\ \ \ \mbox{\hyperlink{classLightLensNode}{LightLensNode}}(name,\ new\ \mbox{\hyperlink{classOrthographicLens}{OrthographicLens}}())\ \{}
\DoxyCodeLine{00060\ \ \ \_lenses[0].\_lens-\/>set\_interocular\_distance(0);}
\DoxyCodeLine{00061\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00067\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight::}}}
\DoxyCodeLine{00068\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classDirectionalLight}{DirectionalLight}}\ \&copy)\ :}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{classLightLensNode}{LightLensNode}}(copy),}
\DoxyCodeLine{00070\ \ \ \_cycler(copy.\_cycler)}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00079\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *\mbox{\hyperlink{classDirectionalLight_ac4b623f6b8010ecc378785dea008dc59}{DirectionalLight::}}}
\DoxyCodeLine{00080\ \mbox{\hyperlink{classDirectionalLight_ac4b623f6b8010ecc378785dea008dc59}{make\_copy}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00088\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDirectionalLight_ac26b4026625babb32917e9f5cad22355}{DirectionalLight::}}}
\DoxyCodeLine{00089\ \mbox{\hyperlink{classDirectionalLight_ac26b4026625babb32917e9f5cad22355}{xform}}(\textcolor{keyword}{const}\ LMatrix4\ \&mat)\ \{}
\DoxyCodeLine{00090\ \ \ \mbox{\hyperlink{classLensNode_a770601a230dbe2e1d7266550740d80ef}{LightLensNode::xform}}(mat);}
\DoxyCodeLine{00091\ \ \ \mbox{\hyperlink{classCycleDataWriter}{CDWriter}}\ cdata(\_cycler);}
\DoxyCodeLine{00092\ \ \ cdata-\/>\_point\ =\ cdata-\/>\_point\ *\ mat;}
\DoxyCodeLine{00093\ \ \ cdata-\/>\_direction\ =\ cdata-\/>\_direction\ *\ mat;}
\DoxyCodeLine{00094\ \ \ mark\_viz\_stale();}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00100\ \textcolor{keywordtype}{void}\ DirectionalLight::}
\DoxyCodeLine{00101\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00102\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ *\textcolor{keyword}{this}\ <<\ \textcolor{stringliteral}{"{}:\(\backslash\)n"{}};}
\DoxyCodeLine{00103\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00104\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}color\ "{}}\ <<\ get\_color()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{if}\ (\_has\_specular\_color)\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00107\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}specular\ color\ "{}}\ <<\ get\_specular\_color()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level\ +\ 2)}
\DoxyCodeLine{00110\ \ \ \ \ <<\ \textcolor{stringliteral}{"{}direction\ "{}}\ <<\ get\_direction()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00125\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classDirectionalLight_a91af1557b97a4bac4eb4023bb2a2bbbf}{DirectionalLight::}}}
\DoxyCodeLine{00126\ \mbox{\hyperlink{classDirectionalLight_a91af1557b97a4bac4eb4023bb2a2bbbf}{get\_vector\_to\_light}}(LVector3\ \&result,\ \textcolor{keyword}{const}\ LPoint3\ \&,}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LMatrix4\ \&to\_object\_space)\ \{}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{classCycleDataReader}{CDReader}}\ cdata(\_cycler);}
\DoxyCodeLine{00129\ \ \ result\ =\ -\/(cdata-\/>\_direction\ *\ to\_object\_space);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00140\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classDirectionalLight_ab35f227d99abeb7f82cbf92120948777}{DirectionalLight::}}}
\DoxyCodeLine{00141\ \mbox{\hyperlink{classDirectionalLight_ab35f227d99abeb7f82cbf92120948777}{get\_class\_priority}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00142\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})CP\_directional\_priority;}
\DoxyCodeLine{00143\ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00148\ \textcolor{keywordtype}{void}\ DirectionalLight::}
\DoxyCodeLine{00149\ bind(\mbox{\hyperlink{classGraphicsStateGuardianBase}{GraphicsStateGuardianBase}}\ *gsg,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&light,\ \textcolor{keywordtype}{int}\ light\_id)\ \{}
\DoxyCodeLine{00150\ \ \ gsg-\/>bind\_light(\textcolor{keyword}{this},\ light,\ light\_id);}
\DoxyCodeLine{00151\ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00156\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDirectionalLight_a7a08ac765ff90dbd3a0985d78696d36f}{DirectionalLight::}}}
\DoxyCodeLine{00157\ \mbox{\hyperlink{classDirectionalLight_a7a08ac765ff90dbd3a0985d78696d36f}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00158\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classDirectionalLight_abb76f3726e6ceec801476749e265915b}{make\_from\_bam}});}
\DoxyCodeLine{00159\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00165\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDirectionalLight_a4c64b500b9e298aa67b52aa2e431984b}{DirectionalLight::}}}
\DoxyCodeLine{00166\ \mbox{\hyperlink{classDirectionalLight_a4c64b500b9e298aa67b52aa2e431984b}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\ \{}
\DoxyCodeLine{00167\ \ \ \mbox{\hyperlink{classLightLensNode_a9375ae74db7e0c61849489cf122c47ca}{LightLensNode::write\_datagram}}(manager,\ dg);}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 39)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ dg.add\_bool(\_has\_specular\_color);}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ \ \ manager-\/>\mbox{\hyperlink{classBamWriter_a4a957fdbd6f508ee3029a41a794030cd}{write\_cdata}}(dg,\ \_cycler);}
\DoxyCodeLine{00172\ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00179\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classDirectionalLight_abb76f3726e6ceec801476749e265915b}{DirectionalLight::}}}
\DoxyCodeLine{00180\ \mbox{\hyperlink{classDirectionalLight_abb76f3726e6ceec801476749e265915b}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00181\ \ \ \mbox{\hyperlink{classDirectionalLight}{DirectionalLight}}\ *node\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classDirectionalLight_a716894aa60084df9571ae24091092512}{DirectionalLight}}(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00182\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00183\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00186\ \ \ node-\/>\mbox{\hyperlink{classDirectionalLight_a0aed30cd62eb7fa387c8cb0bfbab6324}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00189\ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00195\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDirectionalLight_a0aed30cd62eb7fa387c8cb0bfbab6324}{DirectionalLight::}}}
\DoxyCodeLine{00196\ \mbox{\hyperlink{classDirectionalLight_a0aed30cd62eb7fa387c8cb0bfbab6324}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00197\ \ \ \mbox{\hyperlink{classLightLensNode_a0b67a0d0ecbd9770b7794a05d393b4ca}{LightLensNode::fillin}}(scan,\ manager);}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{if}\ (manager-\/>get\_file\_minor\_ver()\ >=\ 39)\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \_has\_specular\_color\ =\ scan.get\_bool();}
\DoxyCodeLine{00201\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \_has\_specular\_color\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00203\ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_ae63d90cd5d2c87fe3159f6b5d6d9fe10}{read\_cdata}}(scan,\ \_cycler);}
\DoxyCodeLine{00206\ \}}

\end{DoxyCode}

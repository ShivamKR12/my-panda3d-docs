\doxysection{mac\+Stats\+Graph.\+mm}
\hypertarget{macStatsGraph_8mm_source}{}\label{macStatsGraph_8mm_source}\index{pandatool/src/mac-\/stats/macStatsGraph.mm@{pandatool/src/mac-\/stats/macStatsGraph.mm}}
\mbox{\hyperlink{macStatsGraph_8mm}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsGraph_8h}{macStatsGraph.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsGraphView_8h}{macStatsGraphView.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsMonitor_8h}{macStatsMonitor.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsLabelStack_8h}{macStatsLabelStack.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{const}\ CGFloat\ MacStatsGraph::rgb\_light\_gray[4]\ =\ \{}
\DoxyCodeLine{00020\ \ \ 0x9a\ /\ (CGFloat)0xff,\ 0x9a\ /\ (CGFloat)0xff,\ 0x9a\ /\ (CGFloat)0xff,\ 1.0,}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ \textcolor{keyword}{const}\ CGFloat\ MacStatsGraph::rgb\_dark\_gray[4]\ =\ \{}
\DoxyCodeLine{00023\ \ \ 0xb0\ /\ (CGFloat)0xff,\ 0xb0\ /\ (CGFloat)0xff,\ 0xb0\ /\ (CGFloat)0xff,\ 1.0,}
\DoxyCodeLine{00024\ \};}
\DoxyCodeLine{00025\ \textcolor{keyword}{const}\ CGFloat\ MacStatsGraph::rgb\_user\_guide\_bar[4]\ =\ \{}
\DoxyCodeLine{00026\ \ \ 0x82\ /\ (CGFloat)0xff,\ 0x96\ /\ (CGFloat)0xff,\ 0xff\ /\ (CGFloat)0xff,\ 1.0,}
\DoxyCodeLine{00027\ \};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ NSInteger\ style\_mask\ =\ NSWindowStyleMaskTitled}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ NSWindowStyleMaskClosable}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ NSWindowStyleMaskMiniaturizable}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ NSWindowStyleMaskResizable;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00037\ MacStatsGraph::}
\DoxyCodeLine{00038\ MacStatsGraph(\mbox{\hyperlink{classMacStatsMonitor}{MacStatsMonitor}}\ *monitor,\ \mbox{\hyperlink{interfaceMacStatsGraphViewController}{MacStatsGraphViewController}}\ *controller)\ :}
\DoxyCodeLine{00039\ \ \ \_monitor(monitor)}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ \_background\_color\ =\ CGColorCreateGenericRGB(0.0,\ 0.0,\ 0.0,\ 0.0);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \_drag\_mode\ =\ DM\_none;}
\DoxyCodeLine{00044\ \ \ \_potential\_drag\_mode\ =\ DM\_none;}
\DoxyCodeLine{00045\ \ \ \_drag\_scale\_start\ =\ 0.0f;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \_pause\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ NSInteger\ this\_style\_mask\ =\ style\_mask;}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 11.0,\ *))\ \{}
\DoxyCodeLine{00051\ \ \ \ \ this\_style\_mask\ |=\ NSWindowStyleMaskFullSizeContentView;}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \_window\ =\ [NSWindow\ alloc];}
\DoxyCodeLine{00055\ \ \ [\_window\ initWithContentRect:NSMakeRect(100,\ 500,\ 500,\ 150)}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ styleMask:this\_style\_mask}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ backing:NSBackingStoreBuffered}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ defer:NO];}
\DoxyCodeLine{00059\ \ \ \_window.releasedWhenClosed\ =\ NO;}
\DoxyCodeLine{00060\ \ \ \_window.titlebarAppearsTransparent\ =\ NO;}
\DoxyCodeLine{00061\ \ \ \_window.excludedFromWindowsMenu\ =\ NO;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \_window.contentMinSize\ =\ NSMakeSize(68,\ \_window.contentView.frame.size.height\ -\/\ \_window.contentLayoutRect.size.height);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \_graph\_view\_controller\ =\ [controller\ initWithGraph:this];}
\DoxyCodeLine{00066\ \ \ \_graph\_view\ =\ ((\mbox{\hyperlink{interfaceMacStatsGraphViewController}{MacStatsGraphViewController}}\ *)\_graph\_view\_controller).graphView;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Get\ notified\ when\ the\ window\ closes.}}
\DoxyCodeLine{00069\ \ \ NSNotificationCenter\ *center\ =\ [NSNotificationCenter\ defaultCenter];}
\DoxyCodeLine{00070\ \ \ [center\ addObserver:\_graph\_view\_controller}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ selector:@selector(windowWillClose:)}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name:NSWindowWillCloseNotification}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{object}:\_window];}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00079\ \mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}::}
\DoxyCodeLine{00080\ \string~\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}()\ \{}
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{if}\ (\_animation\_timer\ !=\ nil)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ [\_animation\_timer\ invalidate];}
\DoxyCodeLine{00083\ \ \ \ \ [\_animation\_timer\ release];}
\DoxyCodeLine{00084\ \ \ \ \ \_animation\_timer\ =\ nil;}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \_monitor\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00088\ \ \ release\_bitmap();}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \_label\_stack.clear\_labels();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ [\_graph\_view\_controller\ release];}
\DoxyCodeLine{00093\ \ \ [\_window\ release];}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ CGColorRelease(\_background\_color);}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00101\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00102\ close()\ \{}
\DoxyCodeLine{00103\ \ \ [\_window\ close];}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a7d2d70b5ae3435b56c1d61492d912d3e}{MacStatsGraph::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classMacStatsGraph_a7d2d70b5ae3435b56c1d61492d912d3e}{new\_collector}}(\textcolor{keywordtype}{int}\ new\_collector)\ \{}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00116\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aa276fe00afb454ceabe9c8e1f984a4c3}{MacStatsGraph::}}}
\DoxyCodeLine{00117\ \mbox{\hyperlink{classMacStatsGraph_aa276fe00afb454ceabe9c8e1f984a4c3}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00118\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00123\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a31cb49bba8adb6425c269b9f588a1fa6}{MacStatsGraph::}}}
\DoxyCodeLine{00124\ \mbox{\hyperlink{classMacStatsGraph_a31cb49bba8adb6425c269b9f588a1fa6}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00132\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aa3a8e3222487a8c30d2d3c04fc121030}{MacStatsGraph::}}}
\DoxyCodeLine{00133\ \mbox{\hyperlink{classMacStatsGraph_aa3a8e3222487a8c30d2d3c04fc121030}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00134\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00140\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a884578ad3d8f389b3289870a22a6d8db}{MacStatsGraph::}}}
\DoxyCodeLine{00141\ \mbox{\hyperlink{classMacStatsGraph_a884578ad3d8f389b3289870a22a6d8db}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00148\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a2f1ffd9df79b4b621c977fc5131323bc}{MacStatsGraph::}}}
\DoxyCodeLine{00149\ \mbox{\hyperlink{classMacStatsGraph_a2f1ffd9df79b4b621c977fc5131323bc}{set\_pause}}(\textcolor{keywordtype}{bool}\ pause)\ \{}
\DoxyCodeLine{00150\ \ \ \_pause\ =\ pause;}
\DoxyCodeLine{00151\ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00156\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aaab4dbd9024fb41515641cfd37905efc}{MacStatsGraph::}}}
\DoxyCodeLine{00157\ \mbox{\hyperlink{classMacStatsGraph_aaab4dbd9024fb41515641cfd37905efc}{user\_guide\_bars\_changed}}()\ \{}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordflow}{if}\ (\_scale\_area\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00160\ \ \ \}}
\DoxyCodeLine{00161\ \ \ \_graph\_view.needsDisplay\ =\ YES;}
\DoxyCodeLine{00162\ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00167\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aa44e2ea98de15ac5f9238a585e84ce7d}{MacStatsGraph::}}}
\DoxyCodeLine{00168\ \mbox{\hyperlink{classMacStatsGraph_aa44e2ea98de15ac5f9238a585e84ce7d}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00174\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a3538a83458f224131e7185c2bd73d123}{MacStatsGraph::}}}
\DoxyCodeLine{00175\ \mbox{\hyperlink{classMacStatsGraph_a3538a83458f224131e7185c2bd73d123}{on\_enter\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ !=\ \_highlighted\_index)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \_highlighted\_index\ =\ collector\_index;}
\DoxyCodeLine{00178\ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00179\ \ \ \}}
\DoxyCodeLine{00180\ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00185\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aab45b9fe792e702b144a7fe8a5539e32}{MacStatsGraph::}}}
\DoxyCodeLine{00186\ \mbox{\hyperlink{classMacStatsGraph_aab45b9fe792e702b144a7fe8a5539e32}{on\_leave\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ ==\ \_highlighted\_index\ \&\&\ collector\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \_highlighted\_index\ =\ -\/1;}
\DoxyCodeLine{00189\ \ \ \ \ force\_redraw();}
\DoxyCodeLine{00190\ \ \ \}}
\DoxyCodeLine{00191\ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00197\ NSMenu\ *\mbox{\hyperlink{classMacStatsGraph_a466b70268315d3d42326f55d8ba94449}{MacStatsGraph::}}}
\DoxyCodeLine{00198\ \mbox{\hyperlink{classMacStatsGraph_a466b70268315d3d42326f55d8ba94449}{get\_label\_menu}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{return}\ nil;}
\DoxyCodeLine{00200\ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00206\ std::string\ \mbox{\hyperlink{classMacStatsGraph_a9fa2d5561709d2a8495d9b811033c967}{MacStatsGraph::}}}
\DoxyCodeLine{00207\ \mbox{\hyperlink{classMacStatsGraph_a9fa2d5561709d2a8495d9b811033c967}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00209\ \}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00214\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a4030d95246b7fb696ee474b9778a182e}{MacStatsGraph::}}}
\DoxyCodeLine{00215\ \mbox{\hyperlink{classMacStatsGraph_a4030d95246b7fb696ee474b9778a182e}{start\_animation}}()\ \{}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{if}\ (\_animation\_timer\ !=\ nil)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00218\ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \_time\ =\ 0.0;}
\DoxyCodeLine{00221\ \ \ \_animation\_timer\ =\ [NSTimer\ scheduledTimerWithTimeInterval:1\ /\ 60.0\ target:\_graph\_view\ selector:\textcolor{keyword}{@selector}(handleTimer:)\ userInfo:nil\ repeats:YES];}
\DoxyCodeLine{00222\ \ \ [\_animation\_timer\ retain];}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00229\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMacStatsGraph_a1b8ff353147ef77d4d21e196e4fe2192}{MacStatsGraph::}}}
\DoxyCodeLine{00230\ \mbox{\hyperlink{classMacStatsGraph_a1b8ff353147ef77d4d21e196e4fe2192}{animate}}(\textcolor{keywordtype}{double}\ time,\ \textcolor{keywordtype}{double}\ dt)\ \{}
\DoxyCodeLine{00231\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00232\ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00237\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a524e8aa33f266e1e46227339bb7ac226}{MacStatsGraph::}}}
\DoxyCodeLine{00238\ \mbox{\hyperlink{classMacStatsGraph_a524e8aa33f266e1e46227339bb7ac226}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ NSRect\ screen\_frame\ =\ \_window.screen.visibleFrame;}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ NSRect\ frame\ =\ \_window.frame;}
\DoxyCodeLine{00244\ \ \ x\ =\ frame.origin.x\ -\/\ screen\_frame.origin.x;}
\DoxyCodeLine{00245\ \ \ y\ =\ (screen\_frame.origin.y\ +\ screen\_frame.size.height)\ -\/\ (frame.origin.y\ +\ frame.size.height);}
\DoxyCodeLine{00246\ \ \ width\ =\ frame.size.width;}
\DoxyCodeLine{00247\ \ \ height\ =\ frame.size.height;}
\DoxyCodeLine{00248\ \ \ maximized\ =\ \_window.zoomed;}
\DoxyCodeLine{00249\ \ \ minimized\ =\ \_window.miniaturized;}
\DoxyCodeLine{00250\ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00255\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_ae85ef8048bce18ca67658bb5e871f445}{MacStatsGraph::}}}
\DoxyCodeLine{00256\ \mbox{\hyperlink{classMacStatsGraph_ae85ef8048bce18ca67658bb5e871f445}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ NSRect\ screen\_frame\ =\ \_window.screen.visibleFrame;}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ NSRect\ frame;}
\DoxyCodeLine{00262\ \ \ frame.origin.x\ =\ screen\_frame.origin.x\ +\ x;}
\DoxyCodeLine{00263\ \ \ frame.origin.y\ =\ (screen\_frame.origin.y\ +\ screen\_frame.size.height)\ -\/\ (y\ +\ height);}
\DoxyCodeLine{00264\ \ \ frame.size.width\ =\ width;}
\DoxyCodeLine{00265\ \ \ frame.size.height\ =\ height;}
\DoxyCodeLine{00266\ \ \ [\_window\ setFrame:frame\ display:NO];}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{if}\ (maximized\ !=\ \_window.zoomed)\ \{}
\DoxyCodeLine{00269\ \ \ \ \ [\_window\ zoom:\_window];}
\DoxyCodeLine{00270\ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \textcolor{keywordflow}{if}\ (minimized\ !=\ \_window.miniaturized)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{if}\ (minimized)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ [\_window\ miniaturize:\_window];}
\DoxyCodeLine{00275\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ [\_window\ deminiaturize:\_window];}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \}}
\DoxyCodeLine{00279\ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00284\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_ab360519ac7337afb978d070c89bfd76e}{MacStatsGraph::}}}
\DoxyCodeLine{00285\ \mbox{\hyperlink{classMacStatsGraph_ab360519ac7337afb978d070c89bfd76e}{reset\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00286\ \ \ force\_redraw();}
\DoxyCodeLine{00287\ \ \ \_label\_stack.\mbox{\hyperlink{classMacStatsLabelStack_a766d7e6f5f345d41e58d95931e7e55fd}{update\_label\_color}}(collector\_index);}
\DoxyCodeLine{00288\ \}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00294\ NSMenu\ *\mbox{\hyperlink{classMacStatsGraph_ab212bb88540399dd3dd0ead08653f8ec}{MacStatsGraph::}}}
\DoxyCodeLine{00295\ \mbox{\hyperlink{classMacStatsGraph_ab212bb88540399dd3dd0ead08653f8ec}{get\_graph\_menu}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00296\ \ \ \textcolor{keywordflow}{return}\ nil;}
\DoxyCodeLine{00297\ \}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00303\ std::string\ \mbox{\hyperlink{classMacStatsGraph_a2c60be1ba65e072aea796a8a08cd7b64}{MacStatsGraph::}}}
\DoxyCodeLine{00304\ \mbox{\hyperlink{classMacStatsGraph_a2c60be1ba65e072aea796a8a08cd7b64}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00305\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00306\ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00313\ MacStatsGraph::DragMode\ \mbox{\hyperlink{classMacStatsGraph_aa537e931eb258abdaa4134c05f96ec82}{MacStatsGraph::}}}
\DoxyCodeLine{00314\ \mbox{\hyperlink{classMacStatsGraph_aa537e931eb258abdaa4134c05f96ec82}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00315\ \ \ \textcolor{keywordflow}{return}\ DM\_none;}
\DoxyCodeLine{00316\ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00322\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_ae1afe8a971ae7386cdb1f7532044806f}{MacStatsGraph::}}}
\DoxyCodeLine{00323\ \mbox{\hyperlink{classMacStatsGraph_ae1afe8a971ae7386cdb1f7532044806f}{set\_drag\_mode}}(MacStatsGraph::DragMode\ drag\_mode)\ \{}
\DoxyCodeLine{00324\ \ \ \_drag\_mode\ =\ drag\_mode;}
\DoxyCodeLine{00325\ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00330\ \textcolor{keywordtype}{bool}\ MacStatsGraph::}
\DoxyCodeLine{00331\ handle\_key(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{bool}\ pressed,\ UniChar\ c,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ key\_code)\ \{}
\DoxyCodeLine{00332\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00333\ \}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00339\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a85679d6f09f08fbb700a91944568b4d5}{MacStatsGraph::}}}
\DoxyCodeLine{00340\ \mbox{\hyperlink{classMacStatsGraph_a85679d6f09f08fbb700a91944568b4d5}{handle\_button\_press}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{bool}\ double\_click,\ \textcolor{keywordtype}{int}\ button)\ \{}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ !=\ DM\_none\ \&\&\ button\ ==\ 1)\ \{}
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{classMacStatsGraph_ae1afe8a971ae7386cdb1f7532044806f}{set\_drag\_mode}}(\_potential\_drag\_mode);}
\DoxyCodeLine{00343\ \ \ \ \ \_drag\_start\_x\ =\ graph\_x;}
\DoxyCodeLine{00344\ \ \ \ \ \_drag\_start\_y\ =\ graph\_y;}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{comment}{//\ SetCapture(\_window);}}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00353\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a0dd05ee8e330022b32393b3354f880a2}{MacStatsGraph::}}}
\DoxyCodeLine{00354\ \mbox{\hyperlink{classMacStatsGraph_a0dd05ee8e330022b32393b3354f880a2}{handle\_button\_release}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00355\ \ \ \mbox{\hyperlink{classMacStatsGraph_ae1afe8a971ae7386cdb1f7532044806f}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00356\ \ \ \textcolor{comment}{//\ ReleaseCapture();}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMacStatsGraph_a45e4a7c922f1a1cc97c413af0c9d3bfb}{handle\_motion}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00359\ \}}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00364\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a45e4a7c922f1a1cc97c413af0c9d3bfb}{MacStatsGraph::}}}
\DoxyCodeLine{00365\ \mbox{\hyperlink{classMacStatsGraph_a45e4a7c922f1a1cc97c413af0c9d3bfb}{handle\_motion}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00366\ \ \ \_potential\_drag\_mode\ =\ \mbox{\hyperlink{classMacStatsGraph_aa537e931eb258abdaa4134c05f96ec82}{consider\_drag\_start}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00367\ \}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00372\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_acfad811cb03fd198c8ef554e82fca3e0}{MacStatsGraph::}}}
\DoxyCodeLine{00373\ \mbox{\hyperlink{classMacStatsGraph_acfad811cb03fd198c8ef554e82fca3e0}{handle\_leave}}()\ \{}
\DoxyCodeLine{00374\ \}}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00379\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a05f2baaa97437827b0d7504363c716a9}{MacStatsGraph::}}}
\DoxyCodeLine{00380\ \mbox{\hyperlink{classMacStatsGraph_a05f2baaa97437827b0d7504363c716a9}{handle\_scroll}}()\ \{}
\DoxyCodeLine{00381\ \ \ force\_redraw();}
\DoxyCodeLine{00382\ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00387\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00388\ handle\_wheel(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{double}\ dx,\ \textcolor{keywordtype}{double}\ dy)\ \{}
\DoxyCodeLine{00389\ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00394\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00395\ handle\_magnify(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{double}\ scale)\ \{}
\DoxyCodeLine{00396\ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00401\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00402\ handle\_timer()\ \{}
\DoxyCodeLine{00403\ \ \ \_time\ +=\ 1.0\ /\ 60.0;}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classMacStatsGraph_a1b8ff353147ef77d4d21e196e4fe2192}{animate}}(\_time,\ 1.0\ /\ 60.0))\ \{}
\DoxyCodeLine{00406\ \ \ \ \ [\_animation\_timer\ invalidate];}
\DoxyCodeLine{00407\ \ \ \ \ [\_animation\_timer\ release];}
\DoxyCodeLine{00408\ \ \ \ \ \_animation\_timer\ =\ nil;}
\DoxyCodeLine{00409\ \ \ \}}
\DoxyCodeLine{00410\ \}}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00415\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aee19588a72b714ef1d04fae9da4967a9}{MacStatsGraph::}}}
\DoxyCodeLine{00416\ \mbox{\hyperlink{classMacStatsGraph_aee19588a72b714ef1d04fae9da4967a9}{handle\_draw\_graph}}(CGContextRef\ ctx,\ NSRect\ rect)\ \{}
\DoxyCodeLine{00417\ \ \ CGContextSetBlendMode(ctx,\ kCGBlendModeCopy);}
\DoxyCodeLine{00418\ \ \ CGContextSetInterpolationQuality(ctx,\ kCGInterpolationNone);}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \textcolor{comment}{//\ Quantize\ this\ so\ that\ changed\_graph\_size\ will\ always\ call\ force\_redraw()}}
\DoxyCodeLine{00421\ \ \ NSRect\ full\_rect\ =\ \_graph\_view.bounds;}
\DoxyCodeLine{00422\ \ \ full\_rect.size.width\ =\ (int)full\_rect.size.width;}
\DoxyCodeLine{00423\ \ \ full\_rect.size.height\ =\ (int)full\_rect.size.height;}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ CGSize\ size\ =\ CGContextConvertSizeToDeviceSpace(ctx,\ full\_rect.size);}
\DoxyCodeLine{00426\ \ \ \textcolor{keywordtype}{int}\ width\ =\ abs((\textcolor{keywordtype}{int})size.width);}
\DoxyCodeLine{00427\ \ \ \textcolor{keywordtype}{int}\ height\ =\ abs((\textcolor{keywordtype}{int})size.height);}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \textcolor{keywordflow}{if}\ (\_ctx\ ==\ \textcolor{keyword}{nullptr}\ ||\ \_bitmap\_xsize\ !=\ width\ ||\ \_bitmap\_ysize\ !=\ height)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_ctx\ ==\ \textcolor{keyword}{nullptr}\ \&\&\ \_scale\_area\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00432\ \ \ \ \ \}}
\DoxyCodeLine{00433\ \ \ \ \ setup\_bitmap(width,\ height,\ \_window.backingScaleFactor);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \mbox{\hyperlink{classMacStatsGraph_a31cb49bba8adb6425c269b9f588a1fa6}{changed\_graph\_size}}(full\_rect.size.width,\ full\_rect.size.height);}
\DoxyCodeLine{00436\ \ \ \}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ CGImageRef\ image\ =\ CGBitmapContextCreateImage(\_ctx);}
\DoxyCodeLine{00439\ \ \ CGContextDrawImage(ctx,\ CGRectMake(0,\ 0,\ full\_rect.size.width,\ full\_rect.size.height),\ image);}
\DoxyCodeLine{00440\ \ \ CGImageRelease(image);}
\DoxyCodeLine{00441\ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00447\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a975810eec4c8bdfbd4a8c645feea3537}{MacStatsGraph::}}}
\DoxyCodeLine{00448\ \mbox{\hyperlink{classMacStatsGraph_a975810eec4c8bdfbd4a8c645feea3537}{handle\_draw\_graph\_overhang}}(CGContextRef\ ctx,\ NSRect\ rect)\ \{}
\DoxyCodeLine{00449\ \}}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00454\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_aa94fc746dc83dcb53d851444151a0ae8}{MacStatsGraph::}}}
\DoxyCodeLine{00455\ \mbox{\hyperlink{classMacStatsGraph_aa94fc746dc83dcb53d851444151a0ae8}{handle\_draw\_scale\_area}}(CGContextRef\ ctx,\ NSRect\ rect)\ \{}
\DoxyCodeLine{00456\ \}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00461\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsGraph_a3fa2e33756f2c7a234e61c54f75786e4}{MacStatsGraph::}}}
\DoxyCodeLine{00462\ \mbox{\hyperlink{classMacStatsGraph_a3fa2e33756f2c7a234e61c54f75786e4}{handle\_back}}()\ \{}
\DoxyCodeLine{00463\ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00468\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00469\ setup\_bitmap(\textcolor{keywordtype}{int}\ xsize,\ \textcolor{keywordtype}{int}\ ysize,\ \textcolor{keywordtype}{double}\ scale)\ \{}
\DoxyCodeLine{00470\ \ \ release\_bitmap();}
\DoxyCodeLine{00471\ }
\DoxyCodeLine{00472\ \ \ \_bitmap\_xsize\ =\ xsize;}
\DoxyCodeLine{00473\ \ \ \_bitmap\_ysize\ =\ ysize;}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \textcolor{comment}{//\ Ostensibly,\ a\ layer\ context\ is\ more\ efficient,\ but\ I\ tried\ it\ and\ the}}
\DoxyCodeLine{00476\ \ \ \textcolor{comment}{//\ performance\ was\ horrible\ compared\ to\ a\ bitmap\ context.}}
\DoxyCodeLine{00477\ \ \ \_ctx\ =\ CGBitmapContextCreate(\textcolor{keyword}{nullptr},\ xsize,\ ysize,\ 8,\ 0,\ CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB),\ kCGImageAlphaPremultipliedLast);}
\DoxyCodeLine{00478\ \ \ CGContextSetBlendMode(\_ctx,\ kCGBlendModeCopy);}
\DoxyCodeLine{00479\ \ \ CGContextScaleCTM(\_ctx,\ scale,\ scale);}
\DoxyCodeLine{00480\ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00485\ \textcolor{keywordtype}{void}\ MacStatsGraph::}
\DoxyCodeLine{00486\ release\_bitmap()\ \{}
\DoxyCodeLine{00487\ \ \ \textcolor{keywordflow}{if}\ (\_ctx\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00488\ \ \ \ \ CGContextRelease(\_ctx);}
\DoxyCodeLine{00489\ \ \ \ \ \_ctx\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00490\ \ \ \}}
\DoxyCodeLine{00491\ \}}

\end{DoxyCode}

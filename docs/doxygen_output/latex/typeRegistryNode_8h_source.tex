\doxysection{type\+Registry\+Node.\+h}
\hypertarget{typeRegistryNode_8h_source}{}\label{typeRegistryNode_8h_source}\index{dtool/src/dtoolbase/typeRegistryNode.h@{dtool/src/dtoolbase/typeRegistryNode.h}}
\mbox{\hyperlink{typeRegistryNode_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ TYPEREGISTRYNODE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ TYPEREGISTRYNODE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dtoolbase_8h}{dtoolbase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{typeHandle_8h}{typeHandle.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{numeric__types_8h}{numeric\_types.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{patomic_8h}{patomic.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{class\ }EXPCL\_DTOOL\_DTOOLBASE\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ \{}
\DoxyCodeLine{00032\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{typedef}\ PyObject\ *PythonWrapFunc(\textcolor{keywordtype}{void}\ *ptr,\ PyTypeObject\ *cast\_from);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}(\mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ handle,\ \textcolor{keyword}{const}\ std::string\ \&name,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \&ref);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_derived\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *child,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *base);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_parent\_towards(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *child,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *base);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ INLINE\ PyTypeObject\ *get\_python\_type()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00044\ \ \ INLINE\ PyObject\ *wrap\_python(\textcolor{keywordtype}{void}\ *ptr,\ PyTypeObject\ *cast\_from)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{keywordtype}{void}\ clear\_subtree();}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordtype}{void}\ define\_subtree();}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_handle;}
\DoxyCodeLine{00050\ \ \ std::string\ \_name;}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \&\_ref;}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{typedef}\ std::vector<TypeRegistryNode\ *>\ Classes;}
\DoxyCodeLine{00053\ \ \ Classes\ \_parent\_classes;}
\DoxyCodeLine{00054\ \ \ Classes\ \_child\_classes;}
\DoxyCodeLine{00055\ \ \ PyTypeObject\ *\_python\_type\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00056\ \ \ PythonWrapFunc\ *\_python\_wrap\_func\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \mbox{\hyperlink{structpatomic}{patomic<size\_t>}}\ \_memory\_usage[TypeHandle::MC\_limit];}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_paranoid\_inheritance;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00063\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ SubtreeMaskType;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ This\ class\ defines\ the\ inheritance\ relationship\ of\ this\ node\ from\ some}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ ancestor\ denoted\ as\ a\ "{}subtree\ top"{}\ node.\ \ This\ is\ usually\ the\ nearest}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ ancestor\ that\ has\ multiple\ inheritance.}}
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{class\ }Inherit\ \{}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00070\ \ \ \ \ INLINE\ Inherit();}
\DoxyCodeLine{00071\ \ \ \ \ INLINE\ Inherit(\mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *top,\ \textcolor{keywordtype}{int}\ bit\_count,}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SubtreeMaskType\ bits);}
\DoxyCodeLine{00073\ \ \ \ \ INLINE\ Inherit(\textcolor{keyword}{const}\ Inherit\ \&copy);}
\DoxyCodeLine{00074\ \ \ \ \ INLINE\ \textcolor{keywordtype}{void}\ operator\ =\ (\textcolor{keyword}{const}\ Inherit\ \&copy);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ INLINE\ \textcolor{keywordtype}{bool}\ operator\ <\ (\textcolor{keyword}{const}\ Inherit\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_derived\_from(\textcolor{keyword}{const}\ Inherit\ \&child,\ \textcolor{keyword}{const}\ Inherit\ \&base);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *\_top;}
\DoxyCodeLine{00080\ \ \ \ \ SubtreeMaskType\ \_mask;}
\DoxyCodeLine{00081\ \ \ \ \ SubtreeMaskType\ \_bits;}
\DoxyCodeLine{00082\ \ \ \};}
\DoxyCodeLine{00083\ \ \ \textcolor{keyword}{typedef}\ std::vector<Inherit>\ TopInheritance;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ r\_build\_subtrees(\mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *top,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\_count,\ SubtreeMaskType\ bits);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ PyTypeObject\ *r\_get\_python\_type()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00089\ \ \ PyObject\ *r\_wrap\_python(\textcolor{keywordtype}{void}\ *ptr,\ PyTypeObject\ *cast\_from)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ check\_derived\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *child,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTypeRegistryNode}{TypeRegistryNode}}\ *base);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ Inherit\ \_inherit;}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \textcolor{comment}{//\ The\ \_top\_inheritance\ member\ is\ only\ filled\ for\ nodes\ that\ are\ denoted\ as}}
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ "{}subtree\ top"{}\ nodes.\ \ It\ represents\ the\ complete\ set\ of\ subtree\_top\ nodes}}
\DoxyCodeLine{00098\ \ \ \textcolor{comment}{//\ that\ this\ node\ inherits\ from,\ directly\ or\ indirectly.}}
\DoxyCodeLine{00099\ \ \ TopInheritance\ \_top\_inheritance;}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ \_visit\_count\ is\ only\ used\ during\ r\_build\_subtree().}}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordtype}{int}\ \_visit\_count;}
\DoxyCodeLine{00103\ \};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\#include\ "{}typeRegistryNode.I"{}}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

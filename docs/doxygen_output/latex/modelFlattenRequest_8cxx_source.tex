\doxysection{model\+Flatten\+Request.\+cxx}
\hypertarget{modelFlattenRequest_8cxx_source}{}\label{modelFlattenRequest_8cxx_source}\index{panda/src/pgraph/modelFlattenRequest.cxx@{panda/src/pgraph/modelFlattenRequest.cxx}}
\mbox{\hyperlink{modelFlattenRequest_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{modelFlattenRequest_8h}{modelFlattenRequest.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nodePath_8h}{nodePath.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ModelFlattenRequest::\_type\_handle;}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ AsyncTask::DoneStatus\ \mbox{\hyperlink{classModelFlattenRequest_afec73d8973d2f8840cbfa7b6387a8ae8}{ModelFlattenRequest::}}}
\DoxyCodeLine{00023\ \mbox{\hyperlink{classModelFlattenRequest_afec73d8973d2f8840cbfa7b6387a8ae8}{do\_task}}()\ \{}
\DoxyCodeLine{00024\ \ \ \textcolor{comment}{//\ We\ make\ another\ instance\ of\ the\ original\ node,\ so\ we\ can\ safely\ flatten}}
\DoxyCodeLine{00025\ \ \ \textcolor{comment}{//\ that\ without\ affecting\ the\ original\ copy.}}
\DoxyCodeLine{00026\ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ np(\textcolor{stringliteral}{"{}flatten\_root"{}});}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \textcolor{comment}{//\ Except\ if\ we\ try\ to\ attach\ a\ node\ without\ parents,\ this\ will\ cause\ the}}
\DoxyCodeLine{00029\ \ \ \textcolor{comment}{//\ original\ NodePath\ to\ be\ affected,\ so\ we\ have\ to\ make\ a\ (shallow)\ copy.}}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{if}\ (\_orig-\/>get\_num\_parents()\ ==\ 0)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ PT(\mbox{\hyperlink{classPandaNode}{PandaNode}})\ copy\ =\ \_orig-\/>make\_copy();}
\DoxyCodeLine{00032\ \ \ \ \ copy-\/>copy\_children(\_orig);}
\DoxyCodeLine{00033\ \ \ \ \ np.attach\_new\_node(copy);}
\DoxyCodeLine{00034\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00035\ \ \ \ \ np.attach\_new\_node(\_orig);}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ \ \ np.\mbox{\hyperlink{classNodePath_af34794b178e9646517ac3cb407993d34}{flatten\_strong}}();}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ set\_result(np.get\_child(0).node());}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ Don't\ continue\ the\ task;\ we're\ done.}}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{return}\ DS\_done;}
\DoxyCodeLine{00043\ \}}

\end{DoxyCode}

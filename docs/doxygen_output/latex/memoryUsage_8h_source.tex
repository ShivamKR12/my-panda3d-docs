\doxysection{memory\+Usage.\+h}
\hypertarget{memoryUsage_8h_source}{}\label{memoryUsage_8h_source}\index{panda/src/express/memoryUsage.h@{panda/src/express/memoryUsage.h}}
\mbox{\hyperlink{memoryUsage_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ MEMORYUSAGE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ MEMORYUSAGE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{typedObject_8h}{typedObject.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{memoryInfo_8h}{memoryInfo.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{memoryUsagePointerCounts_8h}{memoryUsagePointerCounts.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{memoryHook_8h}{memoryHook.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classReferenceCount}{ReferenceCount}};}
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_EXPRESS\ \mbox{\hyperlink{classMemoryUsage}{MemoryUsage}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classMemoryHook}{MemoryHook}}\ \{}
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ ALWAYS\_INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ get\_track\_memory\_usage();}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ record\_pointer(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr);}
\DoxyCodeLine{00040\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ record\_pointer(\textcolor{keywordtype}{void}\ *ptr,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00041\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ update\_type(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00042\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ update\_type(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr,\ \mbox{\hyperlink{classTypedObject}{TypedObject}}\ *typed\_ptr);}
\DoxyCodeLine{00043\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ update\_type(\textcolor{keywordtype}{void}\ *ptr,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00044\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ remove\_pointer(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00047\ \ \ \textcolor{comment}{//\ These\ are\ not\ marked\ public,\ but\ they\ can\ be\ accessed\ via\ the\ MemoryHook}}
\DoxyCodeLine{00048\ \ \ \textcolor{comment}{//\ base\ class.}}
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classMemoryHook_a7555492ddf2d21b4e4257b4492532ed7}{heap\_alloc\_single}}(\textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00050\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMemoryHook_a898d872432e052aaa04113be37b53fa5}{heap\_free\_single}}(\textcolor{keywordtype}{void}\ *ptr);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classMemoryHook_a48f518b2d475945b0e0dc4f256c68626}{heap\_alloc\_array}}(\textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{classMemoryHook_ab6dd724d878249f8902bab6d51e96b72}{heap\_realloc\_array}}(\textcolor{keywordtype}{void}\ *ptr,\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMemoryHook_a6c1598f606ff745dc1cb1e2c593ebd47}{heap\_free\_array}}(\textcolor{keywordtype}{void}\ *ptr);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMemoryHook_a7d3d40238b568141a6fedfc8f58f9202}{mark\_pointer}}(\textcolor{keywordtype}{void}\ *ptr,\ \textcolor{keywordtype}{size\_t}\ orig\_size,\ \mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ref\_ptr);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)\ \&\&\ defined(\_DEBUG)}}
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ win32\_malloc\_hook(\textcolor{keywordtype}{int}\ alloc\_type,\ \textcolor{keywordtype}{void}\ *ptr,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{int}\ block\_use,\ \textcolor{keywordtype}{long}\ request,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *filename,\ \textcolor{keywordtype}{int}\ line);}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ PUBLISHED:}
\DoxyCodeLine{00065\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_tracking();}
\DoxyCodeLine{00066\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ is\_counting();}
\DoxyCodeLine{00067\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_current\_cpp\_size();}
\DoxyCodeLine{00068\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_total\_cpp\_size();}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_panda\_heap\_single\_size();}
\DoxyCodeLine{00071\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_panda\_heap\_array\_size();}
\DoxyCodeLine{00072\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_panda\_heap\_overhead();}
\DoxyCodeLine{00073\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_panda\_mmap\_size();}
\DoxyCodeLine{00074\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_external\_size();}
\DoxyCodeLine{00075\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ get\_total\_size();}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ get\_num\_pointers();}
\DoxyCodeLine{00078\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ get\_pointers(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result);}
\DoxyCodeLine{00079\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ get\_pointers\_of\_type(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00081\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ get\_pointers\_of\_age(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result,}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ from,\ \textcolor{keywordtype}{double}\ to);}
\DoxyCodeLine{00083\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ get\_pointers\_with\_zero\_count(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ freeze();}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_current\_types();}
\DoxyCodeLine{00088\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_trend\_types();}
\DoxyCodeLine{00089\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_current\_ages();}
\DoxyCodeLine{00090\ \ \ INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ show\_trend\_ages();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ PUBLISHED:}
\DoxyCodeLine{00093\ \ \ MAKE\_PROPERTY(tracking,\ is\_tracking);}
\DoxyCodeLine{00094\ \ \ MAKE\_PROPERTY(counting,\ is\_counting);}
\DoxyCodeLine{00095\ \ \ MAKE\_PROPERTY(current\_cpp\_size,\ get\_current\_cpp\_size);}
\DoxyCodeLine{00096\ \ \ MAKE\_PROPERTY(total\_cpp\_size,\ get\_total\_cpp\_size);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ MAKE\_PROPERTY(panda\_heap\_single\_size,\ get\_panda\_heap\_single\_size);}
\DoxyCodeLine{00099\ \ \ MAKE\_PROPERTY(panda\_heap\_array\_size,\ get\_panda\_heap\_array\_size);}
\DoxyCodeLine{00100\ \ \ MAKE\_PROPERTY(panda\_heap\_overhead,\ get\_panda\_heap\_overhead);}
\DoxyCodeLine{00101\ \ \ MAKE\_PROPERTY(panda\_mmap\_size,\ get\_panda\_mmap\_size);}
\DoxyCodeLine{00102\ \ \ MAKE\_PROPERTY(external\_size,\ get\_external\_size);}
\DoxyCodeLine{00103\ \ \ MAKE\_PROPERTY(total\_size,\ get\_total\_size);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMemoryHook_a384863305e12229f4f5e9d292c2e8146}{overflow\_heap\_size}}();}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{classMemoryUsage}{MemoryUsage}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMemoryHook}{MemoryHook}}\ \&copy);}
\DoxyCodeLine{00110\ \ \ INLINE\ \textcolor{keyword}{static}\ \mbox{\hyperlink{classMemoryUsage}{MemoryUsage}}\ *get\_global\_ptr();}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_memory\_usage();}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{keywordtype}{void}\ ns\_record\_pointer(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr);}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{void}\ ns\_record\_pointer(\textcolor{keywordtype}{void}\ *ptr,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{void}\ ns\_update\_type(\textcolor{keywordtype}{void}\ *ptr,\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{void}\ ns\_update\_type(\textcolor{keywordtype}{void}\ *ptr,\ \mbox{\hyperlink{classTypedObject}{TypedObject}}\ *typed\_ptr);}
\DoxyCodeLine{00118\ \ \ \textcolor{keywordtype}{void}\ ns\_remove\_pointer(\mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ *ptr);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \textcolor{keywordtype}{void}\ ns\_record\_void\_pointer(\textcolor{keywordtype}{void}\ *ptr,\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordtype}{void}\ ns\_remove\_void\_pointer(\textcolor{keywordtype}{void}\ *ptr);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \textcolor{keywordtype}{size\_t}\ ns\_get\_total\_size();}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordtype}{int}\ ns\_get\_num\_pointers();}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordtype}{void}\ ns\_get\_pointers(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result);}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordtype}{void}\ ns\_get\_pointers\_of\_type(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result,}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type);}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordtype}{void}\ ns\_get\_pointers\_of\_age(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result,}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ from,\ \textcolor{keywordtype}{double}\ to);}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordtype}{void}\ ns\_get\_pointers\_with\_zero\_count(\mbox{\hyperlink{classMemoryUsagePointers}{MemoryUsagePointers}}\ \&result);}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{void}\ ns\_freeze();}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{void}\ ns\_show\_current\_types();}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordtype}{void}\ ns\_show\_trend\_types();}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordtype}{void}\ ns\_show\_current\_ages();}
\DoxyCodeLine{00136\ \ \ \textcolor{keywordtype}{void}\ ns\_show\_trend\_ages();}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\#ifdef\ DO\_MEMORY\_USAGE}}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordtype}{void}\ consolidate\_void\_ptr(MemoryInfo\ *info);}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{void}\ refresh\_info\_set();}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classMemoryUsage}{MemoryUsage}}\ *\_global\_ptr;}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ We\ shouldn't\ use\ a\ pmap,\ since\ that\ would\ be\ recursive!\ \ Actually,\ it}}
\DoxyCodeLine{00146\ \ \ \textcolor{comment}{//\ turns\ out\ that\ it\ doesn't\ matter,\ since\ somehow\ the\ pallocator\ gets\ used}}
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{//\ even\ though\ we\ don't\ specify\ it\ here,\ so\ we\ have\ to\ make\ special\ code}}
\DoxyCodeLine{00148\ \ \ \textcolor{comment}{//\ that\ handles\ the\ recursion\ anyway.}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{comment}{/*}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ *\ This\ table\ stores\ up\ to\ two\ entiries\ for\ each\ MemoryInfo\ object:\ one\ for}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ *\ the\ void\ pointer\ (the\ pointer\ to\ the\ beginning\ of\ the\ allocated\ memory}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ *\ block),\ and\ one\ for\ the\ ReferenceCount\ pointer.\ \ For\ a\ particular\ object,}}
\DoxyCodeLine{00154\ \textcolor{comment}{\ *\ these\ two\ pointers\ may\ be\ the\ same\ or\ they\ may\ be\ different.\ \ Some\ objects}}
\DoxyCodeLine{00155\ \textcolor{comment}{\ *\ may\ be\ stored\ under\ both\ pointers,\ while\ others\ may\ be\ stored\ under\ only}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ *\ one\ pointer\ or\ the\ other.\ \ We\ don't\ store\ an\ entry\ for\ an\ object's}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ *\ TypedObject\ pointer.}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{typedef}\ std::map<void\ *,\ MemoryInfo\ *>\ Table;}
\DoxyCodeLine{00160\ \ \ Table\ \_table;}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ This\ table\ indexes\ the\ individual\ MemoryInfo\ objects,\ for\ unique}}
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ iteration.}}
\DoxyCodeLine{00164\ \ \ \textcolor{keyword}{typedef}\ std::set<MemoryInfo\ *>\ InfoSet;}
\DoxyCodeLine{00165\ \ \ InfoSet\ \_info\_set;}
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{bool}\ \_info\_set\_dirty;}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{keywordtype}{int}\ \_freeze\_index;}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordtype}{int}\ \_count;}
\DoxyCodeLine{00170\ \ \ \textcolor{keywordtype}{size\_t}\ \_current\_cpp\_size;}
\DoxyCodeLine{00171\ \ \ \textcolor{keywordtype}{size\_t}\ \_total\_cpp\_size;}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{size\_t}\ \_total\_size;}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keyword}{class\ }TypeHistogram\ \{}
\DoxyCodeLine{00175\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordtype}{void}\ add\_info(\mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type,\ MemoryInfo\ *info);}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordtype}{void}\ show()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ Cannot\ use\ a\ pmap,\ since\ that\ would\ be\ recursive!}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keyword}{typedef}\ std::map<TypeHandle,\ MemoryUsagePointerCounts>\ Counts;}
\DoxyCodeLine{00183\ \ \ \ \ Counts\ \_counts;}
\DoxyCodeLine{00184\ \ \ \};}
\DoxyCodeLine{00185\ \ \ TypeHistogram\ \_trend\_types;}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \textcolor{keyword}{class\ }AgeHistogram\ \{}
\DoxyCodeLine{00188\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00189\ \ \ \ \ AgeHistogram();}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordtype}{void}\ add\_info(\textcolor{keywordtype}{double}\ age,\ MemoryInfo\ *info);}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{void}\ show()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordtype}{int}\ choose\_bucket(\textcolor{keywordtype}{double}\ age)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{enum}\ \{\ num\_buckets\ =\ 5\ \};}
\DoxyCodeLine{00198\ \ \ \ \ \mbox{\hyperlink{classMemoryUsagePointerCounts}{MemoryUsagePointerCounts}}\ \_counts[num\_buckets];}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ \_cutoff[num\_buckets];}
\DoxyCodeLine{00200\ \ \ \};}
\DoxyCodeLine{00201\ \ \ AgeHistogram\ \_trend\_ages;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordtype}{bool}\ \_track\_memory\_usage;}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{bool}\ \_startup\_track\_memory\_usage;}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordtype}{bool}\ \_count\_memory\_usage;}
\DoxyCodeLine{00207\ \ \ \textcolor{keywordtype}{bool}\ \_report\_memory\_usage;}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordtype}{double}\ \_report\_memory\_interval;}
\DoxyCodeLine{00209\ \ \ \textcolor{keywordtype}{double}\ \_last\_report\_time;}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \_recursion\_protect;}
\DoxyCodeLine{00212\ \};}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\#include\ "{}memoryUsage.I"{}}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

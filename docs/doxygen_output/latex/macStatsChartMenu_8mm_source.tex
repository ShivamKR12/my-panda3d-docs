\doxysection{mac\+Stats\+Chart\+Menu.\+mm}
\hypertarget{macStatsChartMenu_8mm_source}{}\label{macStatsChartMenu_8mm_source}\index{pandatool/src/mac-\/stats/macStatsChartMenu.mm@{pandatool/src/mac-\/stats/macStatsChartMenu.mm}}
\mbox{\hyperlink{macStatsChartMenu_8mm}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsChartMenu_8h}{macStatsChartMenu.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsChartMenuDelegate_8h}{macStatsChartMenuDelegate.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsMonitor_8h}{macStatsMonitor.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00021\ MacStatsChartMenu::}
\DoxyCodeLine{00022\ MacStatsChartMenu(\mbox{\hyperlink{classMacStatsMonitor}{MacStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index)\ :}
\DoxyCodeLine{00023\ \ \ \_monitor(monitor),}
\DoxyCodeLine{00024\ \ \ \_thread\_index(thread\_index)}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \_menu\ =\ [[NSMenu\ alloc]\ init];}
\DoxyCodeLine{00027\ \ \ \_menu.delegate\ =\ [[\mbox{\hyperlink{interfaceMacStatsChartMenuDelegate}{MacStatsChartMenuDelegate}}\ alloc]\ initWithMonitor:monitor\ threadIndex:thread\_index];}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \_menu.title\ =\ \textcolor{stringliteral}{@"{}Graphs"{}};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{//\ Timeline\ goes\ first.}}
\DoxyCodeLine{00033\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Timeline"{}},\ \textcolor{keyword}{@selector}(handleOpenTimeline:));}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//\ Then\ the\ piano\ roll\ (even\ though\ it's\ not\ very\ useful\ nowadays)}}
\DoxyCodeLine{00036\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Piano\ Roll"{}},\ \textcolor{keyword}{@selector}(handleOpenPianoRoll:));}
\DoxyCodeLine{00037\ \ \ \}}
\DoxyCodeLine{00038\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00039\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}},\ \textcolor{keyword}{@selector}(handleOpenStripChart:),\ 0);}
\DoxyCodeLine{00040\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}},\ \textcolor{keyword}{@selector}(handleOpenFlameGraph:));}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ [\_menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00044\ \ \ \_time\_items\_end\ =\ 3;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ Put\ a\ separator\ between\ time\ items\ and\ level\ items.}}
\DoxyCodeLine{00047\ \ \ [\_menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00048\ \ \ \_level\_items\_end\ =\ \_time\_items\_end\ +\ 1;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ For\ the\ main\ thread\ menu,\ also\ some\ options\ relating\ to\ all\ graph\ windows.}}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ [\_menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00053\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Close\ All\ Graphs"{}},\ \textcolor{keyword}{@selector}(handleCloseAllGraphs:));}
\DoxyCodeLine{00054\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Reopen\ Default\ Graphs"{}},\ \textcolor{keyword}{@selector}(handleReopenDefaultGraphs:));}
\DoxyCodeLine{00055\ \ \ \ \ make\_menu\_item(\_menu,\ -\/1,\ \textcolor{stringliteral}{"{}Save\ Current\ Layout\ as\ Default"{}},\ \textcolor{keyword}{@selector}(handleSaveDefaultGraphs:));}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ do\_update();}
\DoxyCodeLine{00059\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00064\ MacStatsChartMenu::}
\DoxyCodeLine{00065\ \string~MacStatsChartMenu()\ \{}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{interfaceMacStatsChartMenuDelegate}{MacStatsChartMenuDelegate}}\ *delegate\ =\ (\mbox{\hyperlink{interfaceMacStatsChartMenuDelegate}{MacStatsChartMenuDelegate}}\ *)\_menu.delegate;}
\DoxyCodeLine{00067\ \ \ [\_menu\ release];}
\DoxyCodeLine{00068\ \ \ [delegate\ release];}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00074\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsChartMenu_adcf8186e5d0da7b726147b6c66463a60}{MacStatsChartMenu::}}}
\DoxyCodeLine{00075\ \mbox{\hyperlink{classMacStatsChartMenu_adcf8186e5d0da7b726147b6c66463a60}{add\_to\_menu}}(NSMenu\ *menu,\ \textcolor{keywordtype}{int}\ position)\ \{}
\DoxyCodeLine{00076\ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00077\ \ \ [menu\ insertItem:item\ atIndex:position];}
\DoxyCodeLine{00078\ \ \ [menu\ setSubmenu:\_menu\ forItem:item];}
\DoxyCodeLine{00079\ \ \ [item\ release];}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00085\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsChartMenu_a0c7cced98e1ad73f441e5f23c353a8f5}{MacStatsChartMenu::}}}
\DoxyCodeLine{00086\ \mbox{\hyperlink{classMacStatsChartMenu_a0c7cced98e1ad73f441e5f23c353a8f5}{remove\_from\_menu}}(NSMenu\ *menu)\ \{}
\DoxyCodeLine{00087\ \ \ \textcolor{keywordtype}{int}\ index\ =\ [menu\ indexOfItemWithSubmenu:\_menu];}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordflow}{if}\ (index\ >=\ 0)\ \{}
\DoxyCodeLine{00089\ \ \ \ \ [menu\ removeItemAtIndex:index];}
\DoxyCodeLine{00090\ \ \ \}}
\DoxyCodeLine{00091\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00097\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsChartMenu_ab35af6bb6994ebf7ef23881b231f1ff4}{MacStatsChartMenu::}}}
\DoxyCodeLine{00098\ \mbox{\hyperlink{classMacStatsChartMenu_ab35af6bb6994ebf7ef23881b231f1ff4}{check\_update}}()\ \{}
\DoxyCodeLine{00099\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00100\ \ \ \textcolor{keywordflow}{if}\ (view.get\_level\_index()\ !=\ \_last\_level\_index)\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \mbox{\hyperlink{classMacStatsChartMenu_acb35c21b24248e640e8c466e5d1e4fae}{do\_update}}();}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsChartMenu_acb35c21b24248e640e8c466e5d1e4fae}{MacStatsChartMenu::}}}
\DoxyCodeLine{00109\ \mbox{\hyperlink{classMacStatsChartMenu_acb35c21b24248e640e8c466e5d1e4fae}{do\_update}}()\ \{}
\DoxyCodeLine{00110\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00111\ \ \ \_last\_level\_index\ =\ view.get\_level\_index();}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ std::string\ thread\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a5b905293fa940d70742612a4ec5a87f6}{get\_thread\_name}}(\_thread\_index);}
\DoxyCodeLine{00116\ \ \ \ \ \_menu.title\ =\ [NSString\ stringWithUTF8String:thread\_name.c\_str()];}
\DoxyCodeLine{00117\ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}()\ >\ \_collector\_items.size())\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \_collector\_items.resize(client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}(),\ std::make\_pair(\textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}));}
\DoxyCodeLine{00121\ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \textcolor{comment}{//\ The\ menu\ item(s)\ for\ the\ thread's\ frame\ time\ goes\ second.}}
\DoxyCodeLine{00124\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level\ =\ view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}();}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (add\_view(\_menu,\ view\_level,\ \textcolor{keyword}{false},\ \_time\_items\_end))\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ ++\_time\_items\_end;}
\DoxyCodeLine{00128\ \ \ \ \ \ \ ++\_level\_items\_end;}
\DoxyCodeLine{00129\ \ \ \ \ \}}
\DoxyCodeLine{00130\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ 0;\ c\ <\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();\ ++c)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (add\_view(\_menu,\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c),\ \textcolor{keyword}{false},\ \_time\_items\_end))\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ ++\_time\_items\_end;}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ ++\_level\_items\_end;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{comment}{//\ And\ then\ the\ menu\ item(s)\ for\ each\ of\ the\ level\ values.}}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{int}\ num\_toplevel\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a86cbac0fa6c4d9c66ff2d24f001c3148}{get\_num\_toplevel\_collectors}}();}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ tc\ =\ 0;\ tc\ <\ num\_toplevel\_collectors;\ tc++)\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_abce44a655ded672baee4aa5b2463169f}{get\_toplevel\_collector}}(tc);}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector)\ \&\&}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_acb68b1772c25759dfffd96795a1da39d}{get\_collector\_has\_level}}(collector,\ \_thread\_index))\ \{}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&level\_view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ \_thread\_index);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ add\_view(\_menu,\ level\_view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}(),\ \textcolor{keyword}{true},\ \_level\_items\_end);}
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \}}
\DoxyCodeLine{00150\ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00156\ \textcolor{keywordtype}{bool}\ MacStatsChartMenu::}
\DoxyCodeLine{00157\ add\_view(NSMenu\ *parent\_menu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ show\_level,\ \textcolor{keywordtype}{int}\ insert\_at)\ \{}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{int}\ collector\ =\ view\_level-\/>get\_collector();}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ NSMenuItem\ *\&menu\_item\ =\ \_collector\_items[collector].first;}
\DoxyCodeLine{00162\ \ \ NSMenu\ *\&menu\ =\ \_collector\_items[collector].second;}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();}
\DoxyCodeLine{00167\ \ \ \textcolor{keywordflow}{if}\ (menu\ ==\ \textcolor{keyword}{nullptr}\ \&\&\ num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ For\ a\ collector\ without\ children,\ no\ point\ in\ making\ a\ submenu.\ \ We\ just}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{comment}{//\ have\ the\ item\ open\ a\ strip\ chart\ directly\ (no\ point\ in\ creating\ a\ flame}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ graph\ if\ there\ are\ no\ children).}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{if}\ (menu\_item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \textcolor{comment}{//\ Already\ exists.}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ std::string\ collector\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_ae5c6475096900ee0f29eff74e6919b31}{get\_collector\_name}}(collector);}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{if}\ (show\_level)\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ menu\_item\ =\ make\_menu\_item(parent\_menu,\ insert\_at,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ collector\_name.c\_str(),\ \textcolor{keyword}{@selector}(handleOpenStripChartLevel:),\ collector);}
\DoxyCodeLine{00180\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ menu\_item\ =\ make\_menu\_item(parent\_menu,\ insert\_at,}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ collector\_name.c\_str(),\ \textcolor{keyword}{@selector}(handleOpenStripChart:),\ collector);}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00185\ \ \ \}}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (menu\_item\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ menu\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ Unhook\ the\ signal\ handler,\ we\ are\ creating\ a\ submenu.}}
\DoxyCodeLine{00188\ \ \ \ \ menu\_item.action\ =\ nil;}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{comment}{//\ Create\ a\ submenu.}}
\DoxyCodeLine{00192\ \ \ \textcolor{keywordtype}{bool}\ added\_item\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{if}\ (menu\_item\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00194\ \ \ \ \ std::string\ collector\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_ae5c6475096900ee0f29eff74e6919b31}{get\_collector\_name}}(collector);}
\DoxyCodeLine{00195\ \ \ \ \ menu\_item\ =\ make\_menu\_item(parent\_menu,\ insert\_at,\ collector\_name.c\_str(),\ nil);}
\DoxyCodeLine{00196\ \ \ \ \ added\_item\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00197\ \ \ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{if}\ (menu\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00200\ \ \ \ \ menu\ =\ [[NSMenu\ alloc]\ init];}
\DoxyCodeLine{00201\ \ \ \ \ [parent\_menu\ setSubmenu:menu\ forItem:menu\_item];}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{if}\ (show\_level)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ make\_menu\_item(menu,\ -\/1,\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}},}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{@selector}(handleOpenStripChartLevel:),\ collector);}
\DoxyCodeLine{00206\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ make\_menu\_item(menu,\ -\/1,\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}},}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{@selector}(handleOpenStripChart:),\ collector);}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\ ==\ 0)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ collector\ =\ -\/1;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ make\_menu\_item(menu,\ -\/1,\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}},}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{@selector}(handleOpenFlameGraph:),\ collector);}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ [menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00219\ \ \ \ \ [menu\ release];}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ 0;\ c\ <\ num\_children;\ ++c)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ add\_view(menu,\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c),\ show\_level,\ 2\ +\ !show\_level);}
\DoxyCodeLine{00224\ \ \ \}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{return}\ added\_item;}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00232\ NSMenuItem\ *MacStatsChartMenu::}
\DoxyCodeLine{00233\ make\_menu\_item(NSMenu\ *parent\_menu,\ \textcolor{keywordtype}{int}\ insert\_at,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *label,\ \textcolor{keywordtype}{SEL}\ action,\ \textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00234\ \ \ NSMenuItem\ *menu\_item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00235\ \ \ menu\_item.title\ =\ [NSString\ stringWithUTF8String:label];}
\DoxyCodeLine{00236\ \ \ menu\_item.target\ =\ \_menu.delegate;}
\DoxyCodeLine{00237\ \ \ menu\_item.action\ =\ action;}
\DoxyCodeLine{00238\ \ \ menu\_item.tag\ =\ collector\_index;}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordflow}{if}\ (insert\_at\ >=\ 0)\ \{}
\DoxyCodeLine{00240\ \ \ \ \ [parent\_menu\ insertItem:menu\_item\ atIndex:insert\_at];}
\DoxyCodeLine{00241\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00242\ \ \ \ \ [parent\_menu\ addItem:menu\_item];}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ \ \ [menu\_item\ release];}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordflow}{return}\ menu\_item;}
\DoxyCodeLine{00246\ \}}

\end{DoxyCode}

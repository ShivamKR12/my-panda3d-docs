\doxysection{Adaptive\+Lru Class Reference}
\hypertarget{classAdaptiveLru}{}\label{classAdaptiveLru}\index{AdaptiveLru@{AdaptiveLru}}


{\ttfamily \#include $<$adaptive\+Lru.\+h$>$}

Inheritance diagram for Adaptive\+Lru\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classAdaptiveLru}
\end{center}
\end{figure}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classAdaptiveLru_a6d2990eda20de439dd92edea333834e6}\label{classAdaptiveLru_a6d2990eda20de439dd92edea333834e6} 
enum {\bfseries Lru\+Page\+Priority} \{ \newline
{\bfseries LPP\+\_\+\+Highest} = 0
, {\bfseries LPP\+\_\+\+High} = 10
, {\bfseries LPP\+\_\+\+New} = 20
, {\bfseries LPP\+\_\+\+Normal} = 25
, \newline
{\bfseries LPP\+\_\+\+Intermediate} = 30
, {\bfseries LPP\+\_\+\+Low} = 40
, {\bfseries LPP\+\_\+\+Total\+Priorities} = 50
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classAdaptiveLru_a726d768efc5c7a84b3336cafecd38cf9}\label{classAdaptiveLru_a726d768efc5c7a84b3336cafecd38cf9} 
INLINE PN\+\_\+stdfloat {\bfseries calculate\+\_\+exponential\+\_\+moving\+\_\+average} (PN\+\_\+stdfloat value, PN\+\_\+stdfloat average) const
\item 
void \mbox{\hyperlink{classAdaptiveLru_aaf06cccd5a955824cdfba521becbf4ac}{do\+\_\+partial\+\_\+lru\+\_\+update}} (int num\+\_\+updates)
\item 
void \mbox{\hyperlink{classAdaptiveLru_a7f77fe53ca3afa1ee749e8b29ee77168}{update\+\_\+page}} (\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}page)
\item 
void \mbox{\hyperlink{classAdaptiveLru_a43a8ce1f6405913e62fcbf8c05b574ba}{do\+\_\+add\+\_\+page}} (\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}page)
\item 
void \mbox{\hyperlink{classAdaptiveLru_af91facbd072f7615c0ae9e0d7fb668e2}{do\+\_\+remove\+\_\+page}} (\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}page)
\item 
void \mbox{\hyperlink{classAdaptiveLru_a9c5396ccfe137e8ba3fedbcfc39b8bed}{do\+\_\+access\+\_\+page}} (\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}page)
\item 
void \mbox{\hyperlink{classAdaptiveLru_aad757d7cd81dd00aa4ac50fdba87ae47}{do\+\_\+evict\+\_\+to}} (size\+\_\+t target\+\_\+size, bool hard\+\_\+evict)
\item 
bool \mbox{\hyperlink{classAdaptiveLru_a2d2dd6721a7cee7923b4959a3aa50711}{do\+\_\+validate}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classAdaptiveLru_a2e1ed2837dd00d6401d1f46291e40a94}\label{classAdaptiveLru_a2e1ed2837dd00d6401d1f46291e40a94} 
\mbox{\hyperlink{classLightMutex}{Light\+Mutex}} {\bfseries \+\_\+lock}
\item 
\Hypertarget{classAdaptiveLru_a395f33fde20c028605ba0e9cc3f28a30}\label{classAdaptiveLru_a395f33fde20c028605ba0e9cc3f28a30} 
size\+\_\+t {\bfseries \+\_\+total\+\_\+size}
\item 
\Hypertarget{classAdaptiveLru_a3927a7efb363e9253ebd453368bcc744}\label{classAdaptiveLru_a3927a7efb363e9253ebd453368bcc744} 
size\+\_\+t {\bfseries \+\_\+max\+\_\+size}
\item 
\Hypertarget{classAdaptiveLru_a347b48ecf8d13a592d360bf5d5a0518b}\label{classAdaptiveLru_a347b48ecf8d13a592d360bf5d5a0518b} 
unsigned int {\bfseries \+\_\+current\+\_\+frame\+\_\+identifier}
\item 
\Hypertarget{classAdaptiveLru_aad8a219f84e2ec2cdc5591d2d31ac727}\label{classAdaptiveLru_aad8a219f84e2ec2cdc5591d2d31ac727} 
PN\+\_\+stdfloat {\bfseries \+\_\+weight}
\item 
\Hypertarget{classAdaptiveLru_aa4ed34f53b2bc9de717d477f9af029cd}\label{classAdaptiveLru_aa4ed34f53b2bc9de717d477f9af029cd} 
int {\bfseries \+\_\+max\+\_\+updates\+\_\+per\+\_\+frame}
\item 
\Hypertarget{classAdaptiveLru_a25ea718091b0596c55c1e12982b8816c}\label{classAdaptiveLru_a25ea718091b0596c55c1e12982b8816c} 
\mbox{\hyperlink{classAdaptiveLruPageDynamicList}{Adaptive\+Lru\+Page\+Dynamic\+List}} {\bfseries \+\_\+page\+\_\+array} \mbox{[}LPP\+\_\+\+Total\+Priorities\mbox{]}
\item 
\Hypertarget{classAdaptiveLru_a9607438f75a35a6ff2b9809d67925a68}\label{classAdaptiveLru_a9607438f75a35a6ff2b9809d67925a68} 
\mbox{\hyperlink{classAdaptiveLruPageStaticList}{Adaptive\+Lru\+Page\+Static\+List}} {\bfseries \+\_\+static\+\_\+list}
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes inherited from \mbox{\hyperlink{classMemoryBase}{Memory\+Base}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries ALLOC\+\_\+\+MEMORY\+\_\+\+BASE}
\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classAdaptiveLru_a6e8d39911455f987cc0a378e3341a79e}\label{classAdaptiveLru_a6e8d39911455f987cc0a378e3341a79e} 
class {\bfseries Adaptive\+Lru\+Page}
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Static Public Member Functions inherited from \mbox{\hyperlink{classNamable}{Namable}}}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classTypeHandle}{Type\+Handle}} {\bfseries get\+\_\+class\+\_\+type} ()
\item 
static void {\bfseries init\+\_\+type} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A basic LRU-\/type algorithm, except that it is adaptive and attempts to avoid evicting pages that have been used more frequently (even if less recently) than other pages.

The interface is designed to be identical to that for \doxylink{classSimpleLru}{Simple\+Lru}, so that it may be used as a drop-\/in replacement. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classAdaptiveLru_a9c5396ccfe137e8ba3fedbcfc39b8bed}\label{classAdaptiveLru_a9c5396ccfe137e8ba3fedbcfc39b8bed} 
\index{AdaptiveLru@{AdaptiveLru}!do\_access\_page@{do\_access\_page}}
\index{do\_access\_page@{do\_access\_page}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_access\_page()}{do\_access\_page()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::do\+\_\+access\+\_\+page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}}]{page }\end{DoxyParamCaption})}

Marks a page accessed. \Hypertarget{classAdaptiveLru_a43a8ce1f6405913e62fcbf8c05b574ba}\label{classAdaptiveLru_a43a8ce1f6405913e62fcbf8c05b574ba} 
\index{AdaptiveLru@{AdaptiveLru}!do\_add\_page@{do\_add\_page}}
\index{do\_add\_page@{do\_add\_page}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_add\_page()}{do\_add\_page()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::do\+\_\+add\+\_\+page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}}]{page }\end{DoxyParamCaption})}

Adds a new page the the LRU. \Hypertarget{classAdaptiveLru_aad757d7cd81dd00aa4ac50fdba87ae47}\label{classAdaptiveLru_aad757d7cd81dd00aa4ac50fdba87ae47} 
\index{AdaptiveLru@{AdaptiveLru}!do\_evict\_to@{do\_evict\_to}}
\index{do\_evict\_to@{do\_evict\_to}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_evict\_to()}{do\_evict\_to()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::do\+\_\+evict\+\_\+to (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{target\+\_\+size,  }\item[{bool}]{hard\+\_\+evict }\end{DoxyParamCaption})}

Evicts pages until the LRU is within the indicated size. Assumes the lock is already held. If hard\+\_\+evict is false, does not evict "{}active"{} pages that were added within this epoch. \Hypertarget{classAdaptiveLru_aaf06cccd5a955824cdfba521becbf4ac}\label{classAdaptiveLru_aaf06cccd5a955824cdfba521becbf4ac} 
\index{AdaptiveLru@{AdaptiveLru}!do\_partial\_lru\_update@{do\_partial\_lru\_update}}
\index{do\_partial\_lru\_update@{do\_partial\_lru\_update}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_partial\_lru\_update()}{do\_partial\_lru\_update()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::do\+\_\+partial\+\_\+lru\+\_\+update (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+updates }\end{DoxyParamCaption})}

This only updates a number of pages up to the specified maximum\+\_\+updates. Assumes the lock is held. \Hypertarget{classAdaptiveLru_af91facbd072f7615c0ae9e0d7fb668e2}\label{classAdaptiveLru_af91facbd072f7615c0ae9e0d7fb668e2} 
\index{AdaptiveLru@{AdaptiveLru}!do\_remove\_page@{do\_remove\_page}}
\index{do\_remove\_page@{do\_remove\_page}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_remove\_page()}{do\_remove\_page()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::do\+\_\+remove\+\_\+page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}}]{page }\end{DoxyParamCaption})}

Removes a page from the LRU. \Hypertarget{classAdaptiveLru_a2d2dd6721a7cee7923b4959a3aa50711}\label{classAdaptiveLru_a2d2dd6721a7cee7923b4959a3aa50711} 
\index{AdaptiveLru@{AdaptiveLru}!do\_validate@{do\_validate}}
\index{do\_validate@{do\_validate}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{do\_validate()}{do\_validate()}}
{\footnotesize\ttfamily bool Adaptive\+Lru\+::do\+\_\+validate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Checks that the LRU is internally consistent. Assume the lock is already held. \Hypertarget{classAdaptiveLru_a7f77fe53ca3afa1ee749e8b29ee77168}\label{classAdaptiveLru_a7f77fe53ca3afa1ee749e8b29ee77168} 
\index{AdaptiveLru@{AdaptiveLru}!update\_page@{update\_page}}
\index{update\_page@{update\_page}!AdaptiveLru@{AdaptiveLru}}
\doxysubsubsection{\texorpdfstring{update\_page()}{update\_page()}}
{\footnotesize\ttfamily void Adaptive\+Lru\+::update\+\_\+page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAdaptiveLruPage}{Adaptive\+Lru\+Page}} \texorpdfstring{$\ast$}{*}}]{page }\end{DoxyParamCaption})}

This updates the page\textquotesingle{}s average utilization. Priority LPP\+\_\+\+New is considered to be average usage of 1.\+0 (which means the page is used once per frame on average). Priorities \texorpdfstring{$<$}{<} LPP\+\_\+\+New are for pages used more than once per frame and Priorities \texorpdfstring{$>$}{>} LPP\+\_\+\+New are for pages used less than once per frame.

Assumes the lock is held. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/gobj/\mbox{\hyperlink{adaptiveLru_8h}{adaptive\+Lru.\+h}}\item 
panda/src/gobj/\mbox{\hyperlink{adaptiveLru_8cxx}{adaptive\+Lru.\+cxx}}\end{DoxyCompactItemize}

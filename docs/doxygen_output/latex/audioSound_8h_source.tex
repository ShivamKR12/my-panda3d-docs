\doxysection{audio\+Sound.\+h}
\hypertarget{audioSound_8h_source}{}\label{audioSound_8h_source}\index{panda/src/audio/audioSound.h@{panda/src/audio/audioSound.h}}
\mbox{\hyperlink{audioSound_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ AUDIOSOUND\_H}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ AUDIOSOUND\_H}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__audio_8h}{config\_audio.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{typedReferenceCount_8h}{typedReferenceCount.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filterProperties_8h}{filterProperties.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{luse_8h}{luse.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classAudioManager}{AudioManager}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_AUDIO\ \mbox{\hyperlink{classAudioSound}{AudioSound}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classTypedReferenceCount}{TypedReferenceCount}}\ \{}
\DoxyCodeLine{00027\ PUBLISHED:}
\DoxyCodeLine{00028\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classAudioSound}{\string~AudioSound}}();}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ For\ best\ compatibility,\ set\ the\ loop\_count,\ volume,\ and\ balance,\ prior\ to}}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ calling\ play().\ \ You\ may\ set\ them\ while\ they're\ playing,\ but\ it's}}
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{//\ implementation\ specific\ whether\ you\ get\ the\ results.\ \ -\/\ Calling\ play()\ a}}
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ second\ time\ on\ the\ same\ sound\ before\ it\ is\ finished\ will\ start\ the\ sound}}
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ again\ (creating\ a\ skipping\ or\ stuttering\ effect).}}
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ play()\ =\ 0;}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ stop()\ =\ 0;}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ loop:\ false\ =\ play\ once;\ true\ =\ play\ forever.\ \ inits\ to\ false.}}
\DoxyCodeLine{00039\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_loop(\textcolor{keywordtype}{bool}\ loop=\textcolor{keyword}{true})\ =\ 0;}
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ get\_loop()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ loop\_count:\ 0\ =\ forever;\ 1\ =\ play\ once;\ n\ =\ play\ n\ times.\ \ inits\ to\ 1.}}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_loop\_count(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ loop\_count=1)\ =\ 0;}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ get\_loop\_count()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ loop\_start:\ 0\ =\ beginning.\ \ expressed\ in\ seconds.\ \ inits\ to\ 0.}}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_loop\_start(PN\_stdfloat\ loop\_start=0)\ =\ 0;}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_loop\_start()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_time(PN\_stdfloat\ start\_time=0.0)\ =\ 0;}
\DoxyCodeLine{00066\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_time()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ 0\ =\ minimum;\ 1.0\ =\ maximum.\ \ inits\ to\ 1.0.}}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_volume(PN\_stdfloat\ volume=1.0)\ =\ 0;}
\DoxyCodeLine{00070\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_volume()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ -\/1.0\ is\ hard\ left\ 0.0\ is\ centered\ 1.0\ is\ hard\ right\ inits\ to\ 0.0.}}
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_balance(PN\_stdfloat\ balance\_right=0.0)\ =\ 0;}
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_balance()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{//\ play\_rate\ is\ any\ positive\ PN\_stdfloat\ value.\ \ inits\ to\ 1.0.}}
\DoxyCodeLine{00077\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_play\_rate(PN\_stdfloat\ play\_rate=1.0f)\ =\ 0;}
\DoxyCodeLine{00078\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_play\_rate()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ inits\ to\ manager's\ state.}}
\DoxyCodeLine{00081\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_active(\textcolor{keywordtype}{bool}\ flag=\textcolor{keyword}{true})\ =\ 0;}
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ get\_active()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ Set\ (or\ clear)\ the\ event\ that\ will\ be\ thrown\ when\ the\ sound\ finishes}}
\DoxyCodeLine{00085\ \ \ \textcolor{comment}{//\ playing.\ \ To\ clear\ the\ event,\ pass\ an\ empty\ string.}}
\DoxyCodeLine{00086\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_finished\_event(\textcolor{keyword}{const}\ std::string\&\ event)\ =\ 0;}
\DoxyCodeLine{00087\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{const}\ std::string\&\ get\_finished\_event()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ There\ is\ no\ set\_name(),\ this\ is\ intentional.}}
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{const}\ std::string\&\ get\_name()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_positional()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ return:\ playing\ time\ in\ seconds.}}
\DoxyCodeLine{00095\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ length()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ Controls\ the\ position\ of\ this\ sound's\ emitter.\ \ px,\ py\ and\ pz\ are\ the}}
\DoxyCodeLine{00098\ \ \ \textcolor{comment}{//\ emitter's\ position.\ \ vx,\ vy\ and\ vz\ are\ the\ emitter's\ velocity\ in\ UNITS}}
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{//\ PER\ SECOND\ (default:\ meters).}}
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_attributes(PN\_stdfloat\ px,\ PN\_stdfloat\ py,\ PN\_stdfloat\ pz,\ PN\_stdfloat\ vx,\ PN\_stdfloat\ vy,\ PN\_stdfloat\ vz);}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ get\_3d\_attributes(PN\_stdfloat\ *px,\ PN\_stdfloat\ *py,\ PN\_stdfloat\ *pz,\ PN\_stdfloat\ *vx,\ PN\_stdfloat\ *vy,\ PN\_stdfloat\ *vz);}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{//\ Controls\ the\ direction\ of\ this\ sound\ emitter.\ Currently\ implemented\ only\ for\ OpenAL.}}
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_direction(LVector3\ d);}
\DoxyCodeLine{00105\ \ \ \textcolor{keyword}{virtual}\ LVector3\ get\_3d\_direction()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{//\ Controls\ the\ distance\ (in\ units)\ that\ this\ sound\ begins\ to\ fall\ off.}}
\DoxyCodeLine{00108\ \ \ \textcolor{comment}{//\ Also\ affects\ the\ rate\ it\ falls\ off.\ \ Default\ is\ 1.0\ CloserFaster,\ <1.0}}
\DoxyCodeLine{00109\ \ \ \textcolor{comment}{//\ FartherSlower,\ >1.0}}
\DoxyCodeLine{00110\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_min\_distance(PN\_stdfloat\ dist);}
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_3d\_min\_distance()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{//\ Controls\ the\ maximum\ distance\ (in\ units)\ that\ this\ sound\ stops\ falling}}
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ off.\ \ The\ sound\ does\ not\ stop\ at\ that\ point,\ it\ just\ doesn't\ get\ any}}
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{//\ quieter.\ \ You\ should\ rarely\ need\ to\ adjust\ this.\ \ Default\ is\ 1000000000.0}}
\DoxyCodeLine{00116\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_max\_distance(PN\_stdfloat\ dist);}
\DoxyCodeLine{00117\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_3d\_max\_distance()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \textcolor{comment}{//\ Sets\ the\ angle\ of\ the\ inner\ cone\ of\ a\ directional\ sound\ source.\ In\ the\ zone\ inside\ of\ the\ inner\ cone}}
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ sound\ is\ emitted\ with\ the\ (normal)\ volume\ set\ by\ set\_volume().}}
\DoxyCodeLine{00121\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_cone\_inner\_angle(PN\_stdfloat\ angle);}
\DoxyCodeLine{00122\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_3d\_cone\_inner\_angle()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00123\ \ \ \textcolor{comment}{//\ Sets\ the\ angle\ of\ the\ outer\ cone\ of\ a\ directional\ sound\ source.\ In\ the\ zone\ between}}
\DoxyCodeLine{00124\ \ \ \textcolor{comment}{//\ the\ inner\ and\ the\ outer\ cone\ the\ volume\ is\ attenuated.}}
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_cone\_outer\_angle(PN\_stdfloat\ angle);}
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_3d\_cone\_outer\_angle()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{//\ Sets\ a\ factor\ applied\ to\ the\ volume\ set\ by\ set\_volume()\ for\ the\ zone\ outside\ the\ outer\ cone.}}
\DoxyCodeLine{00128\ \ \ \textcolor{comment}{//\ By\ default\ this\ is\ 0\ (so\ no\ sound\ is\ heard\ inside\ the\ outer\ zone).}}
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_3d\_cone\_outer\_gain(PN\_stdfloat\ gain);}
\DoxyCodeLine{00130\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_3d\_cone\_outer\_gain()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ speaker\_mix\ is\ for\ use\ with\ FMOD.}}
\DoxyCodeLine{00133\ \ \ \textcolor{keyword}{virtual}\ PN\_stdfloat\ get\_speaker\_mix(\textcolor{keywordtype}{int}\ speaker);}
\DoxyCodeLine{00134\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_speaker\_mix(PN\_stdfloat\ frontleft,\ PN\_stdfloat\ frontright,\ PN\_stdfloat\ center,\ PN\_stdfloat\ sub,\ PN\_stdfloat\ backleft,\ PN\_stdfloat\ backright,\ PN\_stdfloat\ sideleft,\ PN\_stdfloat\ \ sideright);}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ get\_priority();}
\DoxyCodeLine{00137\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ set\_priority(\textcolor{keywordtype}{int}\ priority);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ configure\_filters(\mbox{\hyperlink{classFilterProperties}{FilterProperties}}\ *config);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{keyword}{enum}\ SoundStatus\ \{\ BAD,\ READY,\ PLAYING\ \};}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{virtual}\ SoundStatus\ status()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ output(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00145\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ write(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ PUBLISHED:}
\DoxyCodeLine{00148\ \ \ MAKE\_PROPERTY(time,\ get\_time,\ set\_time);}
\DoxyCodeLine{00149\ \ \ MAKE\_PROPERTY(volume,\ get\_volume,\ set\_volume);}
\DoxyCodeLine{00150\ \ \ MAKE\_PROPERTY(balance,\ get\_balance,\ set\_balance);}
\DoxyCodeLine{00151\ \ \ MAKE\_PROPERTY(play\_rate,\ get\_play\_rate,\ set\_play\_rate);}
\DoxyCodeLine{00152\ \ \ MAKE\_PROPERTY(active,\ get\_active,\ set\_active);}
\DoxyCodeLine{00153\ \ \ MAKE\_PROPERTY(name,\ get\_name);}
\DoxyCodeLine{00154\ \ \ MAKE\_PROPERTY(positional,\ is\_positional);}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00157\ \ \ \mbox{\hyperlink{classAudioSound}{AudioSound}}(\textcolor{keywordtype}{bool}\ positional);}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ \_positional\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classAudioManager}{AudioManager}};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00164\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00166\ \ \ \}}
\DoxyCodeLine{00167\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type()\ \{}
\DoxyCodeLine{00168\ \ \ \ \ TypedReferenceCount::init\_type();}
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{register__type_8h_a54fc7cae2908ec9e8da7174a8d027735}{register\_type}}(\_type\_handle,\ \textcolor{stringliteral}{"{}AudioSound"{}},}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TypedReferenceCount::get\_class\_type());}
\DoxyCodeLine{00171\ \ \ \}}
\DoxyCodeLine{00172\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_type()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_class\_type();}
\DoxyCodeLine{00174\ \ \ \}}
\DoxyCodeLine{00175\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ force\_init\_type()\ \{init\_type();\ \textcolor{keywordflow}{return}\ get\_class\_type();\}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00178\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00179\ \};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \textcolor{keyword}{inline}\ std::ostream\ \&}
\DoxyCodeLine{00182\ operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classAudioSound}{AudioSound}}\ \&sound)\ \{}
\DoxyCodeLine{00183\ \ \ sound.output(out);}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00185\ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\#include\ "{}audioSound.I"{}}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ EXPCL\_PANDA\_AUDIO\ std::ostream\ \&}
\DoxyCodeLine{00190\ operator\ <<\ (std::ostream\ \&out,\ AudioSound::SoundStatus\ status);}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ AUDIOSOUND\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}

\doxysection{mouse\+Watcher\+Base.\+cxx}
\hypertarget{mouseWatcherBase_8cxx_source}{}\label{mouseWatcherBase_8cxx_source}\index{panda/src/tform/mouseWatcherBase.cxx@{panda/src/tform/mouseWatcherBase.cxx}}
\mbox{\hyperlink{mouseWatcherBase_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mouseWatcherBase_8h}{mouseWatcherBase.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lineSegs_8h}{lineSegs.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightMutexHolder_8h}{lightMutexHolder.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ MouseWatcherBase::\_type\_handle;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00024\ MouseWatcherBase::}
\DoxyCodeLine{00025\ MouseWatcherBase()\ :}
\DoxyCodeLine{00026\ \ \ \_lock(\textcolor{stringliteral}{"{}MouseWatcherBase"{}})}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \_sorted\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00030\ \ \ \_show\_regions\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00031\ \ \ \_color.set(0.4,\ 0.6f,\ 1.0f,\ 1.0f);}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00033\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00038\ MouseWatcherBase::}
\DoxyCodeLine{00039\ \string~MouseWatcherBase()\ \{}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00046\ \textcolor{keywordtype}{void}\ MouseWatcherBase::}
\DoxyCodeLine{00047\ add\_region(PT(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}})\ region)\ \{}
\DoxyCodeLine{00048\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Also\ add\ it\ to\ the\ vizzes\ if\ we\ have\ them.}}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (UNLIKELY(\_show\_regions))\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ check\ whether\ it\ is\ already\ in\ the\ set,\ so\ that\ we\ don't}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ create\ a\ duplicate\ viz.}}
\DoxyCodeLine{00055\ \ \ \ \ Regions::const\_iterator\ ri\ =}
\DoxyCodeLine{00056\ \ \ \ \ \ \ std::find(\_regions.begin(),\ \_regions.end(),\ region);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{if}\ (ri\ ==\ \_regions.end())\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ nassertv(\_vizzes.size()\ ==\ \_regions.size());}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \_vizzes.push\_back(make\_viz\_region(region));}
\DoxyCodeLine{00061\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \_regions.push\_back(std::move(region));}
\DoxyCodeLine{00068\ \ \ \_sorted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00075\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMouseWatcherBase_adfc5f92cba79fb8af503bf2ed4b3dc6e}{MouseWatcherBase::}}}
\DoxyCodeLine{00076\ \mbox{\hyperlink{classMouseWatcherBase_adfc5f92cba79fb8af503bf2ed4b3dc6e}{has\_region}}(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ PT(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}})\ ptr\ =\ region;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keywordflow}{if}\ (\_sorted)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ If\ the\ vector\ is\ already\ sorted,\ we\ can\ do\ this\ the\ quick\ way.}}
\DoxyCodeLine{00083\ \ \ \ \ Regions::const\_iterator\ ri\ =\ lower\_bound(\_regions.begin(),\ \_regions.end(),\ ptr);}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{return}\ (ri\ !=\ \_regions.end()\ \&\&\ (*ri)\ ==\ ptr);}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ If\ the\ vector\ isn't\ sorted,\ do\ a\ linear\ scan.}}
\DoxyCodeLine{00088\ \ \ Regions::const\_iterator\ ri\ =\ find(\_regions.begin(),\ \_regions.end(),\ ptr);}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{return}\ (ri\ !=\ \_regions.end());}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMouseWatcherBase_a116034fb270181fb10c5c0705633047b}{MouseWatcherBase::}}}
\DoxyCodeLine{00097\ \mbox{\hyperlink{classMouseWatcherBase_a116034fb270181fb10c5c0705633047b}{remove\_region}}(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region)\ \{}
\DoxyCodeLine{00098\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMouseWatcherBase_a132493859b8c02d7804cd2bfa21548c2}{do\_remove\_region}}(region);}
\DoxyCodeLine{00100\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00107\ \mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *\mbox{\hyperlink{classMouseWatcherBase_aa329974bb31e695654858a9b48cd0816}{MouseWatcherBase::}}}
\DoxyCodeLine{00108\ \mbox{\hyperlink{classMouseWatcherBase_aa329974bb31e695654858a9b48cd0816}{find\_region}}(\textcolor{keyword}{const}\ std::string\ \&name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00109\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region\ :\ \_regions)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{if}\ (region-\/>get\_name()\ ==\ name)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ region;}
\DoxyCodeLine{00114\ \ \ \ \ \}}
\DoxyCodeLine{00115\ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00118\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00123\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_a61440ae377ba0b37bd77d5ab3ec9bdb0}{MouseWatcherBase::}}}
\DoxyCodeLine{00124\ \mbox{\hyperlink{classMouseWatcherBase_a61440ae377ba0b37bd77d5ab3ec9bdb0}{clear\_regions}}()\ \{}
\DoxyCodeLine{00125\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \_regions.clear();}
\DoxyCodeLine{00128\ \ \ \_sorted\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{if}\ (\_show\_regions)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \_show\_regions\_root.node()-\/>\mbox{\hyperlink{classPandaNode_a449ebdf8285bc42bb62c7fd1afe8ef7a}{remove\_all\_children}}();}
\DoxyCodeLine{00133\ \ \ \ \ \_vizzes.clear();}
\DoxyCodeLine{00134\ \ \ \}}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00141\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classMouseWatcherBase_a9bdc43f54d759b23c751acefcebb391c}{MouseWatcherBase::}}}
\DoxyCodeLine{00142\ \mbox{\hyperlink{classMouseWatcherBase_a9bdc43f54d759b23c751acefcebb391c}{get\_num\_regions}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00143\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{if}\ (!\_sorted)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ Remove\ potential\ duplicates\ to\ get\ an\ accurate\ count.}}
\DoxyCodeLine{00146\ \ \ \ \ ((\mbox{\hyperlink{classMouseWatcherBase}{MouseWatcherBase}}\ *)\textcolor{keyword}{this})-\/>do\_sort\_regions();}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{return}\ \_regions.size();}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00156\ \mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *\mbox{\hyperlink{classMouseWatcherBase_a0bf4f4a360b777ce3e523075d2ab36ec}{MouseWatcherBase::}}}
\DoxyCodeLine{00157\ \mbox{\hyperlink{classMouseWatcherBase_a0bf4f4a360b777ce3e523075d2ab36ec}{get\_region}}(\textcolor{keywordtype}{size\_t}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00158\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordflow}{if}\ (!\_sorted)\ \{}
\DoxyCodeLine{00160\ \ \ \ \ ((\mbox{\hyperlink{classMouseWatcherBase}{MouseWatcherBase}}\ *)\textcolor{keyword}{this})-\/>do\_sort\_regions();}
\DoxyCodeLine{00161\ \ \ \}}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ \_regions.size())\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{return}\ \_regions[n];}
\DoxyCodeLine{00164\ \ \ \}}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00166\ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00171\ \textcolor{keywordtype}{void}\ MouseWatcherBase::}
\DoxyCodeLine{00172\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00173\ \ \ out\ <<\ \textcolor{stringliteral}{"{}MouseWatcherGroup\ ("{}}\ <<\ \_regions.size()\ <<\ \textcolor{stringliteral}{"{}\ regions)"{}};}
\DoxyCodeLine{00174\ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00179\ \textcolor{keywordtype}{void}\ MouseWatcherBase::}
\DoxyCodeLine{00180\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00181\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region\ :\ \_regions)\ \{}
\DoxyCodeLine{00184\ \ \ \ \ region-\/>write(out,\ indent\_level);}
\DoxyCodeLine{00185\ \ \ \}}
\DoxyCodeLine{00186\ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#if\ !defined(NDEBUG)\ ||\ !defined(CPPPARSER)}}
\DoxyCodeLine{00194\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_a79149fa2c957b505b971ec2873a34598}{MouseWatcherBase::}}}
\DoxyCodeLine{00195\ \mbox{\hyperlink{classMouseWatcherBase_a79149fa2c957b505b971ec2873a34598}{show\_regions}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&render2d,\ \textcolor{keyword}{const}\ std::string\ \&bin\_name,\ \textcolor{keywordtype}{int}\ draw\_order)\ \{}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00197\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00198\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a2fe453f7394038cc09ec2c8a500b433c}{do\_show\_regions}}(render2d,\ bin\_name,\ draw\_order);}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00200\ \}}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#if\ !defined(NDEBUG)\ ||\ !defined(CPPPARSER)}}
\DoxyCodeLine{00208\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_ac6d1f15f1894959687b1b83a4c090626}{MouseWatcherBase::}}}
\DoxyCodeLine{00209\ \mbox{\hyperlink{classMouseWatcherBase_ac6d1f15f1894959687b1b83a4c090626}{set\_color}}(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00211\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \_color\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00214\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a981eeb1686fcaf4c6b76dd8ace46841f}{do\_update\_regions}}();}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00216\ \}}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \textcolor{preprocessor}{\#if\ !defined(NDEBUG)\ ||\ !defined(CPPPARSER)}}
\DoxyCodeLine{00223\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_ad4e455f15001d5623922878b236c254b}{MouseWatcherBase::}}}
\DoxyCodeLine{00224\ \mbox{\hyperlink{classMouseWatcherBase_ad4e455f15001d5623922878b236c254b}{hide\_regions}}()\ \{}
\DoxyCodeLine{00225\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00226\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00227\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a97be515df5d9c8e448c1afe90277e932}{do\_hide\_regions}}();}
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00229\ \}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#if\ !defined(NDEBUG)\ ||\ !defined(CPPPARSER)}}
\DoxyCodeLine{00236\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_acafe693d2cac372ac43b679dff994bfd}{MouseWatcherBase::}}}
\DoxyCodeLine{00237\ \mbox{\hyperlink{classMouseWatcherBase_acafe693d2cac372ac43b679dff994bfd}{update\_regions}}()\ \{}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00239\ \ \ \mbox{\hyperlink{classLightMutexHolder}{LightMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00240\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a981eeb1686fcaf4c6b76dd8ace46841f}{do\_update\_regions}}();}
\DoxyCodeLine{00241\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00242\ \}}
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00250\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_ac3250569380cd82938bfd4befd2ebd89}{MouseWatcherBase::}}}
\DoxyCodeLine{00251\ \mbox{\hyperlink{classMouseWatcherBase_ac3250569380cd82938bfd4befd2ebd89}{do\_sort\_regions}}()\ \{}
\DoxyCodeLine{00252\ \ \ \textcolor{keywordflow}{if}\ (!\_sorted)\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \_regions.sort\_unique();}
\DoxyCodeLine{00254\ \ \ \ \ \_sorted\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00255\ \ \ \}}
\DoxyCodeLine{00256\ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00262\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMouseWatcherBase_a132493859b8c02d7804cd2bfa21548c2}{MouseWatcherBase::}}}
\DoxyCodeLine{00263\ \mbox{\hyperlink{classMouseWatcherBase_a132493859b8c02d7804cd2bfa21548c2}{do\_remove\_region}}(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region)\ \{}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ See\ if\ the\ region\ is\ in\ the\ vector.}}
\DoxyCodeLine{00265\ \ \ PT(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}})\ ptr\ =\ region;}
\DoxyCodeLine{00266\ \ \ Regions::iterator\ ri;}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{if}\ (\_sorted)\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{comment}{//\ Faster,\ binary\ search}}
\DoxyCodeLine{00270\ \ \ \ \ ri\ =\ lower\_bound(\_regions.begin(),\ \_regions.end(),\ ptr);}
\DoxyCodeLine{00271\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{comment}{//\ Unsorted,\ so\ use\ slower\ linear\ scan}}
\DoxyCodeLine{00273\ \ \ \ \ ri\ =\ find(\_regions.begin(),\ \_regions.end(),\ ptr);}
\DoxyCodeLine{00274\ \ \ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{if}\ (ri\ !=\ \_regions.end()\ \&\&\ (*ri)\ ==\ ptr)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//\ Found\ it,\ now\ erase\ it}}
\DoxyCodeLine{00278\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{comment}{//\ Also\ remove\ it\ from\ the\ vizzes.}}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_show\_regions)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ nassertr(\_vizzes.size()\ ==\ \_regions.size(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ index\ =\ ri\ -\/\ \_regions.begin();}
\DoxyCodeLine{00283\ \ \ \ \ \ \ Vizzes::iterator\ vi\ =\ \_vizzes.begin()\ +\ index;}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \_show\_regions\_root.node()-\/>\mbox{\hyperlink{classPandaNode_a716da168c3b4828a04dc65b7ebdb89e2}{remove\_child}}(*vi);}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \_vizzes.erase(vi);}
\DoxyCodeLine{00286\ \ \ \ \ \}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \_regions.erase(ri);}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00291\ \ \ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \textcolor{comment}{//\ Did\ not\ find\ the\ region\ to\ erase}}
\DoxyCodeLine{00294\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00295\ \}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00302\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_a2fe453f7394038cc09ec2c8a500b433c}{MouseWatcherBase::}}}
\DoxyCodeLine{00303\ \mbox{\hyperlink{classMouseWatcherBase_a2fe453f7394038cc09ec2c8a500b433c}{do\_show\_regions}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&render2d,\ \textcolor{keyword}{const}\ std::string\ \&bin\_name,}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ draw\_order)\ \{}
\DoxyCodeLine{00305\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a97be515df5d9c8e448c1afe90277e932}{do\_hide\_regions}}();}
\DoxyCodeLine{00306\ \ \ \_show\_regions\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00307\ \ \ \_show\_regions\_root\ =\ render2d.attach\_new\_node(\textcolor{stringliteral}{"{}show\_regions"{}});}
\DoxyCodeLine{00308\ \ \ \_show\_regions\_root.set\_bin(bin\_name,\ draw\_order);}
\DoxyCodeLine{00309\ \ \ \mbox{\hyperlink{classMouseWatcherBase_a981eeb1686fcaf4c6b76dd8ace46841f}{do\_update\_regions}}();}
\DoxyCodeLine{00310\ \}}
\DoxyCodeLine{00311\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00318\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_a97be515df5d9c8e448c1afe90277e932}{MouseWatcherBase::}}}
\DoxyCodeLine{00319\ \mbox{\hyperlink{classMouseWatcherBase_a97be515df5d9c8e448c1afe90277e932}{do\_hide\_regions}}()\ \{}
\DoxyCodeLine{00320\ \ \ \_show\_regions\_root.remove\_node();}
\DoxyCodeLine{00321\ \ \ \_show\_regions\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00322\ \ \ \_vizzes.clear();}
\DoxyCodeLine{00323\ \}}
\DoxyCodeLine{00324\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00331\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMouseWatcherBase_a981eeb1686fcaf4c6b76dd8ace46841f}{MouseWatcherBase::}}}
\DoxyCodeLine{00332\ \mbox{\hyperlink{classMouseWatcherBase_a981eeb1686fcaf4c6b76dd8ace46841f}{do\_update\_regions}}()\ \{}
\DoxyCodeLine{00333\ \ \ nassertv(\_lock.debug\_is\_locked());}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \textcolor{keywordflow}{if}\ (\_show\_regions)\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ we\ have\ no\ duplicates.}}
\DoxyCodeLine{00337\ \ \ \ \ \mbox{\hyperlink{classMouseWatcherBase_ac3250569380cd82938bfd4befd2ebd89}{do\_sort\_regions}}();}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \_show\_regions\_root.node()-\/>\mbox{\hyperlink{classPandaNode_a449ebdf8285bc42bb62c7fd1afe8ef7a}{remove\_all\_children}}();}
\DoxyCodeLine{00340\ \ \ \ \ \_vizzes.clear();}
\DoxyCodeLine{00341\ \ \ \ \ \_vizzes.reserve(\_regions.size());}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region\ :\ \_regions)\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \_vizzes.push\_back(make\_viz\_region(region));}
\DoxyCodeLine{00345\ \ \ \ \ \}}
\DoxyCodeLine{00346\ \ \ \}}
\DoxyCodeLine{00347\ \}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00357\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *MouseWatcherBase::}
\DoxyCodeLine{00358\ make\_viz\_region(\mbox{\hyperlink{classMouseWatcherRegion}{MouseWatcherRegion}}\ *region)\ \{}
\DoxyCodeLine{00359\ \ \ nassertr(\_lock.debug\_is\_locked(),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \mbox{\hyperlink{classLineSegs}{LineSegs}}\ ls(\textcolor{stringliteral}{"{}show\_regions"{}});}
\DoxyCodeLine{00362\ \ \ ls.set\_color(\_color);}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&f\ =\ region-\/>get\_frame();}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ ls.move\_to(LVector3::rfu(f[0],\ 0.0f,\ f[2]));}
\DoxyCodeLine{00367\ \ \ ls.draw\_to(LVector3::rfu(f[1],\ 0.0f,\ f[2]));}
\DoxyCodeLine{00368\ \ \ ls.draw\_to(LVector3::rfu(f[1],\ 0.0f,\ f[3]));}
\DoxyCodeLine{00369\ \ \ ls.draw\_to(LVector3::rfu(f[0],\ 0.0f,\ f[3]));}
\DoxyCodeLine{00370\ \ \ ls.draw\_to(LVector3::rfu(f[0],\ 0.0f,\ f[2]));}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ PT(\mbox{\hyperlink{classPandaNode}{PandaNode}})\ node\ =\ ls.create();}
\DoxyCodeLine{00373\ \ \ \_show\_regions\_root.attach\_new\_node(node);}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00376\ \}}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}

\end{DoxyCode}

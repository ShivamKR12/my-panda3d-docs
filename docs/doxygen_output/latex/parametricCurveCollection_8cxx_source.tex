\doxysection{parametric\+Curve\+Collection.\+cxx}
\hypertarget{parametricCurveCollection_8cxx_source}{}\label{parametricCurveCollection_8cxx_source}\index{panda/src/parametrics/parametricCurveCollection.cxx@{panda/src/parametrics/parametricCurveCollection.cxx}}
\mbox{\hyperlink{parametricCurveCollection_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{parametricCurveCollection_8h}{parametricCurveCollection.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__parametrics_8h}{config\_parametrics.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{curveFitter_8h}{curveFitter.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nurbsCurve_8h}{nurbsCurve.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{compose__matrix_8h}{compose\_matrix.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__utils_8h}{string\_utils.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{look__at_8h}{look\_at.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ ParametricCurveCollection::}
\DoxyCodeLine{00028\ ParametricCurveCollection()\ \{}
\DoxyCodeLine{00029\ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00034\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00035\ add\_curve(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00036\ \ \ prepare\_add\_curve(curve);}
\DoxyCodeLine{00037\ \ \ \_curves.push\_back(curve);}
\DoxyCodeLine{00038\ \ \ redraw();}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00045\ insert\_curve(\textcolor{keywordtype}{size\_t}\ index,\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00046\ \ \ prepare\_add\_curve(curve);}
\DoxyCodeLine{00047\ \ \ index\ =\ std::min(index,\ \_curves.size());}
\DoxyCodeLine{00048\ \ \ \_curves.insert(\_curves.begin()\ +\ index,\ curve);}
\DoxyCodeLine{00049\ \ \ redraw();}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00056\ \textcolor{keywordtype}{int}\ ParametricCurveCollection::}
\DoxyCodeLine{00057\ add\_curves(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node)\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{int}\ num\_curves\ =\ \mbox{\hyperlink{classParametricCurveCollection_aba377b077048536b25a8149cafa99c75}{r\_add\_curves}}(node);}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{if}\ (num\_curves\ >\ 0)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ redraw();}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ num\_curves;}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00071\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00072\ remove\_curve(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordtype}{int}\ curve\_index\ =\ -\/1;}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ curve\_index\ ==\ -\/1\ \&\&\ i\ <\ (int)\_curves.size();\ i++)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_curves[i]\ ==\ curve)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ curve\_index\ =\ i;}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{if}\ (curve\_index\ ==\ -\/1)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ The\ indicated\ curve\ was\ not\ a\ member\ of\ the\ collection.}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ remove\_curve(curve\_index);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00095\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00096\ remove\_curve(\textcolor{keywordtype}{size\_t}\ index)\ \{}
\DoxyCodeLine{00097\ \ \ nassertv(index\ <\ \_curves.size());}
\DoxyCodeLine{00098\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ curve\ =\ \_curves[index];}
\DoxyCodeLine{00099\ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00100\ \ \ \_curves.erase(\_curves.begin()\ +\ index);}
\DoxyCodeLine{00101\ \ \ redraw();}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00110\ set\_curve(\textcolor{keywordtype}{size\_t}\ index,\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00111\ \ \ nassertv(index\ <\ \_curves.size());}
\DoxyCodeLine{00112\ \ \ prepare\_remove\_curve(\_curves[index]);}
\DoxyCodeLine{00113\ \ \ prepare\_add\_curve(curve);}
\DoxyCodeLine{00114\ \ \ \_curves[index]\ =\ curve;}
\DoxyCodeLine{00115\ \ \ redraw();}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00123\ has\_curve(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00124\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve\ ==\ (*ci))\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \}}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00137\ clear()\ \{}
\DoxyCodeLine{00138\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00141\ \ \ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ \ \ \_curves.clear();}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ redraw();}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00151\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00152\ clear\_timewarps()\ \{}
\DoxyCodeLine{00153\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ xyz\_curve\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00154\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ hpr\_curve\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{switch}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}())\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_XYZ:}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ xyz\_curve\ =\ curve;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_HPR:}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hpr\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ hpr\_curve\ =\ curve;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00178\ \ \ \ \ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ \ \ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \_curves.clear();}
\DoxyCodeLine{00183\ \ \ \_curves.push\_back(xyz\_curve);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{if}\ (hpr\_curve\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \_curves.push\_back(hpr\_curve);}
\DoxyCodeLine{00187\ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ redraw();}
\DoxyCodeLine{00190\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00196\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *ParametricCurveCollection::}
\DoxyCodeLine{00197\ get\_xyz\_curve()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00198\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_XYZ)\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ curve;}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ \ \ \}}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00212\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *ParametricCurveCollection::}
\DoxyCodeLine{00213\ get\_hpr\_curve()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00214\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_HPR)\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ curve;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00222\ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00229\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *ParametricCurveCollection::}
\DoxyCodeLine{00230\ get\_default\_curve()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00231\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve\ =\ get\_xyz\_curve();}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordflow}{return}\ xyz\_curve;}
\DoxyCodeLine{00234\ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_NONE)\ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ curve;}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ \ \ \}}
\DoxyCodeLine{00243\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00244\ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00249\ \textcolor{keywordtype}{int}\ ParametricCurveCollection::}
\DoxyCodeLine{00250\ get\_num\_timewarps()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00251\ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_T)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ count++;}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00267\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *ParametricCurveCollection::}
\DoxyCodeLine{00268\ get\_timewarp\_curve(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00269\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00270\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_T)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 0)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ curve;}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ n-\/-\/;}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \}}
\DoxyCodeLine{00279\ \ \ nassert\_raise(\textcolor{stringliteral}{"{}index\ out\ of\ range"{}});}
\DoxyCodeLine{00280\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00281\ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00295\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00296\ make\_even(PN\_stdfloat\ max\_t,\ PN\_stdfloat\ segments\_per\_unit)\ \{}
\DoxyCodeLine{00297\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve\ =\ get\_xyz\_curve();}
\DoxyCodeLine{00298\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00299\ \ \ \ \ parametrics\_cat.error()}
\DoxyCodeLine{00300\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}No\ XYZ\ curve\ for\ make\_even().\(\backslash\)n"{}};}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00302\ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ clear\_timewarps();}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{//\ Now\ divvy\ up\ the\ XYZ\ curve\ into\ num\_segments\ sections,\ each\ approximately}}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ the\ same\ length\ as\ all\ the\ others.}}
\DoxyCodeLine{00308\ \ \ \mbox{\hyperlink{classCurveFitter}{CurveFitter}}\ fitter;}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \textcolor{keywordtype}{int}\ num\_segments\ =\ std::max(1,\ (\textcolor{keywordtype}{int})cfloor(segments\_per\_unit\ *\ xyz\_curve-\/>\mbox{\hyperlink{classParametricCurve_a588d07cb27814f01364bc5c5a024dfa4}{get\_max\_t}}()\ +\ 0.5f));}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \textcolor{keywordflow}{if}\ (parametrics\_cat.is\_debug())\ \{}
\DoxyCodeLine{00313\ \ \ \ \ parametrics\_cat.debug()}
\DoxyCodeLine{00314\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Calculating\ length\ of\ curve.\(\backslash\)n"{}};}
\DoxyCodeLine{00315\ \ \ \}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ PN\_stdfloat\ net\_length\ =\ xyz\_curve-\/>\mbox{\hyperlink{classParametricCurve_a15883df123f6387cf8f7622e59dbf0b9}{calc\_length}}();}
\DoxyCodeLine{00318\ \ \ PN\_stdfloat\ segment\_length\ =\ net\_length\ /\ (PN\_stdfloat)num\_segments;}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \textcolor{keywordflow}{if}\ (parametrics\_cat.is\_debug())\ \{}
\DoxyCodeLine{00321\ \ \ \ \ parametrics\_cat.debug()}
\DoxyCodeLine{00322\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Curve\ has\ total\ length\ "{}}\ <<\ net\_length\ <<\ \textcolor{stringliteral}{"{};\ dividing\ into\ "{}}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ <<\ num\_segments\ <<\ \textcolor{stringliteral}{"{}\ segments\ of\ "{}}\ <<\ segment\_length\ <<\ \textcolor{stringliteral}{"{}\ units\ each.\(\backslash\)n"{}};}
\DoxyCodeLine{00324\ \ \ \}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ PN\_stdfloat\ last\_t\ =\ 0.0f;}
\DoxyCodeLine{00327\ \ \ fitter.add\_xyz(0.0f,\ LVecBase3(last\_t,\ 0.0f,\ 0.0f));}
\DoxyCodeLine{00328\ \ \ PN\_stdfloat\ val\_inc=\ max\_t/num\_segments;}
\DoxyCodeLine{00329\ \ \ PN\_stdfloat\ val=val\_inc;}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_segments;\ i++,val+=val\_inc)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ PN\_stdfloat\ next\_t\ =\ xyz\_curve-\/>\mbox{\hyperlink{classParametricCurve_aed963692db3b7cc0fc745c811d5ab10d}{find\_length}}(last\_t,\ segment\_length);}
\DoxyCodeLine{00333\ \ \ \ \ fitter.add\_xyz(\textcolor{comment}{/*(PN\_stdfloat)(i\ +\ 1)/num\_segments\ *\ max\_t,*/}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val,\ LVecBase3(next\_t,\ 0.0f,\ 0.0f));}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordflow}{if}\ (parametrics\_cat.is\_spam())\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ parametrics\_cat.spam()}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Point\ "{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{}\ is\ at\ "{}}\ <<\ next\_t\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ last\_t\ =\ next\_t;}
\DoxyCodeLine{00342\ \ \ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \textcolor{keywordflow}{if}\ (parametrics\_cat.is\_debug())\ \{}
\DoxyCodeLine{00345\ \ \ \ \ parametrics\_cat.debug()}
\DoxyCodeLine{00346\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Done\ computing\ segments.\(\backslash\)n"{}};}
\DoxyCodeLine{00347\ \ \ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ fitter.compute\_tangents(1);}
\DoxyCodeLine{00350\ \ \ PT(\mbox{\hyperlink{classParametricCurveCollection}{ParametricCurveCollection}})\ fit\ =\ fitter.make\_nurbs();}
\DoxyCodeLine{00351\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *t\_curve\ =\ fit-\/>get\_xyz\_curve();}
\DoxyCodeLine{00352\ \ \ nassertv(t\_curve\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00353\ \ \ t\_curve-\/>\mbox{\hyperlink{classParametricCurve_a5ea75c00bef073428840b1518f7ca034}{set\_curve\_type}}(PCT\_T);}
\DoxyCodeLine{00354\ \ \ add\_curve(t\_curve);}
\DoxyCodeLine{00355\ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00362\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00363\ face\_forward(PN\_stdfloat\ segments\_per\_unit)\ \{}
\DoxyCodeLine{00364\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve\ =\ get\_xyz\_curve();}
\DoxyCodeLine{00365\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00366\ \ \ \ \ parametrics\_cat.error()}
\DoxyCodeLine{00367\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}No\ XYZ\ curve\ for\ face\_forward().\(\backslash\)n"{}};}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ Eliminate\ all\ the\ old\ hpr\ curves,\ and\ also\ take\ note\ of\ the\ index\ number}}
\DoxyCodeLine{00372\ \ \ \textcolor{comment}{//\ of\ the\ first\ XYZ\ curve.}}
\DoxyCodeLine{00373\ \ \ \textcolor{keywordtype}{int}\ xyz\_index\ =\ -\/1;}
\DoxyCodeLine{00374\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00375\ \ \ ParametricCurves\ new\_curves;}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00378\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_HPR)\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ prepare\_remove\_curve(curve);}
\DoxyCodeLine{00381\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_XYZ\ \&\&\ xyz\_index\ ==\ -\/1)\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ xyz\_index\ =\ (ci\ -\/\ \_curves.begin());}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ new\_curves.push\_back(curve);}
\DoxyCodeLine{00386\ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \}}
\DoxyCodeLine{00388\ \ \ \_curves.swap(new\_curves);}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \textcolor{comment}{//\ Now\ divvy\ up\ the\ XYZ\ curve\ into\ num\_segments\ sections,\ of\ equal\ length\ in}}
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{//\ parametric\ time\ (based\ on\ the\ timewarp\ curves).}}
\DoxyCodeLine{00392\ \ \ \mbox{\hyperlink{classCurveFitter}{CurveFitter}}\ fitter;}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ PN\_stdfloat\ max\_t\ =\ get\_max\_t();}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordtype}{int}\ num\_segments\ =\ (int)cfloor(segments\_per\_unit\ *\ max\_t\ +\ 0.5);}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ LVecBase3\ hpr(0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \textcolor{comment}{//\ We\ compute\ the\ first\ HPR\ point\ a\ little\ point\ into\ the\ beginning\ of\ the}}
\DoxyCodeLine{00400\ \ \ \textcolor{comment}{//\ curve,\ instead\ of\ at\ 0.0f,\ because\ the\ tangent\ at\ 0.0f\ is\ likely\ to\ be}}
\DoxyCodeLine{00401\ \ \ \textcolor{comment}{//\ zero.}}
\DoxyCodeLine{00402\ \ \ determine\_hpr(0.001,\ xyz\_curve,\ hpr);}
\DoxyCodeLine{00403\ \ \ fitter.add\_hpr(0.0f,\ hpr);}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_segments;\ i++)\ \{}
\DoxyCodeLine{00406\ \ \ \ \ PN\_stdfloat\ t\ =\ (PN\_stdfloat)(i\ +\ 1)\ /\ num\_segments\ *\ max\_t;}
\DoxyCodeLine{00407\ \ \ \ \ determine\_hpr(t,\ xyz\_curve,\ hpr);}
\DoxyCodeLine{00408\ \ \ \ \ fitter.add\_hpr(t,\ hpr);}
\DoxyCodeLine{00409\ \ \ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ fitter.wrap\_hpr();}
\DoxyCodeLine{00412\ \ \ fitter.compute\_tangents(1);}
\DoxyCodeLine{00413\ \ \ PT(\mbox{\hyperlink{classParametricCurveCollection}{ParametricCurveCollection}})\ fit\ =\ fitter.make\_nurbs();}
\DoxyCodeLine{00414\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *hpr\_curve\ =\ fit-\/>get\_hpr\_curve();}
\DoxyCodeLine{00415\ \ \ nassertv(hpr\_curve\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00416\ \ \ add\_curve(hpr\_curve,\ xyz\_index\ +\ 1);}
\DoxyCodeLine{00417\ \}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00425\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00426\ reset\_max\_t(PN\_stdfloat\ max\_t)\ \{}
\DoxyCodeLine{00427\ \ \ \textcolor{comment}{//\ Define\ a\ linear\ NURBS\ curve.}}
\DoxyCodeLine{00428\ \ \ PT(\mbox{\hyperlink{classNurbsCurve}{NurbsCurve}})\ nurbs\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}};}
\DoxyCodeLine{00429\ \ \ nurbs-\/>\mbox{\hyperlink{classParametricCurve_a5ea75c00bef073428840b1518f7ca034}{set\_curve\_type}}(PCT\_T);}
\DoxyCodeLine{00430\ \ \ nurbs-\/>set\_order(2);}
\DoxyCodeLine{00431\ \ \ nurbs-\/>append\_cv(LVecBase3(0.0f,\ 0.0f,\ 0.0f));}
\DoxyCodeLine{00432\ \ \ nurbs-\/>append\_cv(LVecBase3(get\_max\_t(),\ 0.0f,\ 0.0f));}
\DoxyCodeLine{00433\ \ \ nurbs-\/>set\_knot(0,\ 0.0f);}
\DoxyCodeLine{00434\ \ \ nurbs-\/>set\_knot(1,\ 0.0f);}
\DoxyCodeLine{00435\ \ \ nurbs-\/>set\_knot(2,\ max\_t);}
\DoxyCodeLine{00436\ \ \ nurbs-\/>set\_knot(3,\ max\_t);}
\DoxyCodeLine{00437\ \ \ nurbs-\/>recompute();}
\DoxyCodeLine{00438\ \ \ add\_curve(nurbs);}
\DoxyCodeLine{00439\ \}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00451\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00452\ evaluate(PN\_stdfloat\ t,\ LVecBase3\ \&xyz,\ LVecBase3\ \&hpr)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00453\ \ \ \textcolor{comment}{//\ First,\ apply\ all\ the\ timewarps\ in\ sequence,\ from\ back\ to\ front.\ \ Also}}
\DoxyCodeLine{00454\ \ \ \textcolor{comment}{//\ take\ note\ of\ the\ XYZ\ and\ HPR\ curves.}}
\DoxyCodeLine{00455\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00456\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *hpr\_curve\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00457\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *default\_curve\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ PN\_stdfloat\ t0\ =\ t;}
\DoxyCodeLine{00460\ \ \ LVecBase3\ point;}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \ \ ParametricCurves::const\_reverse\_iterator\ ci;}
\DoxyCodeLine{00463\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.rbegin();\ ci\ !=\ \_curves.rend();\ ++ci)\ \{}
\DoxyCodeLine{00464\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keywordflow}{switch}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}())\ \{}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_XYZ:}
\DoxyCodeLine{00468\ \ \ \ \ \ \ xyz\_curve\ =\ curve;}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_HPR:}
\DoxyCodeLine{00472\ \ \ \ \ \ \ hpr\_curve\ =\ curve;}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_NONE:}
\DoxyCodeLine{00476\ \ \ \ \ \ \ default\_curve\ =\ curve;}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_T:}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!curve-\/>get\_point(t0,\ point))\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00483\ \ \ \ \ \ \ t0\ =\ point[0];}
\DoxyCodeLine{00484\ \ \ \ \ \}}
\DoxyCodeLine{00485\ \ \ \}}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00488\ \ \ \ \ xyz\_curve\ =\ default\_curve;}
\DoxyCodeLine{00489\ \ \ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \textcolor{comment}{//\ Now\ compute\ the\ position\ and\ orientation.}}
\DoxyCodeLine{00492\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{keywordflow}{if}\ (!xyz\_curve-\/>get\_point(t0,\ xyz))\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00495\ \ \ \ \ \}}
\DoxyCodeLine{00496\ \ \ \}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \ \ \textcolor{keywordflow}{if}\ (hpr\_curve\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordflow}{if}\ (!hpr\_curve-\/>get\_point(t0,\ hpr))\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00501\ \ \ \ \ \}}
\DoxyCodeLine{00502\ \ \ \}}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00505\ \}}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00518\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00519\ evaluate(PN\_stdfloat\ t,\ LMatrix4\ \&result,\ CoordinateSystem\ cs)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00520\ \ \ LVecBase3\ xyz(0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00521\ \ \ LVecBase3\ hpr(0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \ \ \textcolor{keywordflow}{if}\ (!evaluate(t,\ xyz,\ hpr))\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00525\ \ \ \}}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \mbox{\hyperlink{compose__matrix__src_8cxx_aa46bdf9de1e1e04a5e2cdd7af6b39c64}{compose\_matrix}}(result,}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LVecBase3(1.0f,\ 1.0f,\ 1.0f),}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LVecBase3(0.0f,\ 0.0f,\ 0.0f),}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hpr,\ xyz,\ cs);}
\DoxyCodeLine{00531\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00532\ \}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00539\ PN\_stdfloat\ ParametricCurveCollection::}
\DoxyCodeLine{00540\ evaluate\_t(PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00541\ \ \ PN\_stdfloat\ t0\ =\ t;}
\DoxyCodeLine{00542\ \ \ LVecBase3\ point;}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00545\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00546\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordflow}{if}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}()\ ==\ PCT\_T)\ \{}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!curve-\/>get\_point(t0,\ point))\ \{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1.0f;}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ t0\ =\ point[0];}
\DoxyCodeLine{00553\ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \}}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \textcolor{keywordflow}{return}\ t0;}
\DoxyCodeLine{00557\ \}}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00564\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00565\ adjust\_xyz(PN\_stdfloat\ t,\ \textcolor{keyword}{const}\ LVecBase3\ \&xyz)\ \{}
\DoxyCodeLine{00566\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve\ =\ get\_xyz\_curve();}
\DoxyCodeLine{00567\ \ \ \textcolor{keywordflow}{if}\ (xyz\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00569\ \ \ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ PN\_stdfloat\ t0\ =\ evaluate\_t(t);}
\DoxyCodeLine{00572\ \ \ \textcolor{keywordflow}{if}\ (t0\ >=\ 0.0f\ \&\&\ t\ <\ xyz\_curve-\/>get\_max\_t())\ \{}
\DoxyCodeLine{00573\ \ \ \ \ \textcolor{keywordflow}{return}\ xyz\_curve-\/>\mbox{\hyperlink{classParametricCurve_a578d9c663a5f2a594236400664ad447a}{adjust\_point}}(t,\ xyz[0],\ xyz[1],\ xyz[2]);}
\DoxyCodeLine{00574\ \ \ \}}
\DoxyCodeLine{00575\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00576\ \}}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00583\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00584\ adjust\_hpr(PN\_stdfloat\ t,\ \textcolor{keyword}{const}\ LVecBase3\ \&hpr)\ \{}
\DoxyCodeLine{00585\ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *hpr\_curve\ =\ get\_hpr\_curve();}
\DoxyCodeLine{00586\ \ \ \textcolor{keywordflow}{if}\ (hpr\_curve\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00588\ \ \ \}}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ PN\_stdfloat\ t0\ =\ evaluate\_t(t);}
\DoxyCodeLine{00591\ \ \ \textcolor{keywordflow}{if}\ (t0\ >=\ 0.0f\ \&\&\ t\ <\ hpr\_curve-\/>get\_max\_t())\ \{}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{return}\ hpr\_curve-\/>\mbox{\hyperlink{classParametricCurve_a578d9c663a5f2a594236400664ad447a}{adjust\_point}}(t,\ hpr[0],\ hpr[1],\ hpr[2]);}
\DoxyCodeLine{00593\ \ \ \}}
\DoxyCodeLine{00594\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00595\ \}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00601\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00602\ recompute()\ \{}
\DoxyCodeLine{00603\ \ \ \textcolor{keywordtype}{bool}\ all\_ok\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00604\ }
\DoxyCodeLine{00605\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00606\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00607\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00608\ \ \ \ \ \textcolor{keywordflow}{if}\ (!curve-\/>\mbox{\hyperlink{classParametricCurve_a21b218995e8127cf2a8f0fb78a6c0af9}{recompute}}())\ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ all\_ok\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00610\ \ \ \ \ \}}
\DoxyCodeLine{00611\ \ \ \}}
\DoxyCodeLine{00612\ }
\DoxyCodeLine{00613\ \ \ \textcolor{keywordflow}{return}\ all\_ok;}
\DoxyCodeLine{00614\ \}}
\DoxyCodeLine{00615\ }
\DoxyCodeLine{00623\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00624\ stitch(\textcolor{keyword}{const}\ \mbox{\hyperlink{classParametricCurveCollection}{ParametricCurveCollection}}\ *a,}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classParametricCurveCollection}{ParametricCurveCollection}}\ *b)\ \{}
\DoxyCodeLine{00626\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ a\_xyz\ =\ a-\/>get\_xyz\_curve();}
\DoxyCodeLine{00627\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ b\_xyz\ =\ b-\/>get\_xyz\_curve();}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ a\_hpr\ =\ a-\/>get\_hpr\_curve();}
\DoxyCodeLine{00630\ \ \ PT(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}})\ b\_hpr\ =\ b-\/>get\_hpr\_curve();}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00632\ \ \ clear();}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \textcolor{keywordflow}{if}\ (a\_xyz\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ b\_xyz\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00635\ \ \ \ \ PT(\mbox{\hyperlink{classNurbsCurve}{NurbsCurve}})\ new\_xyz\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}};}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{keywordflow}{if}\ (!new\_xyz-\/>stitch(a\_xyz,\ b\_xyz))\ \{}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00638\ \ \ \ \ \}}
\DoxyCodeLine{00639\ \ \ \ \ new\_xyz-\/>\mbox{\hyperlink{classParametricCurve_a5ea75c00bef073428840b1518f7ca034}{set\_curve\_type}}(PCT\_XYZ);}
\DoxyCodeLine{00640\ \ \ \ \ add\_curve(new\_xyz);}
\DoxyCodeLine{00641\ \ \ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \textcolor{keywordflow}{if}\ (a\_hpr\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ b\_hpr\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00644\ \ \ \ \ PT(\mbox{\hyperlink{classNurbsCurve}{NurbsCurve}})\ new\_hpr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}};}
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keywordflow}{if}\ (!new\_hpr-\/>stitch(a\_hpr,\ b\_hpr))\ \{}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00647\ \ \ \ \ \}}
\DoxyCodeLine{00648\ \ \ \ \ new\_hpr-\/>\mbox{\hyperlink{classParametricCurve_a5ea75c00bef073428840b1518f7ca034}{set\_curve\_type}}(PCT\_HPR);}
\DoxyCodeLine{00649\ \ \ \ \ add\_curve(new\_hpr);}
\DoxyCodeLine{00650\ \ \ \}}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00653\ \}}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00659\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00660\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00661\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_curves()\ ==\ 1)\ \{}
\DoxyCodeLine{00662\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}1\ ParametricCurve"{}};}
\DoxyCodeLine{00663\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00664\ \ \ \ \ out\ <<\ get\_num\_curves()\ <<\ \textcolor{stringliteral}{"{}\ ParametricCurves"{}};}
\DoxyCodeLine{00665\ \ \ \}}
\DoxyCodeLine{00666\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00672\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00673\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00674\ \ \ ParametricCurves::const\_iterator\ ci;}
\DoxyCodeLine{00675\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00676\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00677\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ *curve\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00678\ \ \ \}}
\DoxyCodeLine{00679\ \}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00685\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00686\ write\_egg(\mbox{\hyperlink{classFilename}{Filename}}\ filename,\ CoordinateSystem\ cs)\ \{}
\DoxyCodeLine{00687\ \ \ pofstream\ out;}
\DoxyCodeLine{00688\ \ \ filename.set\_text();}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ \textcolor{keywordflow}{if}\ (!filename.\mbox{\hyperlink{classFilename_ad37a9d52c837218b01076de184dc5f4d}{open\_write}}(out))\ \{}
\DoxyCodeLine{00691\ \ \ \ \ parametrics\_cat.error()}
\DoxyCodeLine{00692\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Unable\ to\ write\ to\ "{}}\ <<\ filename\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00694\ \ \ \}}
\DoxyCodeLine{00695\ \ \ \textcolor{keywordflow}{return}\ write\_egg(out,\ filename,\ cs);}
\DoxyCodeLine{00696\ \}}
\DoxyCodeLine{00697\ }
\DoxyCodeLine{00702\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00703\ write\_egg(std::ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ \&filename,\ CoordinateSystem\ cs)\ \{}
\DoxyCodeLine{00704\ \ \ \textcolor{keywordflow}{if}\ (cs\ ==\ CS\_default)\ \{}
\DoxyCodeLine{00705\ \ \ \ \ cs\ =\ get\_default\_coordinate\_system();}
\DoxyCodeLine{00706\ \ \ \}}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ \textcolor{keywordflow}{if}\ (cs\ !=\ CS\_invalid)\ \{}
\DoxyCodeLine{00709\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}<CoordinateSystem>\ \{\ "{}};}
\DoxyCodeLine{00710\ \ \ \ \ \textcolor{keywordflow}{switch}\ (cs)\ \{}
\DoxyCodeLine{00711\ \ \ \ \ \textcolor{keywordflow}{case}\ CS\_zup\_right:}
\DoxyCodeLine{00712\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Z-\/Up"{}};}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \ \ \textcolor{keywordflow}{case}\ CS\_yup\_right:}
\DoxyCodeLine{00716\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Y-\/Up"{}};}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00718\ }
\DoxyCodeLine{00719\ \ \ \ \ \textcolor{keywordflow}{case}\ CS\_zup\_left:}
\DoxyCodeLine{00720\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Z-\/Up-\/Left"{}};}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keywordflow}{case}\ CS\_yup\_left:}
\DoxyCodeLine{00724\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Y-\/Up-\/Left"{}};}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00726\ }
\DoxyCodeLine{00727\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00729\ \ \ \ \ \}}
\DoxyCodeLine{00730\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\ \}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{00731\ \ \ \}}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \textcolor{keywordtype}{int}\ xyz\_count\ =\ 0;}
\DoxyCodeLine{00734\ \ \ \textcolor{keywordtype}{int}\ hpr\_count\ =\ 0;}
\DoxyCodeLine{00735\ \ \ \textcolor{keywordtype}{int}\ t\_count\ =\ 0;}
\DoxyCodeLine{00736\ }
\DoxyCodeLine{00737\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00738\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00739\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keywordflow}{if}\ (!curve-\/>has\_name())\ \{}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ don't\ have\ a\ name,\ come\ up\ with\ one.}}
\DoxyCodeLine{00743\ \ \ \ \ \ \ std::string\ name\ =\ filename.get\_basename\_wo\_extension();}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (curve-\/>\mbox{\hyperlink{classParametricCurve_a1f3ab1411cc580dd339982d110591b13}{get\_curve\_type}}())\ \{}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_XYZ:}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ name\ +=\ \textcolor{stringliteral}{"{}\_xyz"{}};}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xyz\_count\ >\ 0)\ \{}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ name\ +=\ format\_string(xyz\_count);}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ xyz\_count++;}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00753\ }
\DoxyCodeLine{00754\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_HPR:}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ name\ +=\ \textcolor{stringliteral}{"{}\_hpr"{}};}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hpr\_count\ >\ 0)\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ name\ +=\ format\_string(hpr\_count);}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ hpr\_count++;}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00761\ }
\DoxyCodeLine{00762\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ PCT\_T:}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ name\ +=\ \textcolor{stringliteral}{"{}\_t"{}};}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (t\_count\ >\ 0)\ \{}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ name\ +=\ format\_string(t\_count);}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ t\_count++;}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ \ \ curve-\/>set\_name(name);}
\DoxyCodeLine{00772\ \ \ \ \ \}}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keywordflow}{if}\ (!curve-\/>\mbox{\hyperlink{classParametricCurve_a93649700ff540cd70a406cc3a2bfe060}{write\_egg}}(out,\ filename,\ CS\_invalid))\ \{}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00776\ \ \ \ \ \}}
\DoxyCodeLine{00777\ \ \ \}}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00779\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00780\ \}}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00785\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classParametricCurveCollection_aba377b077048536b25a8149cafa99c75}{ParametricCurveCollection::}}}
\DoxyCodeLine{00786\ \mbox{\hyperlink{classParametricCurveCollection_aba377b077048536b25a8149cafa99c75}{r\_add\_curves}}(\mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node)\ \{}
\DoxyCodeLine{00787\ \ \ \textcolor{keywordtype}{int}\ num\_curves\ =\ 0;}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \textcolor{keywordflow}{if}\ (node-\/>is\_of\_type(ParametricCurve::get\_class\_type()))\ \{}
\DoxyCodeLine{00790\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ DCAST(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}},\ node);}
\DoxyCodeLine{00791\ \ \ \ \ prepare\_add\_curve(curve);}
\DoxyCodeLine{00792\ \ \ \ \ \_curves.push\_back(curve);}
\DoxyCodeLine{00793\ \ \ \ \ num\_curves++;}
\DoxyCodeLine{00794\ \ \ \}}
\DoxyCodeLine{00795\ }
\DoxyCodeLine{00796\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ node-\/>get\_num\_children();}
\DoxyCodeLine{00797\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_children;\ i++)\ \{}
\DoxyCodeLine{00798\ \ \ \ \ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *child\ =\ node-\/>get\_child(i);}
\DoxyCodeLine{00799\ \ \ \ \ num\_curves\ +=\ \mbox{\hyperlink{classParametricCurveCollection_aba377b077048536b25a8149cafa99c75}{r\_add\_curves}}(child);}
\DoxyCodeLine{00800\ \ \ \}}
\DoxyCodeLine{00801\ }
\DoxyCodeLine{00802\ \ \ \textcolor{keywordflow}{return}\ num\_curves;}
\DoxyCodeLine{00803\ \}}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00813\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classParametricCurveCollection_ac165b3ac7c0e67dcbebad432ad2efe18}{ParametricCurveCollection::}}}
\DoxyCodeLine{00814\ \mbox{\hyperlink{classParametricCurveCollection_ac165b3ac7c0e67dcbebad432ad2efe18}{register\_drawer}}(ParametricCurveDrawer\ *drawer)\ \{}
\DoxyCodeLine{00815\ \ \ \_drawers.push\_back(drawer);}
\DoxyCodeLine{00816\ }
\DoxyCodeLine{00817\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00818\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00819\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00820\ \ \ \ \ curve-\/>\mbox{\hyperlink{classParametricCurve_a8ef702b1ce1d1b86d1ed9354777ebd0e}{register\_drawer}}(drawer);}
\DoxyCodeLine{00821\ \ \ \}}
\DoxyCodeLine{00822\ \}}
\DoxyCodeLine{00823\ }
\DoxyCodeLine{00829\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classParametricCurveCollection_a1c04ae20e8c92b60470bd934c03043f9}{ParametricCurveCollection::}}}
\DoxyCodeLine{00830\ \mbox{\hyperlink{classParametricCurveCollection_a1c04ae20e8c92b60470bd934c03043f9}{unregister\_drawer}}(ParametricCurveDrawer\ *drawer)\ \{}
\DoxyCodeLine{00831\ \ \ \_drawers.remove(drawer);}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \ \ ParametricCurves::iterator\ ci;}
\DoxyCodeLine{00834\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_curves.begin();\ ci\ !=\ \_curves.end();\ ++ci)\ \{}
\DoxyCodeLine{00835\ \ \ \ \ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve\ =\ (*ci);}
\DoxyCodeLine{00836\ \ \ \ \ curve-\/>\mbox{\hyperlink{classParametricCurve_ace67bcf9968b84ee8887b544ad2ce91b}{unregister\_drawer}}(drawer);}
\DoxyCodeLine{00837\ \ \ \}}
\DoxyCodeLine{00838\ \}}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00845\ \textcolor{keywordtype}{bool}\ ParametricCurveCollection::}
\DoxyCodeLine{00846\ determine\_hpr(PN\_stdfloat\ t,\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *xyz\_curve,\ LVecBase3\ \&hpr)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00847\ \ \ PN\_stdfloat\ t0\ =\ evaluate\_t(t);}
\DoxyCodeLine{00848\ }
\DoxyCodeLine{00849\ \ \ LVector3\ tangent;}
\DoxyCodeLine{00850\ \ \ \textcolor{keywordflow}{if}\ (!xyz\_curve-\/>get\_tangent(t0,\ tangent))\ \{}
\DoxyCodeLine{00851\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00852\ \ \ \}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ \ \ \textcolor{keywordflow}{if}\ (tangent.length\_squared()\ ==\ 0.0f)\ \{}
\DoxyCodeLine{00855\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00856\ \ \ \}}
\DoxyCodeLine{00857\ }
\DoxyCodeLine{00858\ \ \ LMatrix3\ mat;}
\DoxyCodeLine{00859\ \ \ \mbox{\hyperlink{look__at__src_8cxx_a4e167e03dc5f1fd42ee705272d9a47a9}{look\_at}}(mat,\ tangent);}
\DoxyCodeLine{00860\ }
\DoxyCodeLine{00861\ \ \ LVecBase3\ scale,\ shear;}
\DoxyCodeLine{00862\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{compose__matrix__src_8cxx_a499c787e84555f9a09c93f526b7dbc0d}{decompose\_matrix}}(mat,\ scale,\ shear,\ hpr);}
\DoxyCodeLine{00863\ \}}
\DoxyCodeLine{00864\ }
\DoxyCodeLine{00869\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00870\ prepare\_add\_curve(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00871\ \ \ DrawerList::iterator\ di;}
\DoxyCodeLine{00872\ \ \ \textcolor{keywordflow}{for}\ (di\ =\ \_drawers.begin();\ di\ !=\ \_drawers.end();\ ++di)\ \{}
\DoxyCodeLine{00873\ \ \ \ \ ParametricCurveDrawer\ *drawer\ =\ (*di);}
\DoxyCodeLine{00874\ \ \ \ \ curve-\/>\mbox{\hyperlink{classParametricCurve_a8ef702b1ce1d1b86d1ed9354777ebd0e}{register\_drawer}}(drawer);}
\DoxyCodeLine{00875\ \ \ \}}
\DoxyCodeLine{00876\ \}}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00882\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00883\ prepare\_remove\_curve(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *curve)\ \{}
\DoxyCodeLine{00884\ \ \ DrawerList::iterator\ di;}
\DoxyCodeLine{00885\ \ \ \textcolor{keywordflow}{for}\ (di\ =\ \_drawers.begin();\ di\ !=\ \_drawers.end();\ ++di)\ \{}
\DoxyCodeLine{00886\ \ \ \ \ ParametricCurveDrawer\ *drawer\ =\ (*di);}
\DoxyCodeLine{00887\ \ \ \ \ curve-\/>\mbox{\hyperlink{classParametricCurve_ace67bcf9968b84ee8887b544ad2ce91b}{unregister\_drawer}}(drawer);}
\DoxyCodeLine{00888\ \ \ \}}
\DoxyCodeLine{00889\ \}}
\DoxyCodeLine{00890\ }
\DoxyCodeLine{00894\ \textcolor{keywordtype}{void}\ ParametricCurveCollection::}
\DoxyCodeLine{00895\ redraw()\ \{}
\DoxyCodeLine{00896\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00897\ \textcolor{comment}{\ \ DrawerList::iterator\ di;}}
\DoxyCodeLine{00898\ \textcolor{comment}{\ \ for\ (di\ =\ \_drawers.begin();\ di\ !=\ \_drawers.end();\ ++di)\ \{}}
\DoxyCodeLine{00899\ \textcolor{comment}{\ \ \ \ ParametricCurveDrawer\ *drawer\ =\ (*di);}}
\DoxyCodeLine{00900\ \textcolor{comment}{\ \ \ \ drawer-\/>redraw();}}
\DoxyCodeLine{00901\ \textcolor{comment}{\ \ \}}}
\DoxyCodeLine{00902\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{00903\ \}}

\end{DoxyCode}

\doxysection{image\+Writer.\+cxx}
\hypertarget{imageWriter_8cxx_source}{}\label{imageWriter_8cxx_source}\index{pandatool/src/imagebase/imageWriter.cxx@{pandatool/src/imagebase/imageWriter.cxx}}
\mbox{\hyperlink{imageWriter_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{imageWriter_8h}{imageWriter.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00019\ \mbox{\hyperlink{classImageWriter_a99bb87fca65d43ca00c5acc0d22a6fd2}{ImageWriter::}}}
\DoxyCodeLine{00020\ \mbox{\hyperlink{classImageWriter_a99bb87fca65d43ca00c5acc0d22a6fd2}{ImageWriter}}(\textcolor{keywordtype}{bool}\ allow\_last\_param)\ :}
\DoxyCodeLine{00021\ \ \ \mbox{\hyperlink{classWithOutputFile}{WithOutputFile}}(allow\_last\_param,\ false,\ true)}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ \ \ \mbox{\hyperlink{classProgramBase_aa3fb7f284b32cce7d8f4f1f3841b4c42}{clear\_runlines}}();}
\DoxyCodeLine{00024\ \ \ \textcolor{keywordflow}{if}\ (\_allow\_last\_param)\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{classProgramBase_abc009d8bf32295f3e0b6e922b8281183}{add\_runline}}(\textcolor{stringliteral}{"{}[opts]\ outputimage"{}});}
\DoxyCodeLine{00026\ \ \ \}}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{classProgramBase_abc009d8bf32295f3e0b6e922b8281183}{add\_runline}}(\textcolor{stringliteral}{"{}[opts]\ -\/o\ outputimage"{}});}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ std::string\ o\_description;}
\DoxyCodeLine{00030\ \ \ \textcolor{keywordflow}{if}\ (\_allow\_last\_param)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ o\_description\ =}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Specify\ the\ filename\ to\ which\ the\ resulting\ image\ file\ will\ be\ written.\ \ "{}}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}If\ this\ option\ is\ omitted,\ the\ last\ parameter\ name\ is\ taken\ to\ be\ the\ "{}}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}name\ of\ the\ output\ file."{}};}
\DoxyCodeLine{00035\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00036\ \ \ \ \ o\_description\ =}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Specify\ the\ filename\ to\ which\ the\ resulting\ image\ file\ will\ be\ written."{}};}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{classProgramBase_a8be57a7c862cd8c30b5950e9ee9e037b}{add\_option}}}
\DoxyCodeLine{00041\ \ \ \ \ (\textcolor{stringliteral}{"{}o"{}},\ \textcolor{stringliteral}{"{}filename"{}},\ 50,\ o\_description,}
\DoxyCodeLine{00042\ \ \ \ \ \ \&\mbox{\hyperlink{classProgramBase_a3d5344afb7e01865dfff79390cc343de}{ImageWriter::dispatch\_filename}},\ \&\_got\_output\_filename,\ \&\_output\_filename);}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00049\ \textcolor{keywordtype}{void}\ ImageWriter::}
\DoxyCodeLine{00050\ write\_image(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPNMImage}{PNMImage}}\ \&image)\ \{}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordflow}{if}\ (!image.write(\mbox{\hyperlink{classWithOutputFile_a4c2299fef0437b67a951f4f7a3ccf937}{get\_output\_filename}}()))\ \{}
\DoxyCodeLine{00052\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ write\ output\ image\ to\ "{}}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ <<\ \mbox{\hyperlink{classWithOutputFile_a4c2299fef0437b67a951f4f7a3ccf937}{get\_output\_filename}}()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00054\ \ \ \ \ exit(1);}
\DoxyCodeLine{00055\ \ \ \}}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00063\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classImageWriter_a833f764dad0cb0992018f8565af297f3}{ImageWriter::}}}
\DoxyCodeLine{00064\ \mbox{\hyperlink{classImageWriter_a833f764dad0cb0992018f8565af297f3}{handle\_args}}(\mbox{\hyperlink{classpdeque}{ProgramBase::Args}}\ \&args)\ \{}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classWithOutputFile_a07b4c8a2c6e7396013440633ba7ffa78}{check\_last\_arg}}(args,\ 0))\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00067\ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{keywordflow}{if}\ (!args.empty())\ \{}
\DoxyCodeLine{00070\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Unexpected\ arguments\ on\ command\ line:\(\backslash\)n"{}};}
\DoxyCodeLine{00071\ \ \ \ \ Args::const\_iterator\ ai;}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{for}\ (ai\ =\ args.begin();\ ai\ !=\ args.end();\ ++ai)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ nout\ <<\ (*ai)\ <<\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)r"{}};}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00077\ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00080\ \}}

\end{DoxyCode}

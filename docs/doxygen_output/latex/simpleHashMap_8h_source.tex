\doxysection{simple\+Hash\+Map.\+h}
\hypertarget{simpleHashMap_8h_source}{}\label{simpleHashMap_8h_source}\index{panda/src/putil/simpleHashMap.h@{panda/src/putil/simpleHashMap.h}}
\mbox{\hyperlink{simpleHashMap_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ SIMPLEHASHMAP\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ SIMPLEHASHMAP\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__putil_8h}{config\_putil.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Key,\ \textcolor{keyword}{class}\ Value>}
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleKeyValuePair}{SimpleKeyValuePair}}\ \{}
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ INLINE\ \mbox{\hyperlink{classSimpleKeyValuePair}{SimpleKeyValuePair}}(\textcolor{keyword}{const}\ Key\ \&key,\ \textcolor{keyword}{const}\ Value\ \&data)\ :}
\DoxyCodeLine{00027\ \ \ \ \ \_key(key),}
\DoxyCodeLine{00028\ \ \ \ \ \_data(data)\ \{\}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ Key\ \_key;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ ALWAYS\_INLINE\ \textcolor{keyword}{const}\ Value\ \&get\_data()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{return}\ \_data;}
\DoxyCodeLine{00034\ \ \ \}}
\DoxyCodeLine{00035\ \ \ ALWAYS\_INLINE\ Value\ \&modify\_data()\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{return}\ \_data;}
\DoxyCodeLine{00037\ \ \ \}}
\DoxyCodeLine{00038\ \ \ ALWAYS\_INLINE\ \textcolor{keywordtype}{void}\ set\_data(\textcolor{keyword}{const}\ Value\ \&data)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \_data\ =\ data;}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ \ \ ALWAYS\_INLINE\ \textcolor{keywordtype}{void}\ set\_data(Value\ \&\&data)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \_data\ =\ std::move(data);}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00046\ \ \ Value\ \_data;}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Key>}
\DoxyCodeLine{00054\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleKeyValuePair}{SimpleKeyValuePair}}<Key,\ std::nullptr\_t>\ \{}
\DoxyCodeLine{00055\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00056\ \ \ INLINE\ \mbox{\hyperlink{classSimpleKeyValuePair}{SimpleKeyValuePair}}(\textcolor{keyword}{const}\ Key\ \&key,\ std::nullptr\_t\ data)\ :}
\DoxyCodeLine{00057\ \ \ \ \ \_key(key)\ \{\}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ Key\ \_key;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ ALWAYS\_INLINE\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{static}\ std::nullptr\_t\ get\_data()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00062\ \ \ ALWAYS\_INLINE\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{static}\ std::nullptr\_t\ modify\_data()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00063\ \ \ ALWAYS\_INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ set\_data(std::nullptr\_t)\ \{\}}
\DoxyCodeLine{00064\ \};}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Key,\ \textcolor{keyword}{class}\ Value,\ \textcolor{keyword}{class}\ Compare\ =\ method\_hash<Key,\ std::less<Key>\ >\ >}
\DoxyCodeLine{00080\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \{}
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ Per-\/entry\ overhead\ is\ determined\ by\ sizeof(int)\ *\ sparsity.\ \ Should\ be\ a}}
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{//\ power\ of\ two.}}
\DoxyCodeLine{00083\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sparsity\ =\ 2u;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#ifndef\ CPPPARSER}}
\DoxyCodeLine{00087\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}(\textcolor{keyword}{const}\ Compare\ \&comp\ =\ Compare());}
\DoxyCodeLine{00088\ \ \ INLINE\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&copy);}
\DoxyCodeLine{00089\ \ \ INLINE\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}(\mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&\&from)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00090\ \ \ INLINE\ \mbox{\hyperlink{classSimpleHashMap}{\string~SimpleHashMap}}();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ INLINE\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&operator\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&copy);}
\DoxyCodeLine{00093\ \ \ INLINE\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&operator\ =\ (\mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&\&from)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ INLINE\ \textcolor{keywordtype}{void}\ swap(\mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap}}\ \&other);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordtype}{int}\ find(\textcolor{keyword}{const}\ Key\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordtype}{int}\ store(\textcolor{keyword}{const}\ Key\ \&key,\ \textcolor{keyword}{const}\ Value\ \&data);}
\DoxyCodeLine{00099\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ remove(\textcolor{keyword}{const}\ Key\ \&key);}
\DoxyCodeLine{00100\ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ INLINE\ Value\ \&operator\ []\ (\textcolor{keyword}{const}\ Key\ \&key);}
\DoxyCodeLine{00103\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ INLINE\ \textcolor{keyword}{const}\ Key\ \&get\_key(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ \ \ INLINE\ \textcolor{keyword}{const}\ Value\ \&get\_data(\textcolor{keywordtype}{size\_t}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00107\ \ \ INLINE\ Value\ \&modify\_data(\textcolor{keywordtype}{size\_t}\ n);}
\DoxyCodeLine{00108\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_data(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ Value\ \&data);}
\DoxyCodeLine{00109\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_data(\textcolor{keywordtype}{size\_t}\ n,\ Value\ \&\&data);}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordtype}{void}\ remove\_element(\textcolor{keywordtype}{size\_t}\ n);}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_num\_entries()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00113\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_empty()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{void}\ output(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{void}\ write(std::ostream\ \&out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{bool}\ validate()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ consider\_shrink\_table();}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00122\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ get\_hash(\textcolor{keyword}{const}\ Key\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00123\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ next\_hash(\textcolor{keywordtype}{size\_t}\ hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ INLINE\ \textcolor{keywordtype}{int}\ find\_slot(\textcolor{keyword}{const}\ Key\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00126\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ has\_slot(\textcolor{keywordtype}{size\_t}\ slot)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00127\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ is\_element(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ Key\ \&key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00128\ \ \ INLINE\ \textcolor{keywordtype}{size\_t}\ store\_new\_element(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ Key\ \&key,\ \textcolor{keyword}{const}\ Value\ \&data);}
\DoxyCodeLine{00129\ \ \ INLINE\ \textcolor{keywordtype}{int}\ *get\_index\_array()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{keywordtype}{void}\ new\_table();}
\DoxyCodeLine{00132\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ consider\_expand\_table();}
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{void}\ resize\_table(\textcolor{keywordtype}{size\_t}\ new\_size);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00136\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classSimpleKeyValuePair}{SimpleKeyValuePair<Key,\ Value>}}\ \mbox{\hyperlink{classSimpleKeyValuePair}{TableEntry}};}
\DoxyCodeLine{00137\ \ \ \mbox{\hyperlink{classSimpleKeyValuePair}{TableEntry}}\ *\_table;}
\DoxyCodeLine{00138\ \ \ \mbox{\hyperlink{classDeletedBufferChain}{DeletedBufferChain}}\ *\_deleted\_chain;}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordtype}{size\_t}\ \_table\_size;}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{size\_t}\ \_num\_entries;}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ Compare\ \_comp;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00145\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ get\_class\_type()\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{return}\ \_type\_handle;}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ init\_type();}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00151\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ \_type\_handle;}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ CPPPARSER}}
\DoxyCodeLine{00153\ \};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Key,\ \textcolor{keyword}{class}\ Value,\ \textcolor{keyword}{class}\ Compare>}
\DoxyCodeLine{00156\ \textcolor{keyword}{inline}\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSimpleHashMap}{SimpleHashMap<Key,\ Value,\ Compare>}}\ \&shm)\ \{}
\DoxyCodeLine{00157\ \ \ shm.output(out);}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00159\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#ifndef\ CPPPARSER}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#include\ "{}simpleHashMap.I"{}}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ CPPPARSER}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

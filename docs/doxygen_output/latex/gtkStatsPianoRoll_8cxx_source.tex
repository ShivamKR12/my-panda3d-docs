\doxysection{gtk\+Stats\+Piano\+Roll.\+cxx}
\hypertarget{gtkStatsPianoRoll_8cxx_source}{}\label{gtkStatsPianoRoll_8cxx_source}\index{pandatool/src/gtk-\/stats/gtkStatsPianoRoll.cxx@{pandatool/src/gtk-\/stats/gtkStatsPianoRoll.cxx}}
\mbox{\hyperlink{gtkStatsPianoRoll_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gtkStatsPianoRoll_8h}{gtkStatsPianoRoll.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gtkStatsMonitor_8h}{gtkStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{numeric__types_8h}{numeric\_types.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gtkStatsLabelStack_8h}{gtkStatsLabelStack.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_piano\_roll\_width\ =\ 800;}
\DoxyCodeLine{00020\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_piano\_roll\_height\ =\ 400;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00025\ GtkStatsPianoRoll::}
\DoxyCodeLine{00026\ GtkStatsPianoRoll(\mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index)\ :}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{classPStatPianoRoll}{PStatPianoRoll}}(monitor,\ thread\_index,\ 0,\ 0),}
\DoxyCodeLine{00028\ \ \ \mbox{\hyperlink{classGtkStatsGraph}{GtkStatsGraph}}(monitor,\ true)}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ Let's\ show\ the\ units\ on\ the\ guide\ bar\ labels.\ \ There's\ room.}}
\DoxyCodeLine{00031\ \ \ set\_guide\_bar\_units(get\_guide\_bar\_units()\ |\ GBU\_show\_units);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ Add\ a\ DrawingArea\ widget\ on\ top\ of\ the\ graph,\ to\ display\ all\ of\ the\ scale}}
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ units.}}
\DoxyCodeLine{00035\ \ \ \_scale\_area\ =\ gtk\_drawing\_area\_new();}
\DoxyCodeLine{00036\ \ \ g\_signal\_connect(G\_OBJECT(\_scale\_area),\ \textcolor{stringliteral}{"{}draw"{}},}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(draw\_callback),\ \textcolor{keyword}{this});}
\DoxyCodeLine{00038\ \ \ gtk\_box\_pack\_start(GTK\_BOX(\_graph\_vbox),\ \_scale\_area,\ FALSE,\ FALSE,\ 0);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ It\ should\ be\ large\ enough\ to\ display\ the\ labels.}}
\DoxyCodeLine{00041\ \ \ \{}
\DoxyCodeLine{00042\ \ \ \ \ PangoLayout\ *layout\ =\ gtk\_widget\_create\_pango\_layout(\_scale\_area,\ \textcolor{stringliteral}{"{}0123456789\ ms"{}});}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{int}\ width,\ height;}
\DoxyCodeLine{00044\ \ \ \ \ pango\_layout\_get\_pixel\_size(layout,\ \&width,\ \&height);}
\DoxyCodeLine{00045\ \ \ \ \ gtk\_widget\_set\_size\_request(\_scale\_area,\ 0,\ height\ +\ 1);}
\DoxyCodeLine{00046\ \ \ \ \ g\_object\_unref(layout);}
\DoxyCodeLine{00047\ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ gtk\_widget\_set\_size\_request(\_graph\_window,}
\DoxyCodeLine{00050\ \ \ \ \ default\_piano\_roll\_width\ *\ monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a0ab854d38f5cb9d8c134d11033bffa67}{get\_resolution}}()\ /\ 96,}
\DoxyCodeLine{00051\ \ \ \ \ default\_piano\_roll\_height\ *\ monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a0ab854d38f5cb9d8c134d11033bffa67}{get\_resolution}}()\ /\ 96);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =}
\DoxyCodeLine{00054\ \ \ \ \ GtkStatsGraph::\_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00055\ \ \ std::string\ thread\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a5b905293fa940d70742612a4ec5a87f6}{get\_thread\_name}}(\_thread\_index);}
\DoxyCodeLine{00056\ \ \ std::string\ window\_title\ =\ thread\_name\ +\ \textcolor{stringliteral}{"{}\ thread\ piano\ roll"{}};}
\DoxyCodeLine{00057\ \ \ gtk\_window\_set\_title(GTK\_WINDOW(\_window),\ window\_title.c\_str());}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ gtk\_widget\_show\_all(\_window);}
\DoxyCodeLine{00060\ \ \ gtk\_widget\_show(\_window);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ Allow\ the\ window\ to\ be\ resized\ as\ small\ as\ the\ user\ likes.\ \ We\ have\ to\ do}}
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ this\ after\ the\ window\ has\ been\ shown;\ otherwise,\ it\ will\ affect\ the}}
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ window's\ initial\ size.}}
\DoxyCodeLine{00065\ \ \ gtk\_widget\_set\_size\_request(\_window,\ 0,\ 0);}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ force\_redraw();}
\DoxyCodeLine{00068\ \ \ idle();}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00074\ GtkStatsPianoRoll::}
\DoxyCodeLine{00075\ \string~GtkStatsPianoRoll()\ \{}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00084\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_afe45fc86faa2f5263f26490eb42767b7}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00085\ \mbox{\hyperlink{classGtkStatsPianoRoll_afe45fc86faa2f5263f26490eb42767b7}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{if}\ (!\_pause)\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classPStatPianoRoll_a59d660ffcd92e9e39f2d125e488ae61d}{update}}();}
\DoxyCodeLine{00088\ \ \ \}}
\DoxyCodeLine{00089\ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00094\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a9ea49cfe719940db544ebb73658fd8d9}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00095\ \mbox{\hyperlink{classGtkStatsPianoRoll_a9ea49cfe719940db544ebb73658fd8d9}{force\_redraw}}()\ \{}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{if}\ (\_cr)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{classPStatPianoRoll_a842d7ad73ea599746245b485caef6948}{PStatPianoRoll::force\_redraw}}();}
\DoxyCodeLine{00098\ \ \ \}}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00104\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a754e9a8bf7a55bcef089f741688d3c5c}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00105\ \mbox{\hyperlink{classGtkStatsPianoRoll_a754e9a8bf7a55bcef089f741688d3c5c}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00106\ \ \ \mbox{\hyperlink{classPStatPianoRoll_a66d2cc2ef8fb156af9978b09e81b1593}{PStatPianoRoll::changed\_size}}(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00114\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a3cb96a7617674317063e06ddb22ec657}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00115\ \mbox{\hyperlink{classGtkStatsPianoRoll_a3cb96a7617674317063e06ddb22ec657}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{int}\ old\_unit\_mask\ =\ get\_guide\_bar\_units();}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{if}\ ((old\_unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms))\ !=\ 0)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ unit\_mask\ =\ unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms);}
\DoxyCodeLine{00119\ \ \ \ \ unit\_mask\ |=\ (old\_unit\_mask\ \&\ GBU\_show\_units);}
\DoxyCodeLine{00120\ \ \ \ \ set\_guide\_bar\_units(unit\_mask);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ gtk\_widget\_queue\_draw(\_scale\_area);}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00129\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a3dfaabde99534ffdb65cf807ce1e7c81}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00130\ \mbox{\hyperlink{classGtkStatsPianoRoll_a3dfaabde99534ffdb65cf807ce1e7c81}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ GtkStatsGraph::\_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a57f8bda512d7e71c2ee485d9661a38f8}{open\_strip\_chart}}(\_thread\_index,\ collector\_index,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00133\ \ \ \}}
\DoxyCodeLine{00134\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00139\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a48f83fd0078791d60508ddb7da86f423}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00140\ \mbox{\hyperlink{classGtkStatsPianoRoll_a48f83fd0078791d60508ddb7da86f423}{on\_popup\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00141\ \ \ GtkWidget\ *menu\ =\ gtk\_menu\_new();}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ std::string\ label\ =\ \mbox{\hyperlink{classGtkStatsPianoRoll_aeea13fe4750696b975f26a8ab5bf67d4}{get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordflow}{if}\ (!label.empty())\ \{}
\DoxyCodeLine{00145\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(label.c\_str());}
\DoxyCodeLine{00146\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00147\ \ \ \ \ gtk\_widget\_set\_sensitive(menu\_item,\ FALSE);}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ GtkStatsGraph::\_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(\{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ GtkStatsMonitor::CT\_strip\_chart,\ \_thread\_index,\ collector\_index,}
\DoxyCodeLine{00153\ \ \ \ \ \});}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}});}
\DoxyCodeLine{00156\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00157\ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(\mbox{\hyperlink{classGtkStatsMonitor_a35a4d279db316126b4f8f564d7f2fb92}{GtkStatsMonitor::menu\_activate}}),}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00160\ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ GtkStatsGraph::\_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(\{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ GtkStatsMonitor::CT\_flame\_graph,\ \_thread\_index,\ collector\_index,}
\DoxyCodeLine{00165\ \ \ \ \ \});}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}});}
\DoxyCodeLine{00168\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00169\ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(\mbox{\hyperlink{classGtkStatsMonitor_a35a4d279db316126b4f8f564d7f2fb92}{GtkStatsMonitor::menu\_activate}}),}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00172\ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_separator\_menu\_item\_new();}
\DoxyCodeLine{00176\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00177\ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \{}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ GtkStatsGraph::\_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(\{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ GtkStatsMonitor::CT\_choose\_color,\ -\/1,\ collector\_index,}
\DoxyCodeLine{00182\ \ \ \ \ \});}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Change\ Color..."{}});}
\DoxyCodeLine{00185\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00186\ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(\mbox{\hyperlink{classGtkStatsMonitor_a35a4d279db316126b4f8f564d7f2fb92}{GtkStatsMonitor::menu\_activate}}),}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00189\ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ GtkStatsGraph::\_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(\{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ GtkStatsMonitor::CT\_reset\_color,\ -\/1,\ collector\_index,}
\DoxyCodeLine{00194\ \ \ \ \ \});}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Reset\ Color"{}});}
\DoxyCodeLine{00197\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ menu\_item);}
\DoxyCodeLine{00198\ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(\mbox{\hyperlink{classGtkStatsMonitor_a35a4d279db316126b4f8f564d7f2fb92}{GtkStatsMonitor::menu\_activate}}),}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00201\ \ \ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ gtk\_widget\_show\_all(menu);}
\DoxyCodeLine{00204\ \ \ gtk\_menu\_popup\_at\_pointer(GTK\_MENU(menu),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00205\ \}}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00211\ std::string\ \mbox{\hyperlink{classGtkStatsPianoRoll_aeea13fe4750696b975f26a8ab5bf67d4}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00212\ \mbox{\hyperlink{classGtkStatsPianoRoll_aeea13fe4750696b975f26a8ab5bf67d4}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatPianoRoll_ae65de5ce271954065ce5f257c1d55845}{PStatPianoRoll::get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00214\ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00220\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a19994681639663f81e2a1e1964f5b5dd}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00221\ \mbox{\hyperlink{classGtkStatsPianoRoll_a19994681639663f81e2a1e1964f5b5dd}{set\_horizontal\_scale}}(\textcolor{keywordtype}{double}\ time\_width)\ \{}
\DoxyCodeLine{00222\ \ \ PStatPianoRoll::set\_horizontal\_scale(time\_width);}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ gtk\_widget\_queue\_draw(\_graph\_window);}
\DoxyCodeLine{00225\ \ \ gtk\_widget\_queue\_draw(\_scale\_area);}
\DoxyCodeLine{00226\ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00231\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a8a97c65df8ae488ad0fe4b22e3254313}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00232\ \mbox{\hyperlink{classGtkStatsPianoRoll_a8a97c65df8ae488ad0fe4b22e3254313}{clear\_region}}()\ \{}
\DoxyCodeLine{00233\ \ \ cairo\_set\_source\_rgb(\_cr,\ 1.0,\ 1.0,\ 1.0);}
\DoxyCodeLine{00234\ \ \ cairo\_paint(\_cr);}
\DoxyCodeLine{00235\ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00240\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a2fd89b0a3fe87f0f9988c4375f6f8323}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00241\ \mbox{\hyperlink{classGtkStatsPianoRoll_a2fd89b0a3fe87f0f9988c4375f6f8323}{begin\_draw}}()\ \{}
\DoxyCodeLine{00242\ \ \ \mbox{\hyperlink{classGtkStatsPianoRoll_a8a97c65df8ae488ad0fe4b22e3254313}{clear\_region}}();}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ guide\ bars.}}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00246\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ draw\_guide\_bar(\_cr,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i));}
\DoxyCodeLine{00248\ \ \ \}}
\DoxyCodeLine{00249\ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00256\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a4ae40a8fc92ec0591bc2142d525fdd8f}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00257\ \mbox{\hyperlink{classGtkStatsPianoRoll_a4ae40a8fc92ec0591bc2142d525fdd8f}{begin\_row}}(\textcolor{keywordtype}{int}\ row)\ \{}
\DoxyCodeLine{00258\ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_label\_collector(row);}
\DoxyCodeLine{00259\ \ \ cairo\_set\_source(\_cr,\ \mbox{\hyperlink{classGtkStatsGraph_a2b81b4929003d42bf4aaf5b4ce450c61}{get\_collector\_pattern}}(collector\_index,}
\DoxyCodeLine{00260\ \ \ \ \ \_highlighted\_index\ ==\ collector\_index));}
\DoxyCodeLine{00261\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00266\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_ae47a10bb7cedd7120b5bc2375e1c8225}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00267\ \mbox{\hyperlink{classGtkStatsPianoRoll_ae47a10bb7cedd7120b5bc2375e1c8225}{draw\_bar}}(\textcolor{keywordtype}{int}\ row,\ \textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x)\ \{}
\DoxyCodeLine{00268\ \ \ \textcolor{keywordflow}{if}\ (row\ >=\ 0\ \&\&\ row\ <\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_ae84179e0aa3a6a5cbeb8f45ee0127554}{get\_num\_labels}}())\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_ae6e60603bf79ce784c4be3e4b1124582}{get\_label\_y}}(row,\ \_graph\_window);}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_a8b1a382a559dd9f362eb4832a84597fd}{get\_label\_height}}(row);}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ cairo\_rectangle(\_cr,\ from\_x,\ (y\ -\/\ height\ +\ 2)\ *\ \_cr\_scale,\ to\_x\ -\/\ from\_x,\ (height\ -\/\ 4)\ *\ \_cr\_scale);}
\DoxyCodeLine{00273\ \ \ \ \ cairo\_fill(\_cr);}
\DoxyCodeLine{00274\ \ \ \}}
\DoxyCodeLine{00275\ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00281\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a037d8a27866cd767307edd7c76397739}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00282\ \mbox{\hyperlink{classGtkStatsPianoRoll_a037d8a27866cd767307edd7c76397739}{end\_draw}}()\ \{}
\DoxyCodeLine{00283\ \ \ gtk\_widget\_queue\_draw(\_graph\_window);}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00289\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_af5d19c77b5b52a54b443d84541e302d5}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00290\ \mbox{\hyperlink{classGtkStatsPianoRoll_af5d19c77b5b52a54b443d84541e302d5}{idle}}()\ \{}
\DoxyCodeLine{00291\ \ \ \textcolor{keywordflow}{if}\ (\_labels\_changed)\ \{}
\DoxyCodeLine{00292\ \ \ \ \ update\_labels();}
\DoxyCodeLine{00293\ \ \ \}}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00299\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a738f7deb99f526c71824c41f0c0c335e}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00300\ \mbox{\hyperlink{classGtkStatsPianoRoll_a738f7deb99f526c71824c41f0c0c335e}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00302\ \ \ \mbox{\hyperlink{classGtkStatsGraph_a1fd380d910629fce8e84d64524b8aa93}{GtkStatsGraph::get\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00303\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00304\ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00309\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a9834da2466948e9052710a9c1bcd860e}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00310\ \mbox{\hyperlink{classGtkStatsPianoRoll_a9834da2466948e9052710a9c1bcd860e}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00312\ \ \ \mbox{\hyperlink{classGtkStatsGraph_a3297782d1fe8ebc6375ea52a9f53618d}{GtkStatsGraph::set\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00313\ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00319\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsPianoRoll_a428b02d7dda126e545c9ad21c6365498}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00320\ \mbox{\hyperlink{classGtkStatsPianoRoll_a428b02d7dda126e545c9ad21c6365498}{additional\_graph\_window\_paint}}(cairo\_t\ *cr)\ \{}
\DoxyCodeLine{00321\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00322\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00323\ \ \ \ \ draw\_guide\_bar(cr,\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i));}
\DoxyCodeLine{00324\ \ \ \}}
\DoxyCodeLine{00325\ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00331\ std::string\ \mbox{\hyperlink{classGtkStatsPianoRoll_afd05ebc9bbdb31259bf0585319d4c7db}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00332\ \mbox{\hyperlink{classGtkStatsPianoRoll_afd05ebc9bbdb31259bf0585319d4c7db}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00333\ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(mouse\_x,\ mouse\_y);}
\DoxyCodeLine{00334\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsPianoRoll_aeea13fe4750696b975f26a8ab5bf67d4}{get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00336\ \ \ \}}
\DoxyCodeLine{00337\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00338\ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00345\ GtkStatsGraph::DragMode\ \mbox{\hyperlink{classGtkStatsPianoRoll_ab96b0b5f1a47a6a245b237d3ef780529}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00346\ \mbox{\hyperlink{classGtkStatsPianoRoll_ab96b0b5f1a47a6a245b237d3ef780529}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordflow}{if}\ (graph\_y\ >=\ 0\ \&\&\ graph\_y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\_x\ >=\ 0\ \&\&\ graph\_x\ <\ get\_xsize())\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \textcolor{comment}{//\ See\ if\ the\ mouse\ is\ over\ a\ user-\/defined\ guide\ bar.}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ graph\_x;}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(x\ -\/\ 2);}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(x\ +\ 2);}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_guide\_bar;}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ mouse\ is\ left\ or\ right\ of\ the\ graph;\ maybe\ create\ a\ new\ guide}}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \textcolor{comment}{//\ bar.}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_new\_guide\_bar;}
\DoxyCodeLine{00362\ \ \ \ \ \}}
\DoxyCodeLine{00363\ \ \ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsGraph_a00927751e3fa0207c85ff6d08e0c940c}{GtkStatsGraph::consider\_drag\_start}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00366\ \}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00371\ gboolean\ \mbox{\hyperlink{classGtkStatsPianoRoll_a2042c3b8726ff661b2b83a0439b1a355}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00372\ \mbox{\hyperlink{classGtkStatsPianoRoll_a2042c3b8726ff661b2b83a0439b1a355}{handle\_button\_press}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{bool}\ double\_click,\ \textcolor{keywordtype}{int}\ button)\ \{}
\DoxyCodeLine{00373\ \ \ \textcolor{keywordflow}{if}\ (graph\_x\ >=\ 0\ \&\&\ graph\_y\ >=\ 0\ \&\&\ graph\_x\ <\ get\_xsize()\ \&\&\ graph\_y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(graph\_x,\ graph\_y);}
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordflow}{if}\ (button\ ==\ 3)\ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \textcolor{comment}{//\ Right-\/clicking\ on\ a\ color\ bar\ in\ the\ graph\ is\ the\ same\ as\ right-\/}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \textcolor{comment}{//\ clicking\ on\ the\ corresponding\ label.}}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGtkStatsPianoRoll_a48f83fd0078791d60508ddb7da86f423}{on\_popup\_label}}(collector\_index);}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ FALSE;}
\DoxyCodeLine{00383\ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (double\_click\ \&\&\ button\ ==\ 1)\ \{}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \textcolor{comment}{//\ Double-\/clicking\ on\ a\ color\ bar\ in\ the\ graph\ is\ the\ same\ as\ double-\/}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \textcolor{comment}{//\ clicking\ on\ the\ corresponding\ label.}}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \mbox{\hyperlink{classGtkStatsPianoRoll_a3dfaabde99534ffdb65cf807ce1e7c81}{on\_click\_label}}(get\_collector\_under\_pixel(graph\_x,\ graph\_y));}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00389\ \ \ \ \ \}}
\DoxyCodeLine{00390\ \ \ \}}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_acf477ec8aaef7e698414175536e33199}{set\_drag\_mode}}(DM\_scale);}
\DoxyCodeLine{00394\ \ \ \ \ \_drag\_scale\_start\ =\ pixel\_to\_height(graph\_x);}
\DoxyCodeLine{00395\ \ \ \ \ \textcolor{comment}{//\ SetCapture(\_graph\_window);}}
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_guide\_bar\ \&\&\ \_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_acf477ec8aaef7e698414175536e33199}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00400\ \ \ \ \ \_drag\_start\_x\ =\ graph\_x;}
\DoxyCodeLine{00401\ \ \ \ \ \textcolor{comment}{//\ SetCapture(\_graph\_window);}}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00403\ \ \ \}}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsGraph_a76128b5582850e6385a9fb4946e0429d}{GtkStatsGraph::handle\_button\_press}}(graph\_x,\ graph\_y,}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ double\_click,\ button);}
\DoxyCodeLine{00407\ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00412\ gboolean\ \mbox{\hyperlink{classGtkStatsPianoRoll_a1d6e52f98d5958969eb3535605cbefbc}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00413\ \mbox{\hyperlink{classGtkStatsPianoRoll_a1d6e52f98d5958969eb3535605cbefbc}{handle\_button\_release}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00414\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_acf477ec8aaef7e698414175536e33199}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//\ ReleaseCapture();}}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsPianoRoll_ad1bdf2aee5abff55ba87dc463bcc2f4a}{handle\_motion}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00418\ \ \ \}}
\DoxyCodeLine{00419\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\_x\ <\ 0\ ||\ graph\_x\ >=\ get\_xsize())\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a7627d5e29b88196713f4ba3cea78ea17}{remove\_user\_guide\_bar}}(\_drag\_guide\_bar);}
\DoxyCodeLine{00422\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(graph\_x));}
\DoxyCodeLine{00424\ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_acf477ec8aaef7e698414175536e33199}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{comment}{//\ ReleaseCapture();}}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsPianoRoll_ad1bdf2aee5abff55ba87dc463bcc2f4a}{handle\_motion}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00428\ \ \ \}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsGraph_a43c79da697920e23e53ea8db754444e8}{GtkStatsGraph::handle\_button\_release}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00431\ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00436\ gboolean\ \mbox{\hyperlink{classGtkStatsPianoRoll_ad1bdf2aee5abff55ba87dc463bcc2f4a}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00437\ \mbox{\hyperlink{classGtkStatsPianoRoll_ad1bdf2aee5abff55ba87dc463bcc2f4a}{handle\_motion}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00438\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_none\ \&\&\ \_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ is\ over\ a\ color\ bar,\ highlight\ it.}}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(graph\_x,\ graph\_y);}
\DoxyCodeLine{00441\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_aa63faf14812118c7dfb2f5d8653d6dda}{highlight\_label}}(collector\_index);}
\DoxyCodeLine{00442\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_a897a97bb022489ca76a0300cc8c25085}{on\_enter\_label}}(collector\_index);}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00445\ \textcolor{comment}{\ \ \ \ //\ Now\ we\ want\ to\ get\ a\ WM\_MOUSELEAVE\ when\ the\ mouse\ leaves\ the\ graph}}
\DoxyCodeLine{00446\ \textcolor{comment}{\ \ \ \ //\ window.}}
\DoxyCodeLine{00447\ \textcolor{comment}{\ \ \ \ TRACKMOUSEEVENT\ tme\ =\ \{}}
\DoxyCodeLine{00448\ \textcolor{comment}{\ \ \ \ \ \ sizeof(TRACKMOUSEEVENT),}}
\DoxyCodeLine{00449\ \textcolor{comment}{\ \ \ \ \ \ TME\_LEAVE,}}
\DoxyCodeLine{00450\ \textcolor{comment}{\ \ \ \ \ \ \_graph\_window,}}
\DoxyCodeLine{00451\ \textcolor{comment}{\ \ \ \ \ \ 0}}
\DoxyCodeLine{00452\ \textcolor{comment}{\ \ \ \ \};}}
\DoxyCodeLine{00453\ \textcolor{comment}{\ \ \ \ TrackMouseEvent(\&tme);}}
\DoxyCodeLine{00454\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00455\ \ \ \}}
\DoxyCodeLine{00456\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ in\ some\ drag\ mode,\ stop\ highlighting.}}
\DoxyCodeLine{00458\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_aa63faf14812118c7dfb2f5d8653d6dda}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00459\ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_a552728a8a2493e7844a6fccf200b28ca}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00460\ \ \ \}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \textcolor{keywordtype}{double}\ ratio\ =\ (double)graph\_x\ /\ (\textcolor{keywordtype}{double})get\_xsize();}
\DoxyCodeLine{00464\ \ \ \ \ \textcolor{keywordflow}{if}\ (ratio\ >\ 0.0f)\ \{}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \mbox{\hyperlink{classGtkStatsPianoRoll_a19994681639663f81e2a1e1964f5b5dd}{set\_horizontal\_scale}}(\_drag\_scale\_start\ /\ ratio);}
\DoxyCodeLine{00466\ \ \ \ \ \}}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00468\ \ \ \}}
\DoxyCodeLine{00469\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{comment}{//\ We\ haven't\ created\ the\ new\ guide\ bar\ yet;\ we\ won't\ until\ the\ mouse}}
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{comment}{//\ comes\ within\ the\ graph's\ region.}}
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\_x\ >=\ 0\ \&\&\ graph\_x\ <\ get\_xsize())\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \mbox{\hyperlink{classGtkStatsGraph_acf477ec8aaef7e698414175536e33199}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a3a7fc8b8eb05e7ff7a6f044ebee7035a}{add\_user\_guide\_bar}}(pixel\_to\_height(graph\_x));}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00476\ \ \ \ \ \}}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(graph\_x));}
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00481\ \ \ \}}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classGtkStatsGraph_a36a7bae6cbad842a6998fcd97ab3e26a}{GtkStatsGraph::handle\_motion}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00484\ \}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00489\ gboolean\ \mbox{\hyperlink{classGtkStatsPianoRoll_a14a0dfde07d4b52d7856c120e73b2eb3}{GtkStatsPianoRoll::}}}
\DoxyCodeLine{00490\ \mbox{\hyperlink{classGtkStatsPianoRoll_a14a0dfde07d4b52d7856c120e73b2eb3}{handle\_leave}}()\ \{}
\DoxyCodeLine{00491\ \ \ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_aa63faf14812118c7dfb2f5d8653d6dda}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00492\ \ \ \mbox{\hyperlink{classGtkStatsGraph_a552728a8a2493e7844a6fccf200b28ca}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00493\ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00494\ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00500\ \textcolor{keywordtype}{int}\ GtkStatsPianoRoll::}
\DoxyCodeLine{00501\ get\_collector\_under\_pixel(\textcolor{keywordtype}{int}\ xpoint,\ \textcolor{keywordtype}{int}\ ypoint)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00502\ \ \ \textcolor{keywordflow}{if}\ (\_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_ae84179e0aa3a6a5cbeb8f45ee0127554}{get\_num\_labels}}()\ ==\ 0)\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00504\ \ \ \}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ \textcolor{comment}{//\ Assume\ all\ of\ the\ labels\ are\ the\ same\ height.}}
\DoxyCodeLine{00507\ \ \ \textcolor{keywordtype}{int}\ height\ =\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_a8b1a382a559dd9f362eb4832a84597fd}{get\_label\_height}}(0);}
\DoxyCodeLine{00508\ \ \ \textcolor{keywordtype}{int}\ row\ =\ (get\_ysize()\ -\/\ ypoint)\ /\ (height\ *\ \_cr\_scale);}
\DoxyCodeLine{00509\ \ \ \textcolor{keywordflow}{if}\ (row\ >=\ 0\ \&\&\ row\ <\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_ae84179e0aa3a6a5cbeb8f45ee0127554}{get\_num\_labels}}())\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keywordflow}{return}\ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_a872841681413d0eba82aeb725837ce3c}{get\_label\_collector\_index}}(row);}
\DoxyCodeLine{00511\ \ \ \}\ \textcolor{keywordflow}{else}\ \ \{}
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00513\ \ \ \}}
\DoxyCodeLine{00514\ \}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00519\ \textcolor{keywordtype}{void}\ GtkStatsPianoRoll::}
\DoxyCodeLine{00520\ update\_labels()\ \{}
\DoxyCodeLine{00521\ \ \ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_a8d9cca92be268640161e958aded25e54}{clear\_labels}}();}
\DoxyCodeLine{00522\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_labels();\ i++)\ \{}
\DoxyCodeLine{00523\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classGtkStatsLabelStack_a0b7f41102ef42abacaf4c904c0f58f28}{add\_label}}(GtkStatsGraph::\_monitor,\ \textcolor{keyword}{this},}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \_thread\_index,}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ get\_label\_collector(i),\ \textcolor{keyword}{true});}
\DoxyCodeLine{00526\ \ \ \}}
\DoxyCodeLine{00527\ \ \ \_labels\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00528\ \}}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00533\ \textcolor{keywordtype}{void}\ GtkStatsPianoRoll::}
\DoxyCodeLine{00534\ draw\_guide\_bar(cairo\_t\ *cr,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00535\ \ \ \textcolor{keywordtype}{int}\ x\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \textcolor{keywordflow}{if}\ (x\ >\ 0\ \&\&\ x\ <\ get\_xsize()\ -\/\ 1)\ \{}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{comment}{//\ Only\ draw\ it\ if\ it's\ not\ too\ close\ to\ the\ top.}}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00541\ \ \ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_light\_gray[0],\ rgb\_light\_gray[1],\ rgb\_light\_gray[2]);}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00545\ \ \ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_user\_guide\_bar[0],\ rgb\_user\_guide\_bar[1],\ rgb\_user\_guide\_bar[2]);}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00549\ \ \ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_dark\_gray[0],\ rgb\_dark\_gray[1],\ rgb\_dark\_gray[2]);}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ cairo\_move\_to(cr,\ x,\ 0);}
\DoxyCodeLine{00553\ \ \ \ \ cairo\_line\_to(cr,\ x,\ get\_ysize());}
\DoxyCodeLine{00554\ \ \ \ \ cairo\_stroke(cr);}
\DoxyCodeLine{00555\ \ \ \}}
\DoxyCodeLine{00556\ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00561\ \textcolor{keywordtype}{void}\ GtkStatsPianoRoll::}
\DoxyCodeLine{00562\ draw\_guide\_labels(cairo\_t\ *cr)\ \{}
\DoxyCodeLine{00563\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00564\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00565\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00566\ \ \ \ \ draw\_guide\_label(cr,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i));}
\DoxyCodeLine{00567\ \ \ \}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00570\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00571\ \ \ \ \ draw\_guide\_label(cr,\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i));}
\DoxyCodeLine{00572\ \ \ \}}
\DoxyCodeLine{00573\ \}}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00578\ \textcolor{keywordtype}{void}\ GtkStatsPianoRoll::}
\DoxyCodeLine{00579\ draw\_guide\_label(cairo\_t\ *cr,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00580\ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00581\ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00582\ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_light\_gray[0],\ rgb\_light\_gray[1],\ rgb\_light\_gray[2]);}
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00586\ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_user\_guide\_bar[0],\ rgb\_user\_guide\_bar[1],\ rgb\_user\_guide\_bar[2]);}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00590\ \ \ \ \ cairo\_set\_source\_rgb(cr,\ rgb\_dark\_gray[0],\ rgb\_dark\_gray[1],\ rgb\_dark\_gray[2]);}
\DoxyCodeLine{00591\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00592\ \ \ \}}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \textcolor{keywordtype}{int}\ x\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00595\ \ \ \textcolor{keyword}{const}\ std::string\ \&label\ =\ bar.\_label;}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ PangoLayout\ *layout\ =\ gtk\_widget\_create\_pango\_layout(\_scale\_area,\ label.c\_str());}
\DoxyCodeLine{00598\ \ \ \textcolor{keywordtype}{int}\ width,\ height;}
\DoxyCodeLine{00599\ \ \ pango\_layout\_get\_pixel\_size(layout,\ \&width,\ \&height);}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \textcolor{keywordflow}{if}\ (bar.\_style\ !=\ GBS\_user)\ \{}
\DoxyCodeLine{00602\ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(x\ -\/\ width\ *\ \_cr\_scale);}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(x\ +\ width\ *\ \_cr\_scale);}
\DoxyCodeLine{00604\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height)\ >=\ 0)\ \{}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \textcolor{comment}{//\ Omit\ the\ label:\ there's\ a\ user-\/defined\ guide\ bar\ in\ the\ same\ space.}}
\DoxyCodeLine{00606\ \ \ \ \ \ \ g\_object\_unref(layout);}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00608\ \ \ \ \ \}}
\DoxyCodeLine{00609\ \ \ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ 0\ \&\&\ x\ <\ get\_xsize())\ \{}
\DoxyCodeLine{00612\ \ \ \ \ \textcolor{comment}{//\ Now\ convert\ our\ x\ to\ a\ coordinate\ within\ our\ drawing\ area.}}
\DoxyCodeLine{00613\ \ \ \ \ \textcolor{keywordtype}{int}\ junk\_y;}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \ \ \ \ x\ /=\ \_cr\_scale;}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \ \textcolor{comment}{//\ The\ x\ coordinate\ comes\ from\ the\ graph\_window.}}
\DoxyCodeLine{00618\ \ \ \ \ gtk\_widget\_translate\_coordinates(\_graph\_window,\ \_scale\_area,}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \ x,\ 0,}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \&x,\ \&junk\_y);}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ GtkAllocation\ allocation;}
\DoxyCodeLine{00623\ \ \ \ \ gtk\_widget\_get\_allocation(\_scale\_area,\ \&allocation);}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ \ \ \textcolor{keywordtype}{int}\ this\_x\ =\ x\ -\/\ width\ /\ 2;}
\DoxyCodeLine{00626\ \ \ \ \ cairo\_move\_to(cr,\ this\_x,\ allocation.height\ -\/\ height);}
\DoxyCodeLine{00627\ \ \ \ \ pango\_cairo\_show\_layout(cr,\ layout);}
\DoxyCodeLine{00628\ \ \ \}}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ g\_object\_unref(layout);}
\DoxyCodeLine{00631\ \}}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00636\ gboolean\ GtkStatsPianoRoll::}
\DoxyCodeLine{00637\ draw\_callback(GtkWidget\ *widget,\ cairo\_t\ *cr,\ gpointer\ data)\ \{}
\DoxyCodeLine{00638\ \ \ \mbox{\hyperlink{classGtkStatsPianoRoll}{GtkStatsPianoRoll}}\ *self\ =\ (\mbox{\hyperlink{classGtkStatsPianoRoll}{GtkStatsPianoRoll}}\ *)data;}
\DoxyCodeLine{00639\ \ \ self-\/>draw\_guide\_labels(cr);}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \ \ \textcolor{keywordflow}{return}\ TRUE;}
\DoxyCodeLine{00642\ \}}

\end{DoxyCode}

\doxysection{dxgsg9base.\+h}
\hypertarget{dxgsg9base_8h_source}{}\label{dxgsg9base_8h_source}\index{panda/src/dxgsg9/dxgsg9base.h@{panda/src/dxgsg9/dxgsg9base.h}}
\mbox{\hyperlink{dxgsg9base_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ DXGSG9BASE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ DXGSG9BASE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsWindow_8h}{graphicsWindow.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ WIN32\_LEAN\_AND\_MEAN\ 1\ \ }\textcolor{comment}{//\ get\ rid\ of\ mfc\ win32\ hdr\ stuff}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#ifndef\ STRICT}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ enable\ strict\ type\ checking\ in\ windows.h,\ see\ msdn}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ STRICT}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{windows_8h}{windows.h}}>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ D3D\_OVERLOADS\ \ \ }\textcolor{comment}{//\ \ get\ D3DVECTOR\ '+'\ operator,\ etc\ from\ d3dtypes.h}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ \#define\ D3D\_DEBUG\_INFO}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#undef\ Configure}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ <d3d9.h>}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ <d3dx9.h>}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <dxerr.h>}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#undef\ WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#if\ (D3D\_SDK\_VERSION\ \&\ 0xffff)\ <\ 32}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#error\ You\ need\ to\ install\ the\ latest\ DirectX9\ SDK.}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#ifndef\ D3DERRORSTRING}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#ifdef\ NDEBUG}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#define\ D3DERRORSTRING(HRESULT)\ "{}\ at\ ("{}\ <<\ \_\_FILE\_\_\ <<\ "{}:"{}\ <<\ \_\_LINE\_\_\ <<\ "{}),\ hr="{}\ <<\ \ DXGetErrorString(HRESULT)\ <<\ std::endl\ \ }\textcolor{comment}{//\ leave\ out\ descriptions\ to\ shrink\ release\ build}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#define\ D3DERRORSTRING(HRESULT)\ "{}\ at\ ("{}\ <<\ \_\_FILE\_\_\ <<\ "{}:"{}\ <<\ \_\_LINE\_\_\ <<\ "{}),\ hr="{}\ <<\ \ DXGetErrorString(HRESULT)\ <<\ "{}:\ "{}\ <<\ DXGetErrorDescription(HRESULT)\ <<\ std::endl}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{comment}{//\ imperfect\ method\ to\ ID\ NVid?\ \ could\ also\ scan\ desc\ str,\ but\ that\ isnt}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ fullproof\ either}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#define\ IS\_NVIDIA(DDDEVICEID)\ ((DDDEVICEID.VendorId==0x10DE)\ ||\ (DDDEVICEID.VendorId==0x12D2))}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ IS\_ATI(DDDEVICEID)\ (DDDEVICEID.VendorId==0x1002)}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#define\ IS\_MATROX(DDDEVICEID)\ (DDDEVICEID.VendorId==0x102B)}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#define\ D3D\_MAXTEXTURESTAGES\ 8}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{VertexShader,PixelShader\}\ ShaderType;}
\DoxyCodeLine{00062\ \textcolor{keyword}{typedef}\ DWORD\ DXShaderHandle;}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#define\ ISPOW2(X)\ (((X)\ \&\ ((X)-\/1))==0)}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#define\ IS\_VALID\_PTR(PTR)\ \ (!IsBadWritePtr(PTR,sizeof(void*)))}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#define\ DX\_DECLARE\_CLEAN(type,\ var)\ \(\backslash\)}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\ \ \ \ type\ var;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\ \ \ \ ZeroMemory(\&var,\ sizeof(type));\ \(\backslash\)}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\ \ \ \ var.dwSize\ =\ sizeof(type);}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#define\ SAFE\_DELSHADER(TYPE,HANDLE,PDEVICE)\ \ \(\backslash\)}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\ \ if((HANDLE!=nullptr)\&\&IS\_VALID\_PTR(PDEVICE))\ \{\ PDEVICE-\/>Delete\#\#TYPE\#\#Shader(HANDLE);\ \ HANDLE=nullptr;\ \}}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#define\ SAFE\_DELETE(p)\ \ \ \ \ \ \ \{\ if(p)\ \{\ assert(IS\_VALID\_PTR(p));\ \ \ delete\ (p);\ \ \ \ \ (p)=nullptr;\ \}\ \}}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#define\ SAFE\_DELETE\_ARRAY(p)\ \{\ if(p)\ \{\ assert(IS\_VALID\_PTR(p));\ \ \ delete\ []\ (p);\ \ \ (p)=nullptr;\ \}\ \}}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{comment}{//\ for\ stuff\ outside\ a\ panda\ class}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#define\ SAFE\_RELEASE(p)\ \ \ \ \ \ \{\ if(p)\ \{\ assert(IS\_VALID\_PTR(p));\ (p)-\/>Release();\ (p)=nullptr;\ \}\ \}}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#define\ SAFE\_FREELIB(hDLL)\ \ \ \{\ if(hDLL!=nullptr)\ \{\ \ FreeLibrary(hDLL);hDLL\ =\ nullptr;\ \}\ \}}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{comment}{//\ this\ is\ bDoDownToZero\ argument\ to\ RELEASE()}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#define\ RELEASE\_DOWN\_TO\_ZERO\ true}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#define\ RELEASE\_ONCE\ false}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{comment}{//\ uncomment\ to\ add\ refcnt\ debug\ output\ \#define\ DEBUG\_RELEASES}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#ifdef\ DEBUG\_RELEASES}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#define\ RELEASE(OBJECT,MODULE,DBGSTR,bDoDownToZero)\ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \ \(\backslash\)}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\ \ \ ULONG\ refcnt;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00092\ \textcolor{preprocessor}{\ \ \ if(IS\_VALID\_PTR(OBJECT))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ refcnt\ =\ (OBJECT)-\/>Release();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ MODULE\#\#\_cat.debug()\ <<\ DBGSTR\ <<\ "{}\ released,\ refcnt\ =\ "{}\ <<\ refcnt\ <<\ "{}\ at\ "{}\ <<\ \_\_FILE\_\_\ <<\ "{}:"{}\ <<\ \_\_LINE\_\_\ <<\ std::endl;\ \(\backslash\)}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if((bDoDownToZero)\ \&\&\ (refcnt>0))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ MODULE\#\#\_cat.warning()\ <<\ DBGSTR\ <<\ "{}\ released\ but\ still\ has\ a\ non-\/zero\ refcnt("{}\ <<\ refcnt\ <<\ "{}),\ multi-\/releasing\ it\ down\ to\ zero!\(\backslash\)n"{};\ \(\backslash\)}}
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ do\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refcnt\ =\ (OBJECT)-\/>Release();\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00099\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ while(refcnt>0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (OBJECT)\ =\ nullptr;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ MODULE\#\#\_cat.debug()\ <<\ DBGSTR\ <<\ "{}\ not\ released,\ ptr\ ==\ NULL"{}\ <<\ std::endl;\ \ \(\backslash\)}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\}}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#define\ PRINT\_REFCNT(MODULE,p)\ \{\ ULONG\ refcnt;\ \ (p)-\/>AddRef();\ \ refcnt=(p)-\/>Release();\ \(\backslash\)}}
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MODULE\#\#\_cat.debug()\ <<\ \#p\ <<\ "{}\ has\ refcnt\ =\ "{}\ <<\ refcnt\ <<\ "{}\ at\ "{}\ <<\ \_\_FILE\_\_\ <<\ "{}:"{}\ <<\ \_\_LINE\_\_\ <<\ std::endl;\ \}}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00110\ \textcolor{preprocessor}{\#define\ RELEASE(OBJECT,MODULE,DBGSTR,bDoDownToZero)\ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\ \ \ ULONG\ refcnt;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00112\ \textcolor{preprocessor}{\ \ \ if(IS\_VALID\_PTR(OBJECT))\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \(\backslash\)}}
\DoxyCodeLine{00113\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ refcnt=(OBJECT)-\/>Release();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if((bDoDownToZero)\ \&\&\ (refcnt>0))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00115\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ MODULE\#\#\_cat.warning()\ <<\ DBGSTR\ <<\ "{}\ released\ but\ still\ has\ a\ non-\/zero\ refcnt("{}\ <<\ refcnt\ <<\ "{}),\ multi-\/releasing\ it\ down\ to\ zero!\(\backslash\)n"{};\ \(\backslash\)}}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ do\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ refcnt\ =\ (OBJECT)-\/>Release();\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ while(refcnt>0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00119\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (OBJECT)\ =\ nullptr;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\ \ \ \}\}}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\#define\ PRINT\_REFCNT(MODULE,p)}}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\#ifdef\ DO\_PSTATS}}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#define\ DO\_PSTATS\_STUFF(XX)\ XX;}}
\DoxyCodeLine{00128\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\#define\ DO\_PSTATS\_STUFF(XX)}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#define\ PANDA\_MAXNUMVERTS\ 0xFFFF\ \ }\textcolor{comment}{//\ Note\ Device\ may\ support\ more\ than\ this\ if\ it\ supports\ D3DFMT\_INDEX32\ indexbufs.}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#define\ FLG(NN)\ (1<<NN)}}
\DoxyCodeLine{00135\ \textcolor{preprocessor}{\#define\ MAX\_POSSIBLE\_TEXFMTS\ 32}}
\DoxyCodeLine{00136\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00137\ \ \ \ \ R8G8B8\_FLAG\ =\ \ \ \ \ \ \ FLG(0),}
\DoxyCodeLine{00138\ \ \ \ \ A8R8G8B8\_FLAG\ =\ \ \ \ \ FLG(1),}
\DoxyCodeLine{00139\ \ \ \ \ X8R8G8B8\_FLAG\ =\ \ \ \ \ FLG(2),}
\DoxyCodeLine{00140\ \ \ \ \ R5G6B5\_FLAG\ =\ \ \ \ \ \ \ FLG(3),}
\DoxyCodeLine{00141\ \ \ \ \ X1R5G5B5\_FLAG\ =\ \ \ \ \ FLG(4),}
\DoxyCodeLine{00142\ \ \ \ \ A1R5G5B5\_FLAG\ =\ \ \ \ \ FLG(5),}
\DoxyCodeLine{00143\ \ \ \ \ A4R4G4B4\_FLAG\ =\ \ \ \ \ FLG(6),}
\DoxyCodeLine{00144\ \ \ \ \ R3G3B2\_FLAG\ =\ \ \ \ \ \ \ FLG(7),}
\DoxyCodeLine{00145\ \ \ \ \ A8\_FLAG\ =\ \ \ \ \ \ \ \ \ \ \ FLG(8),}
\DoxyCodeLine{00146\ \ \ \ \ A8R3G3B2\_FLAG\ =\ \ \ \ \ FLG(9),}
\DoxyCodeLine{00147\ \ \ \ \ X4R4G4B4\_FLAG\ =\ \ \ \ \ FLG(10),}
\DoxyCodeLine{00148\ \ \ \ \ A2B10G10R10\_FLAG\ =\ \ FLG(11),}
\DoxyCodeLine{00149\ \ \ \ \ G16R16\_FLAG\ =\ \ \ \ \ \ \ FLG(12),}
\DoxyCodeLine{00150\ \ \ \ \ A8P8\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(13),}
\DoxyCodeLine{00151\ \ \ \ \ P8\_FLAG\ =\ \ \ \ \ \ \ \ \ \ \ FLG(14),}
\DoxyCodeLine{00152\ \ \ \ \ L8\_FLAG\ =\ \ \ \ \ \ \ \ \ \ \ FLG(15),}
\DoxyCodeLine{00153\ \ \ \ \ A8L8\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(16),}
\DoxyCodeLine{00154\ \ \ \ \ A4L4\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(17),}
\DoxyCodeLine{00155\ \ \ \ \ D16\_FLAG\ =\ \ \ \ \ \ \ \ \ \ FLG(18),}
\DoxyCodeLine{00156\ \ \ \ \ D24X8\_FLAG\ =\ \ \ \ \ \ \ \ FLG(19),}
\DoxyCodeLine{00157\ \ \ \ \ D24S8\_FLAG\ =\ \ \ \ \ \ \ \ FLG(20),}
\DoxyCodeLine{00158\ \ \ \ \ D32\_FLAG\ =\ \ \ \ \ \ \ \ \ \ FLG(21),}
\DoxyCodeLine{00159\ \ \ \ \ INTZ\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(22),}
\DoxyCodeLine{00160\ \ \ \ \ R32F\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(23),}
\DoxyCodeLine{00161\ \ \ \ \ A32B32G32R32F\_FLAG\ =FLG(24),}
\DoxyCodeLine{00162\ \ \ \ \ ATI1\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(25),}
\DoxyCodeLine{00163\ \ \ \ \ ATI2\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(26),}
\DoxyCodeLine{00164\ \ \ \ \ DXT1\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(27),}
\DoxyCodeLine{00165\ \ \ \ \ DXT2\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(28),}
\DoxyCodeLine{00166\ \ \ \ \ DXT3\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(29),}
\DoxyCodeLine{00167\ \ \ \ \ DXT4\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(30),}
\DoxyCodeLine{00168\ \ \ \ \ DXT5\_FLAG\ =\ \ \ \ \ \ \ \ \ FLG(31)}
\DoxyCodeLine{00169\ \}\ D3DFORMAT\_FLAG;}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#define\ D3DFMT\_INTZ\ ((D3DFORMAT)MAKEFOURCC('I',\ 'N',\ 'T',\ 'Z'))}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#define\ D3DFMT\_ATI1\ ((D3DFORMAT)MAKEFOURCC('A',\ 'T',\ 'I',\ '1'))}}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#define\ D3DFMT\_ATI2\ ((D3DFORMAT)MAKEFOURCC('A',\ 'T',\ 'I',\ '2'))}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \textcolor{comment}{//\ this\ is\ only\ used\ in\ conjunction\ wrendertgt\ fmts,\ so\ just\ make\ it\ something}}
\DoxyCodeLine{00176\ \textcolor{comment}{//\ that\ can\ never\ be\ a\ rtgt}}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#define\ DISPLAY\_32BPP\_REQUIRES\_16BPP\_ZBUFFER\_FLAG\ DXT1\_FLAG}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\#define\ DISPLAY\_16BPP\_REQUIRES\_16BPP\_ZBUFFER\_FLAG\ DXT2\_FLAG}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\#define\ IS\_16BPP\_DISPLAY\_FORMAT(FMT)\ (((FMT)==D3DFMT\_R5G6B5)||((FMT)==D3DFMT\_X1R5G5B5)||((FMT)==D3DFMT\_A1R5G5B5))}}
\DoxyCodeLine{00181\ \textcolor{preprocessor}{\#define\ IS\_16BPP\_ZBUFFER(FMT)\ ((FMT==D3DFMT\_D16)||(FMT==D3DFMT\_D15S1))}}
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\#define\ IS\_STENCIL\_FORMAT(FMT)\ (((FMT)==D3DFMT\_D24S8)\ ||\ ((FMT)==D3DFMT\_D15S1)\ ||\ ((FMT)==D3DFMT\_D24X4S4))}}
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#define\ RECT\_XSIZE(REC)\ (REC.right-\/REC.left)}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\#define\ RECT\_YSIZE(REC)\ (REC.bottom-\/REC.top)}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classDXGraphicsStateGuardian9}{DXGraphicsStateGuardian9}};}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structDXScreenData}{DXScreenData}}\ \{}
\DoxyCodeLine{00189\ \ \ LPDIRECT3DDEVICE9\ \_d3d\_device;}
\DoxyCodeLine{00190\ \ \ IDirect3DSwapChain9\ *\_swap\_chain;}
\DoxyCodeLine{00191\ \ \ LPDIRECT3D9\ \_d3d9;\ \ \textcolor{comment}{//\ copied\ from\ DXGraphicsPipe9\ for\ convenience}}
\DoxyCodeLine{00192\ \ \ HWND\ \_window;}
\DoxyCodeLine{00193\ \ \ HMONITOR\ \_monitor;}
\DoxyCodeLine{00194\ \ \ DWORD\ \_max\_available\_video\_memory;}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \_card\_id;\ \ \textcolor{comment}{//\ adapter\ ID}}
\DoxyCodeLine{00196\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \_depth\_buffer\_bitdepth;\ \ \textcolor{comment}{//GetSurfaceDesc\ is\ not\ reliable\ so\ must\ store\ this\ explicitly}}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{bool}\ \_can\_direct\_disable\_color\_writes;\ \ \textcolor{comment}{//\ if\ true,\ don't\ need\ blending\ for\ this}}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordtype}{bool}\ \_is\_low\_memory\_card;}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordtype}{bool}\ \_is\_tnl\_device;}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordtype}{bool}\ \_can\_use\_hw\_vertex\_shaders;}
\DoxyCodeLine{00201\ \ \ \textcolor{keywordtype}{bool}\ \_can\_use\_pixel\_shaders;}
\DoxyCodeLine{00202\ \ \ UINT\ \_supported\_screen\_depths\_mask;}
\DoxyCodeLine{00203\ \ \ UINT\ \_supported\_tex\_formats\_mask;}
\DoxyCodeLine{00204\ \ \ \textcolor{keywordtype}{bool}\ \_supports\_rgba16f\_texture\_format;}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{bool}\ \_supports\_rgba32\_texture\_format;}
\DoxyCodeLine{00206\ \ \ D3DCAPS9\ \_d3dcaps;}
\DoxyCodeLine{00207\ \ \ D3DDISPLAYMODE\ \_display\_mode;}
\DoxyCodeLine{00208\ \ \ D3DPRESENT\_PARAMETERS\ \_presentation\_params;\ \ \textcolor{comment}{//\ not\ redundant\ with\ \_display\_mode\ since\ width/height\ must\ be\ 0\ for\ windowed\ mode}}
\DoxyCodeLine{00209\ \ \ D3DADAPTER\_IDENTIFIER9\ \_dx\_device\_id;}
\DoxyCodeLine{00210\ \ \ D3DFORMAT\ \_render\_to\_texture\_d3d\_format;}
\DoxyCodeLine{00211\ \ \ D3DFORMAT\ \_framebuffer\_d3d\_format;}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \mbox{\hyperlink{classDXGraphicsStateGuardian9}{DXGraphicsStateGuardian9}}\ *\_dxgsg9;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \textcolor{keywordtype}{int}\ \_managed\_textures;}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordtype}{int}\ \_managed\_vertex\_buffers;}
\DoxyCodeLine{00217\ \ \ \textcolor{keywordtype}{int}\ \_managed\_index\_buffers;}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \textcolor{keywordtype}{bool}\ \_supports\_dynamic\_textures;}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordtype}{bool}\ \_supports\_automatic\_mipmap\_generation;}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordtype}{bool}\ \_intel\_compressed\_texture\_bug;}
\DoxyCodeLine{00222\ \};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \textcolor{comment}{//\ utility\ stuff}}
\DoxyCodeLine{00226\ \textcolor{keyword}{extern}\ \mbox{\hyperlink{classpmap}{pmap<D3DFORMAT\_FLAG,D3DFORMAT>}}\ g\_D3DFORMATmap;}
\DoxyCodeLine{00227\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ Init\_D3DFORMAT\_map();}
\DoxyCodeLine{00228\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *D3DFormatStr(D3DFORMAT\ fmt);}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

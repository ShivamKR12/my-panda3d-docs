\doxysection{notify\+\_\+ext.\+cxx}
\hypertarget{notify__ext_8cxx_source}{}\label{notify__ext_8cxx_source}\index{dtool/src/prc/notify\_ext.cxx@{dtool/src/prc/notify\_ext.cxx}}
\mbox{\hyperlink{notify__ext_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{notify__ext_8h}{notify\_ext.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifdef\ HAVE\_PYTHON}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00024\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classExtension}{Extension<Notify>::}}}
\DoxyCodeLine{00025\ \mbox{\hyperlink{classExtension}{set\_ostream\_ptr}}(PyObject\ *ostream\_ptr,\ \textcolor{keywordtype}{bool}\ delete\_later)\ \{}
\DoxyCodeLine{00026\ \ \ \textcolor{keyword}{extern}\ \textcolor{keyword}{struct\ }Dtool\_PyTypedObject\ Dtool\_std\_ostream;}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \textcolor{keywordflow}{if}\ (ostream\_ptr\ ==\ Py\_None)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \_this-\/>set\_ostream\_ptr(\textcolor{keyword}{nullptr},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00031\ \ \ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ std::ostream\ *ptr\ =\ (std::ostream\ *)DTOOL\_Call\_GetPointerThisClass(ostream\_ptr,\ \&Dtool\_std\_ostream,\ 1,\ \textcolor{stringliteral}{"{}Notify.set\_ostream\_ptr"{}},\ \textcolor{keyword}{false},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{if}\ (ptr\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00036\ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ Since\ we\ now\ have\ a\ reference\ to\ this\ class\ on\ the\ C++\ end,\ make\ sure}}
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{//\ that\ the\ ostream\ isn't\ being\ destructed\ when\ its\ Python\ wrapper\ expires.}}
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ Note\ that\ this\ may\ cause\ a\ memory\ leak\ if\ delete\_later\ is\ not\ set,\ but}}
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ since\ these\ pointers\ are\ usually\ set\ once\ for\ the\ rest\ of\ time,\ this\ is}}
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ considered\ less\ of\ a\ problem\ than\ having\ the\ Python\ object\ destroy\ the}}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ object\ while\ C++\ is\ still\ using\ it.\ \ See\ GitHub\ \#1371.}}
\DoxyCodeLine{00044\ \ \ ((Dtool\_PyInstDef\ *)ostream\_ptr)-\/>\_memory\_rules\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00045\ \ \ \_this-\/>set\_ostream\_ptr(ptr,\ delete\_later);}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ HAVE\_PYTHON}}

\end{DoxyCode}

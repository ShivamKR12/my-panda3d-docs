\doxysection{nurbs\+Curve.\+cxx}
\hypertarget{nurbsCurve_8cxx_source}{}\label{nurbsCurve_8cxx_source}\index{panda/src/parametrics/nurbsCurve.cxx@{panda/src/parametrics/nurbsCurve.cxx}}
\mbox{\hyperlink{nurbsCurve_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nurbsCurve_8h}{nurbsCurve.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__parametrics_8h}{config\_parametrics.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{epvector_8h}{epvector.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ NurbsCurve::\_type\_handle;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00029\ NurbsCurve::}
\DoxyCodeLine{00030\ NurbsCurve()\ \{}
\DoxyCodeLine{00031\ \ \ \_order\ =\ 4;}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00038\ NurbsCurve::}
\DoxyCodeLine{00039\ NurbsCurve(\textcolor{keyword}{const}\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ \&pc)\ \{}
\DoxyCodeLine{00040\ \ \ \_order\ =\ 4;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{if}\ (!pc.\mbox{\hyperlink{classParametricCurve_a33105b5382bc116772edae8387294648}{convert\_to\_nurbs}}(\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00043\ \ \ \ \ parametrics\_cat-\/>warning()}
\DoxyCodeLine{00044\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Cannot\ make\ a\ NURBS\ from\ the\ indicated\ curve.\(\backslash\)n"{}};}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ NurbsCurve::}
\DoxyCodeLine{00052\ NurbsCurve(\textcolor{keywordtype}{int}\ order,\ \textcolor{keywordtype}{int}\ num\_cvs,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ knots[],\ \textcolor{keyword}{const}\ LVecBase4\ cvs[])\ \{}
\DoxyCodeLine{00054\ \ \ \_order\ =\ order;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00057\ \ \ \_cvs.reserve(num\_cvs);}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_cvs;\ i++)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ append\_cv(cvs[i]);}
\DoxyCodeLine{00060\ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keywordtype}{int}\ num\_knots\ =\ num\_cvs\ +\ order;}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_knots;\ i++)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classNurbsCurve_af50b45dfe1dacd0647fc2f5d134053af}{set\_knot}}(i,\ knots[i]);}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \mbox{\hyperlink{classNurbsCurve_a255d2687b5de63468742807a6f055fe7}{recompute}}();}
\DoxyCodeLine{00068\ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00073\ NurbsCurve::}
\DoxyCodeLine{00074\ \string~NurbsCurve()\ \{}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00082\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *\mbox{\hyperlink{classNurbsCurve_ac5c0a86f2bd7a3103bb79ddeb3def970}{NurbsCurve::}}}
\DoxyCodeLine{00083\ \mbox{\hyperlink{classNurbsCurve_ac5c0a86f2bd7a3103bb79ddeb3def970}{make\_copy}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classNurbsCurve_a0d2256e57959756858283d12155f0851}{NurbsCurve::}}}
\DoxyCodeLine{00092\ \mbox{\hyperlink{classNurbsCurve_a0d2256e57959756858283d12155f0851}{set\_order}}(\textcolor{keywordtype}{int}\ order)\ \{}
\DoxyCodeLine{00093\ \ \ nassertv(order\ >=\ 1\ \&\&\ order\ <=\ 4);}
\DoxyCodeLine{00094\ \ \ nassertv(\_cvs.empty());}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \_order\ =\ order;}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00102\ \textcolor{keywordtype}{int}\ NurbsCurve::}
\DoxyCodeLine{00103\ get\_order()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{return}\ \_order;}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00110\ \textcolor{keywordtype}{int}\ NurbsCurve::}
\DoxyCodeLine{00111\ get\_num\_cvs()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{return}\ \_cvs.size();}
\DoxyCodeLine{00113\ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00118\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNurbsCurve_a6ee70c882d4651695f1d9fd835743dfc}{NurbsCurve::}}}
\DoxyCodeLine{00119\ \mbox{\hyperlink{classNurbsCurve_a6ee70c882d4651695f1d9fd835743dfc}{get\_num\_knots}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00120\ \ \ \textcolor{keywordflow}{return}\ \_cvs.size()\ +\ \_order;}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00131\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_a33ea289f17fba8bebe2d39ffc33ea61c}{NurbsCurve::}}}
\DoxyCodeLine{00132\ \mbox{\hyperlink{classNurbsCurve_a33ea289f17fba8bebe2d39ffc33ea61c}{insert\_cv}}(PN\_stdfloat\ t)\ \{}
\DoxyCodeLine{00133\ \ \ \textcolor{keywordflow}{if}\ (\_cvs.empty())\ \{}
\DoxyCodeLine{00134\ \ \ \ \ append\_cv(0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00136\ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \textcolor{keywordflow}{if}\ (t\ <=\ 0)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ t\ =\ 0.0f;}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \textcolor{keywordtype}{int}\ k\ =\ \mbox{\hyperlink{classNurbsCurve_a5f2cfe7801d6e1937770678877064b98}{find\_cv}}(t);}
\DoxyCodeLine{00143\ \ \ \textcolor{keywordflow}{if}\ (k\ <\ 0)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ append\_cv(\_cvs.back().\_p);}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00146\ \ \ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \textcolor{comment}{//\ Now\ we\ are\ inserting\ a\ knot\ between\ k-\/1\ and\ k.\ \ We'll\ adjust\ the\ CV's}}
\DoxyCodeLine{00149\ \ \ \textcolor{comment}{//\ according\ to\ Bohm's\ rule.}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{comment}{//\ First,\ get\ the\ new\ values\ of\ all\ the\ CV's\ that\ will\ change.\ \ These\ are}}
\DoxyCodeLine{00152\ \ \ \textcolor{comment}{//\ the\ CV's\ in\ the\ range\ [k\ -\/\ (\_order-\/1),\ k-\/1].}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ LVecBase4\ new\_cvs[3];}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ \_order-\/1;\ i++)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{int}\ nk\ =\ i\ +\ k\ -\/\ (\_order-\/1);}
\DoxyCodeLine{00158\ \ \ \ \ PN\_stdfloat\ ti\ =\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(nk);}
\DoxyCodeLine{00159\ \ \ \ \ PN\_stdfloat\ d\ =\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(nk\ +\ \_order-\/1)\ -\/\ ti;}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordflow}{if}\ (d\ ==\ 0.0f)\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ new\_cvs[i]\ =\ \_cvs[nk-\/1].\_p;}
\DoxyCodeLine{00162\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ PN\_stdfloat\ a\ =\ (t\ -\/\ ti)\ /\ d;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ new\_cvs[i]\ =\ (1.0f-\/a)*\_cvs[nk-\/1].\_p\ +\ a*\_cvs[nk].\_p;}
\DoxyCodeLine{00165\ \ \ \ \ \}}
\DoxyCodeLine{00166\ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ Now\ insert\ the\ new\ CV}}
\DoxyCodeLine{00169\ \ \ \_cvs.insert(\_cvs.begin()\ +\ k-\/1,\ \mbox{\hyperlink{classNurbsCurve_1_1CV}{CV}}());}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \textcolor{comment}{//\ Set\ all\ the\ new\ position\ values}}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ \_order-\/1;\ i++)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{int}\ nk\ =\ i\ +\ k\ -\/\ (\_order-\/1);}
\DoxyCodeLine{00174\ \ \ \ \ \_cvs[nk].\_p\ =\ new\_cvs[i];}
\DoxyCodeLine{00175\ \ \ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \textcolor{comment}{//\ And\ set\ the\ new\ knot\ value.}}
\DoxyCodeLine{00178\ \ \ \_cvs[k-\/1].\_t\ =\ t;}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00181\ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00187\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_a695e5445569113a6ebc10e259b29e9ac}{NurbsCurve::}}}
\DoxyCodeLine{00188\ \mbox{\hyperlink{classNurbsCurve_a695e5445569113a6ebc10e259b29e9ac}{remove\_cv}}(\textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0\ ||\ n\ >=\ (\textcolor{keywordtype}{int})\_cvs.size())\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00191\ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \_cvs.erase(\_cvs.begin()\ +\ n);}
\DoxyCodeLine{00194\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00195\ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00200\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classNurbsCurve_a60e0b46273e008145921cf9483c35675}{NurbsCurve::}}}
\DoxyCodeLine{00201\ \mbox{\hyperlink{classNurbsCurve_a60e0b46273e008145921cf9483c35675}{remove\_all\_cvs}}()\ \{}
\DoxyCodeLine{00202\ \ \ \_cvs.erase(\_cvs.begin(),\ \_cvs.end());}
\DoxyCodeLine{00203\ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00209\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_abce054fab094163de6e7364702c5ffcd}{NurbsCurve::}}}
\DoxyCodeLine{00210\ \mbox{\hyperlink{classNurbsCurve_abce054fab094163de6e7364702c5ffcd}{set\_cv}}(\textcolor{keywordtype}{int}\ n,\ \textcolor{keyword}{const}\ LVecBase4\ \&v)\ \{}
\DoxyCodeLine{00211\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ get\_num\_cvs(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \_cvs[n].\_p\ =\ v;}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00215\ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00220\ LVecBase4\ \mbox{\hyperlink{classNurbsCurve_a7a1e5f218cde576f14dddaf108aaac06}{NurbsCurve::}}}
\DoxyCodeLine{00221\ \mbox{\hyperlink{classNurbsCurve_a7a1e5f218cde576f14dddaf108aaac06}{get\_cv}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00222\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ get\_num\_cvs(),\ LVecBase4::zero());}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{keywordflow}{return}\ \_cvs[n].\_p;}
\DoxyCodeLine{00225\ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00234\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_af50b45dfe1dacd0647fc2f5d134053af}{NurbsCurve::}}}
\DoxyCodeLine{00235\ \mbox{\hyperlink{classNurbsCurve_af50b45dfe1dacd0647fc2f5d134053af}{set\_knot}}(\textcolor{keywordtype}{int}\ n,\ PN\_stdfloat\ t)\ \{}
\DoxyCodeLine{00236\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ \mbox{\hyperlink{classNurbsCurve_a6ee70c882d4651695f1d9fd835743dfc}{get\_num\_knots}}(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ \_order\ ||\ n-\/1\ >=\ (\textcolor{keywordtype}{int})\_cvs.size())\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00240\ \ \ \}}
\DoxyCodeLine{00241\ \ \ \_cvs[n-\/1].\_t\ =\ t;}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00243\ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00248\ PN\_stdfloat\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{NurbsCurve::}}}
\DoxyCodeLine{00249\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{if}\ (n\ <\ \_order\ ||\ \_cvs.empty())\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{00252\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (n-\/1\ >=\ (\textcolor{keywordtype}{int})\_cvs.size())\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{return}\ \_cvs.back().\_t;}
\DoxyCodeLine{00254\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keywordflow}{return}\ \_cvs[n-\/1].\_t;}
\DoxyCodeLine{00256\ \ \ \}}
\DoxyCodeLine{00257\ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00266\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_a255d2687b5de63468742807a6f055fe7}{NurbsCurve::}}}
\DoxyCodeLine{00267\ \mbox{\hyperlink{classNurbsCurve_a255d2687b5de63468742807a6f055fe7}{recompute}}()\ \{}
\DoxyCodeLine{00268\ \ \ \_segs.erase(\_segs.begin(),\ \_segs.end());}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ PN\_stdfloat\ knots[8];}
\DoxyCodeLine{00271\ \ \ LVecBase4\ cvs[4];}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{int})\_cvs.size()\ >\ \_order-\/1)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ cv\ =\ 0;\ cv\ <\ (int)\_cvs.size()-\/(\_order-\/1);\ cv++)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(cv+\_order-\/1)\ <\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(cv+\_order))\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ are\ \_order\ consecutive\ CV's\ that\ define\ each\ segment,}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ beginning\ at\ cv.\ \ Collect\ the\ CV's\ and\ knot\ values\ that\ define\ this}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ segment.}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ \_order;\ c++)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ cvs[c]\ =\ \_cvs[c+cv].\_p;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ \_order+\_order;\ c++)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ knots[c]\ =\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(c+cv);}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPiecewiseCurve_a48baebb91ee706378a45a3dd07b15aa7}{insert\_curveseg}}(\_segs.size(),\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classCubicCurveseg}{CubicCurveseg}}(\_order,\ knots,\ cvs),}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ knots[\_order]\ -\/\ knots[\_order-\/1]);}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ \ \ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{return}\ !\_segs.empty();}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00302\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_aa833cf341e8967d112b9fb691619cc5f}{NurbsCurve::}}}
\DoxyCodeLine{00303\ \mbox{\hyperlink{classNurbsCurve_aa833cf341e8967d112b9fb691619cc5f}{rebuild\_curveseg}}(\textcolor{keywordtype}{int}\ rtype0,\ PN\_stdfloat\ t0,\ \textcolor{keyword}{const}\ LVecBase4\ \&v0,}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rtype1,\ PN\_stdfloat\ t1,\ \textcolor{keyword}{const}\ LVecBase4\ \&v1,}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rtype2,\ PN\_stdfloat\ t2,\ \textcolor{keyword}{const}\ LVecBase4\ \&v2,}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rtype3,\ PN\_stdfloat\ t3,\ \textcolor{keyword}{const}\ LVecBase4\ \&v3)\ \{}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ Figure\ out\ which\ CV's\ contributed\ to\ this\ segment.}}
\DoxyCodeLine{00308\ \ \ \textcolor{keywordtype}{int}\ seg\ =\ 0;}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ nassertr((\textcolor{keywordtype}{int})\_cvs.size()\ >\ \_order-\/1,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \textcolor{keywordtype}{int}\ cv\ =\ 0;}
\DoxyCodeLine{00313\ \ \ \textcolor{keywordflow}{for}\ (cv\ =\ 0;\ cv\ <\ (int)\_cvs.size()-\/(\_order-\/1);\ cv++)\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(cv+\_order-\/1)\ <\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(cv+\_order))\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seg\ ==\ \_last\_ti)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ seg++;}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \textcolor{comment}{//\ Now\ copy\ the\ cvs\ and\ knots\ in\ question.}}
\DoxyCodeLine{00323\ \ \ LMatrix4\ G;}
\DoxyCodeLine{00324\ \ \ PN\_stdfloat\ knots[8];}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \textcolor{comment}{//\ We\ only\ need\ to\ build\ the\ geometry\ matrix\ if\ at\ least\ one\ of\ the}}
\DoxyCodeLine{00329\ \ \ \textcolor{comment}{//\ properties\ depends\ on\ the\ original\ value.}}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{if}\ ((rtype0\ |\ rtype1\ |\ rtype2\ |\ rtype3)\ \&\ RT\_KEEP\_ORIG)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ 4;\ c++)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&s\ =\ (c\ <\ \_order)\ ?\ \_cvs[c+cv].\_p\ :\ LVecBase4::zero();}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \ \ G.set\_col(c,\ s);}
\DoxyCodeLine{00335\ \ \ \ \ \}}
\DoxyCodeLine{00336\ \ \ \}}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \textcolor{comment}{//\ But\ we\ always\ need\ the\ knot\ vector\ to\ determine\ the\ basis\ matrix.}}
\DoxyCodeLine{00339\ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ \_order+\_order;\ c++)\ \{}
\DoxyCodeLine{00340\ \ \ \ \ knots[c]\ =\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(c+cv);}
\DoxyCodeLine{00341\ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ LMatrix4\ B;}
\DoxyCodeLine{00344\ \ \ compute\_nurbs\_basis(\_order,\ knots,\ B);}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ LMatrix4\ Bi;}
\DoxyCodeLine{00347\ \ \ Bi\ =\ invert(B);}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classCubicCurveseg_af82a33052581a1016172ee4a3696ca8c}{CubicCurveseg::compute\_seg}}(rtype0,\ t0,\ v0,}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rtype1,\ t1,\ v1,}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rtype2,\ t2,\ v2,}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rtype3,\ t3,\ v3,}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ B,\ Bi,\ G))\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00355\ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{//\ Now\ extract\ the\ new\ CV's\ from\ the\ new\ G\ matrix,\ and\ restore\ them\ to\ the}}
\DoxyCodeLine{00358\ \ \ \textcolor{comment}{//\ curve.}}
\DoxyCodeLine{00359\ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ \_order;\ c++)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \_cvs[c+cv].\_p\ =\ G.get\_col(c);}
\DoxyCodeLine{00361\ \ \ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00364\ \}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00373\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_a9f9921210093d3838dcde525c9a9877e}{NurbsCurve::}}}
\DoxyCodeLine{00374\ \mbox{\hyperlink{classNurbsCurve_a9f9921210093d3838dcde525c9a9877e}{stitch}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *a,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *b)\ \{}
\DoxyCodeLine{00375\ \ \ \textcolor{comment}{//\ First,\ make\ a\ copy\ of\ both\ of\ our\ curves.\ \ This\ ensures\ they\ are\ of\ the}}
\DoxyCodeLine{00376\ \ \ \textcolor{comment}{//\ correct\ type,\ and\ also\ protects\ us\ in\ case\ one\ of\ them\ is\ the\ same\ as}}
\DoxyCodeLine{00377\ \ \ \textcolor{comment}{//\ 'this'.}}
\DoxyCodeLine{00378\ \ \ PT(\mbox{\hyperlink{classNurbsCurve}{NurbsCurve}})\ na\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}}(*a);}
\DoxyCodeLine{00379\ \ \ PT(\mbox{\hyperlink{classNurbsCurve}{NurbsCurve}})\ nb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}}(*b);}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \textcolor{keywordflow}{if}\ (na-\/>get\_num\_cvs()\ ==\ 0\ ||\ nb-\/>get\_num\_cvs()\ ==\ 0)\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00383\ \ \ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \textcolor{keywordflow}{if}\ (na-\/>get\_order()\ !=\ nb-\/>get\_order())\ \{}
\DoxyCodeLine{00386\ \ \ \ \ parametrics\_cat-\/>error()}
\DoxyCodeLine{00387\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Cannot\ stitch\ NURBS\ curves\ of\ different\ orders!\(\backslash\)n"{}};}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00389\ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{//\ First,\ translate\ curve\ B\ to\ move\ its\ first\ CV\ to\ curve\ A's\ last\ CV.}}
\DoxyCodeLine{00392\ \ \ LVecBase3\ point\_offset\ =}
\DoxyCodeLine{00393\ \ \ \ \ na-\/>get\_cv\_point(na-\/>get\_num\_cvs()\ -\/\ 1)\ -\/\ nb-\/>get\_cv\_point(0);}
\DoxyCodeLine{00394\ \ \ \textcolor{keywordtype}{int}\ num\_b\_cvs\ =\ nb-\/>get\_num\_cvs();}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_b\_cvs;\ i++)\ \{}
\DoxyCodeLine{00396\ \ \ \ \ nb-\/>set\_cv\_point(i,\ nb-\/>get\_cv\_point(i)\ +\ point\_offset);}
\DoxyCodeLine{00397\ \ \ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \textcolor{comment}{//\ Now\ define\ a\ vector\ of\ all\ of\ A's\ CV's\ except\ the\ last\ one.}}
\DoxyCodeLine{00400\ \ \ \_cvs\ =\ na-\/>\_cvs;}
\DoxyCodeLine{00401\ \ \ \textcolor{keywordflow}{if}\ (!\_cvs.empty())\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \_cvs.pop\_back();}
\DoxyCodeLine{00403\ \ \ \}}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ PN\_stdfloat\ t\ =\ na-\/>get\_max\_t();}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \textcolor{comment}{//\ Now\ add\ all\ the\ new\ CV's.}}
\DoxyCodeLine{00408\ \ \ epvector<CV>::iterator\ ci;}
\DoxyCodeLine{00409\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ nb-\/>\_cvs.begin();\ ci\ !=\ nb-\/>\_cvs.end();\ ++ci)\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \mbox{\hyperlink{classNurbsCurve_1_1CV}{CV}}\ new\_cv\ =\ (*ci);}
\DoxyCodeLine{00411\ \ \ \ \ new\_cv.\_t\ +=\ t;}
\DoxyCodeLine{00412\ \ \ \ \ \_cvs.push\_back(new\_cv);}
\DoxyCodeLine{00413\ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \mbox{\hyperlink{classNurbsCurve_a255d2687b5de63468742807a6f055fe7}{recompute}}();}
\DoxyCodeLine{00416\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00417\ \}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00424\ \mbox{\hyperlink{classNurbsCurveInterface}{NurbsCurveInterface}}\ *\mbox{\hyperlink{classNurbsCurve_a03fd67b370d76ae36bbe51e711310d2b}{NurbsCurve::}}}
\DoxyCodeLine{00425\ \mbox{\hyperlink{classNurbsCurve_a03fd67b370d76ae36bbe51e711310d2b}{get\_nurbs\_interface}}()\ \{}
\DoxyCodeLine{00426\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{00427\ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00433\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_addc04333915f90d64686cb24d2d93a16}{NurbsCurve::}}}
\DoxyCodeLine{00434\ \mbox{\hyperlink{classNurbsCurve_addc04333915f90d64686cb24d2d93a16}{convert\_to\_nurbs}}(\mbox{\hyperlink{classParametricCurve}{ParametricCurve}}\ *nc)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00435\ \ \ nc-\/>\mbox{\hyperlink{classParametricCurve_a5ea75c00bef073428840b1518f7ca034}{set\_curve\_type}}(\_curve\_type);}
\DoxyCodeLine{00436\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classNurbsCurveInterface_ab82f375fca2579a094afb54fa52eb194}{NurbsCurveInterface::convert\_to\_nurbs}}(nc);}
\DoxyCodeLine{00437\ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00442\ \textcolor{keywordtype}{void}\ NurbsCurve::}
\DoxyCodeLine{00443\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00444\ \ \ NurbsCurveInterface::write(out,\ indent\_level);}
\DoxyCodeLine{00445\ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00451\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNurbsCurve_a89fb92735ae4c64b55d845e952d2eaef}{NurbsCurve::}}}
\DoxyCodeLine{00452\ \mbox{\hyperlink{classNurbsCurve_a89fb92735ae4c64b55d845e952d2eaef}{append\_cv\_impl}}(\textcolor{keyword}{const}\ LVecBase4\ \&v)\ \{}
\DoxyCodeLine{00453\ \ \ \_cvs.push\_back(\mbox{\hyperlink{classNurbsCurve_1_1CV}{CV}}(v,\ \mbox{\hyperlink{classNurbsCurve_a25e3e645fb7ab68b862f01d55b516f21}{get\_knot}}(\_cvs.size())+1.0f));}
\DoxyCodeLine{00454\ \ \ \textcolor{keywordflow}{return}\ \_cvs.size()-\/1;}
\DoxyCodeLine{00455\ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00461\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classNurbsCurve_accf237c8324ad1f57cfe4950541966dd}{NurbsCurve::}}}
\DoxyCodeLine{00462\ \mbox{\hyperlink{classNurbsCurve_accf237c8324ad1f57cfe4950541966dd}{format\_egg}}(std::ostream\ \&out,\ \textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keyword}{const}\ std::string\ \&curve\_type,}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00464\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classNurbsCurveInterface_aaebc35722b4487bf831830e21fb22bba}{NurbsCurveInterface::format\_egg}}(out,\ name,\ curve\_type,\ indent\_level);}
\DoxyCodeLine{00465\ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00471\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNurbsCurve_a5f2cfe7801d6e1937770678877064b98}{NurbsCurve::}}}
\DoxyCodeLine{00472\ \mbox{\hyperlink{classNurbsCurve_a5f2cfe7801d6e1937770678877064b98}{find\_cv}}(PN\_stdfloat\ t)\ \{}
\DoxyCodeLine{00473\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00474\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ \_order-\/1;\ i\ <\ (int)\_cvs.size();\ i++)\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_cvs[i].\_t\ >=\ t)\ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i+1;}
\DoxyCodeLine{00477\ \ \ \ \ \}}
\DoxyCodeLine{00478\ \ \ \}}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00481\ \}}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00486\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classNurbsCurve_a2c43c5daac30d2c0ae6e1ccea28696da}{NurbsCurve::}}}
\DoxyCodeLine{00487\ \mbox{\hyperlink{classNurbsCurve_a2c43c5daac30d2c0ae6e1ccea28696da}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00488\ \ \ BamReader::get\_factory()-\/>register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classNurbsCurve_a328304f0951fadd06822da37a90614eb}{make\_from\_bam}});}
\DoxyCodeLine{00489\ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00494\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classNurbsCurve_a328304f0951fadd06822da37a90614eb}{NurbsCurve::}}}
\DoxyCodeLine{00495\ \mbox{\hyperlink{classNurbsCurve_a328304f0951fadd06822da37a90614eb}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00496\ \ \ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}}\ *me\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurve}{NurbsCurve}};}
\DoxyCodeLine{00497\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00498\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00501\ \ \ me-\/>\mbox{\hyperlink{classNurbsCurve_a589aa05ef382fb39a74dda65d9760f38}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00502\ \ \ \textcolor{keywordflow}{return}\ me;}
\DoxyCodeLine{00503\ \}}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00509\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classNurbsCurve_af8066f92e6714f206310ffe40b21247a}{NurbsCurve::}}}
\DoxyCodeLine{00510\ \mbox{\hyperlink{classNurbsCurve_af8066f92e6714f206310ffe40b21247a}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *manager,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&me)\ \{}
\DoxyCodeLine{00511\ \ \ \mbox{\hyperlink{classPiecewiseCurve_adc473c7e21b8bf4ec3799e428fe1f406}{PiecewiseCurve::write\_datagram}}(manager,\ me);}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ me.add\_int8(\_order);}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ me.add\_uint32(\_cvs.size());}
\DoxyCodeLine{00516\ \ \ \textcolor{keywordtype}{size\_t}\ i;}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ \_cvs.size();\ i++)\ \{}
\DoxyCodeLine{00518\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classNurbsCurve_1_1CV}{CV}}\ \&cv\ =\ \_cvs[i];}
\DoxyCodeLine{00519\ \ \ \ \ cv.\_p.write\_datagram(me);}
\DoxyCodeLine{00520\ \ \ \ \ me.add\_float64(cv.\_t);}
\DoxyCodeLine{00521\ \ \ \}}
\DoxyCodeLine{00522\ \}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00529\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classNurbsCurve_a589aa05ef382fb39a74dda65d9760f38}{NurbsCurve::}}}
\DoxyCodeLine{00530\ \mbox{\hyperlink{classNurbsCurve_a589aa05ef382fb39a74dda65d9760f38}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00531\ \ \ \mbox{\hyperlink{classPiecewiseCurve_a4a6852ec6877326f4ee99dc6a222d2fb}{PiecewiseCurve::fillin}}(scan,\ manager);}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \_order\ =\ scan.get\_int8();}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \ \ \textcolor{keywordtype}{size\_t}\ num\_cvs\ =\ scan.get\_uint32();}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \_cvs.reserve(num\_cvs);}
\DoxyCodeLine{00538\ \ \ \textcolor{keywordtype}{size\_t}\ i;}
\DoxyCodeLine{00539\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_cvs;\ i++)\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \mbox{\hyperlink{classNurbsCurve_1_1CV}{CV}}\ cv;}
\DoxyCodeLine{00541\ \ \ \ \ cv.\_p.read\_datagram(scan);}
\DoxyCodeLine{00542\ \ \ \ \ cv.\_t\ =\ scan.get\_float64();}
\DoxyCodeLine{00543\ \ \ \ \ \_cvs.push\_back(cv);}
\DoxyCodeLine{00544\ \ \ \}}
\DoxyCodeLine{00545\ \}}

\end{DoxyCode}

\doxysection{panda/src/grutil/shader\+Terrain\+Mesh.cxx File Reference}
\hypertarget{shaderTerrainMesh_8cxx}{}\label{shaderTerrainMesh_8cxx}\index{panda/src/grutil/shaderTerrainMesh.cxx@{panda/src/grutil/shaderTerrainMesh.cxx}}
{\ttfamily \#include "{}shader\+Terrain\+Mesh.\+h"{}}\newline
{\ttfamily \#include "{}geom.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Vertex\+Format.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Vertex\+Data.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Vertex\+Writer.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Node.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Triangles.\+h"{}}\newline
{\ttfamily \#include "{}geom\+Patches.\+h"{}}\newline
{\ttfamily \#include "{}omni\+Bounding\+Volume.\+h"{}}\newline
{\ttfamily \#include "{}cullable\+Object.\+h"{}}\newline
{\ttfamily \#include "{}cull\+Traverser.\+h"{}}\newline
{\ttfamily \#include "{}cull\+Handler.\+h"{}}\newline
{\ttfamily \#include "{}cull\+Traverser\+Data.\+h"{}}\newline
{\ttfamily \#include "{}clock\+Object.\+h"{}}\newline
{\ttfamily \#include "{}shader\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}render\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}shader\+Input.\+h"{}}\newline
{\ttfamily \#include "{}bounding\+Box.\+h"{}}\newline
{\ttfamily \#include "{}bounding\+Sphere.\+h"{}}\newline
{\ttfamily \#include "{}sampler\+State.\+h"{}}\newline
{\ttfamily \#include "{}config\+\_\+grutil.\+h"{}}\newline
{\ttfamily \#include "{}type\+Handle.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a80b666d148c36979ecd77a2c27cfc8aa}\label{shaderTerrainMesh_8cxx_a80b666d148c36979ecd77a2c27cfc8aa} 
\#define {\bfseries get\+\_\+xel}(x,  y)~(data\mbox{[}(x) + (\+\_\+size -\/ 1 -\/ (y)) \texorpdfstring{$\ast$}{*} \+\_\+size\mbox{]}.b / (PN\+\_\+stdfloat)PGM\+\_\+\+MAXMAXVAL)
\item 
\Hypertarget{shaderTerrainMesh_8cxx_add363a7e5d8c2d779aed25d53f79dabd}\label{shaderTerrainMesh_8cxx_add363a7e5d8c2d779aed25d53f79dabd} 
\#define {\bfseries get\+\_\+point\+\_\+index}(x,  y)~(((x) + 1) + (size + 3) \texorpdfstring{$\ast$}{*} ((y) + 1))
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a704f1892bd25c74c52931ec6baf0a418}\label{shaderTerrainMesh_8cxx_a704f1892bd25c74c52931ec6baf0a418} 
{\bfseries Notify\+Category\+Def} (shader\+\_\+terrain, "{}"{})
\item 
int \mbox{\hyperlink{shaderTerrainMesh_8cxx_ace4c13d8fa8e63065906d15d87109577}{check\+\_\+power\+\_\+of\+\_\+two}} (size\+\_\+t x)
\begin{DoxyCompactList}\small\item\em Helper function to check for a power of two. \end{DoxyCompactList}\item 
\mbox{\hyperlink{shaderTerrainMesh_8cxx_a2fc09e40777ad6168da23aeba196ef5d}{CPT}} (\mbox{\hyperlink{classTransformState}{Transform\+State}}) \mbox{\hyperlink{classShaderTerrainMesh}{Shader\+Terrain\+Mesh}}
\begin{DoxyCompactList}\small\item\em Traverses the quadtree. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a861ee7628001746892ae5dca9f9abbfa}\label{shaderTerrainMesh_8cxx_a861ee7628001746892ae5dca9f9abbfa} 
\mbox{\hyperlink{classConfigVariableBool}{Config\+Variable\+Bool}} {\bfseries stm\+\_\+use\+\_\+hexagonal\+\_\+layout} ("{}stm-\/use-\/hexagonal-\/layout"{}, false, PRC\+\_\+\+DESC("{}Set this to true to use a hexagonal vertex layout. This approximates "{} "{}the heightfield in a better way, however the CLOD transitions might be "{} "{}visible due to the vertices not matching exactly."{}))
\item 
\Hypertarget{shaderTerrainMesh_8cxx_aec7b40056782ac9aa22041e19d995028}\label{shaderTerrainMesh_8cxx_aec7b40056782ac9aa22041e19d995028} 
\mbox{\hyperlink{classConfigVariableInt}{Config\+Variable\+Int}} {\bfseries stm\+\_\+max\+\_\+chunk\+\_\+count} ("{}stm-\/max-\/chunk-\/count"{}, 2048, PRC\+\_\+\+DESC("{}Controls the maximum amount of chunks the Terrain can display. If you use "{} "{}a high LOD, you might have to increment this value. The lower this value is "{} "{}the \mbox{\hyperlink{classless}{less}} data has to be transferred to the GPU."{}))
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a1c31dd44e6d99d4bd572075ead69623e}\label{shaderTerrainMesh_8cxx_a1c31dd44e6d99d4bd572075ead69623e} 
\mbox{\hyperlink{classConfigVariableInt}{Config\+Variable\+Int}} {\bfseries stm\+\_\+max\+\_\+views} ("{}stm-\/max-\/views"{}, 8, PRC\+\_\+\+DESC("{}Controls the maximum amount of different views the Terrain can be rendered "{} "{}with. Each camera rendering the terrain corresponds to a view. Lowering this "{} "{}value will reduce the data that has to be transferred to the GPU."{}))
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a9c74a86007767b9a9312c6d0d3afdc65}\label{shaderTerrainMesh_8cxx_a9c74a86007767b9a9312c6d0d3afdc65} 
\mbox{\hyperlink{classConfigVariableEnum}{Config\+Variable\+Enum}}$<$ Sampler\+State\+::\+Filter\+Type $>$ {\bfseries stm\+\_\+heightfield\+\_\+minfilter} ("{}stm-\/heightfield-\/minfilter"{}, Sampler\+State\+::\+FT\+\_\+linear, PRC\+\_\+\+DESC("{}This specifies the minfilter that is applied for a heightfield texture. This "{} "{}can be used to create heightfield that is visual correct with collision "{} "{}geometry (for example bullet terrain mesh) by changing it to nearest"{}))
\item 
\Hypertarget{shaderTerrainMesh_8cxx_a444549a3d1cd144c12034083aa5fc9ae}\label{shaderTerrainMesh_8cxx_a444549a3d1cd144c12034083aa5fc9ae} 
\mbox{\hyperlink{classConfigVariableEnum}{Config\+Variable\+Enum}}$<$ Sampler\+State\+::\+Filter\+Type $>$ {\bfseries stm\+\_\+heightfield\+\_\+magfilter} ("{}stm-\/heightfield-\/magfilter"{}, Sampler\+State\+::\+FT\+\_\+linear, PRC\+\_\+\+DESC("{}This specifies the magfilter that is applied for a heightfield texture. This "{} "{}can be used to create heightfield that is visual correct with collision "{} "{}geometry (for example bullet terrain mesh) by changing it to nearest"{}))
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
PANDA 3D SOFTWARE Copyright (c) Carnegie Mellon University. All rights reserved.

All use of this software is subject to the terms of the revised BSD license. You should have received a copy of this license along with this source code in a file named "{}\+LICENSE."{}

\begin{DoxyAuthor}{Author}
tobspr 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2016-\/02-\/16 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\Hypertarget{shaderTerrainMesh_8cxx_ace4c13d8fa8e63065906d15d87109577}\label{shaderTerrainMesh_8cxx_ace4c13d8fa8e63065906d15d87109577} 
\index{shaderTerrainMesh.cxx@{shaderTerrainMesh.cxx}!check\_power\_of\_two@{check\_power\_of\_two}}
\index{check\_power\_of\_two@{check\_power\_of\_two}!shaderTerrainMesh.cxx@{shaderTerrainMesh.cxx}}
\doxysubsubsection{\texorpdfstring{check\_power\_of\_two()}{check\_power\_of\_two()}}
{\footnotesize\ttfamily int check\+\_\+power\+\_\+of\+\_\+two (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{x }\end{DoxyParamCaption})}



Helper function to check for a power of two. 

This method checks for a power of two by using bitmasks


\begin{DoxyParams}{Parameters}
{\em x} & Number to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if x is a power of two, false otherwise 
\end{DoxyReturn}
\Hypertarget{shaderTerrainMesh_8cxx_a2fc09e40777ad6168da23aeba196ef5d}\label{shaderTerrainMesh_8cxx_a2fc09e40777ad6168da23aeba196ef5d} 
\index{shaderTerrainMesh.cxx@{shaderTerrainMesh.cxx}!CPT@{CPT}}
\index{CPT@{CPT}!shaderTerrainMesh.cxx@{shaderTerrainMesh.cxx}}
\doxysubsubsection{\texorpdfstring{CPT()}{CPT()}}
{\footnotesize\ttfamily CPT (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classTransformState}{Transform\+State}}}]{ }\end{DoxyParamCaption})}



Traverses the quadtree. 

This is used to support \doxylink{classNodePath_a97522b707f591db1a5781538d477ed97}{Node\+Path\+::calc\+\_\+tight\+\_\+bounds()}. It is not intended to be called directly, and it has nothing to do with the normal Panda bounding-\/volume computation.

If the node contains any geometry, this updates min\+\_\+point and max\+\_\+point to enclose its bounding box. found\+\_\+any is to be set true if the node has any geometry at all, or left alone if it has none. This method may be called over several nodes, so it may enter with min\+\_\+point, max\+\_\+point, and found\+\_\+any already set. Returns a newly-\/allocated \doxylink{classBoundingVolume}{Bounding\+Volume} that represents the internal contents of the node. Should be overridden by \doxylink{classPandaNode}{Panda\+Node} classes that contain something internally.

This method traverses the given chunk, deciding whether it should be rendered or subdivided.

In case the chunk is decided to be subdivided, this method is called on all children.

In case the chunk is decided to be rendered, Shader\+Terrain\+Mesh\+::do\+\_\+emit\+\_\+chunk() is called. Otherwise nothing happens, and the chunk does not get rendered.


\begin{DoxyParams}{Parameters}
{\em chunk} & Chunk to traverse \\
\hline
{\em data} & Traversal data \\
\hline
\end{DoxyParams}

\doxysection{p\+Stat\+Graph.\+cxx}
\hypertarget{pStatGraph_8cxx_source}{}\label{pStatGraph_8cxx_source}\index{pandatool/src/pstatserver/pStatGraph.cxx@{pandatool/src/pstatserver/pStatGraph.cxx}}
\mbox{\hyperlink{pStatGraph_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatGraph_8h}{pStatGraph.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatServer_8h}{pStatServer.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatFrameData_8h}{pStatFrameData.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__utils_8h}{string\_utils.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__pstatclient_8h}{config\_pstatclient.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <stdio.h>}\ \ \textcolor{comment}{//\ for\ sprintf}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ PStatGraph::GuideBar::}
\DoxyCodeLine{00029\ GuideBar(\textcolor{keywordtype}{double}\ height,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&label,\ PStatGraph::GuideBarStyle\ style)\ :}
\DoxyCodeLine{00030\ \ \ \_height(height),}
\DoxyCodeLine{00031\ \ \ \_label(label),}
\DoxyCodeLine{00032\ \ \ \_style(style)}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00039\ PStatGraph::GuideBar::}
\DoxyCodeLine{00040\ GuideBar(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&copy)\ :}
\DoxyCodeLine{00041\ \ \ \_height(copy.\_height),}
\DoxyCodeLine{00042\ \ \ \_label(copy.\_label),}
\DoxyCodeLine{00043\ \ \ \_style(copy.\_style)}
\DoxyCodeLine{00044\ \{}
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00050\ PStatGraph::}
\DoxyCodeLine{00051\ PStatGraph(\mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ xsize,\ \textcolor{keywordtype}{int}\ ysize)\ :}
\DoxyCodeLine{00052\ \ \ \_monitor(monitor),}
\DoxyCodeLine{00053\ \ \ \_xsize(xsize),}
\DoxyCodeLine{00054\ \ \ \_ysize(ysize)}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \_target\_frame\_rate\ =\ pstats\_target\_frame\_rate;}
\DoxyCodeLine{00057\ \ \ \_labels\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00058\ \ \ \_guide\_bars\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00059\ \ \ \_guide\_bar\_units\ =\ GBU\_ms;}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00065\ PStatGraph::}
\DoxyCodeLine{00066\ \string~PStatGraph()\ \{}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00074\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{PStatGraph::}}}
\DoxyCodeLine{00075\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{return}\ \_guide\_bars.size();}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00086\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&\mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{PStatGraph::}}}
\DoxyCodeLine{00087\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{GuideBar}}\ bogus\_bar(0.0,\ \textcolor{stringliteral}{"{}bogus"{}},\ GBS\_normal);}
\DoxyCodeLine{00090\ \ \ nassertr(n\ >=\ 0\ \&\&\ n\ <\ (\textcolor{keywordtype}{int})\_guide\_bars.size(),\ bogus\_bar);}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{return}\ \_guide\_bars[n];}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00099\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{PStatGraph::}}}
\DoxyCodeLine{00100\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordflow}{return}\ \_monitor-\/>get\_server()-\/>get\_num\_user\_guide\_bars();}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00107\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{PStatGraph::}}}
\DoxyCodeLine{00108\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(\textcolor{keywordtype}{int}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordtype}{double}\ height\ =\ \_monitor-\/>get\_server()-\/>get\_user\_guide\_bar\_height(n);}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatGraph_a3361dd9894e280326e4831f2d575e19a}{make\_guide\_bar}}(height,\ GBS\_user);}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00116\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{PStatGraph::}}}
\DoxyCodeLine{00117\ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{double}\ height)\ \{}
\DoxyCodeLine{00118\ \ \ \_monitor-\/>get\_server()-\/>move\_user\_guide\_bar(n,\ height);}
\DoxyCodeLine{00119\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00124\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatGraph_a3a7fc8b8eb05e7ff7a6f044ebee7035a}{PStatGraph::}}}
\DoxyCodeLine{00125\ \mbox{\hyperlink{classPStatGraph_a3a7fc8b8eb05e7ff7a6f044ebee7035a}{add\_user\_guide\_bar}}(\textcolor{keywordtype}{double}\ height)\ \{}
\DoxyCodeLine{00126\ \ \ \textcolor{keywordflow}{return}\ \_monitor-\/>get\_server()-\/>add\_user\_guide\_bar(height);}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00133\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_a7627d5e29b88196713f4ba3cea78ea17}{PStatGraph::}}}
\DoxyCodeLine{00134\ \mbox{\hyperlink{classPStatGraph_a7627d5e29b88196713f4ba3cea78ea17}{remove\_user\_guide\_bar}}(\textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00135\ \ \ \_monitor-\/>get\_server()-\/>remove\_user\_guide\_bar(n);}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00143\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{PStatGraph::}}}
\DoxyCodeLine{00144\ \mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(\textcolor{keywordtype}{double}\ from\_height,\ \textcolor{keywordtype}{double}\ to\_height)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{return}\ \_monitor-\/>get\_server()-\/>find\_user\_guide\_bar(from\_height,\ to\_height);}
\DoxyCodeLine{00146\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00152\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{PStatGraph::}}}
\DoxyCodeLine{00153\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(\textcolor{keywordtype}{double}\ value)\ \{}
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{char}\ buffer[128];}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{keywordflow}{if}\ (value\ <\ 0.01)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%0.4f"{}},\ value);}
\DoxyCodeLine{00158\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (value\ <\ 0.1)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%0.3f"{}},\ value);}
\DoxyCodeLine{00160\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (value\ <\ 1.0)\ \{}
\DoxyCodeLine{00161\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%0.2f"{}},\ value);}
\DoxyCodeLine{00162\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (value\ <\ 10.0)\ \{}
\DoxyCodeLine{00163\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%0.1f"{}},\ value);}
\DoxyCodeLine{00164\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00165\ \ \ \ \ sprintf(buffer,\ \textcolor{stringliteral}{"{}\%0.0f"{}},\ value);}
\DoxyCodeLine{00166\ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{return}\ buffer;}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00175\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{PStatGraph::}}}
\DoxyCodeLine{00176\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(\textcolor{keywordtype}{double}\ value,\ \textcolor{keywordtype}{int}\ guide\_bar\_units,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&unit\_name)\ \{}
\DoxyCodeLine{00177\ \ \ \textcolor{keywordtype}{string}\ label;}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_named)\ !=\ 0)\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ Units\ are\ whatever\ is\ specified\ by\ unit\_name,\ not\ a\ time\ unit\ at\ all.}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{int}\ int\_value\ =\ (int)value;}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{double})int\_value\ ==\ value)\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \textcolor{comment}{//\ Probably\ a\ counter\ or\ something,\ don't\ display\ .0\ suffix.}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ label\ =\ format\_string(int\_value);}
\DoxyCodeLine{00185\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ label\ =\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(value);}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0\ \&\&\ !unit\_name.empty())\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ "{}};}
\DoxyCodeLine{00190\ \ \ \ \ \ \ label\ +=\ unit\_name;}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ Units\ are\ either\ milliseconds\ or\ hz,\ or\ both.}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_ms)\ !=\ 0)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0\ \&\&}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ value\ >\ 0\ \&\&\ value\ <\ 0.000001)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ ns\ =\ value\ *\ 1000000000.0;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(ns);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ ns"{}};}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0\ \&\&}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ value\ >\ 0\ \&\&\ value\ <\ 0.001)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ us\ =\ value\ *\ 1000000.0;}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(us);}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ \(\backslash\)xb5s"{}};}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ \(\backslash\)xc2\(\backslash\)xb5s"{}};}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ ==\ 0\ ||\ value\ <\ 1.0)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ ms\ =\ value\ *\ 1000.0;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(ms);}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ ms"{}};}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(value);}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ s"{}};}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_hz)\ !=\ 0)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ hz\ =\ 1.0\ /\ value;}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0\ \&\&}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ (guide\_bar\_units\ \&\ GBU\_ms)\ ==\ 0)\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hz\ >=\ 1000000000)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(hz\ /\ 1000000000);}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ GHz"{}};}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (hz\ >=\ 1000000)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(hz\ /\ 1000000);}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ MHz"{}};}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (hz\ >=\ 1000)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(hz\ /\ 1000);}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ kHz"{}};}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(hz);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ Hz"{}};}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_ms)\ !=\ 0)\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ ("{}};}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ label\ +=\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(hz);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_show\_units)\ !=\ 0)\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{}\ Hz"{}};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((guide\_bar\_units\ \&\ GBU\_ms)\ !=\ 0)\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ label\ +=\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{return}\ label;}
\DoxyCodeLine{00263\ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00268\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_aa70e909c8ffac3abd11933f296b1562f}{PStatGraph::}}}
\DoxyCodeLine{00269\ \mbox{\hyperlink{classPStatGraph_aa70e909c8ffac3abd11933f296b1562f}{write\_datagram}}(\mbox{\hyperlink{classDatagram}{Datagram}}\ \&dg)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00270\ \ \ \textcolor{keywordtype}{int}\ x,\ y,\ width,\ height;}
\DoxyCodeLine{00271\ \ \ \textcolor{keywordtype}{bool}\ minimized,\ maximized;}
\DoxyCodeLine{00272\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPStatGraph_a5baf45690bcde199ec962981a363b066}{get\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized))\ \{}
\DoxyCodeLine{00273\ \ \ \ \ dg.add\_bool(\textcolor{keyword}{true});}
\DoxyCodeLine{00274\ \ \ \ \ dg.add\_int32(x);}
\DoxyCodeLine{00275\ \ \ \ \ dg.add\_int32(y);}
\DoxyCodeLine{00276\ \ \ \ \ dg.add\_int32(width);}
\DoxyCodeLine{00277\ \ \ \ \ dg.add\_int32(height);}
\DoxyCodeLine{00278\ \ \ \ \ dg.add\_bool(minimized);}
\DoxyCodeLine{00279\ \ \ \ \ dg.add\_bool(maximized);}
\DoxyCodeLine{00280\ \ \ \}}
\DoxyCodeLine{00281\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00282\ \ \ \ \ dg.add\_bool(\textcolor{keyword}{false});}
\DoxyCodeLine{00283\ \ \ \}}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00289\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{PStatGraph::}}}
\DoxyCodeLine{00290\ \mbox{\hyperlink{classPStatGraph_aae84b504720083c677534f2c444f6632}{read\_datagram}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan)\ \{}
\DoxyCodeLine{00291\ \ \ \textcolor{keywordflow}{if}\ (scan.get\_bool())\ \{}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ scan.get\_int32();}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ scan.get\_int32();}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ scan.get\_int32();}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordtype}{int}\ height\ =\ scan.get\_int32();}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{bool}\ minimized\ =\ scan.get\_bool();}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized\ =\ scan.get\_bool();}
\DoxyCodeLine{00298\ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(x,\ y,\ width,\ height,\ minimized,\ maximized);}
\DoxyCodeLine{00299\ \ \ \}}
\DoxyCodeLine{00300\ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00305\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_a59fe90cff2e9502493621b3d54b224d9}{PStatGraph::}}}
\DoxyCodeLine{00306\ \mbox{\hyperlink{classPStatGraph_a59fe90cff2e9502493621b3d54b224d9}{update\_guide\_bars}}(\textcolor{keywordtype}{int}\ num\_bars,\ \textcolor{keywordtype}{double}\ scale)\ \{}
\DoxyCodeLine{00307\ \ \ \_guide\_bars.clear();}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \textcolor{comment}{//\ We'd\ like\ to\ draw\ about\ num\_bars\ bars\ on\ the\ chart.\ \ But\ we\ also\ want\ the}}
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{//\ bars\ to\ be\ harmonics\ of\ the\ target\ frame\ rate,\ so\ that\ the\ bottom\ bar\ is}}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{//\ at\ tfrn\ or\ n\ *\ tfr,\ where\ n\ is\ an\ integer,\ and\ the\ upper\ bars\ are\ even}}
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{//\ multiples\ of\ that.}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \textcolor{comment}{//\ Choose\ a\ suitable\ harmonic\ of\ the\ target\ frame\ rate\ near\ the\ bottom\ part}}
\DoxyCodeLine{00315\ \ \ \textcolor{comment}{//\ of\ the\ chart.}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \textcolor{keywordtype}{double}\ bottom\ =\ (double)num\_bars\ /\ scale;}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \textcolor{keywordtype}{double}\ harmonic;}
\DoxyCodeLine{00320\ \ \ \textcolor{keywordflow}{if}\ (\_target\_frame\_rate\ <\ bottom)\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{comment}{//\ n\ *\ tfr}}
\DoxyCodeLine{00322\ \ \ \ \ harmonic\ =\ floor(bottom\ /\ \_target\_frame\_rate\ +\ 0.5)\ *\ \_target\_frame\_rate;}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{comment}{//\ tfr\ \ n}}
\DoxyCodeLine{00326\ \ \ \ \ harmonic\ =\ \_target\_frame\_rate\ /\ floor(\_target\_frame\_rate\ /\ bottom\ +\ 0.5);}
\DoxyCodeLine{00327\ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \textcolor{comment}{//\ Now,\ make\ a\ few\ bars\ at\ k\ \ harmonic.}}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ k\ =\ 1;\ k\ /\ harmonic\ <=\ scale;\ k++)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \_guide\_bars.push\_back(\mbox{\hyperlink{classPStatGraph_a3361dd9894e280326e4831f2d575e19a}{make\_guide\_bar}}(k\ /\ harmonic));}
\DoxyCodeLine{00332\ \ \ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \_guide\_bars\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00335\ \}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00340\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \mbox{\hyperlink{classPStatGraph_a3361dd9894e280326e4831f2d575e19a}{PStatGraph::}}}
\DoxyCodeLine{00341\ \mbox{\hyperlink{classPStatGraph_a3361dd9894e280326e4831f2d575e19a}{make\_guide\_bar}}(\textcolor{keywordtype}{double}\ value,\ PStatGraph::GuideBarStyle\ style)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00342\ \ \ \textcolor{keywordtype}{string}\ label\ =\ \mbox{\hyperlink{classPStatGraph_aa9829b73ad4d9ce79092eafcb3202b57}{format\_number}}(value,\ \_guide\_bar\_units,\ \_unit\_name);}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \textcolor{keywordflow}{if}\ ((style\ ==\ GBS\_normal)\ \&\&}
\DoxyCodeLine{00345\ \ \ \ \ \ \ (\_guide\_bar\_units\ \&\ GBU\_named)\ ==\ 0)\ \{}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ a\ time\ unit,\ check\ to\ see\ if\ it\ matches\ our\ target\ frame\ rate.}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordtype}{double}\ hz\ =\ 1.0\ /\ value;}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{if}\ (IS\_THRESHOLD\_EQUAL(hz,\ \_target\_frame\_rate,\ 0.001))\ \{}
\DoxyCodeLine{00349\ \ \ \ \ \ \ style\ =\ GBS\_target;}
\DoxyCodeLine{00350\ \ \ \ \ \}}
\DoxyCodeLine{00351\ \ \ \}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{GuideBar}}(value,\ label,\ style);}
\DoxyCodeLine{00354\ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00359\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatGraph_a5baf45690bcde199ec962981a363b066}{PStatGraph::}}}
\DoxyCodeLine{00360\ \mbox{\hyperlink{classPStatGraph_a5baf45690bcde199ec962981a363b066}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00362\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00363\ \}}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00368\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{PStatGraph::}}}
\DoxyCodeLine{00369\ \mbox{\hyperlink{classPStatGraph_a5f942c6c2bbaf8749b1ec01f94b3d60f}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00371\ \}}

\end{DoxyCode}

\doxysection{egg\+Character\+Collection.\+cxx}
\hypertarget{eggCharacterCollection_8cxx_source}{}\label{eggCharacterCollection_8cxx_source}\index{pandatool/src/eggcharbase/eggCharacterCollection.cxx@{pandatool/src/eggcharbase/eggCharacterCollection.cxx}}
\mbox{\hyperlink{eggCharacterCollection_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterCollection_8h}{eggCharacterCollection.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggCharacterData_8h}{eggCharacterData.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggJointData_8h}{eggJointData.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggSliderData_8h}{eggSliderData.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dcast_8h}{dcast.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggGroup_8h}{eggGroup.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggTable_8h}{eggTable.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggPrimitive_8h}{eggPrimitive.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggVertex_8h}{eggVertex.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggVertexUV_8h}{eggVertexUV.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggMorphList_8h}{eggMorphList.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggSAnimData_8h}{eggSAnimData.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indirectCompareNames_8h}{indirectCompareNames.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00038\ EggCharacterCollection::}
\DoxyCodeLine{00039\ EggCharacterCollection()\ \{}
\DoxyCodeLine{00040\ \ \ \_next\_model\_index\ =\ 0;}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00046\ EggCharacterCollection::}
\DoxyCodeLine{00047\ \string~EggCharacterCollection()\ \{}
\DoxyCodeLine{00048\ \ \ Characters::iterator\ ci;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_characters.begin();\ ci\ !=\ \_characters.end();\ ++ci)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{delete}\ (*ci);}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00066\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEggCharacterCollection_a463c75bd1fa7dafd1917c56021c8b569}{EggCharacterCollection::}}}
\DoxyCodeLine{00067\ \mbox{\hyperlink{classEggCharacterCollection_a463c75bd1fa7dafd1917c56021c8b569}{add\_egg}}(\mbox{\hyperlink{classEggData}{EggData}}\ *egg)\ \{}
\DoxyCodeLine{00068\ \ \ \_top\_egg\_nodes.clear();}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{if}\ (!scan\_hierarchy(egg))\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00072\ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{int}\ egg\_index\ =\ \_eggs.size();}
\DoxyCodeLine{00075\ \ \ \_eggs.push\_back(\mbox{\hyperlink{classEggCharacterCollection_1_1EggInfo}{EggInfo}}());}
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{classEggCharacterCollection_1_1EggInfo}{EggInfo}}\ \&egg\_info\ =\ \_eggs.back();}
\DoxyCodeLine{00077\ \ \ egg\_info.\_egg\ =\ egg;}
\DoxyCodeLine{00078\ \ \ egg\_info.\_first\_model\_index\ =\ 0;}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Now,\ for\ each\ model,\ add\ an\ entry\ in\ the\ egg\_info\ and\ match\ the\ joint}}
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ hierarchy\ to\ the\ known\ joints.}}
\DoxyCodeLine{00082\ \ \ TopEggNodesByName::iterator\ tni;}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{for}\ (tni\ =\ \_top\_egg\_nodes.begin();\ tni\ !=\ \_top\_egg\_nodes.end();\ ++tni)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{string}\ character\_name\ =\ (*tni).first;}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classpmap}{TopEggNodes}}\ \&top\_nodes\ =\ (*tni).second;}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ \mbox{\hyperlink{classEggCharacterCollection_a074ef54612b5a3320d5b60d7ffb7c91e}{make\_character}}(character\_name);}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *root\_joint\ =\ char\_data-\/>get\_root\_joint();}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ TopEggNodes::iterator\ ti;}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{for}\ (ti\ =\ top\_nodes.begin();\ ti\ !=\ top\_nodes.end();\ ++ti)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *model\_root\ =\ (*ti).first;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ ModelDescription\ \&desc\ =\ (*ti).second;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ model\_index\ =\ \_next\_model\_index++;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (egg\_info.\_models.empty())\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ egg\_info.\_first\_model\_index\ =\ model\_index;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ egg\_info.\_models.push\_back(model\_root);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ad59d6a9f7c36416c77105a4f5c024191}{add\_model}}(model\_index,\ model\_root,\ egg);}
\DoxyCodeLine{00101\ \ \ \ \ \ \ nassertr(model\_index\ ==\ (\textcolor{keywordtype}{int})\_characters\_by\_model\_index.size(),\ -\/1);}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \_characters\_by\_model\_index.push\_back(char\_data);}
\DoxyCodeLine{00103\ \ \ \ \ \ \ root\_joint-\/>\mbox{\hyperlink{classEggJointData_a12467a03c50ee6c16ace45e25e1765d4}{add\_back\_pointer}}(model\_index,\ desc.\_root\_node);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ match\_egg\_nodes(char\_data,\ root\_joint,\ desc.\_top\_nodes,}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ egg\_index,\ model\_index);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \ \ scan\_for\_morphs(model\_root,\ model\_index,\ char\_data);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ scan\_for\_sliders(model\_root,\ model\_index,\ char\_data);}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{keywordflow}{return}\ egg\_index;}
\DoxyCodeLine{00114\ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00120\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *\mbox{\hyperlink{classEggCharacterCollection_aeacd0590ccbcf204fdfc9227ef796aec}{EggCharacterCollection::}}}
\DoxyCodeLine{00121\ \mbox{\hyperlink{classEggCharacterCollection_aeacd0590ccbcf204fdfc9227ef796aec}{get\_character\_by\_name}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&character\_name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00122\ \ \ Characters::const\_iterator\ ci;}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_characters.begin();\ ci\ !=\ \_characters.end();\ ++ci)\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ (*ci);}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{if}\ (char\_data-\/>get\_name()\ ==\ character\_name)\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ char\_data;}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00139\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *\mbox{\hyperlink{classEggCharacterCollection_adeb9e0a9621f76002b27833e94d1293d}{EggCharacterCollection::}}}
\DoxyCodeLine{00140\ \mbox{\hyperlink{classEggCharacterCollection_adeb9e0a9621f76002b27833e94d1293d}{make\_character\_data}}()\ \{}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00149\ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *\mbox{\hyperlink{classEggCharacterCollection_a4cae262f4ae791609e8dbee350105755}{EggCharacterCollection::}}}
\DoxyCodeLine{00150\ \mbox{\hyperlink{classEggCharacterCollection_a4cae262f4ae791609e8dbee350105755}{make\_joint\_data}}(\mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggJointData}{EggJointData}}(\textcolor{keyword}{this},\ char\_data);}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00160\ \mbox{\hyperlink{classEggSliderData}{EggSliderData}}\ *\mbox{\hyperlink{classEggCharacterCollection_a08a5e4ef34822b37509b155b6a3fb273}{EggCharacterCollection::}}}
\DoxyCodeLine{00161\ \mbox{\hyperlink{classEggCharacterCollection_a08a5e4ef34822b37509b155b6a3fb273}{make\_slider\_data}}(\mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classEggSliderData}{EggSliderData}}(\textcolor{keyword}{this},\ char\_data);}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00169\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *\mbox{\hyperlink{classEggCharacterCollection_a074ef54612b5a3320d5b60d7ffb7c91e}{EggCharacterCollection::}}}
\DoxyCodeLine{00170\ \mbox{\hyperlink{classEggCharacterCollection_a074ef54612b5a3320d5b60d7ffb7c91e}{make\_character}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&character\_name)\ \{}
\DoxyCodeLine{00171\ \ \ \textcolor{comment}{//\ Does\ the\ named\ character\ exist\ yet?}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ Characters::iterator\ ci;}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_characters.begin();\ ci\ !=\ \_characters.end();\ ++ci)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ (*ci);}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{if}\ (char\_data-\/>get\_name()\ ==\ character\_name)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ char\_data;}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \textcolor{comment}{//\ Define\ a\ new\ character.}}
\DoxyCodeLine{00182\ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ \mbox{\hyperlink{classEggCharacterCollection_adeb9e0a9621f76002b27833e94d1293d}{make\_character\_data}}();}
\DoxyCodeLine{00183\ \ \ char\_data-\/>set\_name(character\_name);}
\DoxyCodeLine{00184\ \ \ \_characters.push\_back(char\_data);}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{return}\ char\_data;}
\DoxyCodeLine{00186\ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00196\ \textcolor{keywordtype}{bool}\ EggCharacterCollection::}
\DoxyCodeLine{00197\ scan\_hierarchy(\mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node)\ \{}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroup::get\_class\_type()))\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroup}{EggGroup}},\ egg\_node);}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{if}\ (group-\/>get\_dart\_type()\ !=\ EggGroup::DT\_none)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \textcolor{comment}{//\ A\ group\ with\ a\ <Dart>\ flag\ begins\ a\ character\ model.}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ scan\_for\_top\_joints(group,\ group,\ group-\/>get\_name());}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *table\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ egg\_node);}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{if}\ (table-\/>get\_table\_type()\ ==\ EggTable::TT\_bundle)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \textcolor{comment}{//\ A\ <Bundle>\ begins\ an\ animation\ table.}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ scan\_for\_top\_tables(table,\ table,\ table-\/>get\_name());}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ \ \ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \textcolor{keywordtype}{bool}\ character\_found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroupNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{classEggGroupNode}{EggGroupNode}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroupNode}{EggGroupNode}},\ egg\_node);}
\DoxyCodeLine{00218\ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ group-\/>begin();\ gi\ !=\ group-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (scan\_hierarchy(*gi))\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ character\_found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \textcolor{keywordflow}{return}\ character\_found;}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00233\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00234\ scan\_for\_top\_joints(\mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node,\ \mbox{\hyperlink{classEggNode}{EggNode}}\ *model\_root,}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&character\_name)\ \{}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroup::get\_class\_type()))\ \{}
\DoxyCodeLine{00237\ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroup}{EggGroup}},\ egg\_node);}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordflow}{if}\ (group-\/>has\_lod())\ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ group\ has\ an\ LOD\ specification;\ that\ indicates\ multiple\ skeleton}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \textcolor{comment}{//\ hierarchies\ for\ this\ character,\ one\ for\ each\ LOD.\ We\ call\ each\ of}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \textcolor{comment}{//\ these\ a\ separate\ model.}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ model\_root\ =\ group;}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{if}\ (group-\/>get\_group\_type()\ ==\ EggGroup::GT\_joint)\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \textcolor{comment}{//\ A\ <Joint>\ node\ begins\ a\ model\ hierarchy.}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ ModelDescription\ \&desc\ =\ \_top\_egg\_nodes[character\_name][model\_root];}
\DoxyCodeLine{00248\ \ \ \ \ \ \ desc.\_root\_node\ =\ model\_root;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ desc.\_top\_nodes.push\_back(group);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroupNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{classEggGroupNode}{EggGroupNode}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroupNode}{EggGroupNode}},\ egg\_node);}
\DoxyCodeLine{00256\ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ group-\/>begin();\ gi\ !=\ group-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ scan\_for\_top\_joints(*gi,\ model\_root,\ character\_name);}
\DoxyCodeLine{00259\ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \}}
\DoxyCodeLine{00261\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00267\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00268\ scan\_for\_top\_tables(\mbox{\hyperlink{classEggTable}{EggTable}}\ *bundle,\ \mbox{\hyperlink{classEggNode}{EggNode}}\ *model\_root,}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&character\_name)\ \{}
\DoxyCodeLine{00270\ \ \ \textcolor{comment}{//\ We\ really\ only\ need\ to\ check\ the\ immediate\ children\ of\ the\ bundle\ for\ a}}
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ table\ node\ called\ "{}<skeleton>"{}.}}
\DoxyCodeLine{00272\ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00273\ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ bundle-\/>begin();\ gi\ !=\ bundle-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ (*gi);}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *table\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ child);}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (table-\/>get\_name()\ ==\ \textcolor{stringliteral}{"{}<skeleton>"{}})\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ it\ is!\ \ Now\ the\ immediate\ children\ of\ this\ node\ are\ the\ top}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ tables.}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ ModelDescription\ \&desc\ =\ \_top\_egg\_nodes[character\_name][model\_root];}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ desc.\_root\_node\ =\ table;}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ EggGroupNode::iterator\ cgi;}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (cgi\ =\ table-\/>begin();\ cgi\ !=\ table-\/>end();\ ++cgi)\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *grandchild\ =\ (*cgi);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (grandchild-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ desc.\_top\_nodes.push\_back(grandchild);}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00291\ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \}}
\DoxyCodeLine{00293\ \}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00299\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00300\ scan\_for\_morphs(\mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node,\ \textcolor{keywordtype}{int}\ model\_index,}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00302\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggPrimitive::get\_class\_type()))\ \{}
\DoxyCodeLine{00303\ \ \ \ \ \mbox{\hyperlink{classEggPrimitive}{EggPrimitive}}\ *prim\ =\ DCAST(\mbox{\hyperlink{classEggPrimitive}{EggPrimitive}},\ egg\_node);}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{comment}{//\ Check\ for\ morphs\ on\ the\ primitive.}}
\DoxyCodeLine{00305\ \ \ \ \ add\_morph\_back\_pointers(prim,\ prim,\ model\_index,\ char\_data);}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{comment}{//\ Also\ check\ for\ morphs\ on\ each\ of\ the\ prim's\ vertices.}}
\DoxyCodeLine{00308\ \ \ \ \ EggPrimitive::const\_iterator\ vi;}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keywordflow}{for}\ (vi\ =\ prim-\/>begin();\ vi\ !=\ prim-\/>end();\ ++vi)\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ *vertex\ =\ (*vi);}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ add\_morph\_back\_pointers(vertex,\ vertex,\ model\_index,\ char\_data);}
\DoxyCodeLine{00313\ \ \ \ \ \ \ add\_morph\_back\_pointers\_vertex(vertex,\ vertex,\ model\_index,\ char\_data);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \ \ EggMorphVertexList::const\_iterator\ mvi;}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (mvi\ =\ vertex-\/>\_dxyzs.begin();}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ mvi\ !=\ vertex-\/>\_dxyzs.end();}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ ++mvi)\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggMorph}{EggMorphVertex}}\ \&morph\ =\ (*mvi);}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ab0b108a835a587aea159766117ea749c}{make\_slider}}(morph.get\_name())-\/>add\_back\_pointer(model\_index,\ vertex);}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00322\ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \}}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroupNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \mbox{\hyperlink{classEggGroupNode}{EggGroupNode}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroupNode}{EggGroupNode}},\ egg\_node);}
\DoxyCodeLine{00327\ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ group-\/>begin();\ gi\ !=\ group-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00329\ \ \ \ \ \ \ scan\_for\_morphs(*gi,\ model\_index,\ char\_data);}
\DoxyCodeLine{00330\ \ \ \ \ \}}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00338\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00339\ scan\_for\_sliders(\mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node,\ \textcolor{keywordtype}{int}\ model\_index,}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *bundle\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ egg\_node);}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ We\ really\ only\ need\ to\ check\ the\ immediate\ children\ of\ the\ bundle\ for\ a}}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{comment}{//\ table\ node\ called\ "{}morph"{}.\ \ This\ is\ a\ sibling\ of\ "{}<skeleton>"{},\ which\ we}}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ found\ a\ minute\ ago,\ but\ we\ weren't\ ready\ to\ scan\ for\ the\ morph\ sliders}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ at\ the\ time,\ so\ we\ have\ to\ look\ again\ now.}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ bundle-\/>begin();\ gi\ !=\ bundle-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ (*gi);}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *table\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ child);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (table-\/>get\_name()\ ==\ \textcolor{stringliteral}{"{}morph"{}})\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ it\ is!\ \ Now\ the\ immediate\ children\ of\ this\ node\ are\ all\ the}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ slider\ channels.}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ EggGroupNode::iterator\ cgi;}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (cgi\ =\ table-\/>begin();\ cgi\ !=\ table-\/>end();\ ++cgi)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *grandchild\ =\ (*cgi);}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (grandchild-\/>is\_of\_type(EggSAnimData::get\_class\_type()))\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ab0b108a835a587aea159766117ea749c}{make\_slider}}(grandchild-\/>get\_name())-\/>add\_back\_pointer(model\_index,\ grandchild);}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00367\ \ \ \ \ \}}
\DoxyCodeLine{00368\ \ \ \}}
\DoxyCodeLine{00369\ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00375\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00376\ add\_morph\_back\_pointers(\mbox{\hyperlink{classEggAttributes}{EggAttributes}}\ *attrib,\ \mbox{\hyperlink{classEggObject}{EggObject}}\ *egg\_object,}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ model\_index,\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00378\ \ \ EggMorphNormalList::const\_iterator\ mni;}
\DoxyCodeLine{00379\ \ \ \textcolor{keywordflow}{for}\ (mni\ =\ attrib-\/>\_dnormals.begin();}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ mni\ !=\ attrib-\/>\_dnormals.end();}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ ++mni)\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggMorph}{EggMorphNormal}}\ \&morph\ =\ (*mni);}
\DoxyCodeLine{00383\ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ab0b108a835a587aea159766117ea749c}{make\_slider}}(morph.get\_name())-\/>add\_back\_pointer(model\_index,\ egg\_object);}
\DoxyCodeLine{00384\ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ EggMorphColorList::const\_iterator\ mci;}
\DoxyCodeLine{00387\ \ \ \textcolor{keywordflow}{for}\ (mci\ =\ attrib-\/>\_drgbas.begin();}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ mci\ !=\ attrib-\/>\_drgbas.end();}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ ++mci)\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggMorph}{EggMorphColor}}\ \&morph\ =\ (*mci);}
\DoxyCodeLine{00391\ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ab0b108a835a587aea159766117ea749c}{make\_slider}}(morph.get\_name())-\/>add\_back\_pointer(model\_index,\ egg\_object);}
\DoxyCodeLine{00392\ \ \ \}}
\DoxyCodeLine{00393\ \}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00399\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00400\ add\_morph\_back\_pointers\_vertex(\mbox{\hyperlink{classEggVertex}{EggVertex}}\ *vertex,\ \mbox{\hyperlink{classEggObject}{EggObject}}\ *egg\_object,}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ model\_index,\ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data)\ \{}
\DoxyCodeLine{00402\ \ \ \mbox{\hyperlink{classsecond__of__pair__iterator}{EggVertex::const\_uv\_iterator}}\ ui;}
\DoxyCodeLine{00403\ \ \ \textcolor{keywordflow}{for}\ (ui\ =\ vertex-\/>uv\_begin();\ ui\ !=\ vertex-\/>uv\_end();\ ++ui)\ \{}
\DoxyCodeLine{00404\ \ \ \ \ \mbox{\hyperlink{classEggVertexUV}{EggVertexUV}}\ *vert\_uv\ =\ (*ui);}
\DoxyCodeLine{00405\ \ \ \ \ EggMorphTexCoordList::const\_iterator\ mti;}
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keywordflow}{for}\ (mti\ =\ vert\_uv-\/>\_duvs.begin();}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ mti\ !=\ vert\_uv-\/>\_duvs.end();}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ ++mti)\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEggMorph}{EggMorphTexCoord}}\ \&morph\ =\ (*mti);}
\DoxyCodeLine{00410\ \ \ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ab0b108a835a587aea159766117ea749c}{make\_slider}}(morph.get\_name())-\/>add\_back\_pointer(model\_index,\ egg\_object);}
\DoxyCodeLine{00411\ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \}}
\DoxyCodeLine{00413\ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00421\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00422\ match\_egg\_nodes(\mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data,\ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *joint\_data,}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ EggNodeList\ \&egg\_nodes,\ \textcolor{keywordtype}{int}\ egg\_index,\ \textcolor{keywordtype}{int}\ model\_index)\ \{}
\DoxyCodeLine{00424\ \ \ \textcolor{comment}{//\ Sort\ the\ list\ of\ egg\_nodes\ in\ order\ by\ name.\ \ This\ will\ make\ the\ matching}}
\DoxyCodeLine{00425\ \ \ \textcolor{comment}{//\ up\ by\ names\ easier\ and\ more\ reliable.}}
\DoxyCodeLine{00426\ \ \ sort(egg\_nodes.begin(),\ egg\_nodes.end(),\ \mbox{\hyperlink{classIndirectCompareNames}{IndirectCompareNames<Namable>}}());}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00428\ \ \ \textcolor{keywordflow}{if}\ (joint\_data-\/>\_children.empty())\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{comment}{//\ If\ the\ EggJointData\ has\ no\ children\ yet,\ we\ must\ be\ the\ first.}}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{comment}{//\ Gleefully\ define\ all\ the\ joints.}}
\DoxyCodeLine{00431\ \ \ \ \ EggNodeList::iterator\ ei;}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordflow}{for}\ (ei\ =\ egg\_nodes.begin();\ ei\ !=\ egg\_nodes.end();\ ++ei)\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ (*ei);}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ \mbox{\hyperlink{classEggCharacterCollection_a4cae262f4ae791609e8dbee350105755}{make\_joint\_data}}(char\_data);}
\DoxyCodeLine{00435\ \ \ \ \ \ \ joint\_data-\/>\_children.push\_back(data);}
\DoxyCodeLine{00436\ \ \ \ \ \ \ char\_data-\/>\_joints.push\_back(data);}
\DoxyCodeLine{00437\ \ \ \ \ \ \ char\_data-\/>\_components.push\_back(data);}
\DoxyCodeLine{00438\ \ \ \ \ \ \ data-\/>\_parent\ =\ joint\_data;}
\DoxyCodeLine{00439\ \ \ \ \ \ \ data-\/>\_new\_parent\ =\ joint\_data;}
\DoxyCodeLine{00440\ \ \ \ \ \ \ found\_egg\_match(char\_data,\ data,\ egg\_node,\ egg\_index,\ model\_index);}
\DoxyCodeLine{00441\ \ \ \ \ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{comment}{//\ The\ EggJointData\ already\ has\ children;\ therefore,\ we\ have\ to\ match\ our}}
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{comment}{//\ joints\ up\ with\ the\ already-\/existing\ ones.}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \ \ EggNodeList\ extra\_egg\_nodes;}
\DoxyCodeLine{00448\ \ \ \ \ \mbox{\hyperlink{classpvector}{EggJointData::Children}}\ extra\_data;}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ EggNodeList::iterator\ ei;}
\DoxyCodeLine{00451\ \ \ \ \ EggJointData::Children::iterator\ di;}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ ei\ =\ egg\_nodes.begin();}
\DoxyCodeLine{00454\ \ \ \ \ di\ =\ joint\_data-\/>\_children.begin();}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{keywordflow}{while}\ (ei\ !=\ egg\_nodes.end()\ \&\&\ di\ !=\ joint\_data-\/>\_children.end())\ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ (*ei);}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ (*di);}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>get\_name()\ <\ data-\/>get\_name())\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ a\ joint\ in\ the\ egg\ file,\ unmatched\ in\ the\ data.}}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ extra\_egg\_nodes.push\_back(egg\_node);}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ ++ei;}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (data-\/>get\_name()\ <\ egg\_node-\/>get\_name())\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ a\ joint\ in\ the\ data,\ umatched\ by\ the\ egg\ file.}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ extra\_data.push\_back(data);}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ ++di;}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Hey,\ these\ two\ match!\ \ Hooray!}}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ found\_egg\_match(char\_data,\ data,\ egg\_node,\ egg\_index,\ model\_index);}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ ++ei;}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ ++di;}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00476\ \ \ \ \ \}}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{keywordflow}{while}\ (ei\ !=\ egg\_nodes.end())\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ (*ei);}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ a\ joint\ in\ the\ egg\ file,\ unmatched\ in\ the\ data.}}
\DoxyCodeLine{00482\ \ \ \ \ \ \ extra\_egg\_nodes.push\_back(egg\_node);}
\DoxyCodeLine{00483\ \ \ \ \ \ \ ++ei;}
\DoxyCodeLine{00484\ \ \ \ \ \}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keywordflow}{while}\ (di\ !=\ joint\_data-\/>\_children.end())\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ (*di);}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \ \ \ \ \textcolor{comment}{//\ Here's\ a\ joint\ in\ the\ data,\ umatched\ by\ the\ egg\ file.}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ extra\_data.push\_back(data);}
\DoxyCodeLine{00491\ \ \ \ \ \ \ ++di;}
\DoxyCodeLine{00492\ \ \ \ \ \}}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \textcolor{keywordflow}{if}\ (!extra\_egg\_nodes.empty())\ \{}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ have\ some\ extra\ egg\_nodes,\ we\ have\ to\ find\ a\ place\ to\ match}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{comment}{//\ them.\ \ (If\ we\ only\ had\ extra\ data,\ we\ don't\ care.)}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \ \ \ \ \ \ \textcolor{comment}{//\ First,\ check\ to\ see\ if\ any\ of\ the\ names\ match\ any\ past-\/used\ name.}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ EggNodeList\ more\_egg\_nodes;}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (ei\ =\ extra\_egg\_nodes.begin();\ ei\ !=\ extra\_egg\_nodes.end();\ ++ei)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ (*ei);}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ matched\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (di\ =\ extra\_data.begin();\ di\ !=\ extra\_data.end();\ ++di)\ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ (*di);}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (data-\/>matches\_name(egg\_node-\/>get\_name()))\ \{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ found\_egg\_match(char\_data,\ data,\ egg\_node,\ egg\_index,\ model\_index);}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ extra\_data.erase(di);}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ matched\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!matched)\ \{}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ joint\ name\ was\ never\ seen\ before.}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ more\_egg\_nodes.push\_back(egg\_node);}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ extra\_egg\_nodes.swap(more\_egg\_nodes);}
\DoxyCodeLine{00520\ \ \ \ \ \}}
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordflow}{if}\ (!extra\_egg\_nodes.empty())\ \{}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \textcolor{comment}{//\ Ok,\ we've\ still\ got\ to\ find\ a\ home\ for\ these\ remaining\ egg\_nodes.}}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (extra\_egg\_nodes.size()\ ==\ extra\_data.size())\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Match\ 'em\ up\ one-\/for-\/one.}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i;}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ extra\_egg\_nodes.size();\ i++)\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ extra\_egg\_nodes[i];}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ extra\_data[i];}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ found\_egg\_match(char\_data,\ data,\ egg\_node,\ egg\_index,\ model\_index);}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Just\ tack\ 'em\ on\ the\ end.}}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ EggNodeList::iterator\ ei;}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (ei\ =\ extra\_egg\_nodes.begin();\ ei\ !=\ extra\_egg\_nodes.end();\ ++ei)\ \{}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node\ =\ (*ei);}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *data\ =\ \mbox{\hyperlink{classEggCharacterCollection_a4cae262f4ae791609e8dbee350105755}{make\_joint\_data}}(char\_data);}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ joint\_data-\/>\_children.push\_back(data);}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ char\_data-\/>\_joints.push\_back(data);}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ char\_data-\/>\_components.push\_back(data);}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ data-\/>\_parent\ =\ joint\_data;}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ data-\/>\_new\_parent\ =\ joint\_data;}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ found\_egg\_match(char\_data,\ data,\ egg\_node,\ egg\_index,\ model\_index);}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00547\ \ \ \ \ \}}
\DoxyCodeLine{00548\ \ \ \}}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00550\ \ \ \textcolor{comment}{//\ Now\ sort\ the\ generated\ joint\ data\ hierarchy\ by\ name,\ just\ to\ be\ sure.}}
\DoxyCodeLine{00551\ \ \ sort(joint\_data-\/>\_children.begin(),\ joint\_data-\/>\_children.end(),}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \mbox{\hyperlink{classIndirectCompareNames}{IndirectCompareNames<Namable>}}());}
\DoxyCodeLine{00553\ \}}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00559\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00560\ found\_egg\_match(\mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data,\ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *joint\_data,}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *egg\_node,\ \textcolor{keywordtype}{int}\ egg\_index,\ \textcolor{keywordtype}{int}\ model\_index)\ \{}
\DoxyCodeLine{00562\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>has\_name())\ \{}
\DoxyCodeLine{00563\ \ \ \ \ joint\_data-\/>\mbox{\hyperlink{classEggComponentData_a299be890ccf64a32fa7d44a018dca0fb}{add\_name}}(egg\_node-\/>get\_name(),\ char\_data-\/>\_component\_names);}
\DoxyCodeLine{00564\ \ \ \}}
\DoxyCodeLine{00565\ \ \ egg\_node-\/>set\_name(joint\_data-\/>get\_name());}
\DoxyCodeLine{00566\ \ \ joint\_data-\/>\mbox{\hyperlink{classEggJointData_a12467a03c50ee6c16ace45e25e1765d4}{add\_back\_pointer}}(model\_index,\ egg\_node);}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroupNode::get\_class\_type()))\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \mbox{\hyperlink{classEggGroupNode}{EggGroupNode}}\ *group\_node\ =\ DCAST(\mbox{\hyperlink{classEggGroupNode}{EggGroupNode}},\ egg\_node);}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{comment}{//\ Now\ consider\ all\ the\ children\ of\ egg\_node\ that\ are\ themselves\ joints\ or}}
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{comment}{//\ tables.}}
\DoxyCodeLine{00573\ \ \ \ \ EggNodeList\ egg\_nodes;}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \ \ \ \ \textcolor{comment}{//\ Two\ approaches:\ either\ we\ are\ scanning\ a\ model\ with\ joints,\ or\ an}}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{comment}{//\ animation\ bundle\ with\ tables.}}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keywordflow}{if}\ (egg\_node-\/>is\_of\_type(EggGroup::get\_class\_type()))\ \{}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \textcolor{comment}{//\ A\ model\ with\ joints.}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ group\_node-\/>begin();\ gi\ !=\ group\_node-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ (*gi);}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggGroup::get\_class\_type()))\ \{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggGroup}{EggGroup}}\ *group\ =\ DCAST(\mbox{\hyperlink{classEggGroup}{EggGroup}},\ child);}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (group-\/>get\_group\_type()\ ==\ EggGroup::GT\_joint)\ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ egg\_nodes.push\_back(group);}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \textcolor{comment}{//\ An\ animation\ bundle\ with\ tables.}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ EggGroupNode::iterator\ gi;}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ group\_node-\/>begin();\ gi\ !=\ group\_node-\/>end();\ ++gi)\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggNode}{EggNode}}\ *child\ =\ (*gi);}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>is\_of\_type(EggTable::get\_class\_type()))\ \{}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEggTable}{EggTable}}\ *table\ =\ DCAST(\mbox{\hyperlink{classEggTable}{EggTable}},\ child);}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(table-\/>get\_name()\ ==\ \textcolor{stringliteral}{"{}xform"{}}))\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ egg\_nodes.push\_back(table);}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00603\ \ \ \ \ \}}
\DoxyCodeLine{00604\ }
\DoxyCodeLine{00605\ \ \ \ \ \textcolor{keywordflow}{if}\ (!egg\_nodes.empty())\ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ match\_egg\_nodes(char\_data,\ joint\_data,\ egg\_nodes,}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ egg\_index,\ model\_index);}
\DoxyCodeLine{00608\ \ \ \ \ \}}
\DoxyCodeLine{00609\ \ \ \}}
\DoxyCodeLine{00610\ \}}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00616\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggCharacterCollection_a7d26776b95e10c2afe0349b354d5d626}{EggCharacterCollection::}}}
\DoxyCodeLine{00617\ \mbox{\hyperlink{classEggCharacterCollection_a7d26776b95e10c2afe0349b354d5d626}{rename\_char}}(\textcolor{keywordtype}{int}\ i,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name)\ \{}
\DoxyCodeLine{00618\ \ \ nassertv(i\ >=\ 0\ \&\&\ i\ <\ (\textcolor{keywordtype}{int})\_characters.size());}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ \_characters[i];}
\DoxyCodeLine{00621\ \ \ \textcolor{keywordflow}{if}\ (char\_data-\/>get\_name()\ !=\ name)\ \{}
\DoxyCodeLine{00622\ \ \ \ \ nassertv(\mbox{\hyperlink{classEggCharacterCollection_aeacd0590ccbcf204fdfc9227ef796aec}{get\_character\_by\_name}}(name)\ ==\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00623\ \ \ \ \ char\_data-\/>\mbox{\hyperlink{classEggCharacterData_ad882a65c39d5711483aebe8fe1989467}{rename\_char}}(name);}
\DoxyCodeLine{00624\ \ \ \}}
\DoxyCodeLine{00625\ \}}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00630\ \textcolor{keywordtype}{void}\ EggCharacterCollection::}
\DoxyCodeLine{00631\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00632\ \ \ Characters::const\_iterator\ ci;}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_characters.begin();\ ci\ !=\ \_characters.end();\ ++ci)\ \{}
\DoxyCodeLine{00635\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ (*ci);}
\DoxyCodeLine{00636\ \ \ \ \ char\_data-\/>write(out,\ indent\_level);}
\DoxyCodeLine{00637\ \ \ \}}
\DoxyCodeLine{00638\ \}}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00650\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEggCharacterCollection_a7566f919cdce093d7dcc7d6fbbb923b8}{EggCharacterCollection::}}}
\DoxyCodeLine{00651\ \mbox{\hyperlink{classEggCharacterCollection_a7566f919cdce093d7dcc7d6fbbb923b8}{check\_errors}}(std::ostream\ \&out,\ \textcolor{keywordtype}{bool}\ force\_initial\_rest\_frame)\ \{}
\DoxyCodeLine{00652\ \ \ Characters::const\_iterator\ ci;}
\DoxyCodeLine{00653\ \ \ \textcolor{keywordflow}{for}\ (ci\ =\ \_characters.begin();\ ci\ !=\ \_characters.end();\ ++ci)\ \{}
\DoxyCodeLine{00654\ \ \ \ \ \mbox{\hyperlink{classEggCharacterData}{EggCharacterData}}\ *char\_data\ =\ (*ci);}
\DoxyCodeLine{00655\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_joints\ =\ char\_data-\/>get\_num\_joints();}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ num\_joints;\ j++)\ \{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \mbox{\hyperlink{classEggJointData}{EggJointData}}\ *joint\_data\ =\ char\_data-\/>get\_joint(j);}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (joint\_data-\/>rest\_frames\_differ())\ \{}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (force\_initial\_rest\_frame)\ \{}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ joint\_data-\/>\mbox{\hyperlink{classEggJointData_ac09a4211a10230f2fb93643833a2ca27}{force\_initial\_rest\_frame}}();}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Forced\ rest\ frames\ the\ same\ for\ "{}}\ <<\ joint\_data-\/>get\_name()}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}.\(\backslash\)n"{}};}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Warning:\ rest\ frames\ for\ "{}}\ <<\ joint\_data-\/>get\_name()}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ differ.\(\backslash\)n"{}};}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00668\ \ \ \ \ \}}
\DoxyCodeLine{00669\ }
\DoxyCodeLine{00670\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_models\ =\ char\_data-\/>get\_num\_models();}
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ mi\ =\ 0;\ mi\ <\ num\_models;\ mi++)\ \{}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ model\_index\ =\ char\_data-\/>get\_model\_index(mi);}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!char\_data-\/>\mbox{\hyperlink{classEggCharacterData_a9f9289591422c32283998e1d4542e188}{check\_num\_frames}}(model\_index))\ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}Warning:\ animation\ from\ "{}}}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ char\_data-\/>get\_egg\_data(model\_index)-\/>get\_egg\_filename().get\_basename()}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ had\ an\ inconsistent\ number\ of\ frames.\(\backslash\)n"{}};}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00678\ \ \ \ \ \}}
\DoxyCodeLine{00679\ \ \ \}}
\DoxyCodeLine{00680\ \}}

\end{DoxyCode}

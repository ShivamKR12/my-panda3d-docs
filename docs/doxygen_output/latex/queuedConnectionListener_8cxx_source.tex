\doxysection{queued\+Connection\+Listener.\+cxx}
\hypertarget{queuedConnectionListener_8cxx_source}{}\label{queuedConnectionListener_8cxx_source}\index{panda/src/net/queuedConnectionListener.cxx@{panda/src/net/queuedConnectionListener.cxx}}
\mbox{\hyperlink{queuedConnectionListener_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{queuedConnectionListener_8h}{queuedConnectionListener.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__net_8h}{config\_net.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{template}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classQueuedReturn}{QueuedReturn<ConnectionListenerData>}};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ QueuedConnectionListener::}
\DoxyCodeLine{00023\ QueuedConnectionListener(\mbox{\hyperlink{classConnectionManager}{ConnectionManager}}\ *manager,\ \textcolor{keywordtype}{int}\ num\_threads)\ :}
\DoxyCodeLine{00024\ \ \ \mbox{\hyperlink{classConnectionListener}{ConnectionListener}}(manager,\ num\_threads)}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00031\ QueuedConnectionListener::}
\DoxyCodeLine{00032\ \string~QueuedConnectionListener()\ \{}
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ We\ call\ shutdown()\ here\ to\ guarantee\ that\ all\ threads\ are\ gone\ before\ the}}
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ QueuedReturn\ destructs.}}
\DoxyCodeLine{00035\ \ \ shutdown();}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00042\ \textcolor{keywordtype}{bool}\ QueuedConnectionListener::}
\DoxyCodeLine{00043\ new\_connection\_available()\ \{}
\DoxyCodeLine{00044\ \ \ poll();}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordflow}{return}\ thing\_available();}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00062\ \textcolor{keywordtype}{bool}\ QueuedConnectionListener::}
\DoxyCodeLine{00063\ get\_new\_connection(PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&rendezvous,}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNetAddress}{NetAddress}}\ \&address,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&new\_connection)\ \{}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{classConnectionListenerData}{ConnectionListenerData}}\ result;}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{if}\ (!get\_thing(result))\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ rendezvous\ =\ result.\_rendezvous;}
\DoxyCodeLine{00072\ \ \ address\ =\ result.\_address;}
\DoxyCodeLine{00073\ \ \ new\_connection\ =\ result.\_new\_connection;}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00082\ \textcolor{keywordtype}{bool}\ QueuedConnectionListener::}
\DoxyCodeLine{00083\ get\_new\_connection(PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&new\_connection)\ \{}
\DoxyCodeLine{00084\ \ \ PT(\mbox{\hyperlink{classConnection}{Connection}})\ rendezvous;}
\DoxyCodeLine{00085\ \ \ \mbox{\hyperlink{classNetAddress}{NetAddress}}\ address;}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ get\_new\_connection(rendezvous,\ address,\ new\_connection);}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00095\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classQueuedConnectionListener_aa82b05f2369433a83edec2eede3bc65e}{QueuedConnectionListener::}}}
\DoxyCodeLine{00096\ \mbox{\hyperlink{classQueuedConnectionListener_aa82b05f2369433a83edec2eede3bc65e}{connection\_opened}}(\textcolor{keyword}{const}\ PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&rendezvous,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classNetAddress}{NetAddress}}\ \&address,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&new\_connection)\ \{}
\DoxyCodeLine{00099\ \ \ \mbox{\hyperlink{classConnectionListenerData}{ConnectionListenerData}}\ nc;}
\DoxyCodeLine{00100\ \ \ nc.\_rendezvous\ =\ rendezvous;}
\DoxyCodeLine{00101\ \ \ nc.\_address\ =\ address;}
\DoxyCodeLine{00102\ \ \ nc.\_new\_connection\ =\ new\_connection;}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keywordflow}{if}\ (!enqueue\_thing(nc))\ \{}
\DoxyCodeLine{00105\ \ \ \ \ net\_cat.error()}
\DoxyCodeLine{00106\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}QueuedConnectionListener\ queue\ full!\(\backslash\)n"{}};}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ \}}

\end{DoxyCode}

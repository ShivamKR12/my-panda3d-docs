\doxysection{gtk\+Stats\+Chart\+Menu.\+cxx}
\hypertarget{gtkStatsChartMenu_8cxx_source}{}\label{gtkStatsChartMenu_8cxx_source}\index{pandatool/src/gtk-\/stats/gtkStatsChartMenu.cxx@{pandatool/src/gtk-\/stats/gtkStatsChartMenu.cxx}}
\mbox{\hyperlink{gtkStatsChartMenu_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gtkStatsChartMenu_8h}{gtkStatsChartMenu.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gtkStatsMonitor_8h}{gtkStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00020\ GtkStatsChartMenu::}
\DoxyCodeLine{00021\ GtkStatsChartMenu(\mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index)\ :}
\DoxyCodeLine{00022\ \ \ \_monitor(monitor),}
\DoxyCodeLine{00023\ \ \ \_thread\_index(thread\_index)}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00025\ \ \ \_menu\ =\ gtk\_menu\_new();}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{comment}{//\ Timeline\ goes\ first.}}
\DoxyCodeLine{00029\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),}
\DoxyCodeLine{00030\ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Timeline"{}},\ -\/1,\ GtkStatsMonitor::CT\_timeline,\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{//\ Then\ the\ piano\ roll\ (even\ though\ it's\ not\ very\ useful\ nowadays)}}
\DoxyCodeLine{00033\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),}
\DoxyCodeLine{00034\ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Piano\ Roll"{}},\ -\/1,\ GtkStatsMonitor::CT\_piano\_roll,\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00037\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),}
\DoxyCodeLine{00038\ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}},\ 0,\ GtkStatsMonitor::CT\_strip\_chart,\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00039\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),}
\DoxyCodeLine{00040\ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}},\ -\/1,\ GtkStatsMonitor::CT\_flame\_graph,\ \textcolor{keyword}{false}));}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \{}
\DoxyCodeLine{00044\ \ \ \ \ GtkWidget\ *sep\ =\ gtk\_separator\_menu\_item\_new();}
\DoxyCodeLine{00045\ \ \ \ \ gtk\_widget\_show(sep);}
\DoxyCodeLine{00046\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ sep);}
\DoxyCodeLine{00047\ \ \ \}}
\DoxyCodeLine{00048\ \ \ \_time\_items\_end\ =\ 3;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ Put\ a\ separator\ between\ time\ items\ and\ level\ items.}}
\DoxyCodeLine{00051\ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ GtkWidget\ *sep\ =\ gtk\_separator\_menu\_item\_new();}
\DoxyCodeLine{00053\ \ \ \ \ gtk\_widget\_show(sep);}
\DoxyCodeLine{00054\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ sep);}
\DoxyCodeLine{00055\ \ \ \ \ \_level\_items\_end\ =\ \_time\_items\_end\ +\ 1;}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{comment}{//\ For\ the\ main\ thread\ menu,\ also\ some\ options\ relating\ to\ all\ graph\ windows.}}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{if}\ (thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ GtkWidget\ *sep\ =\ gtk\_separator\_menu\_item\_new();}
\DoxyCodeLine{00061\ \ \ \ \ gtk\_widget\_show(sep);}
\DoxyCodeLine{00062\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ sep);}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Close\ All\ Graphs"{}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ gtk\_widget\_show(menu\_item);}
\DoxyCodeLine{00067\ \ \ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ menu\_item);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(activate\_close\_all),}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)\_monitor);}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Reopen\ Default\ Graphs"{}});}
\DoxyCodeLine{00076\ \ \ \ \ \ \ gtk\_widget\_show(menu\_item);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ menu\_item);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(activate\_reopen\_default),}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)\_monitor);}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(\textcolor{stringliteral}{"{}Save\ Current\ Layout\ as\ Default"{}});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ gtk\_widget\_show(menu\_item);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(\_menu),\ menu\_item);}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(activate\_save\_default),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)\_monitor);}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ do\_update();}
\DoxyCodeLine{00096\ \ \ gtk\_widget\_show(\_menu);}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00102\ GtkStatsChartMenu::}
\DoxyCodeLine{00103\ \string~GtkStatsChartMenu()\ \{}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00109\ GtkWidget\ *\mbox{\hyperlink{classGtkStatsChartMenu_a49735698f6d5cebf98e05104a077e4cf}{GtkStatsChartMenu::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classGtkStatsChartMenu_a49735698f6d5cebf98e05104a077e4cf}{get\_menu\_widget}}()\ \{}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{return}\ \_menu;}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsChartMenu_a91c43f32b6ab279805252d2ba62d1933}{GtkStatsChartMenu::}}}
\DoxyCodeLine{00118\ \mbox{\hyperlink{classGtkStatsChartMenu_a91c43f32b6ab279805252d2ba62d1933}{add\_to\_menu\_bar}}(GtkWidget\ *menu\_bar,\ \textcolor{keywordtype}{int}\ position)\ \{}
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00120\ \ \ std::string\ thread\_name;}
\DoxyCodeLine{00121\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//\ A\ special\ case\ for\ the\ main\ thread.}}
\DoxyCodeLine{00123\ \ \ \ \ thread\_name\ =\ \textcolor{stringliteral}{"{}Graphs"{}};}
\DoxyCodeLine{00124\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00125\ \ \ \ \ thread\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a5b905293fa940d70742612a4ec5a87f6}{get\_thread\_name}}(\_thread\_index);}
\DoxyCodeLine{00126\ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \_menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(thread\_name.c\_str());}
\DoxyCodeLine{00129\ \ \ gtk\_widget\_show(\_menu\_item);}
\DoxyCodeLine{00130\ \ \ gtk\_menu\_item\_set\_submenu(GTK\_MENU\_ITEM(\_menu\_item),\ \_menu);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ gtk\_menu\_shell\_insert(GTK\_MENU\_SHELL(menu\_bar),\ \_menu\_item,\ position);}
\DoxyCodeLine{00133\ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00138\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsChartMenu_a131e475996240749a8e856614c003b62}{GtkStatsChartMenu::}}}
\DoxyCodeLine{00139\ \mbox{\hyperlink{classGtkStatsChartMenu_a131e475996240749a8e856614c003b62}{remove\_from\_menu\_bar}}(GtkWidget\ *menu\_bar)\ \{}
\DoxyCodeLine{00140\ \ \ gtk\_container\_remove(GTK\_CONTAINER(menu\_bar),\ \_menu\_item);}
\DoxyCodeLine{00141\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00147\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsChartMenu_a2d48bfbed4a83e3a3d15abe6f27ae712}{GtkStatsChartMenu::}}}
\DoxyCodeLine{00148\ \mbox{\hyperlink{classGtkStatsChartMenu_a2d48bfbed4a83e3a3d15abe6f27ae712}{check\_update}}()\ \{}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00150\ \ \ \textcolor{keywordflow}{if}\ (view.get\_level\_index()\ !=\ \_last\_level\_index)\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{classGtkStatsChartMenu_aacc19c5b2bcd8c2e882466d1412c90c6}{do\_update}}();}
\DoxyCodeLine{00152\ \ \ \}}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00158\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGtkStatsChartMenu_aacc19c5b2bcd8c2e882466d1412c90c6}{GtkStatsChartMenu::}}}
\DoxyCodeLine{00159\ \mbox{\hyperlink{classGtkStatsChartMenu_aacc19c5b2bcd8c2e882466d1412c90c6}{do\_update}}()\ \{}
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_ad6ff75a464b0d1d5cc5b8865e1c73b74}{get\_view}}(\_thread\_index);}
\DoxyCodeLine{00161\ \ \ \_last\_level\_index\ =\ view.get\_level\_index();}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00164\ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{size\_t})client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}()\ >\ \_collector\_items.size())\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \_collector\_items.resize(client\_data-\/>\mbox{\hyperlink{classPStatClientData_a947af0d045e34707dfbe9f17ed4c8aa4}{get\_num\_collectors}}(),\ std::make\_pair(\textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}));}
\DoxyCodeLine{00166\ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ The\ menu\ item(s)\ for\ the\ thread's\ frame\ time\ goes\ second.}}
\DoxyCodeLine{00169\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level\ =\ view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}();}
\DoxyCodeLine{00170\ \ \ \textcolor{keywordflow}{if}\ (\_thread\_index\ ==\ 0)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordflow}{if}\ (add\_view(\_menu,\ view\_level,\ \textcolor{keyword}{false},\ \_time\_items\_end))\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ ++\_time\_items\_end;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ ++\_level\_items\_end;}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ 0;\ c\ <\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();\ ++c)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (add\_view(\_menu,\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c),\ \textcolor{keyword}{false},\ \_time\_items\_end))\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ ++\_time\_items\_end;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ ++\_level\_items\_end;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00181\ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ And\ then\ the\ menu\ item(s)\ for\ each\ of\ the\ level\ values.}}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{int}\ num\_toplevel\_collectors\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a86cbac0fa6c4d9c66ff2d24f001c3148}{get\_num\_toplevel\_collectors}}();}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ tc\ =\ 0;\ tc\ <\ num\_toplevel\_collectors;\ tc++)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_abce44a655ded672baee4aa5b2463169f}{get\_toplevel\_collector}}(tc);}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector)\ \&\&}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_acb68b1772c25759dfffd96795a1da39d}{get\_collector\_has\_level}}(collector,\ \_thread\_index))\ \{}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatView}{PStatView}}\ \&level\_view\ =\ \_monitor-\/>\mbox{\hyperlink{classPStatMonitor_a230f979e07e144f103ebef614b030742}{get\_level\_view}}(collector,\ \_thread\_index);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ add\_view(\_menu,\ level\_view.\mbox{\hyperlink{classPStatView_a51f7c68f54e4bbec06ef911dac40e3a1}{get\_top\_level}}(),\ \textcolor{keyword}{true},\ \_level\_items\_end);}
\DoxyCodeLine{00193\ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \}}
\DoxyCodeLine{00195\ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00201\ \textcolor{keywordtype}{bool}\ GtkStatsChartMenu::}
\DoxyCodeLine{00202\ add\_view(GtkWidget\ *parent\_menu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatViewLevel}{PStatViewLevel}}\ *view\_level,}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ show\_level,\ \textcolor{keywordtype}{int}\ insert\_at)\ \{}
\DoxyCodeLine{00204\ \ \ \textcolor{keywordtype}{int}\ collector\ =\ view\_level-\/>get\_collector();}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ GtkWidget\ *\&menu\_item\ =\ \_collector\_items[collector].first;}
\DoxyCodeLine{00207\ \ \ GtkWidget\ *\&menu\ =\ \_collector\_items[collector].second;}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ \_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \textcolor{keywordtype}{int}\ num\_children\ =\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a3a93376402f21958f0aa27198b7d0455}{get\_num\_children}}();}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordflow}{if}\ (menu\ ==\ \textcolor{keyword}{nullptr}\ \&\&\ num\_children\ ==\ 0)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{//\ For\ a\ collector\ without\ children,\ no\ point\ in\ making\ a\ submenu.\ \ We\ just}}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{//\ have\ the\ item\ open\ a\ strip\ chart\ directly\ (no\ point\ in\ creating\ a\ flame}}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{comment}{//\ graph\ if\ there\ are\ no\ children).}}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (menu\_item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \textcolor{comment}{//\ Already\ exists.}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ std::string\ collector\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_ae5c6475096900ee0f29eff74e6919b31}{get\_collector\_name}}(collector);}
\DoxyCodeLine{00222\ \ \ \ \ menu\_item\ =\ make\_menu\_item(}
\DoxyCodeLine{00223\ \ \ \ \ \ \ collector\_name.c\_str(),\ collector,\ GtkStatsMonitor::CT\_strip\_chart,\ show\_level);}
\DoxyCodeLine{00224\ \ \ \ \ gtk\_menu\_shell\_insert(GTK\_MENU\_SHELL(parent\_menu),\ menu\_item,\ insert\_at);}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00226\ \ \ \}}
\DoxyCodeLine{00227\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (menu\_item\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ menu\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ Unhook\ the\ signal\ handler,\ we\ are\ creating\ a\ submenu.}}
\DoxyCodeLine{00229\ \ \ \ \ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ smd(GtkStatsMonitor::CT\_strip\_chart,\ \_thread\_index,\ collector,\ -\/1,\ show\_level);}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ \_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(smd);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ g\_signal\_handlers\_disconnect\_by\_data(G\_OBJECT(menu\_item),\ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00233\ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{comment}{//\ Create\ a\ submenu.}}
\DoxyCodeLine{00236\ \ \ \textcolor{keywordtype}{bool}\ added\_item\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{if}\ (menu\_item\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00238\ \ \ \ \ std::string\ collector\_name\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_ae5c6475096900ee0f29eff74e6919b31}{get\_collector\_name}}(collector);}
\DoxyCodeLine{00239\ \ \ \ \ menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(collector\_name.c\_str());}
\DoxyCodeLine{00240\ \ \ \ \ gtk\_widget\_show(menu\_item);}
\DoxyCodeLine{00241\ \ \ \ \ gtk\_menu\_shell\_insert(GTK\_MENU\_SHELL(parent\_menu),\ menu\_item,\ insert\_at);}
\DoxyCodeLine{00242\ \ \ \ \ added\_item\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \textcolor{keywordflow}{if}\ (menu\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00246\ \ \ \ \ menu\ =\ gtk\_menu\_new();}
\DoxyCodeLine{00247\ \ \ \ \ gtk\_widget\_show(menu);}
\DoxyCodeLine{00248\ \ \ \ \ gtk\_menu\_item\_set\_submenu(GTK\_MENU\_ITEM(menu\_item),\ menu);}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),}
\DoxyCodeLine{00251\ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}},\ collector,\ GtkStatsMonitor::CT\_strip\_chart,\ show\_level));}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{if}\ (!show\_level)\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\ ==\ 0)\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ collector\ =\ -\/1;}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ make\_menu\_item(\textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}},\ collector,\ GtkStatsMonitor::CT\_flame\_graph));}
\DoxyCodeLine{00260\ \ \ \ \ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ GtkWidget\ *sep\ =\ gtk\_separator\_menu\_item\_new();}
\DoxyCodeLine{00263\ \ \ \ \ gtk\_widget\_show(sep);}
\DoxyCodeLine{00264\ \ \ \ \ gtk\_menu\_shell\_append(GTK\_MENU\_SHELL(menu),\ sep);}
\DoxyCodeLine{00265\ \ \ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ 0;\ c\ <\ num\_children;\ ++c)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ add\_view(menu,\ view\_level-\/>\mbox{\hyperlink{classPStatViewLevel_a0d86322855b8c8376719a4d3ff19d9ac}{get\_child}}(c),\ show\_level,\ 3\ +\ !show\_level);}
\DoxyCodeLine{00269\ \ \ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keywordflow}{return}\ added\_item;}
\DoxyCodeLine{00272\ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00277\ GtkWidget\ *GtkStatsChartMenu::}
\DoxyCodeLine{00278\ make\_menu\_item(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *label,\ \textcolor{keywordtype}{int}\ collector\_index,\ ChartType\ chart\_type,}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ show\_level)\ \{}
\DoxyCodeLine{00280\ \ \ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ smd(chart\_type,\ \_thread\_index,\ collector\_index,\ -\/1,\ show\_level);}
\DoxyCodeLine{00281\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGtkStatsMonitor_1_1MenuDef}{GtkStatsMonitor::MenuDef}}\ *menu\_def\ =\ \_monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a9e6da0c29b29e7bf376ebdf743968dd6}{add\_menu}}(smd);}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ GtkWidget\ *menu\_item\ =\ gtk\_menu\_item\_new\_with\_label(label);}
\DoxyCodeLine{00284\ \ \ gtk\_widget\_show(menu\_item);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ g\_signal\_connect(G\_OBJECT(menu\_item),\ \textcolor{stringliteral}{"{}activate"{}},}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ G\_CALLBACK(\mbox{\hyperlink{classGtkStatsMonitor_a35a4d279db316126b4f8f564d7f2fb92}{GtkStatsMonitor::menu\_activate}}),}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{void}\ *)menu\_def);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \textcolor{keywordflow}{return}\ menu\_item;}
\DoxyCodeLine{00291\ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00296\ \textcolor{keywordtype}{void}\ GtkStatsChartMenu::}
\DoxyCodeLine{00297\ remove\_menu\_child(GtkWidget\ *widget,\ gpointer\ data)\ \{}
\DoxyCodeLine{00298\ \ \ GtkWidget\ *menu\ =\ (GtkWidget\ *)data;}
\DoxyCodeLine{00299\ \ \ gtk\_container\_remove(GTK\_CONTAINER(menu),\ widget);}
\DoxyCodeLine{00300\ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00305\ \textcolor{keywordtype}{void}\ GtkStatsChartMenu::}
\DoxyCodeLine{00306\ activate\_close\_all(GtkWidget\ *widget,\ gpointer\ data)\ \{}
\DoxyCodeLine{00307\ \ \ \mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *monitor\ =\ (\mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *)data;}
\DoxyCodeLine{00308\ \ \ monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a1aa9701eed9db09c44e9fae327bfc949}{remove\_all\_graphs}}();}
\DoxyCodeLine{00309\ \}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00314\ \textcolor{keywordtype}{void}\ GtkStatsChartMenu::}
\DoxyCodeLine{00315\ activate\_reopen\_default(GtkWidget\ *widget,\ gpointer\ data)\ \{}
\DoxyCodeLine{00316\ \ \ \mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *monitor\ =\ (\mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *)data;}
\DoxyCodeLine{00317\ \ \ monitor-\/>\mbox{\hyperlink{classGtkStatsMonitor_a1aa9701eed9db09c44e9fae327bfc949}{remove\_all\_graphs}}();}
\DoxyCodeLine{00318\ \ \ monitor-\/>\mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}();}
\DoxyCodeLine{00319\ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00324\ \textcolor{keywordtype}{void}\ GtkStatsChartMenu::}
\DoxyCodeLine{00325\ activate\_save\_default(GtkWidget\ *widget,\ gpointer\ data)\ \{}
\DoxyCodeLine{00326\ \ \ \mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *monitor\ =\ (\mbox{\hyperlink{classGtkStatsMonitor}{GtkStatsMonitor}}\ *)data;}
\DoxyCodeLine{00327\ \ \ monitor-\/>\mbox{\hyperlink{classPStatMonitor_a002afbd26111ae231bc865c1873a5aff}{save\_default\_graphs}}();}
\DoxyCodeLine{00328\ \}}

\end{DoxyCode}

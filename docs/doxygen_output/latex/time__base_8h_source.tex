\doxysection{time\+\_\+base.\+h}
\hypertarget{time__base_8h_source}{}\label{time__base_8h_source}\index{panda/src/nativenet/time\_base.h@{panda/src/nativenet/time\_base.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TIME\_BASE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TIME\_BASE\_H}}
\DoxyCodeLine{00003\ \textcolor{comment}{/*}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ Functions\ To\ support\ General\ Time\ Managment.\ \ And\ to\ allow\ for\ cross}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ platform\ use.\ \ Today\ Really\ Two\ Base\ classes\ and\ one\ convience\ class}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Time\_Clock\ =\ The\ clock\ time\ down\ to\ micro\ seconds..\ Time\_Span\ \ =\ Delta\ Time}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ to\ the\ Mico\ Second..\ Time\_Out\ \ \ =\ Help\ timer\ ............count\ down\ a}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ duration.\ \ I\ realize\ TimeClock\ is\ really\ an\ implied\ delta\ to\ EPOCH.\ I\ have}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ chosen\ to\ implement\ it\ this\ way.\ \ it\ may\ be\ apropriate\ to\ convert\ it\ all\ to}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ delta\ times\ with\ an\ EPOCk\ constant\ and\ functions\ that\ can\ handle\ the\ EPOCK}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ to\ current\ time.\ \ All\ though\ this\ is\ probably\ the\ "{}right"{}\ implementation}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ most\ coders\ do\ not\ think\ of\ clock\ time\ in\ this\ fashon.\ \ General}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ Observation..\ Windows\ 2k\ and\ Linux\ \ are\ really\ slow\ (\string~250k\ a\ sec)\ at}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ returning\ the\ current\ system\ time\ ??\ So\ use\ time\ functions\ that\ grab\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *\ current\ system\ time\ sparingly\ ??}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <winsock2.h>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <wtypes.h>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <sys/types.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ \ <sys/timeb.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ \ <sys/time.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{enum}\ \{\ USEC\ =\ 1000000\ \};}
\DoxyCodeLine{00033\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ NormalizeTime(timeval\ \&in)}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{while}\ (in.tv\_usec\ >=\ USEC)}
\DoxyCodeLine{00036\ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ in.tv\_usec\ -\/=\ USEC;}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ in.tv\_sec++;}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{while}\ (in.tv\_usec\ <\ 0)}
\DoxyCodeLine{00042\ \ \ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ in.tv\_usec\ +=\ USEC;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ in.tv\_sec-\/-\/;}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ TimeDif(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ timeval\ \&start,\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ timeval\ \&fin,\ \textcolor{keyword}{struct}\ timeval\ \&answer)}
\DoxyCodeLine{00052\ \{}
\DoxyCodeLine{00053\ \ \ \ \ answer.tv\_usec\ =\ fin.tv\_usec\ -\/\ start.tv\_usec;}
\DoxyCodeLine{00054\ \ \ \ \ answer.tv\_sec\ =\ fin.tv\_sec\ -\/\ start.tv\_sec;}
\DoxyCodeLine{00055\ \ \ \ \ NormalizeTime(answer);}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00060\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ TimeAdd(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ timeval\ \&start,\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ timeval\ \&delta,\ \textcolor{keyword}{struct}\ timeval\ \&answer)}
\DoxyCodeLine{00061\ \{}
\DoxyCodeLine{00062\ \ \ \ \ answer.tv\_usec\ =\ start.tv\_usec\ +\ delta.tv\_usec;}
\DoxyCodeLine{00063\ \ \ \ \ answer.tv\_sec\ =\ start.tv\_sec\ +\ delta.tv\_sec;}
\DoxyCodeLine{00064\ \ \ \ \ NormalizeTime(answer);}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{00068\ \textcolor{comment}{//\ Lets\ make\ Windows\ think\ it\ is\ a\ unix\ machine\ :)}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ gettimeofday(\textcolor{keyword}{struct}\ timeval\ *tv,\ \textcolor{keywordtype}{void}\ *\ trash)}
\DoxyCodeLine{00074\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{struct\ }timeb\ timeb;}
\DoxyCodeLine{00076\ \ \ \ \ ftime(\ \&timeb);}
\DoxyCodeLine{00077\ \ \ \ \ tv-\/>tv\_sec\ =\ (long)timeb.time;}
\DoxyCodeLine{00078\ \ \ \ \ tv-\/>tv\_usec\ =\ (\textcolor{keywordtype}{unsigned}\ int)timeb.millitm\ *\ 1000;}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#include\ "{}time\_clock.h"{}}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#include\ "{}time\_span.h"{}}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\#include\ "{}time\_general.h"{}}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#include\ "{}time\_out.h"{}}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//TIME\_BASE\_H}}

\end{DoxyCode}

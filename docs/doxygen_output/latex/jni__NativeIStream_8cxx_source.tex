\doxysection{jni\+\_\+\+Native\+IStream.\+cxx}
\hypertarget{jni__NativeIStream_8cxx_source}{}\label{jni__NativeIStream_8cxx_source}\index{panda/src/android/jni\_NativeIStream.cxx@{panda/src/android/jni\_NativeIStream.cxx}}
\mbox{\hyperlink{jni__NativeIStream_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <jni.h>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <istream>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#if\ \_\_GNUC\_\_\ >=\ 4}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ EXPORT\_JNI\ extern\ "{}C"{}\ \_\_attribute\_\_((visibility("{}default"{})))}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ EXPORT\_JNI\ extern\ "{}C"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00027\ EXPORT\_JNI\ jint}
\DoxyCodeLine{00028\ \mbox{\hyperlink{jni__NativeIStream_8cxx_a43349d4742be911af48db6b4a10c876b}{Java\_org\_panda3d\_android\_NativeIStream\_nativeGet}}(JNIEnv\ *env,\ jclass\ clazz,\ jlong\ ptr)\ \{}
\DoxyCodeLine{00029\ \ \ std::istream\ *stream\ =\ (std::istream\ *)\ ptr;}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \textcolor{keywordtype}{int}\ ch\ =\ stream-\/>get();}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{return}\ stream-\/>good()\ ?\ ch\ :\ -\/1;}
\DoxyCodeLine{00033\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00039\ EXPORT\_JNI\ jint}
\DoxyCodeLine{00040\ \mbox{\hyperlink{jni__NativeIStream_8cxx_a37d1c56f8ebed0e890be56506943c7fc}{Java\_org\_panda3d\_android\_NativeIStream\_nativeRead}}(JNIEnv\ *env,\ jclass\ clazz,\ jlong\ ptr,\ jbyteArray\ byte\_array,\ jint\ offset,\ jint\ length)\ \{}
\DoxyCodeLine{00041\ \ \ std::istream\ *stream\ =\ (std::istream\ *)\ ptr;}
\DoxyCodeLine{00042\ \ \ jbyte\ *buffer\ =\ (jbyte\ *)\ env-\/>GetPrimitiveArrayCritical(byte\_array,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00043\ \ \ \textcolor{keywordflow}{if}\ (buffer\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ stream-\/>read((\textcolor{keywordtype}{char}*)\ buffer\ +\ offset,\ length);}
\DoxyCodeLine{00048\ \ \ env-\/>ReleasePrimitiveArrayCritical(byte\_array,\ buffer,\ 0);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{comment}{//\ We\ have\ to\ return\ -\/1\ on\ EOF,\ otherwise\ it\ will\ keep\ trying\ to\ read.}}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{size\_t}\ count\ =\ stream-\/>gcount();}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (count\ ==\ 0\ \&\&\ stream-\/>eof())\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00054\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00063\ EXPORT\_JNI\ jlong}
\DoxyCodeLine{00064\ \mbox{\hyperlink{jni__NativeIStream_8cxx_ada0f71bf5c3d3662c0982d67c421b055}{Java\_org\_panda3d\_android\_NativeIStream\_nativeIgnore}}(JNIEnv\ *env,\ jclass\ clazz,\ jlong\ ptr,\ jlong\ offset)\ \{}
\DoxyCodeLine{00065\ \ \ std::istream\ *stream\ =\ (std::istream\ *)\ ptr;}
\DoxyCodeLine{00066\ \ \ stream-\/>ignore(offset);}
\DoxyCodeLine{00067\ \ \ \textcolor{keywordflow}{return}\ stream-\/>gcount();}
\DoxyCodeLine{00068\ \}}

\end{DoxyCode}

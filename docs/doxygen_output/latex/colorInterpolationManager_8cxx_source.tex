\doxysection{color\+Interpolation\+Manager.\+cxx}
\hypertarget{colorInterpolationManager_8cxx_source}{}\label{colorInterpolationManager_8cxx_source}\index{panda/src/particlesystem/colorInterpolationManager.cxx@{panda/src/particlesystem/colorInterpolationManager.cxx}}
\mbox{\hyperlink{colorInterpolationManager_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{colorInterpolationManager_8h}{colorInterpolationManager.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mathNumbers_8h}{mathNumbers.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{using\ }std::max;}
\DoxyCodeLine{00018\ \textcolor{keyword}{using\ }std::min;}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ColorInterpolationFunction::\_type\_handle;}
\DoxyCodeLine{00021\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ColorInterpolationFunctionConstant::\_type\_handle;}
\DoxyCodeLine{00022\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ColorInterpolationFunctionLinear::\_type\_handle;}
\DoxyCodeLine{00023\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ColorInterpolationFunctionStepwave::\_type\_handle;}
\DoxyCodeLine{00024\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ ColorInterpolationFunctionSinusoid::\_type\_handle;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00030\ ColorInterpolationFunction::}
\DoxyCodeLine{00031\ ColorInterpolationFunction()\ \{}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00038\ ColorInterpolationFunction::}
\DoxyCodeLine{00039\ \string~ColorInterpolationFunction()\ \{}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00046\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a303cabe4dffc8647d62905f22eabcdb8}{ColorInterpolationFunctionConstant::}}}
\DoxyCodeLine{00047\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a303cabe4dffc8647d62905f22eabcdb8}{ColorInterpolationFunctionConstant}}()\ :}
\DoxyCodeLine{00048\ \ \ \_c\_a(1.0f,1.0f,1.0f,1.0f)\ \{}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00055\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a303cabe4dffc8647d62905f22eabcdb8}{ColorInterpolationFunctionConstant::}}}
\DoxyCodeLine{00056\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a303cabe4dffc8647d62905f22eabcdb8}{ColorInterpolationFunctionConstant}}(\textcolor{keyword}{const}\ LColor\ \&color\_a)\ :}
\DoxyCodeLine{00057\ \ \ \_c\_a(color\_a)\ \{}
\DoxyCodeLine{00058\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00064\ LColor\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a6a40fe1f7692ee1dff51b8ca7ac992ef}{ColorInterpolationFunctionConstant::}}}
\DoxyCodeLine{00065\ \mbox{\hyperlink{classColorInterpolationFunctionConstant_a6a40fe1f7692ee1dff51b8ca7ac992ef}{interpolate}}(\textcolor{keyword}{const}\ PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{return}\ \_c\_a;}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00073\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_a6318e4e7dd6a2551dc7d4ebea4e1f9e0}{ColorInterpolationFunctionLinear::}}}
\DoxyCodeLine{00074\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_a6318e4e7dd6a2551dc7d4ebea4e1f9e0}{ColorInterpolationFunctionLinear}}()\ :}
\DoxyCodeLine{00075\ \ \ \_c\_b(1.0f,1.0f,1.0f,1.0f)\ \{}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00082\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_a6318e4e7dd6a2551dc7d4ebea4e1f9e0}{ColorInterpolationFunctionLinear::}}}
\DoxyCodeLine{00083\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_a6318e4e7dd6a2551dc7d4ebea4e1f9e0}{ColorInterpolationFunctionLinear}}(\textcolor{keyword}{const}\ LColor\ \&color\_a,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LColor\ \&color\_b)\ :}
\DoxyCodeLine{00085\ \ \ \mbox{\hyperlink{classColorInterpolationFunctionConstant}{ColorInterpolationFunctionConstant}}(color\_a),}
\DoxyCodeLine{00086\ \ \ \_c\_b(color\_b)\ \{}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00093\ LColor\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_aad3b3de1569ae8ef916eb82ee0fcac99}{ColorInterpolationFunctionLinear::}}}
\DoxyCodeLine{00094\ \mbox{\hyperlink{classColorInterpolationFunctionLinear_aad3b3de1569ae8ef916eb82ee0fcac99}{interpolate}}(\textcolor{keyword}{const}\ PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{return}\ (1.0f-\/t)*\_c\_a\ +\ t*\_c\_b;}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00102\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_aada88dd9acd988a573e0b6deec45d338}{ColorInterpolationFunctionStepwave::}}}
\DoxyCodeLine{00103\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_aada88dd9acd988a573e0b6deec45d338}{ColorInterpolationFunctionStepwave}}()\ :}
\DoxyCodeLine{00104\ \ \ \_w\_a(0.5f),}
\DoxyCodeLine{00105\ \ \ \_w\_b(0.5f)\ \{}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00112\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_aada88dd9acd988a573e0b6deec45d338}{ColorInterpolationFunctionStepwave::}}}
\DoxyCodeLine{00113\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_aada88dd9acd988a573e0b6deec45d338}{ColorInterpolationFunctionStepwave}}(\textcolor{keyword}{const}\ LColor\ \&color\_a,}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LColor\ \&color\_b,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ width\_a,}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ width\_b)\ :}
\DoxyCodeLine{00117\ \ \ \mbox{\hyperlink{classColorInterpolationFunctionLinear}{ColorInterpolationFunctionLinear}}(color\_a,color\_b),}
\DoxyCodeLine{00118\ \ \ \_w\_a(width\_a),}
\DoxyCodeLine{00119\ \ \ \_w\_b(width\_b)\ \{}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00126\ LColor\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_a9a0ff634c5ecebb65a5d70c2c8d35621}{ColorInterpolationFunctionStepwave::}}}
\DoxyCodeLine{00127\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave_a9a0ff634c5ecebb65a5d70c2c8d35621}{interpolate}}(\textcolor{keyword}{const}\ PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{if}(fmodf(t,(\_w\_a+\_w\_b))<\_w\_a)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_c\_a;}
\DoxyCodeLine{00130\ \ \ \}}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{return}\ \_c\_b;}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00138\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a5ede2516527ad02f6862a144a750d035}{ColorInterpolationFunctionSinusoid::}}}
\DoxyCodeLine{00139\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a5ede2516527ad02f6862a144a750d035}{ColorInterpolationFunctionSinusoid}}()\ :}
\DoxyCodeLine{00140\ \ \ \_period(1.0f)\ \{}
\DoxyCodeLine{00141\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00147\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a5ede2516527ad02f6862a144a750d035}{ColorInterpolationFunctionSinusoid::}}}
\DoxyCodeLine{00148\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a5ede2516527ad02f6862a144a750d035}{ColorInterpolationFunctionSinusoid}}(\textcolor{keyword}{const}\ LColor\ \&color\_a,}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ LColor\ \&color\_b,}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ period)\ :}
\DoxyCodeLine{00151\ \ \ \mbox{\hyperlink{classColorInterpolationFunctionLinear}{ColorInterpolationFunctionLinear}}(color\_a,color\_b),}
\DoxyCodeLine{00152\ \ \ \_period(period)\ \{}
\DoxyCodeLine{00153\ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00160\ LColor\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a83a8659615c8469566533216dd35f5e3}{ColorInterpolationFunctionSinusoid::}}}
\DoxyCodeLine{00161\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid_a83a8659615c8469566533216dd35f5e3}{interpolate}}(\textcolor{keyword}{const}\ PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00162\ \ \ PN\_stdfloat\ weight\_a\ =\ (1.0f+cos(t*MathNumbers::pi\_f*2.0f/\_period))/2.0f;}
\DoxyCodeLine{00163\ \ \ \textcolor{keywordflow}{return}\ (weight\_a*\_c\_a)+((1.0f-\/weight\_a)*\_c\_b);}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00170\ \mbox{\hyperlink{classColorInterpolationSegment_a29bd86729853de1e087bd607e468b477}{ColorInterpolationSegment::}}}
\DoxyCodeLine{00171\ \mbox{\hyperlink{classColorInterpolationSegment_a29bd86729853de1e087bd607e468b477}{ColorInterpolationSegment}}(\mbox{\hyperlink{classColorInterpolationFunction}{ColorInterpolationFunction}}*\ function,}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ \&time\_begin,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ PN\_stdfloat\ \&time\_end,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulated,}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id})\ :}
\DoxyCodeLine{00176\ \ \ \_color\_inter\_func(function),}
\DoxyCodeLine{00177\ \ \ \_t\_begin(time\_begin),}
\DoxyCodeLine{00178\ \ \ \_t\_end(time\_end),}
\DoxyCodeLine{00179\ \ \ \_t\_total(time\_end-\/time\_begin),}
\DoxyCodeLine{00180\ \ \ \_is\_modulated(is\_modulated),}
\DoxyCodeLine{00181\ \ \ \_enabled(true),}
\DoxyCodeLine{00182\ \ \ \_id(id)\ \{}
\DoxyCodeLine{00183\ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00189\ \mbox{\hyperlink{classColorInterpolationSegment_a29bd86729853de1e087bd607e468b477}{ColorInterpolationSegment::}}}
\DoxyCodeLine{00190\ \mbox{\hyperlink{classColorInterpolationSegment_a29bd86729853de1e087bd607e468b477}{ColorInterpolationSegment}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}\ \&copy)\ :}
\DoxyCodeLine{00191\ \ \ \_color\_inter\_func(copy.\_color\_inter\_func),}
\DoxyCodeLine{00192\ \ \ \_t\_begin(copy.\_t\_begin),}
\DoxyCodeLine{00193\ \ \ \_t\_end(copy.\_t\_end),}
\DoxyCodeLine{00194\ \ \ \_t\_total(copy.\_t\_total),}
\DoxyCodeLine{00195\ \ \ \_is\_modulated(copy.\_is\_modulated),}
\DoxyCodeLine{00196\ \ \ \_enabled(copy.\_enabled),}
\DoxyCodeLine{00197\ \ \ \_id(copy.\_id)\ \{}
\DoxyCodeLine{00198\ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00204\ \mbox{\hyperlink{classColorInterpolationSegment_ad7e3dbc64f1f5afbe68577b2d370a603}{ColorInterpolationSegment::}}}
\DoxyCodeLine{00205\ \mbox{\hyperlink{classColorInterpolationSegment_ad7e3dbc64f1f5afbe68577b2d370a603}{\string~ColorInterpolationSegment}}()\ \{}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00214\ LColor\ \mbox{\hyperlink{classColorInterpolationSegment_ae9743820789fd4ff9d2c89f9dea65664}{ColorInterpolationSegment::}}}
\DoxyCodeLine{00215\ \mbox{\hyperlink{classColorInterpolationSegment_ae9743820789fd4ff9d2c89f9dea65664}{interpolateColor}}(\textcolor{keyword}{const}\ PN\_stdfloat\ t)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00216\ \ \ \textcolor{keywordflow}{return}\ \_color\_inter\_func-\/>interpolate((t-\/\_t\_begin)/\_t\_total);}
\DoxyCodeLine{00217\ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00223\ ColorInterpolationManager::}
\DoxyCodeLine{00224\ ColorInterpolationManager()\ :}
\DoxyCodeLine{00225\ \ \ \_default\_color(LColor(1.0f,1.0f,1.0f,1.0f)),}
\DoxyCodeLine{00226\ \ \ \_id\_generator(0)\ \{}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00233\ ColorInterpolationManager::}
\DoxyCodeLine{00234\ ColorInterpolationManager(\textcolor{keyword}{const}\ LColor\ \&c)\ :}
\DoxyCodeLine{00235\ \ \ \_default\_color(c),}
\DoxyCodeLine{00236\ \ \ \_id\_generator(0)\ \{}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00243\ ColorInterpolationManager::}
\DoxyCodeLine{00244\ ColorInterpolationManager(\textcolor{keyword}{const}\ \mbox{\hyperlink{classColorInterpolationManager}{ColorInterpolationManager}}\&\ copy)\ :}
\DoxyCodeLine{00245\ \ \ \_default\_color(copy.\_default\_color),}
\DoxyCodeLine{00246\ \ \ \_i\_segs(copy.\_i\_segs),}
\DoxyCodeLine{00247\ \ \ \_id\_generator(copy.\_id\_generator)\ \{}
\DoxyCodeLine{00248\ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00254\ ColorInterpolationManager::}
\DoxyCodeLine{00255\ \string~ColorInterpolationManager()\ \{}
\DoxyCodeLine{00256\ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00263\ \textcolor{keywordtype}{int}\ ColorInterpolationManager::}
\DoxyCodeLine{00264\ add\_constant(\textcolor{keyword}{const}\ PN\_stdfloat\ time\_begin,\ \textcolor{keyword}{const}\ PN\_stdfloat\ time\_end,\ \textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulated)\ \{}
\DoxyCodeLine{00265\ \ \ PT(\mbox{\hyperlink{classColorInterpolationFunctionConstant}{ColorInterpolationFunctionConstant}})\ fPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationFunctionConstant}{ColorInterpolationFunctionConstant}}(\mbox{\hyperlink{structcolor}{color}});}
\DoxyCodeLine{00266\ \ \ PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})\ sPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}(fPtr,time\_begin,time\_end,is\_modulated,\_id\_generator);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \_i\_segs.push\_back(sPtr);}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \textcolor{keywordflow}{return}\ \_id\_generator++;}
\DoxyCodeLine{00271\ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00278\ \textcolor{keywordtype}{int}\ ColorInterpolationManager::}
\DoxyCodeLine{00279\ add\_linear(\textcolor{keyword}{const}\ PN\_stdfloat\ time\_begin,\ \textcolor{keyword}{const}\ PN\_stdfloat\ time\_end,\ \textcolor{keyword}{const}\ LColor\ \&color\_a,\ \textcolor{keyword}{const}\ LColor\ \&color\_b,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulated)\ \{}
\DoxyCodeLine{00280\ \ \ PT(\mbox{\hyperlink{classColorInterpolationFunctionLinear}{ColorInterpolationFunctionLinear}})\ fPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationFunctionLinear}{ColorInterpolationFunctionLinear}}(color\_a,\ color\_b);}
\DoxyCodeLine{00281\ \ \ PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})\ sPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}(fPtr,time\_begin,time\_end,is\_modulated,\_id\_generator);}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \_i\_segs.push\_back(sPtr);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \textcolor{keywordflow}{return}\ \_id\_generator++;}
\DoxyCodeLine{00286\ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00293\ \textcolor{keywordtype}{int}\ ColorInterpolationManager::}
\DoxyCodeLine{00294\ add\_stepwave(\textcolor{keyword}{const}\ PN\_stdfloat\ time\_begin,\ \textcolor{keyword}{const}\ PN\_stdfloat\ time\_end,\ \textcolor{keyword}{const}\ LColor\ \&color\_a,\ \textcolor{keyword}{const}\ LColor\ \&color\_b,\ \textcolor{keyword}{const}\ PN\_stdfloat\ width\_a,\ \textcolor{keyword}{const}\ PN\_stdfloat\ width\_b,\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulated)\ \{}
\DoxyCodeLine{00295\ \ \ PT(\mbox{\hyperlink{classColorInterpolationFunctionStepwave}{ColorInterpolationFunctionStepwave}})\ fPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationFunctionStepwave}{ColorInterpolationFunctionStepwave}}(color\_a,\ color\_b,\ width\_a,\ width\_b);}
\DoxyCodeLine{00296\ \ \ PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})\ sPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}(fPtr,time\_begin,time\_end,is\_modulated,\_id\_generator);}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \_i\_segs.push\_back(sPtr);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \textcolor{keywordflow}{return}\ \_id\_generator++;}
\DoxyCodeLine{00301\ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00308\ \textcolor{keywordtype}{int}\ ColorInterpolationManager::}
\DoxyCodeLine{00309\ add\_sinusoid(\textcolor{keyword}{const}\ PN\_stdfloat\ time\_begin,\ \textcolor{keyword}{const}\ PN\_stdfloat\ time\_end,\ \textcolor{keyword}{const}\ LColor\ \&color\_a,\ \textcolor{keyword}{const}\ LColor\ \&color\_b,\ \textcolor{keyword}{const}\ PN\_stdfloat\ period,\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ is\_modulated)\ \{}
\DoxyCodeLine{00310\ \ \ PT(\mbox{\hyperlink{classColorInterpolationFunctionSinusoid}{ColorInterpolationFunctionSinusoid}})\ fPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationFunctionSinusoid}{ColorInterpolationFunctionSinusoid}}(color\_a,\ color\_b,\ period);}
\DoxyCodeLine{00311\ \ \ PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})\ sPtr\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}(fPtr,time\_begin,time\_end,is\_modulated,\_id\_generator);}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \ \ \_i\_segs.push\_back(sPtr);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \textcolor{keywordflow}{return}\ \_id\_generator++;}
\DoxyCodeLine{00316\ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00322\ \textcolor{keywordtype}{void}\ ColorInterpolationManager::}
\DoxyCodeLine{00323\ clear\_segment(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ seg\_id)\ \{}
\DoxyCodeLine{00324\ \ \ \mbox{\hyperlink{classpvector}{pvector}}<PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})>::iterator\ iter;}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{keywordflow}{for}(iter\ =\ \_i\_segs.begin();iter\ !=\ \_i\_segs.end();++iter)\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordflow}{if}(\ seg\_id\ ==\ (*iter)-\/>get\_id()\ )\ \{}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \_i\_segs.erase(iter);}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00338\ \textcolor{keywordtype}{void}\ ColorInterpolationManager::}
\DoxyCodeLine{00339\ clear\_to\_initial()\ \{}
\DoxyCodeLine{00340\ \ \ \_i\_segs.clear();}
\DoxyCodeLine{00341\ \ \ \_id\_generator\ =\ 0;}
\DoxyCodeLine{00342\ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00350\ LColor\ \mbox{\hyperlink{classColorInterpolationManager_aad5f06623070c59d167ca1422ca62bb4}{ColorInterpolationManager::}}}
\DoxyCodeLine{00351\ \mbox{\hyperlink{classColorInterpolationManager_aad5f06623070c59d167ca1422ca62bb4}{generateColor}}(\textcolor{keyword}{const}\ PN\_stdfloat\ interpolated\_time)\ \{}
\DoxyCodeLine{00352\ \ \ \textcolor{keywordtype}{bool}\ segment\_found\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00353\ \ \ LColor\ out(\_default\_color);}
\DoxyCodeLine{00354\ \ \ \mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}}\ *cur\_seg;}
\DoxyCodeLine{00355\ \ \ \mbox{\hyperlink{classpvector}{pvector}}<PT(\mbox{\hyperlink{classColorInterpolationSegment}{ColorInterpolationSegment}})>::iterator\ iter;}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \textcolor{keywordflow}{for}\ (iter\ =\ \_i\_segs.begin();iter\ !=\ \_i\_segs.end();++iter)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ cur\_seg\ =\ (*iter);}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordflow}{if}(\ cur\_seg-\/>is\_enabled()\ \&\&}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ interpolated\_time\ >=\ cur\_seg-\/>get\_time\_begin()}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \&\&\ interpolated\_time\ <=\ cur\_seg-\/>get\_time\_end()\ )\ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ segment\_found\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00363\ \ \ \ \ \ \ LColor\ cur\_color\ =\ cur\_seg-\/>\mbox{\hyperlink{classColorInterpolationSegment_ae9743820789fd4ff9d2c89f9dea65664}{interpolateColor}}(interpolated\_time);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ cur\_seg-\/>is\_modulated()\ )\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ out[0]\ *=\ cur\_color[0];}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ out[1]\ *=\ cur\_color[1];}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ out[2]\ *=\ cur\_color[2];}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ out[3]\ *=\ cur\_color[3];}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ out[0]\ +=\ cur\_color[0];}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ out[1]\ +=\ cur\_color[1];}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ out[2]\ +=\ cur\_color[2];}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ out[3]\ +=\ cur\_color[3];}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00376\ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \textcolor{keywordflow}{if}(segment\_found)\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ out[0]\ =\ max((PN\_stdfloat)0.0,\ min(out[0],\ (PN\_stdfloat)1.0));}
\DoxyCodeLine{00381\ \ \ \ \ \ \ out[1]\ =\ max((PN\_stdfloat)0.0,\ min(out[1],\ (PN\_stdfloat)1.0));}
\DoxyCodeLine{00382\ \ \ \ \ \ \ out[2]\ =\ max((PN\_stdfloat)0.0,\ min(out[2],\ (PN\_stdfloat)1.0));}
\DoxyCodeLine{00383\ \ \ \ \ \ \ out[3]\ =\ max((PN\_stdfloat)0.0,\ min(out[3],\ (PN\_stdfloat)1.0));}
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00385\ \ \ \}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \ \ \textcolor{keywordflow}{return}\ \_default\_color;}
\DoxyCodeLine{00388\ \}}

\end{DoxyCode}

\doxysection{graphics\+Engine.\+h}
\hypertarget{graphicsEngine_8h_source}{}\label{graphicsEngine_8h_source}\index{panda/src/display/graphicsEngine.h@{panda/src/display/graphicsEngine.h}}
\mbox{\hyperlink{graphicsEngine_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ GRAPHICSENGINE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ GRAPHICSENGINE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandabase_8h}{pandabase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsWindow_8h}{graphicsWindow.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsBuffer_8h}{graphicsBuffer.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{frameBufferProperties_8h}{frameBufferProperties.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graphicsThreadingModel_8h}{graphicsThreadingModel.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sceneSetup_8h}{sceneSetup.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pointerTo_8h}{pointerTo.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{thread_8h}{thread.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmutex_8h}{pmutex.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{reMutex_8h}{reMutex.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lightReMutex_8h}{lightReMutex.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{conditionVar_8h}{conditionVar.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollector_8h}{pStatCollector.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pset_8h}{pset.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ordered__vector_8h}{ordered\_vector.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indirectLess_8h}{indirectLess.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{loader_8h}{loader.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{referenceCount_8h}{referenceCount.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{renderState_8h}{renderState.h}}"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{clockObject_8h}{clockObject.h}}"{}}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPipeline}{Pipeline}};}
\DoxyCodeLine{00041\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classDisplayRegion}{DisplayRegion}};}
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}};}
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}};}
\DoxyCodeLine{00044\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classTexture}{Texture}};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{class\ }EXPCL\_PANDA\_DISPLAY\ \mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classReferenceCount}{ReferenceCount}}\ \{}
\DoxyCodeLine{00058\ PUBLISHED:}
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}(\mbox{\hyperlink{classClockObject}{ClockObject}}\ *clock\ =\ ClockObject::get\_global\_clock(),}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPipeline}{Pipeline}}\ *pipeline\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00061\ \ \ BLOCKING\ \mbox{\hyperlink{classGraphicsEngine}{\string~GraphicsEngine}}();}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{keywordtype}{void}\ set\_threading\_model(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGraphicsThreadingModel}{GraphicsThreadingModel}}\ \&threading\_model);}
\DoxyCodeLine{00064\ \ \ \mbox{\hyperlink{classGraphicsThreadingModel}{GraphicsThreadingModel}}\ get\_threading\_model()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00065\ \ \ MAKE\_PROPERTY(threading\_model,\ get\_threading\_model,\ set\_threading\_model);}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ INLINE\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classReMutex}{ReMutex}}\ \&get\_render\_lock()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00068\ \ \ MAKE\_PROPERTY(render\_lock,\ get\_render\_lock);}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_auto\_flip(\textcolor{keywordtype}{bool}\ auto\_flip);}
\DoxyCodeLine{00071\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_auto\_flip()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00072\ \ \ MAKE\_PROPERTY(auto\_flip,\ get\_auto\_flip,\ set\_auto\_flip);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_portal\_cull(\textcolor{keywordtype}{bool}\ value);}
\DoxyCodeLine{00075\ \ \ INLINE\ \textcolor{keywordtype}{bool}\ get\_portal\_cull()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00076\ \ \ MAKE\_PROPERTY(portal\_cull,\ get\_portal\_cull,\ set\_portal\_cull);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ INLINE\ \textcolor{keywordtype}{void}\ set\_default\_loader(\mbox{\hyperlink{classLoader}{Loader}}\ *loader);}
\DoxyCodeLine{00079\ \ \ INLINE\ \mbox{\hyperlink{classLoader}{Loader}}\ *get\_default\_loader()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00080\ \ \ MAKE\_PROPERTY(default\_loader,\ get\_default\_loader,\ set\_default\_loader);}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *make\_output(\mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}}\ *pipe,}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keywordtype}{int}\ sort,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFrameBufferProperties}{FrameBufferProperties}}\ \&fb\_prop,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classWindowProperties}{WindowProperties}}\ \&win\_prop,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ flags,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg\ =\ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *host\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{comment}{//\ Syntactic\ shorthand\ versions\ of\ make\_output}}
\DoxyCodeLine{00090\ \ \ INLINE\ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *make\_buffer(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *host,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keywordtype}{int}\ sort,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00093\ \ \ INLINE\ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *make\_buffer(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keywordtype}{int}\ sort,}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00096\ \ \ INLINE\ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *make\_parasite(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *host,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keywordtype}{int}\ sort,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\_size,\ \textcolor{keywordtype}{int}\ y\_size);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keywordtype}{bool}\ add\_window(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window,\ \textcolor{keywordtype}{int}\ sort);}
\DoxyCodeLine{00101\ \ \ \textcolor{keywordtype}{bool}\ remove\_window(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window);}
\DoxyCodeLine{00102\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ remove\_all\_windows();}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordtype}{void}\ reset\_all\_windows(\textcolor{keywordtype}{bool}\ swapchain);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{bool}\ is\_empty()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ \ \ \textcolor{keywordtype}{int}\ get\_num\_windows()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00107\ \ \ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *get\_window(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00108\ \ \ MAKE\_SEQ(get\_windows,\ get\_num\_windows,\ get\_window);}
\DoxyCodeLine{00109\ \ \ MAKE\_SEQ\_PROPERTY(windows,\ get\_num\_windows,\ get\_window);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ render\_frame();}
\DoxyCodeLine{00112\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ open\_windows();}
\DoxyCodeLine{00113\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ sync\_frame();}
\DoxyCodeLine{00114\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ ready\_flip();}
\DoxyCodeLine{00115\ \ \ BLOCKING\ \textcolor{keywordtype}{void}\ flip\_frame();}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \textcolor{keywordtype}{bool}\ extract\_texture\_data(\mbox{\hyperlink{classTexture}{Texture}}\ *tex,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00118\ \ \ vector\_uchar\ extract\_shader\_buffer\_data(\mbox{\hyperlink{classShaderBuffer}{ShaderBuffer}}\ *buffer,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00119\ \ \ \textcolor{keywordtype}{void}\ dispatch\_compute(\textcolor{keyword}{const}\ LVecBase3i\ \&work\_groups,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state,}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00122\ \ \ INLINE\ \textcolor{keywordtype}{void}\ dispatch\_compute(\textcolor{keyword}{const}\ LVecBase3i\ \&work\_groups,}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShaderAttrib}{ShaderAttrib}}\ *sattr,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *get\_global\_ptr();}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{enum}\ ThreadState\ \{}
\DoxyCodeLine{00130\ \ \ \ \ TS\_wait,}
\DoxyCodeLine{00131\ \ \ \ \ TS\_do\_frame,}
\DoxyCodeLine{00132\ \ \ \ \ TS\_do\_flip,}
\DoxyCodeLine{00133\ \ \ \ \ TS\_do\_release,}
\DoxyCodeLine{00134\ \ \ \ \ TS\_do\_windows,}
\DoxyCodeLine{00135\ \ \ \ \ TS\_callback,}
\DoxyCodeLine{00136\ \ \ \ \ TS\_terminate,}
\DoxyCodeLine{00137\ \ \ \ \ TS\_done}
\DoxyCodeLine{00138\ \ \ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{void}\ texture\_uploaded(\mbox{\hyperlink{classTexture}{Texture}}\ *tex);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#ifndef\ CPPPARSER}}
\DoxyCodeLine{00143\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Callable>}
\DoxyCodeLine{00144\ \ \ INLINE\ \textcolor{keyword}{auto}\ run\_on\_draw\_thread(Callable\ \&\&callable)\ -\/>\ \textcolor{keyword}{decltype}(callable());}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ do\_cull(\mbox{\hyperlink{classCullHandler}{CullHandler}}\ *cull\_handler,\ \mbox{\hyperlink{classSceneSetup}{SceneSetup}}\ *scene\_setup,}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00152\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classov__set}{ov\_set}}<\ PT(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}),\ \mbox{\hyperlink{classIndirectLess}{IndirectLess<GraphicsOutput>}}\ >\ \mbox{\hyperlink{classov__set}{Windows}};}
\DoxyCodeLine{00153\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpset}{pset}}<\ PT(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}})\ >\ \mbox{\hyperlink{classpset}{GSGs}};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ scene\_root\_func(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node);}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordtype}{bool}\ is\_scene\_root(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *node);}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ set\_window\_sort(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window,\ \textcolor{keywordtype}{int}\ sort);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \textcolor{keywordtype}{void}\ cull\_and\_draw\_together(\mbox{\hyperlink{classov__set}{Windows}}\ wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00161\ \ \ \textcolor{keywordtype}{void}\ cull\_and\_draw\_together(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *win,\ \mbox{\hyperlink{classDisplayRegion}{DisplayRegion}}\ *dr,}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{void}\ cull\_to\_bins(\mbox{\hyperlink{classov__set}{Windows}}\ wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{void}\ cull\_to\_bins(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *win,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDisplayRegion}{DisplayRegion}}\ *dr,\ \mbox{\hyperlink{classSceneSetup}{SceneSetup}}\ *scene\_setup,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCullResult}{CullResult}}\ *cull\_result,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordtype}{void}\ draw\_bins(\textcolor{keyword}{const}\ \mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordtype}{void}\ make\_contexts(\textcolor{keyword}{const}\ \mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \textcolor{keywordtype}{void}\ process\_events(\textcolor{keyword}{const}\ \mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00172\ \ \ \textcolor{keywordtype}{void}\ ready\_flip\_windows(\textcolor{keyword}{const}\ \mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00173\ \ \ \textcolor{keywordtype}{void}\ flip\_windows(\textcolor{keyword}{const}\ \mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{void}\ do\_sync\_frame(\mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordtype}{void}\ do\_ready\_flip(\mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{void}\ do\_flip\_frame(\mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00177\ \ \ INLINE\ \textcolor{keywordtype}{void}\ close\_gsg(\mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}}\ *pipe,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ PT(\mbox{\hyperlink{classSceneSetup}{SceneSetup}})\ setup\_scene(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDisplayRegionPipelineReader}{DisplayRegionPipelineReader}}\ *dr);}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordtype}{void}\ do\_draw(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *win,\ \mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDisplayRegion}{DisplayRegion}}\ *dr,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \textcolor{keywordtype}{void}\ do\_add\_window(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window);}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{void}\ do\_add\_gsg(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg,\ \mbox{\hyperlink{classGraphicsPipe}{GraphicsPipe}}\ *pipe);}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordtype}{void}\ do\_remove\_window(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordtype}{void}\ do\_resort\_windows();}
\DoxyCodeLine{00188\ \ \ \textcolor{keywordtype}{void}\ terminate\_threads(\mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00189\ \ \ \textcolor{keywordtype}{void}\ auto\_adjust\_capabilities(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#ifdef\ DO\_PSTATS}}
\DoxyCodeLine{00192\ \ \ \textcolor{keyword}{typedef}\ std::map<TypeHandle,\ PStatCollector>\ CyclerTypeCounters;}
\DoxyCodeLine{00193\ \ \ CyclerTypeCounters\ \_all\_cycler\_types;}
\DoxyCodeLine{00194\ \ \ CyclerTypeCounters\ \_dirty\_cycler\_types;}
\DoxyCodeLine{00195\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ pstats\_count\_cycler\_type(\mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type,\ \textcolor{keywordtype}{int}\ count,\ \textcolor{keywordtype}{void}\ *data);}
\DoxyCodeLine{00196\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ pstats\_count\_dirty\_cycler\_type(\mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ type,\ \textcolor{keywordtype}{int}\ count,\ \textcolor{keywordtype}{void}\ *data);}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ DO\_PSTATS}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *get\_invert\_polygon\_state();}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \textcolor{comment}{//\ The\ WindowRenderer\ class\ records\ the\ stages\ of\ the\ pipeline\ that\ each}}
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ thread\ (including\ the\ main\ thread,\ a.k.a.\ \ "{}app"{})\ should\ process,\ and\ the}}
\DoxyCodeLine{00203\ \ \ \textcolor{comment}{//\ list\ of\ windows\ for\ each\ stage.}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ There\ is\ one\ WindowRenderer\ instance\ for\ app,\ and\ another\ instance\ for}}
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{//\ each\ thread\ (the\ thread-\/specific\ WindowRenderers\ are\ actually\ instances}}
\DoxyCodeLine{00207\ \ \ \textcolor{comment}{//\ of\ RenderThread,\ below,\ which\ inherits\ from\ WindowRenderer).}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{//\ The\ idea\ is\ that\ each\ window\ is\ associated\ with\ one\ or\ more}}
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ WindowRenderer\ objects,\ according\ to\ the\ threads\ in\ which\ its\ rendering}}
\DoxyCodeLine{00211\ \ \ \textcolor{comment}{//\ tasks\ (window,\ cull,\ and\ draw)\ are\ divided\ into.}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ The\ "{}window"{}\ task\ is\ responsible\ for\ doing\ any\ updates\ to\ the\ window}}
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ itself,\ such\ as\ size\ and\ placement,\ and\ is\ wholly\ responsible\ for\ any\ API}}
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ calls\ to\ the\ windowing\ system\ itself,\ unrelated\ to\ OpenGL-\/type\ calls.}}
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//\ This\ is\ normally\ done\ in\ app\ (the\ design\ of\ X-\/Windows\ is\ such\ that\ all\ X}}
\DoxyCodeLine{00217\ \ \ \textcolor{comment}{//\ calls\ must\ be\ issued\ in\ the\ same\ thread).}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \textcolor{comment}{//\ The\ "{}cull"{}\ task\ is\ responsible\ for\ crawling\ through\ the\ scene\ graph\ and}}
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ discovering\ all\ of\ the\ Geoms\ that\ are\ within\ the\ viewing\ frustum.\ \ It}}
\DoxyCodeLine{00221\ \ \ \textcolor{comment}{//\ assembles\ all\ such\ Geoms,\ along\ with\ their\ computed\ net\ state\ and}}
\DoxyCodeLine{00222\ \ \ \textcolor{comment}{//\ transform,\ in\ a\ linked\ list\ of\ CullableObjects,\ which\ it\ stores\ for\ the}}
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\ "{}draw"{}\ task,\ next.}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \textcolor{comment}{//\ The\ "{}draw"{}\ task\ is\ responsible\ for\ walking\ through\ the\ list\ of}}
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ CullableObjects\ recorded\ by\ the\ cull\ task,\ and\ issuing\ the\ appropriate}}
\DoxyCodeLine{00227\ \ \ \textcolor{comment}{//\ graphics\ commands\ to\ draw\ them.}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ There\ is\ an\ additional\ task,\ not\ often\ used,\ called\ "{}cdraw"{}.\ This\ task,}}
\DoxyCodeLine{00230\ \ \ \textcolor{comment}{//\ if\ activated,\ will\ crawl\ through\ the\ scene\ graph\ and\ issue\ graphics}}
\DoxyCodeLine{00231\ \ \ \textcolor{comment}{//\ commands\ immediately,\ as\ each\ Geom\ is\ discovered.\ \ It\ is\ only\ rarely\ used}}
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ because\ it\ cannot\ perform\ sorting\ beyond\ basic\ scene\ graph\ order,\ making}}
\DoxyCodeLine{00233\ \ \ \textcolor{comment}{//\ it\ less\ useful\ than\ a\ separate\ cull\ and\ draw\ task.}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{comment}{//\ It\ is\ possible\ for\ all\ three\ of\ the\ normal\ tasks:\ window,\ cull,\ and\ draw,}}
\DoxyCodeLine{00236\ \ \ \textcolor{comment}{//\ to\ be\ handled\ by\ the\ same\ thread.\ \ This\ is\ the\ normal,\ single-\/threaded}}
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ model:\ all\ tasks\ are\ handled\ by\ the\ app\ thread.\ \ In\ this\ case,\ the\ window}}
\DoxyCodeLine{00238\ \ \ \textcolor{comment}{//\ will\ be\ added\ to\ \_app's\ \_window,\ \_cull,\ and\ \_draw\ lists.}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \textcolor{comment}{/*}}
\DoxyCodeLine{00241\ \textcolor{comment}{\ *\ On\ the\ other\ hand,\ a\ window's\ tasks\ may\ also\ be\ distributed\ among\ as\ many}}
\DoxyCodeLine{00242\ \textcolor{comment}{\ *\ as\ three\ threads.\ \ For\ instance,\ if\ the\ window\ is\ listed\ on\ \_app's\ \_window}}
\DoxyCodeLine{00243\ \textcolor{comment}{\ *\ list,\ but\ on\ thread\ A's\ \_cull\ list,\ and\ thread\ B's\ \_draw\ list,\ then\ the}}
\DoxyCodeLine{00244\ \textcolor{comment}{\ *\ window\ task\ will\ be\ handled\ in\ the\ app\ thread,\ while\ the\ cull\ task\ will\ be}}
\DoxyCodeLine{00245\ \textcolor{comment}{\ *\ handled\ by\ thread\ A,\ and\ the\ draw\ task\ will\ be\ handled\ (in\ parallel)\ by}}
\DoxyCodeLine{00246\ \textcolor{comment}{\ *\ thread\ B.\ \ (In\ order\ for\ this\ to\ work,\ it\ will\ be\ necessary\ that\ thread\ A}}
\DoxyCodeLine{00247\ \textcolor{comment}{\ *\ and\ B\ are\ configured\ to\ view\ different\ stages\ of\ the\ graphics\ pipeline.}}
\DoxyCodeLine{00248\ \textcolor{comment}{\ *\ This\ is\ a\ more\ advanced\ topic\ than\ there\ is\ room\ to\ discuss\ in\ this}}
\DoxyCodeLine{00249\ \textcolor{comment}{\ *\ comment.)}}
\DoxyCodeLine{00250\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ Manipulation\ of\ the\ various\ window\ lists\ in\ each\ WindowRenderer\ object\ is}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ always\ performed\ in\ the\ app\ thread.\ \ The\ auxiliary\ threads\ are\ slaves\ to}}
\DoxyCodeLine{00254\ \ \ \textcolor{comment}{//\ the\ app\ thread,\ and\ they\ can\ only\ perform\ one\ of\ a\ handful\ of\ specified}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ tasks,\ none\ of\ which\ includes\ adding\ or\ removing\ windows\ from\ its\ lists.}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ The\ full\ set\ of\ tasks\ that\ a\ WindowRenderer\ may\ perform\ is\ enumerated\ in}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ ThreadState,\ above;\ see\ RenderThread::thread\_main().}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \textcolor{comment}{/*}}
\DoxyCodeLine{00260\ \textcolor{comment}{\ *\ There\ is\ a\ pair\ of\ condition\ variables\ for\ each\ thread,\ \_cv\_start\ and}}
\DoxyCodeLine{00261\ \textcolor{comment}{\ *\ \_cv\_done,\ that\ is\ used\ to\ synchronize\ requests\ made\ by\ app\ to\ a\ particular}}
\DoxyCodeLine{00262\ \textcolor{comment}{\ *\ thread.\ \ The\ usual\ procedure\ to\ request\ a\ thread\ to\ perform\ a\ particular}}
\DoxyCodeLine{00263\ \textcolor{comment}{\ *\ task\ is\ the\ following:\ the\ app\ thread\ waits\ on\ the\ thread's\ \_cv\_done}}
\DoxyCodeLine{00264\ \textcolor{comment}{\ *\ variable,\ stores\ the\ value\ corresponding\ to\ the\ desired\ task\ in\ the}}
\DoxyCodeLine{00265\ \textcolor{comment}{\ *\ thread's\ \_thread\_state\ value,\ then\ signals\ the\ thread's\ \_cv\_start\ variable.}}
\DoxyCodeLine{00266\ \textcolor{comment}{\ *\ The\ thread,\ in\ turn,\ will\ perform\ its\ requested\ task,\ set\ its\ \_thread\_state}}
\DoxyCodeLine{00267\ \textcolor{comment}{\ *\ to\ TS\_wait,\ and\ signal\ \_cv\_done.\ \ See\ examples\ in\ the\ code,\ e.g.}}
\DoxyCodeLine{00268\ \textcolor{comment}{\ *\ open\_windows(),\ for\ more\ details\ on\ this\ process.}}
\DoxyCodeLine{00269\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ It\ is\ of\ course\ not\ necessary\ to\ signal\ any\ threads\ in\ order\ to\ perform}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{//\ tasks\ listed\ in\ the\ \_app\ WindowRenderer.\ \ For\ this\ object\ only,\ we\ simply}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ call\ the\ appropriate\ methods\ on\ \_app\ when\ we\ want\ the\ tasks\ to\ be}}
\DoxyCodeLine{00274\ \ \ \textcolor{comment}{//\ performed.}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \textcolor{keyword}{class\ }WindowRenderer\ \{}
\DoxyCodeLine{00277\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00278\ \ \ \ \ WindowRenderer(\textcolor{keyword}{const}\ std::string\ \&name);}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordtype}{void}\ add\_gsg(\mbox{\hyperlink{classGraphicsStateGuardian}{GraphicsStateGuardian}}\ *gsg);}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordtype}{void}\ add\_window(\mbox{\hyperlink{classov__set}{Windows}}\ \&wlist,\ \mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window);}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{void}\ remove\_window(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}}\ *window);}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordtype}{void}\ resort\_windows();}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_frame(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_windows(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_ready\_flip(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_flip(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_release(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_close(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{void}\ do\_pending(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread);}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{bool}\ any\_done\_gsgs()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_cull;\ \ \ \ \textcolor{comment}{//\ cull\ stage}}
\DoxyCodeLine{00295\ \ \ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_cdraw;\ \ \ \textcolor{comment}{//\ cull-\/and-\/draw-\/together\ stage}}
\DoxyCodeLine{00296\ \ \ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_draw;\ \ \ \ \textcolor{comment}{//\ draw\ stage}}
\DoxyCodeLine{00297\ \ \ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_window;\ \ \textcolor{comment}{//\ window\ stage,\ i.e.\ process\ windowing\ events}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{comment}{//\ These\ are\ not\ kept\ sorted.}}
\DoxyCodeLine{00300\ \ \ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_pending\_close;\ \ \ \ \textcolor{comment}{//\ moved\ from\ \_window,\ pending\ close.}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \mbox{\hyperlink{classpset}{GSGs}}\ \_gsgs;\ \ \ \ \ \ \ \textcolor{comment}{//\ draw\ stage}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \mbox{\hyperlink{classLightReMutex}{LightReMutex}}\ \_wl\_lock;}
\DoxyCodeLine{00305\ \ \ \};}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \textcolor{keyword}{class\ }RenderThread\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classThread}{Thread}},\ \textcolor{keyword}{public}\ WindowRenderer\ \{}
\DoxyCodeLine{00308\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00309\ \ \ \ \ RenderThread(\textcolor{keyword}{const}\ std::string\ \&name,\ \mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *engine);}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ thread\_main();}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}\ Callback(RenderThread\ *thread);}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keywordtype}{void}\ run\_on\_thread(Callback\ *callback,}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *callback\_data\ =\ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *return\_data\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\#ifndef\ CPPPARSER}}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Callable>}
\DoxyCodeLine{00319\ \ \ \ \ INLINE\ \textcolor{keyword}{auto}\ run\_on\_thread(Callable\ \&\&callable)\ -\/>}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<!std::is\_void<\textcolor{keyword}{decltype}(callable())>::value,\ \textcolor{keyword}{decltype}(callable())>::type;}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Callable>}
\DoxyCodeLine{00323\ \ \ \ \ INLINE\ \textcolor{keyword}{auto}\ run\_on\_thread(Callable\ \&\&callable)\ -\/>}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_void<\textcolor{keyword}{decltype}(callable())>::value,\ \textcolor{keyword}{decltype}(callable())>::type;}
\DoxyCodeLine{00325\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}}\ *\_engine;}
\DoxyCodeLine{00328\ \ \ \ \ \mbox{\hyperlink{classMutex}{Mutex}}\ \_cv\_mutex;}
\DoxyCodeLine{00329\ \ \ \ \ \mbox{\hyperlink{classConditionVar}{ConditionVar}}\ \_cv\_start;}
\DoxyCodeLine{00330\ \ \ \ \ \mbox{\hyperlink{classConditionVar}{ConditionVar}}\ \_cv\_done;}
\DoxyCodeLine{00331\ \ \ \ \ ThreadState\ \_thread\_state;}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{comment}{//\ Used\ for\ TS\_callback.}}
\DoxyCodeLine{00334\ \ \ \ \ Callback\ *\_callback;}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordtype}{void}\ *\_callback\_data;}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{void}\ *\_return\_data;}
\DoxyCodeLine{00337\ \ \ \};}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ WindowRenderer\ *get\_window\_renderer(\textcolor{keyword}{const}\ std::string\ \&name,\ \textcolor{keywordtype}{int}\ pipeline\_stage);}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \mbox{\hyperlink{classPipeline}{Pipeline}}\ *\_pipeline;}
\DoxyCodeLine{00342\ \ \ \mbox{\hyperlink{classClockObject}{ClockObject}}\ *\textcolor{keyword}{const}\ \_clock;}
\DoxyCodeLine{00343\ \ \ \mbox{\hyperlink{classov__set}{Windows}}\ \_windows;}
\DoxyCodeLine{00344\ \ \ \textcolor{keywordtype}{bool}\ \_windows\_sorted;}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \textcolor{comment}{//\ This\ lock\ protects\ the\ next\ two\ fields.}}
\DoxyCodeLine{00347\ \ \ \mbox{\hyperlink{classMutex}{Mutex}}\ \_new\_windows\_lock;}
\DoxyCodeLine{00348\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \_window\_sort\_index;}
\DoxyCodeLine{00349\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classsmall__vector}{small\_vector}}<PT(\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}})>\ \mbox{\hyperlink{classsmall__vector}{NewWindows}};}
\DoxyCodeLine{00350\ \ \ \mbox{\hyperlink{classsmall__vector}{NewWindows}}\ \_new\_windows;}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ WindowRenderer\ \_app;}
\DoxyCodeLine{00353\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap}}<std::string,\ PT(RenderThread)\ >\ \mbox{\hyperlink{classpmap}{Threads}};}
\DoxyCodeLine{00354\ \ \ \mbox{\hyperlink{classpmap}{Threads}}\ \_threads;}
\DoxyCodeLine{00355\ \ \ \mbox{\hyperlink{classGraphicsThreadingModel}{GraphicsThreadingModel}}\ \_threading\_model;}
\DoxyCodeLine{00356\ \ \ \textcolor{keywordtype}{bool}\ \_auto\_flip;}
\DoxyCodeLine{00357\ \ \ \textcolor{keywordtype}{bool}\ \_portal\_enabled;\ \textcolor{comment}{//toggle\ to\ portal\ culling\ on/off}}
\DoxyCodeLine{00358\ \ \ PT(\mbox{\hyperlink{classLoader}{Loader}})\ \_default\_loader;}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \textcolor{keyword}{enum}\ FlipState\ \{}
\DoxyCodeLine{00361\ \ \ \ \ FS\_draw,\ \ \textcolor{comment}{//\ Still\ drawing.}}
\DoxyCodeLine{00362\ \ \ \ \ FS\_sync,\ \ \textcolor{comment}{//\ All\ windows\ are\ done\ drawing.}}
\DoxyCodeLine{00363\ \ \ \ \ FS\_flip,\ \ \textcolor{comment}{//\ All\ windows\ are\ done\ drawing\ and\ have\ flipped.}}
\DoxyCodeLine{00364\ \ \ \};}
\DoxyCodeLine{00365\ \ \ FlipState\ \_flip\_state;}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \textcolor{keywordtype}{bool}\ \_singular\_warning\_last\_frame;}
\DoxyCodeLine{00368\ \ \ \textcolor{keywordtype}{bool}\ \_singular\_warning\_this\_frame;}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \mbox{\hyperlink{classReMutex}{ReMutex}}\ \_lock;}
\DoxyCodeLine{00371\ \ \ \mbox{\hyperlink{classReMutex}{ReMutex}}\ \_public\_lock;}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \textcolor{keyword}{class\ }LoadedTexture\ \{}
\DoxyCodeLine{00374\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00375\ \ \ \ \ PT(\mbox{\hyperlink{classTexture}{Texture}})\ \_tex;}
\DoxyCodeLine{00376\ \ \ \ \ \mbox{\hyperlink{classUpdateSeq}{UpdateSeq}}\ \_image\_modified;}
\DoxyCodeLine{00377\ \ \ \};}
\DoxyCodeLine{00378\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<LoadedTexture>}}\ \mbox{\hyperlink{classpvector}{LoadedTextures}};}
\DoxyCodeLine{00379\ \ \ \mbox{\hyperlink{classpvector}{LoadedTextures}}\ \_loaded\_textures;}
\DoxyCodeLine{00380\ \ \ \mbox{\hyperlink{classMutex}{Mutex}}\ \_loaded\_textures\_lock;}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \textcolor{keyword}{static}\ PT(\mbox{\hyperlink{classGraphicsEngine}{GraphicsEngine}})\ \_global\_ptr;}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_wait\_pcollector;}
\DoxyCodeLine{00385\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cycle\_pcollector;}
\DoxyCodeLine{00386\ \ \ \textcolor{comment}{//static\ PStatCollector\ \_app\_pcollector;}}
\DoxyCodeLine{00387\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_render\_frame\_pcollector;}
\DoxyCodeLine{00388\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_yield\_pcollector;}
\DoxyCodeLine{00389\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cull\_pcollector;}
\DoxyCodeLine{00390\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cull\_setup\_pcollector;}
\DoxyCodeLine{00391\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cull\_sort\_pcollector;}
\DoxyCodeLine{00392\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_draw\_pcollector;}
\DoxyCodeLine{00393\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_sync\_pcollector;}
\DoxyCodeLine{00394\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_flip\_pcollector;}
\DoxyCodeLine{00395\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_states\_pcollector;}
\DoxyCodeLine{00396\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_transform\_states\_unused\_pcollector;}
\DoxyCodeLine{00397\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_render\_states\_pcollector;}
\DoxyCodeLine{00398\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_render\_states\_unused\_pcollector;}
\DoxyCodeLine{00399\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cyclers\_pcollector;}
\DoxyCodeLine{00400\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_dirty\_cyclers\_pcollector;}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_sw\_sprites\_pcollector;}
\DoxyCodeLine{00403\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_small\_pcollector;}
\DoxyCodeLine{00404\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_independent\_pcollector;}
\DoxyCodeLine{00405\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_pending\_pcollector;}
\DoxyCodeLine{00406\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_resident\_pcollector;}
\DoxyCodeLine{00407\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_compressed\_pcollector;}
\DoxyCodeLine{00408\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_used\_disk\_pcollector;}
\DoxyCodeLine{00409\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_vertex\_data\_unused\_disk\_pcollector;}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_cnode\_volume\_pcollector;}
\DoxyCodeLine{00412\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_gnode\_volume\_pcollector;}
\DoxyCodeLine{00413\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_geom\_volume\_pcollector;}
\DoxyCodeLine{00414\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_node\_volume\_pcollector;}
\DoxyCodeLine{00415\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_pcollector;}
\DoxyCodeLine{00416\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_pcollector;}
\DoxyCodeLine{00417\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_polygon\_pcollector;}
\DoxyCodeLine{00418\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_polygon\_pcollector;}
\DoxyCodeLine{00419\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_plane\_pcollector;}
\DoxyCodeLine{00420\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_plane\_pcollector;}
\DoxyCodeLine{00421\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_sphere\_pcollector;}
\DoxyCodeLine{00422\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_sphere\_pcollector;}
\DoxyCodeLine{00423\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_box\_pcollector;}
\DoxyCodeLine{00424\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_box\_pcollector;}
\DoxyCodeLine{00425\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_capsule\_pcollector;}
\DoxyCodeLine{00426\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_capsule\_pcollector;}
\DoxyCodeLine{00427\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_inv\_sphere\_pcollector;}
\DoxyCodeLine{00428\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_inv\_sphere\_pcollector;}
\DoxyCodeLine{00429\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_volume\_geom\_pcollector;}
\DoxyCodeLine{00430\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_test\_geom\_pcollector;}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_occlusion\_untested\_pcollector;}
\DoxyCodeLine{00433\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_occlusion\_passed\_pcollector;}
\DoxyCodeLine{00434\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_occlusion\_failed\_pcollector;}
\DoxyCodeLine{00435\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classPStatCollector}{PStatCollector}}\ \_occlusion\_tests\_pcollector;}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }WindowRenderer;}
\DoxyCodeLine{00438\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classGraphicsOutput}{GraphicsOutput}};}
\DoxyCodeLine{00439\ \};}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#include\ "{}graphicsEngine.I"{}}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

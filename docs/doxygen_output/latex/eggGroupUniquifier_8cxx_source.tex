\doxysection{egg\+Group\+Uniquifier.\+cxx}
\hypertarget{eggGroupUniquifier_8cxx_source}{}\label{eggGroupUniquifier_8cxx_source}\index{panda/src/egg/eggGroupUniquifier.cxx@{panda/src/egg/eggGroupUniquifier.cxx}}
\mbox{\hyperlink{eggGroupUniquifier_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggGroupUniquifier_8h}{eggGroupUniquifier.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{eggGroup_8h}{eggGroup.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnotify_8h}{pnotify.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <ctype.h>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ EggGroupUniquifier::\_type\_handle;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00032\ EggGroupUniquifier::}
\DoxyCodeLine{00033\ EggGroupUniquifier(\textcolor{keywordtype}{bool}\ filter\_names)}
\DoxyCodeLine{00034\ \ \ :\ \_filter\_names(filter\_names)}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00042\ \textcolor{keywordtype}{string}\ EggGroupUniquifier::}
\DoxyCodeLine{00043\ get\_category(\mbox{\hyperlink{classEggNode}{EggNode}}\ *node)\ \{}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordflow}{if}\ (node-\/>is\_of\_type(EggGroup::get\_class\_type())\ \&\&\ node-\/>has\_name())\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}group"{}};}
\DoxyCodeLine{00046\ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{keywordflow}{return}\ string();}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00056\ \textcolor{keywordtype}{string}\ EggGroupUniquifier::}
\DoxyCodeLine{00057\ filter\_name(\mbox{\hyperlink{classEggNode}{EggNode}}\ *node)\ \{}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{string}\ name\ =\ node-\/>get\_name();}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{if}\ (!\_filter\_names)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{return}\ name;}
\DoxyCodeLine{00061\ \ \ \}}
\DoxyCodeLine{00062\ \ \ nassertr(!name.empty(),\ \textcolor{keywordtype}{string}());}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keywordtype}{string}\ result;}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ First,\ replace\ characters\ not\ A-\/Z,\ a-\/z,\ 0-\/9,\ or\ '\_'\ with\ underscore,\ and}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ remove\ consecutive\ underscores.}}
\DoxyCodeLine{00068\ \ \ string::const\_iterator\ pi;}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{bool}\ last\_underscore\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ name.begin();\ pi\ !=\ name.end();\ ++pi)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{if}\ (isalnum(*pi))\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ result\ +=\ *pi;}
\DoxyCodeLine{00073\ \ \ \ \ \ \ last\_underscore\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!last\_underscore)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ result\ +=\ \textcolor{charliteral}{'\_'};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ last\_underscore\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ Next,\ ensure\ the\ name\ does\ not\ begin\ with\ a\ digit.}}
\DoxyCodeLine{00082\ \ \ nassertr(!result.empty(),\ \textcolor{keywordtype}{string}());}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{if}\ (isdigit(result[0]))\ \{}
\DoxyCodeLine{00084\ \ \ \ \ result\ =\ \textcolor{stringliteral}{"{}\_"{}}\ +\ result;}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00098\ \textcolor{keywordtype}{string}\ EggGroupUniquifier::}
\DoxyCodeLine{00099\ generate\_name(\mbox{\hyperlink{classEggNode}{EggNode}}\ *node,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&category,\ \textcolor{keywordtype}{int}\ index)\ \{}
\DoxyCodeLine{00100\ \ \ \mbox{\hyperlink{classstd_1_1ostringstream}{std::ostringstream}}\ str;}
\DoxyCodeLine{00101\ \ \ str\ <<\ node-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}\_group"{}}\ <<\ index;}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ str.str();}
\DoxyCodeLine{00103\ \}}

\end{DoxyCode}

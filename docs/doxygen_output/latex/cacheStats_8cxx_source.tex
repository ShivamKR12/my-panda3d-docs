\doxysection{cache\+Stats.\+cxx}
\hypertarget{cacheStats_8cxx_source}{}\label{cacheStats_8cxx_source}\index{panda/src/pgraph/cacheStats.cxx@{panda/src/pgraph/cacheStats.cxx}}
\mbox{\hyperlink{cacheStats_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cacheStats_8h}{cacheStats.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00021\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classCacheStats_a567e98bb81a76df7dfb0f596c2587855}{CacheStats::}}}
\DoxyCodeLine{00022\ \mbox{\hyperlink{classCacheStats_a567e98bb81a76df7dfb0f596c2587855}{init}}()\ \{}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00024\ \ \ \textcolor{comment}{//\ Let's\ not\ use\ the\ clock\ at\ static\ init\ time.}}
\DoxyCodeLine{00025\ \ \ \textcolor{comment}{//reset(ClockObject::get\_global\_clock()-\/>get\_real\_time());}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \_cache\_report\ =\ \mbox{\hyperlink{classConfigVariableBool}{ConfigVariableBool}}(\textcolor{stringliteral}{"{}cache-\/report"{}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00028\ \ \ \_cache\_report\_interval\ =\ \mbox{\hyperlink{classConfigVariableDouble}{ConfigVariableDouble}}(\textcolor{stringliteral}{"{}cache-\/report-\/interval"{}},\ 5.0);}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00036\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classCacheStats_a00b65dc3917fc4766c8efbb80676fd5f}{CacheStats::}}}
\DoxyCodeLine{00037\ \mbox{\hyperlink{classCacheStats_a00b65dc3917fc4766c8efbb80676fd5f}{reset}}(\textcolor{keywordtype}{double}\ now)\ \{}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00039\ \ \ \_cache\_hits\ =\ 0;}
\DoxyCodeLine{00040\ \ \ \_cache\_misses\ =\ 0;}
\DoxyCodeLine{00041\ \ \ \_cache\_adds\ =\ 0;}
\DoxyCodeLine{00042\ \ \ \_cache\_new\_adds\ =\ 0;}
\DoxyCodeLine{00043\ \ \ \_cache\_dels\ =\ 0;}
\DoxyCodeLine{00044\ \ \ \_last\_reset\ =\ now;}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ \textcolor{keywordtype}{void}\ CacheStats::}
\DoxyCodeLine{00052\ write(std::ostream\ \&out,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#ifndef\ NDEBUG}}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{int}\ num\_states\ =\ \_num\_states.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{00055\ \ \ out\ <<\ name\ <<\ \textcolor{stringliteral}{"{}\ cache:\ "{}}\ <<\ \_cache\_hits\ <<\ \textcolor{stringliteral}{"{}\ hits,\ "{}}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ <<\ \_cache\_misses\ <<\ \textcolor{stringliteral}{"{}\ misses\(\backslash\)n"{}}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ <<\ \_cache\_adds\ +\ \_cache\_new\_adds\ <<\ \textcolor{stringliteral}{"{}("{}}\ <<\ \_cache\_new\_adds\ <<\ \textcolor{stringliteral}{"{})\ adds(new),\ "{}}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ <<\ \_cache\_dels\ <<\ \textcolor{stringliteral}{"{}\ dels,\ "{}}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ <<\ \_total\_cache\_size\ <<\ \textcolor{stringliteral}{"{}\ /\ "{}}\ <<\ num\_states\ <<\ \textcolor{stringliteral}{"{}\ =\ "{}}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ <<\ (double)\_total\_cache\_size\ /\ (\textcolor{keywordtype}{double})num\_states}
\DoxyCodeLine{00061\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ average\ cache\ size\(\backslash\)n"{}};}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ NDEBUG}}
\DoxyCodeLine{00063\ \}}

\end{DoxyCode}

\doxysection{dxf\+File.\+h}
\hypertarget{dxfFile_8h_source}{}\label{dxfFile_8h_source}\index{pandatool/src/dxf/dxfFile.h@{pandatool/src/dxf/dxfFile.h}}
\mbox{\hyperlink{dxfFile_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ DXFFILE\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ DXFFILE\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandatoolbase_8h}{pandatoolbase.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dxfLayer_8h}{dxfLayer.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dxfLayerMap_8h}{dxfLayerMap.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dxfVertex_8h}{dxfVertex.h}}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{luse_8h}{luse.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{filename_8h}{filename.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ DXF\_max\_line\ =\ 256;}
\DoxyCodeLine{00028\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ DXF\_num\_colors\ =\ 256;}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classDXFFile}{DXFFile}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classMemoryBase}{MemoryBase}}\ \{}
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{classDXFFile}{DXFFile}}();}
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classDXFFile}{\string~DXFFile}}();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a0f24f1d170b0e9c3fe098a398eddb305}{process}}(\mbox{\hyperlink{classFilename}{Filename}}\ filename);}
\DoxyCodeLine{00041\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a0f24f1d170b0e9c3fe098a398eddb305}{process}}(std::istream\ *in,\ \textcolor{keywordtype}{bool}\ owns\_in);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ These\ functions\ are\ called\ as\ the\ file\ is\ processed.\ \ These\ are\ the\ main}}
\DoxyCodeLine{00044\ \ \ \textcolor{comment}{//\ hooks\ for\ redefining\ how\ the\ class\ should\ dispense\ its\ data.\ \ As\ each}}
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ function\ is\ called,\ the\ state\ stored\ in\ the\ DXFFile\ class\ reflects\ the}}
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ data\ that\ was\ most\ recently\ read.}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a53a89c32cf9113733b1b234a4e69a55f}{begin\_file}}();}
\DoxyCodeLine{00049\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a435c9ac1fcc55909e1d8875746fe96fb}{begin\_section}}();}
\DoxyCodeLine{00050\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_aa400dc5c90537e57b34d97729a43b03d}{done\_vertex}}();}
\DoxyCodeLine{00051\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a0332ce3ff2b691c5a474e8d6a7ef15f8}{done\_entity}}();}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a5ddd657d9efe686f94fc601b703dfe4b}{end\_section}}();}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a06371f67be6376191f1da90351ede42f}{end\_file}}();}
\DoxyCodeLine{00054\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a4adeb9f3ec3aa4bfed0b8d6e408f4ddb}{error}}();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{comment}{//\ new\_layer()\ is\ called\ whenever\ the\ DXFFile\ class\ encounters\ a\ new\ Layer}}
\DoxyCodeLine{00057\ \ \ \textcolor{comment}{//\ definition,\ and\ must\ allocate\ a\ DXFLayer\ instance.\ \ This\ function\ is}}
\DoxyCodeLine{00058\ \ \ \textcolor{comment}{//\ provided\ so\ that\ user\ code\ may\ force\ allocate\ of\ a\ specialized\ DXFLayer}}
\DoxyCodeLine{00059\ \ \ \textcolor{comment}{//\ instance\ instead.}}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classDXFLayer}{DXFLayer}}\ *new\_layer(\textcolor{keyword}{const}\ std::string\ \&name)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classDXFLayer}{DXFLayer}}(name);}
\DoxyCodeLine{00062\ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keyword}{enum}\ State\ \{}
\DoxyCodeLine{00065\ \ \ \ \ ST\_top,}
\DoxyCodeLine{00066\ \ \ \ \ ST\_section,}
\DoxyCodeLine{00067\ \ \ \ \ ST\_entity,}
\DoxyCodeLine{00068\ \ \ \ \ ST\_verts,}
\DoxyCodeLine{00069\ \ \ \ \ ST\_error,}
\DoxyCodeLine{00070\ \ \ \ \ ST\_done,}
\DoxyCodeLine{00071\ \ \ \};}
\DoxyCodeLine{00072\ \ \ \textcolor{keyword}{enum}\ Section\ \{}
\DoxyCodeLine{00073\ \ \ \ \ SE\_unknown,}
\DoxyCodeLine{00074\ \ \ \ \ SE\_header,}
\DoxyCodeLine{00075\ \ \ \ \ SE\_tables,}
\DoxyCodeLine{00076\ \ \ \ \ SE\_blocks,}
\DoxyCodeLine{00077\ \ \ \ \ SE\_entities,}
\DoxyCodeLine{00078\ \ \ \ \ SE\_objects,}
\DoxyCodeLine{00079\ \ \ \};}
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{enum}\ Entity\ \{}
\DoxyCodeLine{00081\ \ \ \ \ EN\_unknown,}
\DoxyCodeLine{00082\ \ \ \ \ EN\_3dface,}
\DoxyCodeLine{00083\ \ \ \ \ EN\_point,}
\DoxyCodeLine{00084\ \ \ \ \ EN\_insert,}
\DoxyCodeLine{00085\ \ \ \ \ EN\_vertex,}
\DoxyCodeLine{00086\ \ \ \ \ EN\_polyline,}
\DoxyCodeLine{00087\ \ \ \};}
\DoxyCodeLine{00088\ \ \ \textcolor{keyword}{enum}\ PolylineFlags\ \{}
\DoxyCodeLine{00089\ \ \ \ \ PF\_closed\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x01,}
\DoxyCodeLine{00090\ \ \ \ \ PF\_curve\_fit\ \ \ \ \ \ \ \ \ \ \ =\ 0x02,}
\DoxyCodeLine{00091\ \ \ \ \ PF\_spline\_fit\ \ \ \ \ \ \ \ \ \ =\ 0x04,}
\DoxyCodeLine{00092\ \ \ \ \ PF\_3d\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x08,}
\DoxyCodeLine{00093\ \ \ \ \ PF\_3d\_mesh\ \ \ \ \ \ \ \ \ \ \ \ \ =\ 0x10,}
\DoxyCodeLine{00094\ \ \ \ \ PF\_closed\_n\ \ \ \ \ \ \ \ \ \ \ \ =\ 0x20,}
\DoxyCodeLine{00095\ \ \ \ \ PF\_polyface\ \ \ \ \ \ \ \ \ \ \ \ =\ 0x40,}
\DoxyCodeLine{00096\ \ \ \ \ PF\_continuous\_linetype\ =\ 0x80,}
\DoxyCodeLine{00097\ \ \ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{//\ This\ is\ a\ table\ of\ standard\ Autocad\ colors.\ \ DXF\ files\ can\ store\ only\ a}}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ limited\ range\ of\ colors;\ specifically,\ the\ 255\ colors\ defined\ by\ Autocad.}}
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structDXFFile_1_1Color}{Color}}\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{double}\ r,\ g,\ b;}
\DoxyCodeLine{00103\ \ \ \};}
\DoxyCodeLine{00104\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structDXFFile_1_1Color}{Color}}\ \_colors[DXF\_num\_colors];}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{comment}{//\ find\_color()\ returns\ the\ index\ of\ the\ closest\ matching\ AutoCAD\ color\ to}}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{//\ the\ indicated\ r,\ g,\ b.}}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classDXFFile_a3fc598f4732c0d2a4dcf11f3327e2c8f}{find\_color}}(\textcolor{keywordtype}{double}\ r,\ \textcolor{keywordtype}{double}\ g,\ \textcolor{keywordtype}{double}\ b);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{//\ get\_color()\ returns\ the\ r,g,b\ of\ the\ current\ entity.\ \ It\ is\ valid\ at\ the}}
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{//\ time\ done\_entity()\ is\ called.}}
\DoxyCodeLine{00112\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structDXFFile_1_1Color}{Color}}\ \&\mbox{\hyperlink{classDXFFile_aa1c78005bb317791dbf3c3136245dddc}{get\_color}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ Some\ entities\ are\ defined\ in\ world\ coordinates,\ in\ 3-\/d\ space;\ other}}
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{//\ entities\ are\ inherently\ 2-\/d\ in\ nature\ and\ are\ defined\ in\ planar}}
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{//\ coordinates\ and\ must\ be\ converted\ to\ 3-\/d\ space.\ \ Call\ this\ function\ from}}
\DoxyCodeLine{00117\ \ \ \textcolor{comment}{//\ done\_entity()\ to\ convert\ a\ 2-\/d\ entity\ to\ 3-\/d\ world\ coordinates.}}
\DoxyCodeLine{00118\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a4a1dc13c9ae42eb8be09ab075e70e42b}{ocs\_2\_wcs}}();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ These\ members\ indicate\ the\ current\ state\ and\ describe\ properties\ of\ the}}
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ current\ thing\ being\ processed.\ \ They\ are\ valid\ at\ done\_entity(),\ and\ at}}
\DoxyCodeLine{00122\ \ \ \textcolor{comment}{//\ other\ times.}}
\DoxyCodeLine{00123\ \ \ \textcolor{keywordtype}{int}\ \_flags;}
\DoxyCodeLine{00124\ \ \ Section\ \_section;}
\DoxyCodeLine{00125\ \ \ Entity\ \_entity;}
\DoxyCodeLine{00126\ \ \ LPoint3d\ \_p,\ \_q,\ \_r,\ \_s;}
\DoxyCodeLine{00127\ \ \ LVector3d\ \_z;}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordtype}{int}\ \_color\_index;}
\DoxyCodeLine{00129\ \ \ \mbox{\hyperlink{classDXFLayer}{DXFLayer}}\ *\_layer;}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{//\ \_verts\ is\ the\ list\ of\ vertices\ associated\ with\ the\ current\ entity.\ \ It\ is}}
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ valid\ at\ the\ time\ done\_entity()\ is\ called.}}
\DoxyCodeLine{00133\ \ \ \mbox{\hyperlink{classpvector}{DXFVertices}}\ \_verts;}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{comment}{//\ This\ is\ the\ set\ of\ layers\ encountered\ within\ the\ DXF\ file.}}
\DoxyCodeLine{00136\ \ \ \mbox{\hyperlink{classDXFLayerMap}{DXFLayerMap}}\ \_layers;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00139\ \ \ State\ \_state;}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{bool}\ \_vertices\_follow;}
\DoxyCodeLine{00141\ \ \ LMatrix4d\ \_ocs2wcs;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ std::istream\ *\_in;}
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{bool}\ \_owns\_in;}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \textcolor{keywordtype}{int}\ \_code;}
\DoxyCodeLine{00147\ \ \ std::string\ \_string;}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_ae9359fca0d8d67231a30f8b8bc5afcb9}{compute\_ocs}}();}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classDXFFile_a85d252fde64ec45eb99972b79583dfb6}{get\_group}}();}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a40f267d938e1a0e96254b97750f7e842}{change\_state}}(State\ new\_state);}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordtype}{void}\ change\_section(Section\ new\_section);}
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a01720779b02719fb6e3d248f455b55a0}{change\_layer}}(\textcolor{keyword}{const}\ std::string\ \&layer\_name);}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordtype}{void}\ change\_entity(Entity\ new\_entity);}
\DoxyCodeLine{00156\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_af49f96c9f1bfa71e5d2e9a204b2ce976}{reset\_entity}}();}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a8de97fa68da93bf769ecab0ac3f72844}{state\_top}}();}
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a97fa1ca5af8c57515b91d537e79e9c03}{state\_section}}();}
\DoxyCodeLine{00160\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_a28ea5b34cba27f5a922a8373347324d4}{state\_entity}}();}
\DoxyCodeLine{00161\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classDXFFile_aebc4132948226543fb1f76bc9efa4d60}{state\_verts}}();}
\DoxyCodeLine{00162\ \};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ DXFFile::State\ \&state);}
\DoxyCodeLine{00165\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ DXFFile::Section\ \&section);}
\DoxyCodeLine{00166\ std::ostream\ \&operator\ <<\ (std::ostream\ \&out,\ \textcolor{keyword}{const}\ DXFFile::Entity\ \&entity);}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

\doxysection{palette\+Group.\+cxx}
\hypertarget{paletteGroup_8cxx_source}{}\label{paletteGroup_8cxx_source}\index{pandatool/src/palettizer/paletteGroup.cxx@{pandatool/src/palettizer/paletteGroup.cxx}}
\mbox{\hyperlink{paletteGroup_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{paletteGroup_8h}{paletteGroup.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{palettePage_8h}{palettePage.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{texturePlacement_8h}{texturePlacement.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textureImage_8h}{textureImage.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{palettizer_8h}{palettizer.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{paletteImage_8h}{paletteImage.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sourceTextureImage_8h}{sourceTextureImage.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagram_8h}{datagram.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{datagramIterator_8h}{datagramIterator.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamReader_8h}{bamReader.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bamWriter_8h}{bamWriter.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indirectCompareNames_8h}{indirectCompareNames.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pvector_8h}{pvector.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ PaletteGroup::\_type\_handle;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00037\ PaletteGroup::}
\DoxyCodeLine{00038\ PaletteGroup()\ \{}
\DoxyCodeLine{00039\ \ \ \_egg\_count\ =\ 0;}
\DoxyCodeLine{00040\ \ \ \_dependency\_level\ =\ 0;}
\DoxyCodeLine{00041\ \ \ \_dependency\_order\ =\ 0;}
\DoxyCodeLine{00042\ \ \ \_dirname\_order\ =\ 0;}
\DoxyCodeLine{00043\ \ \ \_has\_margin\_override\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00044\ \ \ \_margin\_override\ =\ 0;}
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00052\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a32736741f151211df121a6f759c340d6}{PaletteGroup::}}}
\DoxyCodeLine{00053\ \mbox{\hyperlink{classPaletteGroup_a32736741f151211df121a6f759c340d6}{set\_dirname}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&dirname)\ \{}
\DoxyCodeLine{00054\ \ \ \_dirname\ =\ dirname;}
\DoxyCodeLine{00055\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00061\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteGroup_a100db1d83a121f87dd4fb96bcfa4bbcd}{PaletteGroup::}}}
\DoxyCodeLine{00062\ \mbox{\hyperlink{classPaletteGroup_a100db1d83a121f87dd4fb96bcfa4bbcd}{has\_dirname}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00063\ \ \ \textcolor{keywordflow}{return}\ !\_dirname.empty();}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00070\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&\mbox{\hyperlink{classPaletteGroup_ad8ab7c68017f1f70d08319f76146ef9d}{PaletteGroup::}}}
\DoxyCodeLine{00071\ \mbox{\hyperlink{classPaletteGroup_ad8ab7c68017f1f70d08319f76146ef9d}{get\_dirname}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{return}\ \_dirname;}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00078\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_ab4718e8fb0368ba69dcbfdfd0ab5d388}{PaletteGroup::}}}
\DoxyCodeLine{00079\ \mbox{\hyperlink{classPaletteGroup_ab4718e8fb0368ba69dcbfdfd0ab5d388}{clear\_depends}}()\ \{}
\DoxyCodeLine{00080\ \ \ \_dependent.\mbox{\hyperlink{classPaletteGroups_a9ff41e691d84088d3a7af8a2917c5a15}{clear}}();}
\DoxyCodeLine{00081\ \ \ \_dependency\_level\ =\ 0;}
\DoxyCodeLine{00082\ \ \ \_dependency\_order\ =\ 0;}
\DoxyCodeLine{00083\ \ \ \_dirname\_order\ =\ 0;}
\DoxyCodeLine{00084\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00093\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a504fcff6a262970e542248c56d98fe78}{PaletteGroup::}}}
\DoxyCodeLine{00094\ \mbox{\hyperlink{classPaletteGroup_a504fcff6a262970e542248c56d98fe78}{group\_with}}(\mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *other)\ \{}
\DoxyCodeLine{00095\ \ \ \_dependent.\mbox{\hyperlink{classPaletteGroups_a88efb11784c854b3f126d57cdacef6c0}{insert}}(other);}
\DoxyCodeLine{00096\ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPaletteGroups}{PaletteGroups}}\ \&\mbox{\hyperlink{classPaletteGroup_a188c846d063e976f3dd1c022eae40e0b}{PaletteGroup::}}}
\DoxyCodeLine{00102\ \mbox{\hyperlink{classPaletteGroup_a188c846d063e976f3dd1c022eae40e0b}{get\_groups}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{return}\ \_dependent;}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_a5facbd5ce79b6598b8721c77ae74493f}{PaletteGroup::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classPaletteGroup_a5facbd5ce79b6598b8721c77ae74493f}{get\_margin\_override}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00111\ \ \ \textcolor{keywordflow}{return}\ \_margin\_override;}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_af0930a259e5f649255b0d6a2c34288b0}{PaletteGroup::}}}
\DoxyCodeLine{00118\ \mbox{\hyperlink{classPaletteGroup_af0930a259e5f649255b0d6a2c34288b0}{set\_margin\_override}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{override})\ \{}
\DoxyCodeLine{00119\ \ \ \_margin\_override\ =\ \textcolor{keyword}{override};}
\DoxyCodeLine{00120\ \ \ \_has\_margin\_override\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00126\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteGroup_af9b810d43d4f82451d27610b7c0d1e14}{PaletteGroup::}}}
\DoxyCodeLine{00127\ \mbox{\hyperlink{classPaletteGroup_af9b810d43d4f82451d27610b7c0d1e14}{has\_margin\_override}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{return}\ \_has\_margin\_override;}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00137\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a0aa610d50eebb3bd02acd211d7ed1310}{PaletteGroup::}}}
\DoxyCodeLine{00138\ \mbox{\hyperlink{classPaletteGroup_a0aa610d50eebb3bd02acd211d7ed1310}{get\_placements}}(\mbox{\hyperlink{classpvector}{pvector<TexturePlacement\ *>}}\ \&placements)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00139\ \ \ Placements::const\_iterator\ pi;}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ \_placements.begin();\ pi\ !=\ \_placements.end();\ ++pi)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ placements.push\_back(*pi);}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00149\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a9898c3ed7726c62807bbece9632fcb34}{PaletteGroup::}}}
\DoxyCodeLine{00150\ \mbox{\hyperlink{classPaletteGroup_a9898c3ed7726c62807bbece9632fcb34}{get\_complete\_placements}}(\mbox{\hyperlink{classpvector}{pvector<TexturePlacement\ *>}}\ \&placements)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00151\ \ \ \mbox{\hyperlink{classPaletteGroups}{PaletteGroups}}\ complete;}
\DoxyCodeLine{00152\ \ \ complete.\mbox{\hyperlink{classPaletteGroups_a37219a20a5f21b9914db1c9408c64e7e}{make\_complete}}(\_dependent);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ PaletteGroups::iterator\ gi;}
\DoxyCodeLine{00155\ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ complete.\mbox{\hyperlink{classPaletteGroups_a3f71483ed35f36054579b7e276a51622}{begin}}();\ gi\ !=\ complete.\mbox{\hyperlink{classPaletteGroups_acde69e1577aec122a2359795bb9be3bd}{end}}();\ ++gi)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *group\ =\ (*gi);}
\DoxyCodeLine{00157\ \ \ \ \ group-\/>\mbox{\hyperlink{classPaletteGroup_a0aa610d50eebb3bd02acd211d7ed1310}{get\_placements}}(placements);}
\DoxyCodeLine{00158\ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classPaletteGroup_a0aa610d50eebb3bd02acd211d7ed1310}{get\_placements}}(placements);}
\DoxyCodeLine{00161\ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00168\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a07567ff2a04cbb4516793ecde031deac}{PaletteGroup::}}}
\DoxyCodeLine{00169\ \mbox{\hyperlink{classPaletteGroup_a07567ff2a04cbb4516793ecde031deac}{reset\_dependency\_level}}()\ \{}
\DoxyCodeLine{00170\ \ \ \_dependency\_level\ =\ 0;}
\DoxyCodeLine{00171\ \ \ \_dependency\_order\ =\ 0;}
\DoxyCodeLine{00172\ \ \ \_dirname\_order\ =\ 0;}
\DoxyCodeLine{00173\ \}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00183\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_ae3b5e40c97fd071711c5b4015cdf5283}{PaletteGroup::}}}
\DoxyCodeLine{00184\ \mbox{\hyperlink{classPaletteGroup_ae3b5e40c97fd071711c5b4015cdf5283}{set\_dependency\_level}}(\textcolor{keywordtype}{int}\ level)\ \{}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordflow}{if}\ (level\ >\ \_dependency\_level)\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \_dependency\_level\ =\ level;}
\DoxyCodeLine{00187\ \ \ \ \ PaletteGroups::iterator\ gi;}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ \_dependent.\mbox{\hyperlink{classPaletteGroups_a3f71483ed35f36054579b7e276a51622}{begin}}();\ gi\ !=\ \_dependent.\mbox{\hyperlink{classPaletteGroups_acde69e1577aec122a2359795bb9be3bd}{end}}();\ ++gi)\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *group\ =\ (*gi);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ group-\/>\mbox{\hyperlink{classPaletteGroup_ae3b5e40c97fd071711c5b4015cdf5283}{set\_dependency\_level}}(level\ +\ 1);}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \}}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00203\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteGroup_a7ce418b627824ff6b1c4a628b30f3c94}{PaletteGroup::}}}
\DoxyCodeLine{00204\ \mbox{\hyperlink{classPaletteGroup_a7ce418b627824ff6b1c4a628b30f3c94}{set\_dependency\_order}}()\ \{}
\DoxyCodeLine{00205\ \ \ \textcolor{keywordtype}{bool}\ any\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ PaletteGroups::iterator\ gi;}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordflow}{for}\ (gi\ =\ \_dependent.\mbox{\hyperlink{classPaletteGroups_a3f71483ed35f36054579b7e276a51622}{begin}}();\ gi\ !=\ \_dependent.\mbox{\hyperlink{classPaletteGroups_acde69e1577aec122a2359795bb9be3bd}{end}}();\ ++gi)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *group\ =\ (*gi);}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{if}\ (group-\/>set\_dependency\_order())\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_dependency\_order\ <=\ group-\/>\mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}())\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \_dependency\_order\ =\ group-\/>get\_dependency\_order()\ +\ 1;}
\DoxyCodeLine{00216\ \ \ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00217\ \ \ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_dirname\ ==\ group-\/>get\_dirname())\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ dirname\ orders\ should\ be\ equal.}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_dirname\_order\ <\ group-\/>\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}())\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \_dirname\_order\ =\ group-\/>get\_dirname\_order();}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ dirname\ orders\ should\ be\ different.}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_dirname\_order\ <=\ group-\/>\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}())\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \_dirname\_order\ =\ group-\/>get\_dirname\_order()\ +\ 1;}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ any\_changed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \textcolor{keywordflow}{return}\ any\_changed;}
\DoxyCodeLine{00235\ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00252\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_ac650444dcae21d6b2c932ccd72c9d635}{PaletteGroup::}}}
\DoxyCodeLine{00253\ \mbox{\hyperlink{classPaletteGroup_ac650444dcae21d6b2c932ccd72c9d635}{get\_dependency\_level}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{return}\ \_dependency\_level;}
\DoxyCodeLine{00255\ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00267\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{PaletteGroup::}}}
\DoxyCodeLine{00268\ \mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordflow}{return}\ \_dependency\_order;}
\DoxyCodeLine{00270\ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00281\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{PaletteGroup::}}}
\DoxyCodeLine{00282\ \mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00283\ \ \ \textcolor{keywordflow}{return}\ \_dirname\_order;}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00291\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteGroup_a4c3b0d787ca8b1f174db05075c371413}{PaletteGroup::}}}
\DoxyCodeLine{00292\ \mbox{\hyperlink{classPaletteGroup_a4c3b0d787ca8b1f174db05075c371413}{is\_preferred\_over}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ \&other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00293\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}()\ !=\ other.\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}())\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}()\ >\ other.\mbox{\hyperlink{classPaletteGroup_a5d4b146e6d13377d121ae920db1b72e2}{get\_dirname\_order}}());}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}()\ !=\ other.\mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}())\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}()\ >\ other.\mbox{\hyperlink{classPaletteGroup_acce1622aa8dc1105d22177a92117e70e}{get\_dependency\_order}}());}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classPaletteGroup_a1f6d0566b88d1c51c8384c65827d0bb9}{get\_egg\_count}}()\ <\ other.\mbox{\hyperlink{classPaletteGroup_a1f6d0566b88d1c51c8384c65827d0bb9}{get\_egg\_count}}());}
\DoxyCodeLine{00301\ \ \ \}}
\DoxyCodeLine{00302\ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00310\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a25f1fc4174d77ad2f19aad35c1246734}{PaletteGroup::}}}
\DoxyCodeLine{00311\ \mbox{\hyperlink{classPaletteGroup_a25f1fc4174d77ad2f19aad35c1246734}{increment\_egg\_count}}()\ \{}
\DoxyCodeLine{00312\ \ \ \_egg\_count++;}
\DoxyCodeLine{00313\ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00318\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_a1f6d0566b88d1c51c8384c65827d0bb9}{PaletteGroup::}}}
\DoxyCodeLine{00319\ \mbox{\hyperlink{classPaletteGroup_a1f6d0566b88d1c51c8384c65827d0bb9}{get\_egg\_count}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00320\ \ \ \textcolor{keywordflow}{return}\ \_egg\_count;}
\DoxyCodeLine{00321\ \}}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00327\ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *\mbox{\hyperlink{classPaletteGroup_ae48c061e3049e631bbbb9b067b195ba5}{PaletteGroup::}}}
\DoxyCodeLine{00328\ \mbox{\hyperlink{classPaletteGroup_ae48c061e3049e631bbbb9b067b195ba5}{get\_page}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTextureProperties}{TextureProperties}}\ \&properties)\ \{}
\DoxyCodeLine{00329\ \ \ Pages::iterator\ pi\ =\ \_pages.find(properties);}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{if}\ (pi\ !=\ \_pages.end())\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{return}\ (*pi).second;}
\DoxyCodeLine{00332\ \ \ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPalettePage}{PalettePage}}(\textcolor{keyword}{this},\ properties);}
\DoxyCodeLine{00335\ \ \ \textcolor{keywordtype}{bool}\ inserted\ =\ \_pages.insert(Pages::value\_type(properties,\ page)).second;}
\DoxyCodeLine{00336\ \ \ nassertr(inserted,\ page);}
\DoxyCodeLine{00337\ \ \ \textcolor{keywordflow}{return}\ page;}
\DoxyCodeLine{00338\ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00346\ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *\mbox{\hyperlink{classPaletteGroup_a927ef5ae3eb76b06b6ae36cf21c1cf78}{PaletteGroup::}}}
\DoxyCodeLine{00347\ \mbox{\hyperlink{classPaletteGroup_a927ef5ae3eb76b06b6ae36cf21c1cf78}{prepare}}(\mbox{\hyperlink{classTextureImage}{TextureImage}}\ *texture)\ \{}
\DoxyCodeLine{00348\ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}(texture,\ \textcolor{keyword}{this});}
\DoxyCodeLine{00349\ \ \ \_placements.insert(placement);}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \textcolor{comment}{//\ [gjeon]\ update\ swapTexture\ information}}
\DoxyCodeLine{00352\ \ \ TextureSwapInfo::iterator\ tsi\ =\ \_textureSwapInfo.find(texture-\/>get\_name());}
\DoxyCodeLine{00353\ \ \ \textcolor{keywordflow}{if}\ (tsi\ !=\ \_textureSwapInfo.end())\ \{}
\DoxyCodeLine{00354\ \ \ \ \ vector\_string\ swapTextures\ =\ (*tsi).second;}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ vector\_string::const\_iterator\ wi;}
\DoxyCodeLine{00357\ \ \ \ \ wi\ =\ swapTextures.begin();}
\DoxyCodeLine{00358\ \ \ \ \ ++wi;}
\DoxyCodeLine{00359\ \ \ \ \ ++wi;}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{comment}{//\ [gjeon]\ since\ swapped\ texture\ usually\ didn't\ mapped\ to\ any\ egg\ file\ we}}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{comment}{//\ need\ to\ create\ soucreTextureImage\ by\ using\ original\ texture\ file's\ info}}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ originalTextureName\ =\ (*wi);}
\DoxyCodeLine{00364\ \ \ \ \ \mbox{\hyperlink{classTextureImage}{TextureImage}}\ *originalTexture\ =\ pal-\/>\mbox{\hyperlink{classPalettizer_a2ab1ac977bcde9df2b49a1eeaf6d3a2a}{get\_texture}}(originalTextureName);}
\DoxyCodeLine{00365\ \ \ \ \ \mbox{\hyperlink{classSourceTextureImage}{SourceTextureImage}}\ *source\ =\ originalTexture-\/>\mbox{\hyperlink{classTextureImage_a6a3f6986e2fb54a79df18f8bb9d4a16c}{get\_preferred\_source}}();}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ originalTextureFilename\ =\ source-\/>get\_filename();}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFilename}{Filename}}\ originalTextureAlphaFilename\ =\ source-\/>get\_alpha\_filename();}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordtype}{int}\ originalTextureAlphaFileChannel\ =\ source-\/>get\_alpha\_file\_channel();}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \ \ ++wi;}
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keywordflow}{while}\ (wi\ !=\ swapTextures.end())\ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&swapTextureName\ =\ (*wi);}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \mbox{\hyperlink{classTextureImage}{TextureImage}}\ *swapTextureImage\ =\ pal-\/>\mbox{\hyperlink{classPalettizer_a2ab1ac977bcde9df2b49a1eeaf6d3a2a}{get\_texture}}(swapTextureName);}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \mbox{\hyperlink{classFilename}{Filename}}\ swapTextureFilename\ =\ \mbox{\hyperlink{classFilename}{Filename}}(originalTextureFilename.get\_dirname(),\ swapTextureName\ +\ \textcolor{stringliteral}{"{}."{}}\ +\ originalTextureFilename.get\_extension());}
\DoxyCodeLine{00375\ \ \ \ \ \ \ swapTextureImage-\/>\mbox{\hyperlink{classTextureImage_aec7b4d6fd6ecda228c7cf6b1f72d9e00}{get\_source}}(swapTextureFilename,\ originalTextureAlphaFilename,\ originalTextureAlphaFileChannel);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ placement-\/>\_textureSwaps.push\_back(swapTextureImage);}
\DoxyCodeLine{00377\ \ \ \ \ \ \ ++wi;}
\DoxyCodeLine{00378\ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \}}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \textcolor{keywordflow}{return}\ placement;}
\DoxyCodeLine{00382\ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00388\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a27373e5c52699f8982bafea1b04c8b8e}{PaletteGroup::}}}
\DoxyCodeLine{00389\ \mbox{\hyperlink{classPaletteGroup_a27373e5c52699f8982bafea1b04c8b8e}{unplace}}(\mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement)\ \{}
\DoxyCodeLine{00390\ \ \ nassertv(placement-\/>\mbox{\hyperlink{classTexturePlacement_a1decbbaa8abd60a3c1bf14d4c46ffd88}{get\_group}}()\ ==\ \textcolor{keyword}{this});}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ Placements::iterator\ pi;}
\DoxyCodeLine{00393\ \ \ pi\ =\ \_placements.find(placement);}
\DoxyCodeLine{00394\ \ \ \textcolor{keywordflow}{if}\ (pi\ !=\ \_placements.end())\ \{}
\DoxyCodeLine{00395\ \ \ \ \ \_placements.erase(pi);}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordflow}{if}\ (placement-\/>\mbox{\hyperlink{classTexturePlacement_ac3abdcb1d5941926a942b33f1a80a261}{is\_placed}}())\ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ placement-\/>\mbox{\hyperlink{classTexturePlacement_aed3cd3cce89cbed85d15f1cea752bbad}{get\_page}}()-\/>\mbox{\hyperlink{classPalettePage_a9a7fd8978115c5461f48f80b97d737ec}{unplace}}(placement);}
\DoxyCodeLine{00399\ \ \ \ \ \}}
\DoxyCodeLine{00400\ \ \ \}}
\DoxyCodeLine{00401\ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00407\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_ae3d872b42c16f49506169d1339584a7a}{PaletteGroup::}}}
\DoxyCodeLine{00408\ \mbox{\hyperlink{classPaletteGroup_ae3d872b42c16f49506169d1339584a7a}{place\_all}}()\ \{}
\DoxyCodeLine{00409\ \ \ \textcolor{comment}{//\ First,\ go\ through\ our\ prepared\ textures\ and\ assign\ each\ unplaced\ one\ to}}
\DoxyCodeLine{00410\ \ \ \textcolor{comment}{//\ an\ appropriate\ page.}}
\DoxyCodeLine{00411\ \ \ Placements::iterator\ pli;}
\DoxyCodeLine{00412\ \ \ \textcolor{keywordflow}{for}\ (pli\ =\ \_placements.begin();\ pli\ !=\ \_placements.end();\ ++pli)\ \{}
\DoxyCodeLine{00413\ \ \ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement\ =\ (*pli);}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{keywordflow}{if}\ (placement-\/>\mbox{\hyperlink{classTexturePlacement_a164b7566d6604255e12a14e4aefd9249}{get\_omit\_reason}}()\ ==\ OR\_working)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ \mbox{\hyperlink{classPaletteGroup_ae48c061e3049e631bbbb9b067b195ba5}{get\_page}}(placement-\/>\mbox{\hyperlink{classTexturePlacement_a98eaed41efb0c965d42132383a6b9494}{get\_properties}}());}
\DoxyCodeLine{00417\ \ \ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_aec755c521e403601c0f2f1463a7e52b1}{assign}}(placement);}
\DoxyCodeLine{00418\ \ \ \ \ \}}
\DoxyCodeLine{00419\ \ \ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \textcolor{comment}{//\ Then,\ go\ through\ the\ pages\ and\ actually\ do\ the\ placing.}}
\DoxyCodeLine{00422\ \ \ Pages::iterator\ pai;}
\DoxyCodeLine{00423\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00425\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_ae89e839b0752481415e2f205897e289b}{place\_all}}();}
\DoxyCodeLine{00426\ \ \ \}}
\DoxyCodeLine{00427\ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00434\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a32db8b68757928a02af0e386bc57795e}{PaletteGroup::}}}
\DoxyCodeLine{00435\ \mbox{\hyperlink{classPaletteGroup_a32db8b68757928a02af0e386bc57795e}{update\_unknown\_textures}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTxaFile}{TxaFile}}\ \&txa\_file)\ \{}
\DoxyCodeLine{00436\ \ \ Placements::iterator\ pli;}
\DoxyCodeLine{00437\ \ \ \textcolor{keywordflow}{for}\ (pli\ =\ \_placements.begin();\ pli\ !=\ \_placements.end();\ ++pli)\ \{}
\DoxyCodeLine{00438\ \ \ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement\ =\ (*pli);}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordflow}{if}\ (!placement-\/>\mbox{\hyperlink{classTexturePlacement_a4ff12c2eb86a680a9049c289ba013bd3}{is\_size\_known}}())\ \{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ texture's\ size\ isn't\ known;\ we\ have\ to\ determine\ its\ size.}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \mbox{\hyperlink{classTextureImage}{TextureImage}}\ *texture\ =\ placement-\/>\mbox{\hyperlink{classTexturePlacement_ac41838d62b321927f6d0134d0fe2677b}{get\_texture}}();}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!texture-\/>got\_txa\_file())\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ But\ first,\ we\ need\ to\ look\ up\ the\ texture\ in\ the\ .txa\ file.}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ texture-\/>\mbox{\hyperlink{classTextureImage_a085da93a0c64ff73d82420abcb251a33}{pre\_txa\_file}}();}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ txa\_file.\mbox{\hyperlink{classTxaFile_a86b0fe5432ce85ee2ce9f3809115dced}{match\_texture}}(texture);}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ texture-\/>post\_txa\_file();}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \ \ placement-\/>\mbox{\hyperlink{classTexturePlacement_ac4619af9181d4bb5f1c59619f29de2bd}{determine\_size}}();}
\DoxyCodeLine{00451\ \ \ \ \ \}}
\DoxyCodeLine{00452\ \ \ \}}
\DoxyCodeLine{00453\ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00459\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a63e39194132e84282ce9af2ab5a6b06a}{PaletteGroup::}}}
\DoxyCodeLine{00460\ \mbox{\hyperlink{classPaletteGroup_a63e39194132e84282ce9af2ab5a6b06a}{write\_image\_info}}(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00461\ \ \ Pages::const\_iterator\ pai;}
\DoxyCodeLine{00462\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00464\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_a50f7c24947f2c09e930f29320d46a2a0}{write\_image\_info}}(out,\ indent\_level);}
\DoxyCodeLine{00465\ \ \ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \textcolor{comment}{//\ Write\ out\ all\ the\ unplaced\ textures,\ in\ alphabetical\ order\ by\ name.}}
\DoxyCodeLine{00468\ \ \ \mbox{\hyperlink{classpvector}{pvector<TexturePlacement\ *>}}\ placement\_vector;}
\DoxyCodeLine{00469\ \ \ placement\_vector.reserve(\_placements.size());}
\DoxyCodeLine{00470\ \ \ Placements::const\_iterator\ pli;}
\DoxyCodeLine{00471\ \ \ \textcolor{keywordflow}{for}\ (pli\ =\ \_placements.begin();\ pli\ !=\ \_placements.end();\ ++pli)\ \{}
\DoxyCodeLine{00472\ \ \ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement\ =\ (*pli);}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{if}\ (placement-\/>\mbox{\hyperlink{classTexturePlacement_a164b7566d6604255e12a14e4aefd9249}{get\_omit\_reason}}()\ !=\ OR\_none)\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ placement\_vector.push\_back(placement);}
\DoxyCodeLine{00475\ \ \ \ \ \}}
\DoxyCodeLine{00476\ \ \ \}}
\DoxyCodeLine{00477\ \ \ sort(placement\_vector.begin(),\ placement\_vector.end(),}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \mbox{\hyperlink{classIndirectCompareNames}{IndirectCompareNames<TexturePlacement>}}());}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \mbox{\hyperlink{classpvector}{pvector<TexturePlacement\ *>::const\_iterator}}\ pvi;}
\DoxyCodeLine{00481\ \ \ \textcolor{keywordflow}{for}\ (pvi\ =\ placement\_vector.begin();}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ pvi\ !=\ placement\_vector.end();}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ ++pvi)\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement\ =\ (*pvi);}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)}
\DoxyCodeLine{00487\ \ \ \ \ \ \ <<\ placement-\/>\mbox{\hyperlink{classTexturePlacement_ac41838d62b321927f6d0134d0fe2677b}{get\_texture}}()-\/>get\_name()}
\DoxyCodeLine{00488\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ unplaced\ because\ "{}};}
\DoxyCodeLine{00489\ \ \ \ \ \textcolor{keywordflow}{switch}\ (placement-\/>\mbox{\hyperlink{classTexturePlacement_a164b7566d6604255e12a14e4aefd9249}{get\_omit\_reason}}())\ \{}
\DoxyCodeLine{00490\ \ \ \ \ \textcolor{keywordflow}{case}\ OR\_coverage:}
\DoxyCodeLine{00491\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}coverage\ ("{}}\ <<\ placement-\/>\mbox{\hyperlink{classTexturePlacement_a6880ddd1e5daf13a50ccc49520fc7878}{get\_uv\_area}}()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \textcolor{keywordflow}{case}\ OR\_size:}
\DoxyCodeLine{00495\ \ \ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}size\ ("{}}\ <<\ placement-\/>\mbox{\hyperlink{classTexturePlacement_a596fbe7391fc8c98e8494b93623d8b72}{get\_x\_size}}()\ <<\ \textcolor{stringliteral}{"{}\ "{}}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ <<\ placement-\/>\mbox{\hyperlink{classTexturePlacement_af28888da54605e3a1b53ba246e186059}{get\_y\_size}}()\ <<\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00500\ \ \ \ \ \ \ out\ <<\ placement-\/>\mbox{\hyperlink{classTexturePlacement_a164b7566d6604255e12a14e4aefd9249}{get\_omit\_reason}}();}
\DoxyCodeLine{00501\ \ \ \ \ \}}
\DoxyCodeLine{00502\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00503\ \ \ \}}
\DoxyCodeLine{00504\ \}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00509\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a9f7b84c6aa7b0bede7c459e372e2cba9}{PaletteGroup::}}}
\DoxyCodeLine{00510\ \mbox{\hyperlink{classPaletteGroup_a9f7b84c6aa7b0bede7c459e372e2cba9}{optimal\_resize}}()\ \{}
\DoxyCodeLine{00511\ \ \ Pages::iterator\ pai;}
\DoxyCodeLine{00512\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00513\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00514\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_a144489eb9909c9619a32f6875a9d6da7}{optimal\_resize}}();}
\DoxyCodeLine{00515\ \ \ \}}
\DoxyCodeLine{00516\ \}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00522\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a9bf3c7d4ddfcd82e2f7eeed7fab015af}{PaletteGroup::}}}
\DoxyCodeLine{00523\ \mbox{\hyperlink{classPaletteGroup_a9bf3c7d4ddfcd82e2f7eeed7fab015af}{reset\_images}}()\ \{}
\DoxyCodeLine{00524\ \ \ Pages::iterator\ pai;}
\DoxyCodeLine{00525\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00526\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00527\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_aeb39b21c24fcdf89a649b7d8014eff6b}{reset\_images}}();}
\DoxyCodeLine{00528\ \ \ \}}
\DoxyCodeLine{00529\ \}}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00536\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a4a885dd52d2ce711198747c6c77f1e89}{PaletteGroup::}}}
\DoxyCodeLine{00537\ \mbox{\hyperlink{classPaletteGroup_a4a885dd52d2ce711198747c6c77f1e89}{setup\_shadow\_images}}()\ \{}
\DoxyCodeLine{00538\ \ \ Pages::iterator\ pai;}
\DoxyCodeLine{00539\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00541\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_a6170f0b0a5bf86fcd92b59eb4fd9366d}{setup\_shadow\_images}}();}
\DoxyCodeLine{00542\ \ \ \}}
\DoxyCodeLine{00543\ \}}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00548\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a088d95188d53f041e5818571a6c3917d}{PaletteGroup::}}}
\DoxyCodeLine{00549\ \mbox{\hyperlink{classPaletteGroup_a088d95188d53f041e5818571a6c3917d}{update\_images}}(\textcolor{keywordtype}{bool}\ redo\_all)\ \{}
\DoxyCodeLine{00550\ \ \ Pages::iterator\ pai;}
\DoxyCodeLine{00551\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00552\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pai).second;}
\DoxyCodeLine{00553\ \ \ \ \ page-\/>\mbox{\hyperlink{classPalettePage_a6c7bf7e4cc59199399666d0a56eb0434}{update\_images}}(redo\_all);}
\DoxyCodeLine{00554\ \ \ \}}
\DoxyCodeLine{00555\ \}}
\DoxyCodeLine{00556\ }
\DoxyCodeLine{00560\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a1b4807928b77a3ee229018eeae101ed5}{PaletteGroup::}}}
\DoxyCodeLine{00561\ \mbox{\hyperlink{classPaletteGroup_a1b4807928b77a3ee229018eeae101ed5}{register\_with\_read\_factory}}()\ \{}
\DoxyCodeLine{00562\ \ \ BamReader::get\_factory()-\/>}
\DoxyCodeLine{00563\ \ \ \ \ register\_factory(get\_class\_type(),\ \mbox{\hyperlink{classPaletteGroup_a220ec6ea1ab0056777e5673405049e33}{make\_from\_bam}});}
\DoxyCodeLine{00564\ \}}
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00570\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a6be0b05bd04ecbe6977e7b06b26b3c66}{PaletteGroup::}}}
\DoxyCodeLine{00571\ \mbox{\hyperlink{classPaletteGroup_a6be0b05bd04ecbe6977e7b06b26b3c66}{write\_datagram}}(\mbox{\hyperlink{classBamWriter}{BamWriter}}\ *writer,\ \mbox{\hyperlink{classDatagram}{Datagram}}\ \&datagram)\ \{}
\DoxyCodeLine{00572\ \ \ TypedWritable::write\_datagram(writer,\ datagram);}
\DoxyCodeLine{00573\ \ \ datagram.add\_string(get\_name());}
\DoxyCodeLine{00574\ \ \ datagram.add\_string(\_dirname);}
\DoxyCodeLine{00575\ \ \ \_dependent.\mbox{\hyperlink{classPaletteGroups_aa555674c5f998ef029bcb3f1a42cdd41}{write\_datagram}}(writer,\ datagram);}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ datagram.add\_int32(\_dependency\_level);}
\DoxyCodeLine{00578\ \ \ datagram.add\_int32(\_dependency\_order);}
\DoxyCodeLine{00579\ \ \ datagram.add\_int32(\_dirname\_order);}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ datagram.add\_uint32(\_placements.size());}
\DoxyCodeLine{00582\ \ \ Placements::const\_iterator\ pli;}
\DoxyCodeLine{00583\ \ \ \textcolor{keywordflow}{for}\ (pli\ =\ \_placements.begin();\ pli\ !=\ \_placements.end();\ ++pli)\ \{}
\DoxyCodeLine{00584\ \ \ \ \ writer-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(datagram,\ (*pli));}
\DoxyCodeLine{00585\ \ \ \}}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ datagram.add\_uint32(\_pages.size());}
\DoxyCodeLine{00588\ \ \ Pages::const\_iterator\ pai;}
\DoxyCodeLine{00589\ \ \ \textcolor{keywordflow}{for}\ (pai\ =\ \_pages.begin();\ pai\ !=\ \_pages.end();\ ++pai)\ \{}
\DoxyCodeLine{00590\ \ \ \ \ writer-\/>\mbox{\hyperlink{classBamWriter_a634bd4eb8e9b33ffde91a27c02f80467}{write\_pointer}}(datagram,\ (*pai).second);}
\DoxyCodeLine{00591\ \ \ \}}
\DoxyCodeLine{00592\ \ \ datagram.add\_bool(\_has\_margin\_override);}
\DoxyCodeLine{00593\ \ \ datagram.add\_int16(\_margin\_override);}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00603\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPaletteGroup_ad99c5fced60e65134367db52cc94b589}{PaletteGroup::}}}
\DoxyCodeLine{00604\ \mbox{\hyperlink{classPaletteGroup_ad99c5fced60e65134367db52cc94b589}{complete\_pointers}}(\mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ **p\_list,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00605\ \ \ \textcolor{keywordtype}{int}\ pi\ =\ \mbox{\hyperlink{classTypedWritable_addc29bb978851cacca2196f8a1f35014}{TypedWritable::complete\_pointers}}(p\_list,\ manager);}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ pi\ +=\ \_dependent.\mbox{\hyperlink{classPaletteGroups_a1d24bb35f0178f6075afd3b9973305b6}{complete\_pointers}}(p\_list\ +\ pi,\ manager);}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00610\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ \_num\_placements;\ i++)\ \{}
\DoxyCodeLine{00611\ \ \ \ \ \mbox{\hyperlink{classTexturePlacement}{TexturePlacement}}\ *placement;}
\DoxyCodeLine{00612\ \ \ \ \ DCAST\_INTO\_R(placement,\ p\_list[pi++],\ pi);}
\DoxyCodeLine{00613\ \ \ \ \ \textcolor{keywordtype}{bool}\ inserted\ =\ \_placements.insert(placement).second;}
\DoxyCodeLine{00614\ \ \ \ \ nassertr(inserted,\ pi);}
\DoxyCodeLine{00615\ \ \ \}}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \textcolor{comment}{//\ We\ must\ store\ the\ list\ of\ pages\ in\ a\ temporary\ vector\ first.\ \ We\ can't}}
\DoxyCodeLine{00618\ \ \ \textcolor{comment}{//\ put\ them\ directly\ into\ the\ map\ because\ the\ map\ requires\ that\ all\ the}}
\DoxyCodeLine{00619\ \ \ \textcolor{comment}{//\ pointers\ in\ the\ page's\ get\_properties()\ member\ have\ been\ filled\ in,\ which}}
\DoxyCodeLine{00620\ \ \ \textcolor{comment}{//\ may\ not\ have\ happened\ yet.}}
\DoxyCodeLine{00621\ \ \ \_load\_pages.reserve(\_num\_pages);}
\DoxyCodeLine{00622\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ \_num\_pages;\ i++)\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page;}
\DoxyCodeLine{00624\ \ \ \ \ DCAST\_INTO\_R(page,\ p\_list[pi++],\ pi);}
\DoxyCodeLine{00625\ \ \ \ \ \_load\_pages.push\_back(page);}
\DoxyCodeLine{00626\ \ \ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \textcolor{keywordflow}{return}\ pi;}
\DoxyCodeLine{00629\ \}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00637\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_acfbf97591dd14e66b3b09a9fe7695b1d}{PaletteGroup::}}}
\DoxyCodeLine{00638\ \mbox{\hyperlink{classPaletteGroup_acfbf97591dd14e66b3b09a9fe7695b1d}{finalize}}(\mbox{\hyperlink{classBamReader}{BamReader}}\ *)\ \{}
\DoxyCodeLine{00639\ \ \ \textcolor{comment}{//\ Now\ we\ can\ copy\ the\ pages\ into\ the\ actual\ map.}}
\DoxyCodeLine{00640\ \ \ \mbox{\hyperlink{classpvector}{pvector<PalettePage\ *>::const\_iterator}}\ pi;}
\DoxyCodeLine{00641\ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ \_load\_pages.begin();\ pi\ !=\ \_load\_pages.end();\ ++pi)\ \{}
\DoxyCodeLine{00642\ \ \ \ \ \mbox{\hyperlink{classPalettePage}{PalettePage}}\ *page\ =\ (*pi);}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keywordtype}{bool}\ inserted\ =\ \_pages.}
\DoxyCodeLine{00644\ \ \ \ \ \ \ insert(Pages::value\_type(page-\/>\mbox{\hyperlink{classPalettePage_a9e97504b31e2077270ec3ebe29eb8e0a}{get\_properties}}(),\ page)).second;}
\DoxyCodeLine{00645\ \ \ \ \ nassertv(inserted);}
\DoxyCodeLine{00646\ \ \ \}}
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00648\ \ \ \_load\_pages.clear();}
\DoxyCodeLine{00649\ \}}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00656\ \mbox{\hyperlink{classTypedWritable}{TypedWritable}}\ *\mbox{\hyperlink{classPaletteGroup_a220ec6ea1ab0056777e5673405049e33}{PaletteGroup::}}}
\DoxyCodeLine{00657\ \mbox{\hyperlink{classPaletteGroup_a220ec6ea1ab0056777e5673405049e33}{make\_from\_bam}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFactoryParams}{FactoryParams}}\ \&params)\ \{}
\DoxyCodeLine{00658\ \ \ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}}\ *me\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPaletteGroup}{PaletteGroup}};}
\DoxyCodeLine{00659\ \ \ \mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ scan;}
\DoxyCodeLine{00660\ \ \ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager;}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ parse\_params(params,\ scan,\ manager);}
\DoxyCodeLine{00663\ \ \ me-\/>\mbox{\hyperlink{classPaletteGroup_abc3867d3971f935036ad83627c449fb2}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00664\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_a0c2e8dc5a794a4263139116b5b8dcb2d}{register\_finalize}}(me);}
\DoxyCodeLine{00665\ \ \ \textcolor{keywordflow}{return}\ me;}
\DoxyCodeLine{00666\ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00672\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_abc3867d3971f935036ad83627c449fb2}{PaletteGroup::}}}
\DoxyCodeLine{00673\ \mbox{\hyperlink{classPaletteGroup_abc3867d3971f935036ad83627c449fb2}{fillin}}(\mbox{\hyperlink{classDatagramIterator}{DatagramIterator}}\ \&scan,\ \mbox{\hyperlink{classBamReader}{BamReader}}\ *manager)\ \{}
\DoxyCodeLine{00674\ \ \ \mbox{\hyperlink{classTypedWritable_a3ad6cc1cd23bc3783d83edb3302bb43c}{TypedWritable::fillin}}(scan,\ manager);}
\DoxyCodeLine{00675\ \ \ set\_name(scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}());}
\DoxyCodeLine{00676\ \ \ \_dirname\ =\ scan.\mbox{\hyperlink{classDatagramIterator_aa5b2810c1b772f83e744fed70bb313ea}{get\_string}}();}
\DoxyCodeLine{00677\ \ \ \_dependent.\mbox{\hyperlink{classPaletteGroups_ae49b45080c8a237c2e5a4208e6c22ef7}{fillin}}(scan,\ manager);}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \_dependency\_level\ =\ scan.get\_int32();}
\DoxyCodeLine{00680\ \ \ \_dependency\_order\ =\ scan.get\_int32();}
\DoxyCodeLine{00681\ \ \ \_dirname\_order\ =\ scan.get\_int32();}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \_num\_placements\ =\ scan.get\_uint32();}
\DoxyCodeLine{00684\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_a10ea3ed8500e58d80ff4c58e4f1771cb}{read\_pointers}}(scan,\ \_num\_placements);}
\DoxyCodeLine{00685\ }
\DoxyCodeLine{00686\ \ \ \_num\_pages\ =\ scan.get\_uint32();}
\DoxyCodeLine{00687\ \ \ manager-\/>\mbox{\hyperlink{classBamReader_a10ea3ed8500e58d80ff4c58e4f1771cb}{read\_pointers}}(scan,\ \_num\_pages);}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ \textcolor{keywordflow}{if}(Palettizer::\_read\_pi\_version\ >=\ 19)\ \{}
\DoxyCodeLine{00690\ \ \ \ \ \_has\_margin\_override\ =\ scan.get\_bool();}
\DoxyCodeLine{00691\ \ \ \ \ \_margin\_override\ =\ scan.get\_int16();}
\DoxyCodeLine{00692\ \ \ \}}
\DoxyCodeLine{00693\ \}}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00698\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPaletteGroup_a7219f64a55947b0b4c39146ba2143a5f}{PaletteGroup::}}}
\DoxyCodeLine{00699\ \mbox{\hyperlink{classPaletteGroup_a7219f64a55947b0b4c39146ba2143a5f}{add\_texture\_swap\_info}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ sourceTextureName,\ \textcolor{keyword}{const}\ vector\_string\ \&swapTextures)\ \{}
\DoxyCodeLine{00700\ \ \ TextureSwapInfo::iterator\ tsi\ =\ \_textureSwapInfo.find(sourceTextureName);}
\DoxyCodeLine{00701\ \ \ \textcolor{keywordflow}{if}\ (tsi\ !=\ \_textureSwapInfo.end())\ \{}
\DoxyCodeLine{00702\ \ \ \ \ \_textureSwapInfo.erase(tsi);}
\DoxyCodeLine{00703\ \ \ \}}
\DoxyCodeLine{00704\ \ \ \_textureSwapInfo.insert(TextureSwapInfo::value\_type(sourceTextureName,\ swapTextures));}
\DoxyCodeLine{00705\ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00710\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPaletteGroup_a0b3753ebefbb27c5b86a5a9a31289ff1}{PaletteGroup::}}}
\DoxyCodeLine{00711\ \mbox{\hyperlink{classPaletteGroup_a0b3753ebefbb27c5b86a5a9a31289ff1}{is\_none\_texture\_swap}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00712\ \ \ \textcolor{keywordflow}{return}\ \_textureSwapInfo.empty();}
\DoxyCodeLine{00713\ \}}

\end{DoxyCode}

\doxysection{mac\+Stats\+Monitor.\+mm}
\hypertarget{macStatsMonitor_8mm_source}{}\label{macStatsMonitor_8mm_source}\index{pandatool/src/mac-\/stats/macStatsMonitor.mm@{pandatool/src/mac-\/stats/macStatsMonitor.mm}}
\mbox{\hyperlink{macStatsMonitor_8mm}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsMonitor_8h}{macStatsMonitor.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStats_8h}{macStats.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsServer_8h}{macStatsServer.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsStripChart_8h}{macStatsStripChart.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsChartMenu_8h}{macStatsChartMenu.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsPianoRoll_8h}{macStatsPianoRoll.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsFlameGraph_8h}{macStatsFlameGraph.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsTimeline_8h}{macStatsTimeline.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatGraph_8h}{pStatGraph.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{convert__srgb_8h}{convert\_srgb.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00030\ MacStatsMonitor::}
\DoxyCodeLine{00031\ MacStatsMonitor(\mbox{\hyperlink{classMacStatsServer}{MacStatsServer}}\ *server)\ :\ \mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}(server)\ \{}
\DoxyCodeLine{00032\ \ \ \_main\_menu\ =\ NSApp.mainMenu;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ These\ will\ be\ filled\ in\ later\ when\ the\ menu\ is\ created.}}
\DoxyCodeLine{00035\ \ \ \_scroll\_speed\ =\ 0.0;}
\DoxyCodeLine{00036\ \ \ \_pause\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00037\ \ \ \_next\_chart\_index\ =\ 2;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ setup\_speed\_menu();}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keywordflow}{if}\ ([[NSUserDefaults\ standardUserDefaults]\ boolForKey:\textcolor{stringliteral}{@"{}ShowStatusItem"{}}])\ \{}
\DoxyCodeLine{00042\ \ \ \ \ set\_show\_status\_item(\textcolor{keyword}{true});}
\DoxyCodeLine{00043\ \ \ \}}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00049\ MacStatsMonitor::}
\DoxyCodeLine{00050\ \string~MacStatsMonitor()\ \{}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classMacStatsMonitor_aee56ffa59add56b3d74cd05ccd22fcb2}{close}}();}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00057\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_aee56ffa59add56b3d74cd05ccd22fcb2}{MacStatsMonitor::}}}
\DoxyCodeLine{00058\ \mbox{\hyperlink{classMacStatsMonitor_aee56ffa59add56b3d74cd05ccd22fcb2}{close}}()\ \{}
\DoxyCodeLine{00059\ \ \ \mbox{\hyperlink{classPStatMonitor_a83b375e502c3acf7d613a096ded0bdbd}{PStatMonitor::close}}();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{keywordflow}{if}\ (\_notification\ !=\ nil)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ NSUserNotificationCenter\ *center\ =\ [NSUserNotificationCenter\ defaultUserNotificationCenter];}
\DoxyCodeLine{00063\ \ \ \ \ [center\ removeDeliveredNotification:\_notification];}
\DoxyCodeLine{00064\ \ \ \ \ [\_notification\ release];}
\DoxyCodeLine{00065\ \ \ \ \ \_notification\ =\ nil;}
\DoxyCodeLine{00066\ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a67c94dd472523bd18e22ac354691c14a}{close\_all\_graphs}}();}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{if}\ (\_speed\_menu\_item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00071\ \ \ \ \ [\_main\_menu\ removeItem:\_speed\_menu\_item];}
\DoxyCodeLine{00072\ \ \ \ \ [\_speed\_menu\_item\ release];}
\DoxyCodeLine{00073\ \ \ \ \ \_speed\_menu\_item\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00074\ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsChartMenu}{MacStatsChartMenu}}\ *chart\_menu\ :\ \_chart\_menus)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ chart\_menu-\/>remove\_from\_menu(\_main\_menu);}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{delete}\ chart\_menu;}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \ \ \_chart\_menus.clear();}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a5e5181c46de15b8dbf6296979a61bf46}{set\_show\_status\_item}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \&item\ :\ \_colors)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ CGColorRelease(item.second.\_bg[0]);}
\DoxyCodeLine{00086\ \ \ \ \ CGColorRelease(item.second.\_bg[1]);}
\DoxyCodeLine{00087\ \ \ \}}
\DoxyCodeLine{00088\ \ \ \_colors.clear();}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \_next\_chart\_index\ =\ 2;}
\DoxyCodeLine{00091\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00097\ std::string\ \mbox{\hyperlink{classMacStatsMonitor_a5afe41490f68d818f48b100f596449a0}{MacStatsMonitor::}}}
\DoxyCodeLine{00098\ \mbox{\hyperlink{classMacStatsMonitor_a5afe41490f68d818f48b100f596449a0}{get\_monitor\_name}}()\ \{}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}MacStats"{}};}
\DoxyCodeLine{00100\ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a535d3e53407c516076c75405569ec320}{MacStatsMonitor::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classMacStatsMonitor_a535d3e53407c516076c75405569ec320}{initialized}}()\ \{}
\DoxyCodeLine{00111\ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a219de7b8064b1c24eb6d241bd0035fea}{MacStatsMonitor::}}}
\DoxyCodeLine{00118\ \mbox{\hyperlink{classMacStatsMonitor_a219de7b8064b1c24eb6d241bd0035fea}{got\_hello}}()\ \{}
\DoxyCodeLine{00119\ \ \ std::string\ progname\ =\ get\_client\_progname();}
\DoxyCodeLine{00120\ \ \ std::string\ hostname\ =\ get\_client\_hostname();}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ NSUserNotificationCenter\ *center\ =\ [NSUserNotificationCenter\ defaultUserNotificationCenter];}
\DoxyCodeLine{00123\ \ \ \_notification\ =\ [[NSUserNotification\ alloc]\ init];}
\DoxyCodeLine{00124\ \ \ \_notification.title\ =\ \textcolor{stringliteral}{@"{}PStats\ Server"{}};}
\DoxyCodeLine{00125\ \ \ \_notification.informativeText\ =\ [NSString}
\DoxyCodeLine{00126\ \ \ \ \ stringWithFormat:\textcolor{stringliteral}{@"{}Connected\ to\ \%s\ on\ \%s"{}},\ progname.c\_str(),\ hostname.c\_str()];}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ [center\ deliverNotification:\_notification];}
\DoxyCodeLine{00129\ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00138\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_ae12fdc0d37d71aa33cf21b686c757369}{MacStatsMonitor::}}}
\DoxyCodeLine{00139\ \mbox{\hyperlink{classMacStatsMonitor_ae12fdc0d37d71aa33cf21b686c757369}{got\_bad\_version}}(\textcolor{keywordtype}{int}\ client\_major,\ \textcolor{keywordtype}{int}\ client\_minor,}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ server\_major,\ \textcolor{keywordtype}{int}\ server\_minor)\ \{}
\DoxyCodeLine{00141\ \ \ \mbox{\hyperlink{classstd_1_1ostringstream}{std::ostringstream}}\ str;}
\DoxyCodeLine{00142\ \ \ str\ <<\ \textcolor{stringliteral}{"{}Unable\ to\ honor\ connection\ attempt\ from\ "{}}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ <<\ get\_client\_progname()\ <<\ \textcolor{stringliteral}{"{}\ on\ "{}}\ <<\ get\_client\_hostname()}
\DoxyCodeLine{00144\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}:\ unsupported\ PStats\ version\ "{}}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ <<\ client\_major\ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ client\_minor;}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keywordflow}{if}\ (server\_minor\ ==\ 0)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ str\ <<\ \textcolor{stringliteral}{"{}\ (server\ understands\ version\ "{}}\ <<\ server\_major}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ server\_minor\ <<\ \textcolor{stringliteral}{"{}\ only)."{}};}
\DoxyCodeLine{00150\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00151\ \ \ \ \ str\ <<\ \textcolor{stringliteral}{"{}\ (server\ understands\ versions\ "{}}\ <<\ server\_major}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}.0\ through\ "{}}\ <<\ server\_major\ <<\ \textcolor{stringliteral}{"{}."{}}\ <<\ server\_minor\ <<\ \textcolor{stringliteral}{"{})."{}};}
\DoxyCodeLine{00153\ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ std::string\ message\ =\ str.str();}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ NSAlert\ *alert\ =\ [[NSAlert\ alloc]\ init];}
\DoxyCodeLine{00158\ \ \ alert.messageText\ =\ \textcolor{stringliteral}{@"{}PStats\ Error"{}};}
\DoxyCodeLine{00159\ \ \ alert.informativeText\ =\ [NSString\ stringWithUTF8String:message.c\_str()];}
\DoxyCodeLine{00160\ \ \ alert.alertStyle\ =\ NSCriticalAlertStyle;}
\DoxyCodeLine{00161\ \ \ [alert\ runModal];}
\DoxyCodeLine{00162\ \ \ [alert\ release];}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00172\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_aab7215c13de5ea0bc9b30bdbe653372d}{MacStatsMonitor::}}}
\DoxyCodeLine{00173\ \mbox{\hyperlink{classMacStatsMonitor_aab7215c13de5ea0bc9b30bdbe653372d}{new\_collector}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ graph-\/>new\_collector(collector\_index);}
\DoxyCodeLine{00176\ \ \ \}}
\DoxyCodeLine{00177\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00186\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a98b9adba3ee9fbe163820814e7e7425b}{MacStatsMonitor::}}}
\DoxyCodeLine{00187\ \mbox{\hyperlink{classMacStatsMonitor_a98b9adba3ee9fbe163820814e7e7425b}{new\_thread}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00188\ \ \ \mbox{\hyperlink{classMacStatsChartMenu}{MacStatsChartMenu}}\ *chart\_menu\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMacStatsChartMenu}{MacStatsChartMenu}}(\textcolor{keyword}{this},\ thread\_index);}
\DoxyCodeLine{00189\ \ \ chart\_menu-\/>\mbox{\hyperlink{classMacStatsChartMenu_adcf8186e5d0da7b726147b6c66463a60}{add\_to\_menu}}(\_main\_menu,\ \_next\_chart\_index);}
\DoxyCodeLine{00190\ \ \ ++\_next\_chart\_index;}
\DoxyCodeLine{00191\ \ \ \_chart\_menus.push\_back(chart\_menu);}
\DoxyCodeLine{00192\ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00200\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_af9cde15cdb56f616ccb9cb5d1cb246a9}{MacStatsMonitor::}}}
\DoxyCodeLine{00201\ \mbox{\hyperlink{classMacStatsMonitor_af9cde15cdb56f616ccb9cb5d1cb246a9}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00202\ \ \ \mbox{\hyperlink{classPStatMonitor_a4bc7717cc967e0e4eb861979210b3aba}{PStatMonitor::new\_data}}(thread\_index,\ frame\_number);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ graph-\/>new\_data(thread\_index,\ frame\_number);}
\DoxyCodeLine{00206\ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \textcolor{keywordflow}{if}\ (!\_have\_data)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \mbox{\hyperlink{classPStatMonitor_aa088e596e90d348e4624b7a9b687aa5c}{open\_default\_graphs}}();}
\DoxyCodeLine{00210\ \ \ \ \ \_have\_data\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00211\ \ \ \}}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00217\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a5408a195c3dd621c147641295a7b5665}{MacStatsMonitor::}}}
\DoxyCodeLine{00218\ \mbox{\hyperlink{classMacStatsMonitor_a5408a195c3dd621c147641295a7b5665}{remove\_thread}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{for}\ (ChartMenus::iterator\ it\ =\ \_chart\_menus.begin();\ it\ !=\ \_chart\_menus.end();\ ++it)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \mbox{\hyperlink{classMacStatsChartMenu}{MacStatsChartMenu}}\ *chart\_menu\ =\ *it;}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{if}\ (chart\_menu-\/>get\_thread\_index()\ ==\ thread\_index)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ chart\_menu-\/>\mbox{\hyperlink{classMacStatsChartMenu_a0c7cced98e1ad73f441e5f23c353a8f5}{remove\_from\_menu}}(\_main\_menu);}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ chart\_menu;}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \_chart\_menus.erase(it);}
\DoxyCodeLine{00225\ \ \ \ \ \ \ -\/-\/\_next\_chart\_index;}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ \ \ \}}
\DoxyCodeLine{00229\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00236\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a88cf62c188d5ff08b12a5b3a209fe8ee}{MacStatsMonitor::}}}
\DoxyCodeLine{00237\ \mbox{\hyperlink{classMacStatsMonitor_a88cf62c188d5ff08b12a5b3a209fe8ee}{lost\_connection}}()\ \{}
\DoxyCodeLine{00238\ \ \ NSUserNotificationCenter\ *center\ =\ [NSUserNotificationCenter\ defaultUserNotificationCenter];}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \textcolor{keywordflow}{if}\ (\_notification\ !=\ nil)\ \{}
\DoxyCodeLine{00241\ \ \ \ \ [center\ removeDeliveredNotification:\_notification];}
\DoxyCodeLine{00242\ \ \ \ \ [\_notification\ release];}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ std::string\ hostname\ =\ get\_client\_hostname();}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \_notification\ =\ [[NSUserNotification\ alloc]\ init];}
\DoxyCodeLine{00248\ \ \ \_notification.title\ =\ \textcolor{stringliteral}{@"{}PStats\ Server"{}};}
\DoxyCodeLine{00249\ \ \ \_notification.informativeText\ =\ [NSString}
\DoxyCodeLine{00250\ \ \ \ \ stringWithFormat:\textcolor{stringliteral}{@"{}Lost\ connection\ to\ \%s"{}},\ hostname.c\_str()];}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \_notification.additionalActions\ =\ @[}
\DoxyCodeLine{00253\ \ \ \ \ [NSUserNotificationAction\ actionWithIdentifier:\textcolor{stringliteral}{@"{}new"{}}\ title:\textcolor{stringliteral}{@"{}New\ Session"{}}],}
\DoxyCodeLine{00254\ \ \ \ \ [NSUserNotificationAction\ actionWithIdentifier:\textcolor{stringliteral}{@"{}quit"{}}\ title:\textcolor{stringliteral}{@"{}Quit\ PStats"{}}]}
\DoxyCodeLine{00255\ \ \ ];}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ [center\ deliverNotification:\_notification];}
\DoxyCodeLine{00258\ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00264\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a9454278c12be5f9ef3429523deaad017}{MacStatsMonitor::}}}
\DoxyCodeLine{00265\ \mbox{\hyperlink{classMacStatsMonitor_a9454278c12be5f9ef3429523deaad017}{idle}}()\ \{}
\DoxyCodeLine{00266\ \ \ \textcolor{comment}{//\ Check\ if\ any\ of\ our\ chart\ menus\ need\ updating.}}
\DoxyCodeLine{00267\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsChartMenu}{MacStatsChartMenu}}\ *chart\_menu\ :\ \_chart\_menus)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ chart\_menu-\/>check\_update();}
\DoxyCodeLine{00269\ \ \ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ Update\ the\ frame\ rate\ label\ from\ the\ main\ thread\ (thread\ 0).}}
\DoxyCodeLine{00272\ \ \ \textcolor{keywordflow}{if}\ (\_frame\_rate\_status\_item\ !=\ nil)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ get\_client\_data()-\/>\mbox{\hyperlink{classPStatClientData_a46e69042db6f96f3c5eb00990c904dc8}{get\_thread\_data}}(0);}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordtype}{double}\ frame\_rate\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a36bd71263c50a364e3f44627ec9c4606}{get\_frame\_rate}}();}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (frame\_rate\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \_frame\_rate\_status\_item.button.title\ =}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ [NSString\ stringWithFormat:\textcolor{stringliteral}{@"{}\%0.1f\ ms\ /\ \%0.1f\ Hz"{}},\ 1000.0f\ /\ frame\_rate,\ frame\_rate];}
\DoxyCodeLine{00278\ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \}}
\DoxyCodeLine{00280\ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00286\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMacStatsMonitor_a65e846c40cbf71a6a39d44641e9a3059}{MacStatsMonitor::}}}
\DoxyCodeLine{00287\ \mbox{\hyperlink{classMacStatsMonitor_a65e846c40cbf71a6a39d44641e9a3059}{has\_idle}}()\ \{}
\DoxyCodeLine{00288\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00289\ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00294\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a595b0d690417fa52afbffc414fc24ea1}{MacStatsMonitor::}}}
\DoxyCodeLine{00295\ \mbox{\hyperlink{classMacStatsMonitor_a595b0d690417fa52afbffc414fc24ea1}{user\_guide\_bars\_changed}}()\ \{}
\DoxyCodeLine{00296\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00297\ \ \ \ \ graph-\/>user\_guide\_bars\_changed();}
\DoxyCodeLine{00298\ \ \ \}}
\DoxyCodeLine{00299\ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00304\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classMacStatsMonitor_a293ffaf70822becc31e1c985ee1d06f1}{MacStatsMonitor::}}}
\DoxyCodeLine{00305\ \mbox{\hyperlink{classMacStatsMonitor_a293ffaf70822becc31e1c985ee1d06f1}{open\_timeline}}()\ \{}
\DoxyCodeLine{00306\ \ \ \mbox{\hyperlink{classMacStatsTimeline}{MacStatsTimeline}}\ *graph\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMacStatsTimeline}{MacStatsTimeline}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00307\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{add\_graph}}(graph);}
\DoxyCodeLine{00308\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00309\ \}}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00314\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classMacStatsMonitor_a080816c417c413c20b3e2f3fb7c5460f}{MacStatsMonitor::}}}
\DoxyCodeLine{00315\ \mbox{\hyperlink{classMacStatsMonitor_a080816c417c413c20b3e2f3fb7c5460f}{open\_flame\_graph}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00316\ \ \ \mbox{\hyperlink{classMacStatsFlameGraph}{MacStatsFlameGraph}}\ *graph\ =}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMacStatsFlameGraph}{MacStatsFlameGraph}}(\textcolor{keyword}{this},\ thread\_index,\ collector\_index,\ frame\_number);}
\DoxyCodeLine{00318\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{add\_graph}}(graph);}
\DoxyCodeLine{00319\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00320\ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00325\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classMacStatsMonitor_a94878306e9bedcf47dfda78cb9b2f1df}{MacStatsMonitor::}}}
\DoxyCodeLine{00326\ \mbox{\hyperlink{classMacStatsMonitor_a94878306e9bedcf47dfda78cb9b2f1df}{open\_strip\_chart}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level)\ \{}
\DoxyCodeLine{00327\ \ \ \mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}\ *graph\ =}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}(\textcolor{keyword}{this},\ thread\_index,\ collector\_index,\ show\_level);}
\DoxyCodeLine{00329\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{add\_graph}}(graph);}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00331\ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00336\ \mbox{\hyperlink{classPStatGraph}{PStatGraph}}\ *\mbox{\hyperlink{classMacStatsMonitor_a137e8d4bf515f56d6aefa6ada27e7b8e}{MacStatsMonitor::}}}
\DoxyCodeLine{00337\ \mbox{\hyperlink{classMacStatsMonitor_a137e8d4bf515f56d6aefa6ada27e7b8e}{open\_piano\_roll}}(\textcolor{keywordtype}{int}\ thread\_index)\ \{}
\DoxyCodeLine{00338\ \ \ \mbox{\hyperlink{classMacStatsPianoRoll}{MacStatsPianoRoll}}\ *graph\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classMacStatsPianoRoll}{MacStatsPianoRoll}}(\textcolor{keyword}{this},\ thread\_index);}
\DoxyCodeLine{00339\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{add\_graph}}(graph);}
\DoxyCodeLine{00340\ \ \ \textcolor{keywordflow}{return}\ graph;}
\DoxyCodeLine{00341\ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00346\ CGColorRef\ \mbox{\hyperlink{classMacStatsMonitor_aee87fc182ec51348b5b0aa496c615092}{MacStatsMonitor::}}}
\DoxyCodeLine{00347\ \mbox{\hyperlink{classMacStatsMonitor_aee87fc182ec51348b5b0aa496c615092}{get\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ highlight)\ \{}
\DoxyCodeLine{00348\ \ \ Colors::iterator\ bi;}
\DoxyCodeLine{00349\ \ \ bi\ =\ \_colors.find(collector\_index);}
\DoxyCodeLine{00350\ \ \ \textcolor{keywordflow}{if}\ (bi\ !=\ \_colors.end())\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordflow}{return}\ (*bi).second.\_bg[highlight];}
\DoxyCodeLine{00352\ \ \ \}}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ LRGBColor\ rgb\ =\ \mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{PStatMonitor::get\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00355\ \ \ rgb[0]\ =\ encode\_sRGB\_float((\textcolor{keywordtype}{float})rgb[0]);}
\DoxyCodeLine{00356\ \ \ rgb[1]\ =\ encode\_sRGB\_float((\textcolor{keywordtype}{float})rgb[1]);}
\DoxyCodeLine{00357\ \ \ rgb[2]\ =\ encode\_sRGB\_float((\textcolor{keywordtype}{float})rgb[2]);}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ PN\_stdfloat\ bright\ =\ rgb.dot(LRGBColor(0.2126,\ 0.7152,\ 0.0722));}
\DoxyCodeLine{00360\ \ \ CGColorRef\ \mbox{\hyperlink{structcolor}{color}}\ =\ CGColorCreateGenericRGB(rgb[0],\ rgb[1],\ rgb[2],\ 1.0);}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ rgb\ *=\ 0.75;}
\DoxyCodeLine{00363\ \ \ CGColorRef\ hcolor\ =\ CGColorCreateGenericRGB(rgb[0],\ rgb[1],\ rgb[2],\ 1.0);}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ ColorSet\ \&set\ =\ \_colors[collector\_index];}
\DoxyCodeLine{00366\ \ \ set.\_bg[0]\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00367\ \ \ set.\_bg[1]\ =\ hcolor;}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \textcolor{keywordflow}{if}\ (bright\ >=\ 0.5)\ \{}
\DoxyCodeLine{00370\ \ \ \ \ set.\_fg[0]\ =\ [NSColor\ blackColor];}
\DoxyCodeLine{00371\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00372\ \ \ \ \ set.\_fg[0]\ =\ [NSColor\ whiteColor];}
\DoxyCodeLine{00373\ \ \ \}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \textcolor{keywordflow}{if}\ (bright\ *\ 0.75\ >=\ 0.5)\ \{}
\DoxyCodeLine{00376\ \ \ \ \ set.\_fg[1]\ =\ [NSColor\ blackColor];}
\DoxyCodeLine{00377\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00378\ \ \ \ \ set.\_fg[1]\ =\ [NSColor\ whiteColor];}
\DoxyCodeLine{00379\ \ \ \}}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \textcolor{keywordflow}{return}\ highlight\ ?\ hcolor\ :\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00382\ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00387\ NSColor\ *\mbox{\hyperlink{classMacStatsMonitor_a6859450fb5ce0c04cb6c94b9dfd88574}{MacStatsMonitor::}}}
\DoxyCodeLine{00388\ \mbox{\hyperlink{classMacStatsMonitor_a6859450fb5ce0c04cb6c94b9dfd88574}{get\_collector\_text\_color}}(\textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ highlight)\ \{}
\DoxyCodeLine{00389\ \ \ \mbox{\hyperlink{classMacStatsMonitor_aee87fc182ec51348b5b0aa496c615092}{get\_collector\_color}}(collector\_index,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00390\ \ \ \textcolor{keywordflow}{return}\ \_colors[collector\_index].\_fg[highlight];}
\DoxyCodeLine{00391\ \}}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00396\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a0669d317ab93911f4a333b0e94e73cc2}{MacStatsMonitor::}}}
\DoxyCodeLine{00397\ \mbox{\hyperlink{classMacStatsMonitor_a0669d317ab93911f4a333b0e94e73cc2}{choose\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00398\ \ \ \_choosing\_color\_collector\_index\ =\ collector\_index;}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \textcolor{keyword}{const}\ LRGBColor\ \&rgb\ =\ \mbox{\hyperlink{classPStatMonitor_ad9ffc763ea877e02022759a28c0449e6}{PStatMonitor::get\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00401\ \ \ NSColor\ *\mbox{\hyperlink{structcolor}{color}}\ =\ [NSColor\ colorWithSRGBRed:rgb[0]\ green:rgb[1]\ blue:rgb[2]\ alpha:1.0];}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ NSColorPanel\ *panel\ =\ [NSColorPanel\ sharedColorPanel];}
\DoxyCodeLine{00404\ \ \ panel.target\ =\ [NSApp\ delegate];}
\DoxyCodeLine{00405\ \ \ panel.action\ =\ \textcolor{keyword}{@selector}(handleChooseCollectorColor:);}
\DoxyCodeLine{00406\ \ \ panel.showsAlpha\ =\ NO;}
\DoxyCodeLine{00407\ \ \ panel.color\ =\ \mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00408\ \ \ [NSApp\ orderFrontColorPanel:panel];}
\DoxyCodeLine{00409\ \}}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00414\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_ac2f773b19bcadbd0e60908bb0457c522}{MacStatsMonitor::}}}
\DoxyCodeLine{00415\ \mbox{\hyperlink{classMacStatsMonitor_ac2f773b19bcadbd0e60908bb0457c522}{handle\_choose\_collector\_color}}(\textcolor{keyword}{const}\ LRGBColor\ \&\mbox{\hyperlink{structcolor}{color}})\ \{}
\DoxyCodeLine{00416\ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ \_choosing\_color\_collector\_index;}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \mbox{\hyperlink{classPStatMonitor_a9f50836f722b9738e258b90a65402855}{PStatMonitor::set\_collector\_color}}(collector\_index,\ \mbox{\hyperlink{structcolor}{color}});}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \textcolor{keywordflow}{if}\ (\_colors.erase(collector\_index))\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ graph-\/>reset\_collector\_color(collector\_index);}
\DoxyCodeLine{00423\ \ \ \ \ \}}
\DoxyCodeLine{00424\ \ \ \}}
\DoxyCodeLine{00425\ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00430\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a0b5dd8b5008656a327a64d97e8a25050}{MacStatsMonitor::}}}
\DoxyCodeLine{00431\ \mbox{\hyperlink{classMacStatsMonitor_a0b5dd8b5008656a327a64d97e8a25050}{reset\_collector\_color}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00432\ \ \ \mbox{\hyperlink{classPStatMonitor_a5bb70f1407a516074a7fa71a724c9137}{PStatMonitor::clear\_collector\_color}}(collector\_index);}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \ \ \textcolor{keywordflow}{if}\ (\_colors.erase(collector\_index))\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ graph-\/>reset\_collector\_color(collector\_index);}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \}}
\DoxyCodeLine{00439\ \}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00447\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a5e5181c46de15b8dbf6296979a61bf46}{MacStatsMonitor::}}}
\DoxyCodeLine{00448\ \mbox{\hyperlink{classMacStatsMonitor_a5e5181c46de15b8dbf6296979a61bf46}{set\_show\_status\_item}}(\textcolor{keywordtype}{bool}\ show)\ \{}
\DoxyCodeLine{00449\ \ \ \textcolor{keywordflow}{if}\ (show\ \&\&\ \_frame\_rate\_status\_item\ ==\ nil)\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \_frame\_rate\_status\_item\ =\ [[NSStatusBar\ systemStatusBar]\ statusItemWithLength:NSVariableStatusItemLength];}
\DoxyCodeLine{00451\ \ \ \ \ \_frame\_rate\_status\_item.button.action\ =\ \textcolor{keyword}{@selector}(handleClickStatusItem:);}
\DoxyCodeLine{00452\ \ \ \ \ [\_frame\_rate\_status\_item\ retain];}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =\ get\_client\_data();}
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatThreadData}{PStatThreadData}}\ *thread\_data\ =\ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a46e69042db6f96f3c5eb00990c904dc8}{get\_thread\_data}}(0);}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_data\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ frame\_rate\ =\ thread\_data-\/>\mbox{\hyperlink{classPStatThreadData_a36bd71263c50a364e3f44627ec9c4606}{get\_frame\_rate}}();}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frame\_rate\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \_frame\_rate\_status\_item.button.title\ =}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ [NSString\ stringWithFormat:\textcolor{stringliteral}{@"{}\%0.1f\ ms\ /\ \%0.1f\ Hz"{}},\ 1000.0f\ /\ frame\_rate,\ frame\_rate];}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ \ \ \}}
\DoxyCodeLine{00466\ \ \ \textcolor{keywordflow}{if}\ (!show\ \&\&\ \_frame\_rate\_status\_item\ !=\ nil)\ \{}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{comment}{//\ Careful:\ for\ some\ reason,\ this\ can\ get\ called\ recursively.}}
\DoxyCodeLine{00468\ \ \ \ \ NSStatusItem\ *status\_item\ =\ \_frame\_rate\_status\_item;}
\DoxyCodeLine{00469\ \ \ \ \ \_frame\_rate\_status\_item\ =\ nil;}
\DoxyCodeLine{00470\ \ \ \ \ [[NSStatusBar\ systemStatusBar]\ removeStatusItem:status\_item];}
\DoxyCodeLine{00471\ \ \ \ \ [status\_item\ release];}
\DoxyCodeLine{00472\ \ \ \ \ status\_item\ =\ nil;}
\DoxyCodeLine{00473\ \ \ \}}
\DoxyCodeLine{00474\ \}}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00481\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a387c2f0aebdd7c973d4791d0a1e1085b}{MacStatsMonitor::}}}
\DoxyCodeLine{00482\ \mbox{\hyperlink{classMacStatsMonitor_a387c2f0aebdd7c973d4791d0a1e1085b}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00483\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00484\ \ \ \ \ graph-\/>set\_time\_units(unit\_mask);}
\DoxyCodeLine{00485\ \ \ \}}
\DoxyCodeLine{00486\ \}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00492\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a4a99ba7a7d865954c0e6b4b06be7cd02}{MacStatsMonitor::}}}
\DoxyCodeLine{00493\ \mbox{\hyperlink{classMacStatsMonitor_a4a99ba7a7d865954c0e6b4b06be7cd02}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00494\ \ \ \_scroll\_speed\ =\ scroll\_speed;}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \textcolor{comment}{//\ First,\ change\ all\ of\ the\ open\ graphs\ appropriately.}}
\DoxyCodeLine{00497\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ graph-\/>set\_scroll\_speed(\_scroll\_speed);}
\DoxyCodeLine{00499\ \ \ \}}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \textcolor{comment}{//\ Then,\ change\ the\ state\ of\ the\ menu\ items.}}
\DoxyCodeLine{00502\ \ \ \_speed\_menu\_item\_1.state\ =\ (scroll\_speed\ ==\ 1.0);}
\DoxyCodeLine{00503\ \ \ \_speed\_menu\_item\_2.state\ =\ (scroll\_speed\ ==\ 2.0);}
\DoxyCodeLine{00504\ \ \ \_speed\_menu\_item\_3.state\ =\ (scroll\_speed\ ==\ 3.0);}
\DoxyCodeLine{00505\ \ \ \_speed\_menu\_item\_6.state\ =\ (scroll\_speed\ ==\ 6.0);}
\DoxyCodeLine{00506\ \ \ \_speed\_menu\_item\_12.state\ =\ (scroll\_speed\ ==\ 12.0);}
\DoxyCodeLine{00507\ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00512\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a6321383c894fb6e8542aab6b811cc023}{MacStatsMonitor::}}}
\DoxyCodeLine{00513\ \mbox{\hyperlink{classMacStatsMonitor_a6321383c894fb6e8542aab6b811cc023}{set\_pause}}(\textcolor{keywordtype}{bool}\ pause)\ \{}
\DoxyCodeLine{00514\ \ \ \_pause\ =\ pause;}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \textcolor{comment}{//\ First,\ change\ all\ of\ the\ open\ graphs\ appropriately.}}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph\ :\ \_graphs)\ \{}
\DoxyCodeLine{00518\ \ \ \ \ graph-\/>set\_pause(\_pause);}
\DoxyCodeLine{00519\ \ \ \}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \textcolor{comment}{//\ Then,\ change\ the\ state\ of\ the\ menu\ item.}}
\DoxyCodeLine{00522\ \ \ \_speed\_menu\_item\_pause.state\ =\ pause;}
\DoxyCodeLine{00523\ \}}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00528\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{MacStatsMonitor::}}}
\DoxyCodeLine{00529\ \mbox{\hyperlink{classMacStatsMonitor_a58a5eab252e07a45c0d254ade3b763f2}{add\_graph}}(\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph)\ \{}
\DoxyCodeLine{00530\ \ \ \_graphs.insert(graph);}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \ \ \textcolor{keywordtype}{int}\ units\ =\ [[NSUserDefaults\ standardUserDefaults]\ integerForKey:\textcolor{stringliteral}{@"{}TimeUnits"{}}];}
\DoxyCodeLine{00533\ \ \ graph-\/>\mbox{\hyperlink{classMacStatsGraph_aa3a8e3222487a8c30d2d3c04fc121030}{set\_time\_units}}(units);}
\DoxyCodeLine{00534\ \ \ graph-\/>\mbox{\hyperlink{classMacStatsGraph_a884578ad3d8f389b3289870a22a6d8db}{set\_scroll\_speed}}(\_scroll\_speed);}
\DoxyCodeLine{00535\ \ \ graph-\/>\mbox{\hyperlink{classMacStatsGraph_a2f1ffd9df79b4b621c977fc5131323bc}{set\_pause}}(\_pause);}
\DoxyCodeLine{00536\ \}}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00541\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a67471605aab135743d3664d950c796fb}{MacStatsMonitor::}}}
\DoxyCodeLine{00542\ \mbox{\hyperlink{classMacStatsMonitor_a67471605aab135743d3664d950c796fb}{remove\_graph}}(\mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}\ *graph)\ \{}
\DoxyCodeLine{00543\ \ \ Graphs::iterator\ gi\ =\ \_graphs.find(graph);}
\DoxyCodeLine{00544\ \ \ \textcolor{keywordflow}{if}\ (gi\ !=\ \_graphs.end())\ \{}
\DoxyCodeLine{00545\ \ \ \ \ \_graphs.erase(gi);}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keyword}{delete}\ graph;}
\DoxyCodeLine{00547\ \ \ \}}
\DoxyCodeLine{00548\ \}}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00553\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsMonitor_a67c94dd472523bd18e22ac354691c14a}{MacStatsMonitor::}}}
\DoxyCodeLine{00554\ \mbox{\hyperlink{classMacStatsMonitor_a67c94dd472523bd18e22ac354691c14a}{close\_all\_graphs}}()\ \{}
\DoxyCodeLine{00555\ \ \ \textcolor{keywordflow}{while}\ (!\_graphs.empty())\ \{}
\DoxyCodeLine{00556\ \ \ \ \ (*\_graphs.begin())-\/>\mbox{\hyperlink{classMacStatsMonitor_aee56ffa59add56b3d74cd05ccd22fcb2}{close}}();}
\DoxyCodeLine{00557\ \ \ \}}
\DoxyCodeLine{00558\ \}}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00563\ \textcolor{keywordtype}{void}\ MacStatsMonitor::}
\DoxyCodeLine{00564\ setup\_speed\_menu()\ \{}
\DoxyCodeLine{00565\ \ \ NSMenu\ *menu\ =\ [[NSMenu\ alloc]\ init];}
\DoxyCodeLine{00566\ \ \ menu.title\ =\ \textcolor{stringliteral}{@"{}Speed"{}};}
\DoxyCodeLine{00567\ \ \ menu.autoenablesItems\ =\ NO;}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \{}
\DoxyCodeLine{00570\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00571\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleSpeed:);}
\DoxyCodeLine{00572\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}1"{}};}
\DoxyCodeLine{00573\ \ \ \ \ item.tag\ =\ 1;}
\DoxyCodeLine{00574\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00575\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \_speed\_menu\_item\_1\ =\ item;}
\DoxyCodeLine{00578\ \ \ \}}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \{}
\DoxyCodeLine{00581\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00582\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleSpeed:);}
\DoxyCodeLine{00583\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}2"{}};}
\DoxyCodeLine{00584\ \ \ \ \ item.tag\ =\ 2;}
\DoxyCodeLine{00585\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00586\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ \ \ \_speed\_menu\_item\_2\ =\ item;}
\DoxyCodeLine{00589\ \ \ \}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \{}
\DoxyCodeLine{00592\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00593\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleSpeed:);}
\DoxyCodeLine{00594\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}3"{}};}
\DoxyCodeLine{00595\ \ \ \ \ item.tag\ =\ 3;}
\DoxyCodeLine{00596\ \ \ \ \ item.state\ =\ NSOnState;}
\DoxyCodeLine{00597\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00598\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \ \ \ \ \_speed\_menu\_item\_3\ =\ item;}
\DoxyCodeLine{00601\ \ \ \}}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ \{}
\DoxyCodeLine{00604\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00605\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleSpeed:);}
\DoxyCodeLine{00606\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}6"{}};}
\DoxyCodeLine{00607\ \ \ \ \ item.tag\ =\ 6;}
\DoxyCodeLine{00608\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00609\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \_speed\_menu\_item\_6\ =\ item;}
\DoxyCodeLine{00612\ \ \ \}}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \ \ \{}
\DoxyCodeLine{00615\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00616\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleSpeed:);}
\DoxyCodeLine{00617\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}12"{}};}
\DoxyCodeLine{00618\ \ \ \ \ item.tag\ =\ 12;}
\DoxyCodeLine{00619\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00620\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \_speed\_menu\_item\_12\ =\ item;}
\DoxyCodeLine{00623\ \ \ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \ \ [menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \{}
\DoxyCodeLine{00628\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00629\ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handlePause:);}
\DoxyCodeLine{00630\ \ \ \ \ item.title\ =\ \textcolor{stringliteral}{@"{}pause"{}};}
\DoxyCodeLine{00631\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00632\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \ \ \_speed\_menu\_item\_pause\ =\ item;}
\DoxyCodeLine{00635\ \ \ \}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ init];}
\DoxyCodeLine{00638\ \ \ \_speed\_menu\_item\ =\ item;}
\DoxyCodeLine{00639\ \ \ [\_main\_menu\ addItem:item];}
\DoxyCodeLine{00640\ \ \ [\_main\_menu\ setSubmenu:menu\ forItem:item];}
\DoxyCodeLine{00641\ \ \ [menu\ release];}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a4a99ba7a7d865954c0e6b4b06be7cd02}{set\_scroll\_speed}}(3);}
\DoxyCodeLine{00644\ \ \ \mbox{\hyperlink{classMacStatsMonitor_a6321383c894fb6e8542aab6b811cc023}{set\_pause}}(\textcolor{keyword}{false});}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ ++\_next\_chart\_index;}
\DoxyCodeLine{00647\ \}}

\end{DoxyCode}

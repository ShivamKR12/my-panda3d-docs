\doxysection{node\+Path\+Collection.\+cxx}
\hypertarget{nodePathCollection_8cxx_source}{}\label{nodePathCollection_8cxx_source}\index{panda/src/pgraph/nodePathCollection.cxx@{panda/src/pgraph/nodePathCollection.cxx}}
\mbox{\hyperlink{nodePathCollection_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nodePathCollection_8h}{nodePathCollection.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{findApproxPath_8h}{findApproxPath.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{findApproxLevelEntry_8h}{findApproxLevelEntry.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textureAttrib_8h}{textureAttrib.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{colorScaleAttrib_8h}{colorScaleAttrib.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{colorAttrib_8h}{colorAttrib.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{indent_8h}{indent.h}}"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{using\ }std::max;}
\DoxyCodeLine{00023\ \textcolor{keyword}{using\ }std::min;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00029\ add\_path(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&node\_path)\ \{}
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ If\ the\ pointer\ to\ our\ internal\ array\ is\ shared\ by\ any\ other}}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ NodePathCollections,\ we\ have\ to\ copy\ the\ array\ now\ so\ we\ won't}}
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{//\ inadvertently\ modify\ any\ of\ our\ brethren\ NodePathCollection\ objects.}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{if}\ (\_node\_paths.get\_ref\_count()\ >\ 1)\ \{}
\DoxyCodeLine{00035\ \ \ \ \ NodePaths\ old\_node\_paths\ =\ \_node\_paths;}
\DoxyCodeLine{00036\ \ \ \ \ \_node\_paths\ =\ NodePaths::empty\_array(0);}
\DoxyCodeLine{00037\ \ \ \ \ \_node\_paths.v()\ =\ old\_node\_paths.v();}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \_node\_paths.push\_back(node\_path);}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00047\ \textcolor{keywordtype}{bool}\ NodePathCollection::}
\DoxyCodeLine{00048\ remove\_path(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&node\_path)\ \{}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{int}\ path\_index\ =\ -\/1;}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ path\_index\ ==\ -\/1\ \&\&\ i\ <\ (int)\_node\_paths.size();\ i++)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_node\_paths[i]\ ==\ node\_path)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ path\_index\ =\ i;}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{if}\ (path\_index\ ==\ -\/1)\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ The\ indicated\ path\ was\ not\ a\ member\ of\ the\ collection.}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00059\ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{comment}{//\ If\ the\ pointer\ to\ our\ internal\ array\ is\ shared\ by\ any\ other}}
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//\ NodePathCollections,\ we\ have\ to\ copy\ the\ array\ now\ so\ we\ won't}}
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ inadvertently\ modify\ any\ of\ our\ brethren\ NodePathCollection\ objects.}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{keywordflow}{if}\ (\_node\_paths.get\_ref\_count()\ >\ 1)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ NodePaths\ old\_node\_paths\ =\ \_node\_paths;}
\DoxyCodeLine{00067\ \ \ \ \ \_node\_paths\ =\ NodePaths::empty\_array(0);}
\DoxyCodeLine{00068\ \ \ \ \ \_node\_paths.v()\ =\ old\_node\_paths.v();}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \_node\_paths.erase(\_node\_paths.begin()\ +\ path\_index);}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00080\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00081\ add\_paths\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePathCollection}{NodePathCollection}}\ \&other)\ \{}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordtype}{int}\ other\_num\_paths\ =\ other.get\_num\_paths();}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ other\_num\_paths;\ i++)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ add\_path(other.get\_path(i));}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00093\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00094\ remove\_paths\_from(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePathCollection}{NodePathCollection}}\ \&other)\ \{}
\DoxyCodeLine{00095\ \ \ NodePaths\ new\_paths;}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordtype}{int}\ num\_paths\ =\ get\_num\_paths();}
\DoxyCodeLine{00097\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_paths;\ i++)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ path\ =\ get\_path(i);}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ (!other.has\_path(path))\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ new\_paths.push\_back(path);}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ \ \ \_node\_paths\ =\ new\_paths;}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00111\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00112\ remove\_duplicate\_paths()\ \{}
\DoxyCodeLine{00113\ \ \ NodePaths\ new\_paths;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{int}\ num\_paths\ =\ get\_num\_paths();}
\DoxyCodeLine{00116\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_paths;\ i++)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ path\ =\ get\_path(i);}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{bool}\ duplicated\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ i\ \&\&\ !duplicated;\ j++)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ duplicated\ =\ (path\ ==\ get\_path(j));}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{if}\ (!duplicated)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ new\_paths.push\_back(path);}
\DoxyCodeLine{00126\ \ \ \ \ \}}
\DoxyCodeLine{00127\ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \_node\_paths\ =\ new\_paths;}
\DoxyCodeLine{00130\ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{bool}\ NodePathCollection::}
\DoxyCodeLine{00137\ has\_path(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&path)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00138\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{if}\ (path\ ==\ get\_path(i))\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00144\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00149\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00150\ clear()\ \{}
\DoxyCodeLine{00151\ \ \ \_node\_paths.clear();}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00158\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00159\ reserve(\textcolor{keywordtype}{size\_t}\ num)\ \{}
\DoxyCodeLine{00160\ \ \ \_node\_paths.reserve(num);}
\DoxyCodeLine{00161\ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00166\ \textcolor{keywordtype}{bool}\ NodePathCollection::}
\DoxyCodeLine{00167\ is\_empty()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{return}\ \_node\_paths.empty();}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00174\ \textcolor{keywordtype}{int}\ NodePathCollection::}
\DoxyCodeLine{00175\ get\_num\_paths()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{return}\ \_node\_paths.size();}
\DoxyCodeLine{00177\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00182\ \mbox{\hyperlink{classNodePath}{NodePath}}\ NodePathCollection::}
\DoxyCodeLine{00183\ get\_path(\textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00184\ \ \ nassertr(index\ >=\ 0\ \&\&\ index\ <\ (\textcolor{keywordtype}{int})\_node\_paths.size(),\ \mbox{\hyperlink{classNodePath}{NodePath}}());}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \textcolor{keywordflow}{return}\ \_node\_paths[index];}
\DoxyCodeLine{00187\ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00193\ \mbox{\hyperlink{classNodePath}{NodePath}}\ NodePathCollection::}
\DoxyCodeLine{00194\ operator\ []\ (\textcolor{keywordtype}{size\_t}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00195\ \ \ nassertr(index\ <\ \_node\_paths.size(),\ \mbox{\hyperlink{classNodePath}{NodePath}}());}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keywordflow}{return}\ \_node\_paths[index];}
\DoxyCodeLine{00198\ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00204\ \textcolor{keywordtype}{size\_t}\ NodePathCollection::}
\DoxyCodeLine{00205\ size()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordflow}{return}\ \_node\_paths.size();}
\DoxyCodeLine{00207\ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00213\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00214\ ls(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ path\ =\ get\_path(i);}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ path\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00218\ \ \ \ \ path.ls(out,\ indent\_level\ +\ 2);}
\DoxyCodeLine{00219\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00228\ \mbox{\hyperlink{classNodePathCollection}{NodePathCollection}}\ NodePathCollection::}
\DoxyCodeLine{00229\ find\_all\_matches(\textcolor{keyword}{const}\ std::string\ \&path)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00230\ \ \ \mbox{\hyperlink{classNodePathCollection}{NodePathCollection}}\ result;}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \mbox{\hyperlink{classFindApproxPath}{FindApproxPath}}\ approx\_path;}
\DoxyCodeLine{00233\ \ \ \textcolor{keywordflow}{if}\ (approx\_path.\mbox{\hyperlink{classFindApproxPath_abc26a2e798fc7f2a874d674673371be9}{add\_string}}(path))\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_empty())\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \mbox{\hyperlink{classFindApproxLevelEntry}{FindApproxLevelEntry}}\ *level\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFindApproxLevelEntry}{FindApproxLevelEntry}}\ *start\ =}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{classFindApproxLevelEntry}{FindApproxLevelEntry}}(get\_path(i),\ approx\_path);}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ start-\/>\_next\ =\ level;}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ level\ =\ start;}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ get\_path(0).find\_matches(result,\ level,\ -\/1);}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00247\ \}}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00252\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00253\ reparent\_to(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&other)\ \{}
\DoxyCodeLine{00254\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00255\ \ \ \ \ get\_path(i).reparent\_to(other);}
\DoxyCodeLine{00256\ \ \ \}}
\DoxyCodeLine{00257\ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00263\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00264\ wrt\_reparent\_to(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&other)\ \{}
\DoxyCodeLine{00265\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ get\_path(i).wrt\_reparent\_to(other);}
\DoxyCodeLine{00267\ \ \ \}}
\DoxyCodeLine{00268\ \}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00273\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00274\ show()\ \{}
\DoxyCodeLine{00275\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00276\ \ \ \ \ get\_path(i).show();}
\DoxyCodeLine{00277\ \ \ \}}
\DoxyCodeLine{00278\ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00283\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00284\ hide()\ \{}
\DoxyCodeLine{00285\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00286\ \ \ \ \ get\_path(i).hide();}
\DoxyCodeLine{00287\ \ \ \}}
\DoxyCodeLine{00288\ \}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00293\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00294\ stash()\ \{}
\DoxyCodeLine{00295\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00296\ \ \ \ \ get\_path(i).\mbox{\hyperlink{classNodePath_a00bdaa3bb0cd06ec52283dba20197266}{stash}}();}
\DoxyCodeLine{00297\ \ \ \}}
\DoxyCodeLine{00298\ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00303\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00304\ unstash()\ \{}
\DoxyCodeLine{00305\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00306\ \ \ \ \ get\_path(i).\mbox{\hyperlink{classNodePath_a95744870fbde745a08adea9d5113b4c7}{unstash}}();}
\DoxyCodeLine{00307\ \ \ \}}
\DoxyCodeLine{00308\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00313\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00314\ detach()\ \{}
\DoxyCodeLine{00315\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ get\_path(i).detach\_node();}
\DoxyCodeLine{00317\ \ \ \}}
\DoxyCodeLine{00318\ \}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00327\ \mbox{\hyperlink{classBitMask}{CollideMask}}\ NodePathCollection::}
\DoxyCodeLine{00328\ get\_collide\_mask()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00329\ \ \ \mbox{\hyperlink{classBitMask}{CollideMask}}\ collide\_mask;}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ collide\_mask\ |=\ get\_path(i).get\_collide\_mask();}
\DoxyCodeLine{00332\ \ \ \}}
\DoxyCodeLine{00333\ \ \ \textcolor{keywordflow}{return}\ collide\_mask;}
\DoxyCodeLine{00334\ \}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00344\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00345\ set\_collide\_mask(\mbox{\hyperlink{classBitMask}{CollideMask}}\ new\_mask,\ \mbox{\hyperlink{classBitMask}{CollideMask}}\ bits\_to\_change,}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ node\_type)\ \{}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00348\ \ \ \ \ get\_path(i).set\_collide\_mask(new\_mask,\ bits\_to\_change,\ node\_type);}
\DoxyCodeLine{00349\ \ \ \}}
\DoxyCodeLine{00350\ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00361\ \textcolor{keywordtype}{bool}\ NodePathCollection::}
\DoxyCodeLine{00362\ calc\_tight\_bounds(LPoint3\ \&min\_point,\ LPoint3\ \&max\_point)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00363\ \ \ \textcolor{keywordtype}{bool}\ have\_bounds\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00366\ \ \ \ \ LPoint3\ tmp\_min;}
\DoxyCodeLine{00367\ \ \ \ \ LPoint3\ tmp\_max;}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_path(i).is\_empty())\ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_path(i).\mbox{\hyperlink{classNodePath_a97522b707f591db1a5781538d477ed97}{calc\_tight\_bounds}}(tmp\_min,\ tmp\_max))\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!have\_bounds)\ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ min\_point\ =\ tmp\_min;}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ max\_point\ =\ tmp\_max;}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ have\_bounds\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ min\_point.set(min(min\_point.\_v(0),\ tmp\_min.\_v(0)),}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min(min\_point.\_v(1),\ tmp\_min.\_v(1)),}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min(min\_point.\_v(2),\ tmp\_min.\_v(2)));}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ max\_point.set(max(max\_point.\_v(0),\ tmp\_max.\_v(0)),}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max(max\_point.\_v(1),\ tmp\_max.\_v(1)),}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max(max\_point.\_v(2),\ tmp\_max.\_v(2)));}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00386\ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \textcolor{keywordflow}{return}\ have\_bounds;}
\DoxyCodeLine{00390\ \}}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00401\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00402\ set\_texture(\mbox{\hyperlink{classTexture}{Texture}}\ *tex,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00403\ \ \ PT(\mbox{\hyperlink{classTextureStage}{TextureStage}})\ stage\ =\ TextureStage::get\_default();}
\DoxyCodeLine{00404\ \ \ set\_texture(stage,\ tex,\ priority);}
\DoxyCodeLine{00405\ \}}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00414\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00415\ set\_texture(\mbox{\hyperlink{classTextureStage}{TextureStage}}\ *stage,\ \mbox{\hyperlink{classTexture}{Texture}}\ *tex,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00416\ \ \ StateMap\ state\_map;}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ NodePaths::iterator\ npi;}
\DoxyCodeLine{00419\ \ \ \textcolor{keywordflow}{for}\ (npi\ =\ \_node\_paths.begin();\ npi\ !=\ \_node\_paths.end();\ ++npi)\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&np\ =\ (*npi);}
\DoxyCodeLine{00421\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ orig\_state\ =\ np.get\_state();}
\DoxyCodeLine{00422\ \ \ \ \ StateMap::iterator\ smi\ =\ state\_map.find(orig\_state);}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keywordflow}{if}\ (smi\ !=\ state\_map.end())\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ already\ been\ encountered;\ reuse\ it.}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ np.set\_state((*smi).second);}
\DoxyCodeLine{00426\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ not\ yet\ been\ encountered;\ apply\ the\ attrib\ to}}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \textcolor{comment}{//\ it.}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ np.set\_texture(stage,\ tex,\ priority);}
\DoxyCodeLine{00430\ \ \ \ \ \ \ state\_map[orig\_state]\ =\ np.get\_state();}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ \ \ \}}
\DoxyCodeLine{00433\ \}}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00441\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00442\ set\_texture\_off(\textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00443\ \ \ nassertv\_always(!is\_empty());}
\DoxyCodeLine{00444\ \ \ set\_attrib(TextureAttrib::make\_all\_off(),\ priority);}
\DoxyCodeLine{00445\ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00453\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00454\ set\_texture\_off(\mbox{\hyperlink{classTextureStage}{TextureStage}}\ *stage,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00455\ \ \ StateMap\ state\_map;}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ NodePaths::iterator\ npi;}
\DoxyCodeLine{00458\ \ \ \textcolor{keywordflow}{for}\ (npi\ =\ \_node\_paths.begin();\ npi\ !=\ \_node\_paths.end();\ ++npi)\ \{}
\DoxyCodeLine{00459\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&np\ =\ (*npi);}
\DoxyCodeLine{00460\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ orig\_state\ =\ np.get\_state();}
\DoxyCodeLine{00461\ \ \ \ \ StateMap::iterator\ smi\ =\ state\_map.find(orig\_state);}
\DoxyCodeLine{00462\ \ \ \ \ \textcolor{keywordflow}{if}\ (smi\ !=\ state\_map.end())\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ already\ been\ encountered;\ reuse\ it.}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ np.set\_state((*smi).second);}
\DoxyCodeLine{00465\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ not\ yet\ been\ encountered;\ apply\ the\ attrib\ to}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \textcolor{comment}{//\ it.}}
\DoxyCodeLine{00468\ \ \ \ \ \ \ np.set\_texture\_off(stage,\ priority);}
\DoxyCodeLine{00469\ \ \ \ \ \ \ state\_map[orig\_state]\ =\ np.get\_state();}
\DoxyCodeLine{00470\ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \}}
\DoxyCodeLine{00472\ \}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00477\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00478\ set\_color(\textcolor{keyword}{const}\ LColor\ \&\mbox{\hyperlink{structcolor}{color}},\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00479\ \ \ set\_attrib(ColorAttrib::make\_flat(\mbox{\hyperlink{structcolor}{color}}),\ priority);}
\DoxyCodeLine{00480\ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00486\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00487\ set\_color\_scale(\textcolor{keyword}{const}\ LVecBase4\ \&scale,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00488\ \ \ StateMap\ state\_map;}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00490\ \ \ NodePaths::iterator\ npi;}
\DoxyCodeLine{00491\ \ \ \textcolor{keywordflow}{for}\ (npi\ =\ \_node\_paths.begin();\ npi\ !=\ \_node\_paths.end();\ ++npi)\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&np\ =\ (*npi);}
\DoxyCodeLine{00493\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ orig\_state\ =\ np.get\_state();}
\DoxyCodeLine{00494\ \ \ \ \ StateMap::iterator\ smi\ =\ state\_map.find(orig\_state);}
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{keywordflow}{if}\ (smi\ !=\ state\_map.end())\ \{}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ already\ been\ encountered;\ reuse\ it.}}
\DoxyCodeLine{00497\ \ \ \ \ \ \ np.set\_state((*smi).second);}
\DoxyCodeLine{00498\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ not\ yet\ been\ encountered;\ apply\ the\ attrib\ to}}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \textcolor{comment}{//\ it.}}
\DoxyCodeLine{00501\ \ \ \ \ \ \ np.set\_color\_scale(scale,\ priority);}
\DoxyCodeLine{00502\ \ \ \ \ \ \ state\_map[orig\_state]\ =\ np.get\_state();}
\DoxyCodeLine{00503\ \ \ \ \ \}}
\DoxyCodeLine{00504\ \ \ \}}
\DoxyCodeLine{00505\ \}}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00511\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00512\ compose\_color\_scale(\textcolor{keyword}{const}\ LVecBase4\ \&scale,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00513\ \ \ StateMap\ state\_map;}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ NodePaths::iterator\ npi;}
\DoxyCodeLine{00516\ \ \ \textcolor{keywordflow}{for}\ (npi\ =\ \_node\_paths.begin();\ npi\ !=\ \_node\_paths.end();\ ++npi)\ \{}
\DoxyCodeLine{00517\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&np\ =\ (*npi);}
\DoxyCodeLine{00518\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ orig\_state\ =\ np.get\_state();}
\DoxyCodeLine{00519\ \ \ \ \ StateMap::iterator\ smi\ =\ state\_map.find(orig\_state);}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordflow}{if}\ (smi\ !=\ state\_map.end())\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ already\ been\ encountered;\ reuse\ it.}}
\DoxyCodeLine{00522\ \ \ \ \ \ \ np.set\_state((*smi).second);}
\DoxyCodeLine{00523\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ not\ yet\ been\ encountered;\ apply\ the\ attrib\ to}}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \textcolor{comment}{//\ it.}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ np.compose\_color\_scale(scale,\ priority);}
\DoxyCodeLine{00527\ \ \ \ \ \ \ state\_map[orig\_state]\ =\ np.get\_state();}
\DoxyCodeLine{00528\ \ \ \ \ \}}
\DoxyCodeLine{00529\ \ \ \}}
\DoxyCodeLine{00530\ \}}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00537\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00538\ set\_attrib(\textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderAttrib}{RenderAttrib}}\ *attrib,\ \textcolor{keywordtype}{int}\ priority)\ \{}
\DoxyCodeLine{00539\ \ \ StateMap\ state\_map;}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ NodePaths::iterator\ npi;}
\DoxyCodeLine{00542\ \ \ \textcolor{keywordflow}{for}\ (npi\ =\ \_node\_paths.begin();\ npi\ !=\ \_node\_paths.end();\ ++npi)\ \{}
\DoxyCodeLine{00543\ \ \ \ \ \mbox{\hyperlink{classNodePath}{NodePath}}\ \&np\ =\ (*npi);}
\DoxyCodeLine{00544\ \ \ \ \ CPT(\mbox{\hyperlink{classRenderState}{RenderState}})\ orig\_state\ =\ np.get\_state();}
\DoxyCodeLine{00545\ \ \ \ \ StateMap::iterator\ smi\ =\ state\_map.find(orig\_state);}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keywordflow}{if}\ (smi\ !=\ state\_map.end())\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ already\ been\ encountered;\ reuse\ it.}}
\DoxyCodeLine{00548\ \ \ \ \ \ \ np.set\_state((*smi).second);}
\DoxyCodeLine{00549\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ RenderState\ has\ not\ yet\ been\ encountered;\ apply\ the\ attrib\ to}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \textcolor{comment}{//\ it.}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ np.set\_attrib(attrib,\ priority);}
\DoxyCodeLine{00553\ \ \ \ \ \ \ state\_map[orig\_state]\ =\ np.get\_state();}
\DoxyCodeLine{00554\ \ \ \ \ \}}
\DoxyCodeLine{00555\ \ \ \}}
\DoxyCodeLine{00556\ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00562\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00563\ output(std::ostream\ \&out)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00564\ \ \ \textcolor{keywordflow}{if}\ (get\_num\_paths()\ ==\ 1)\ \{}
\DoxyCodeLine{00565\ \ \ \ \ out\ <<\ \textcolor{stringliteral}{"{}1\ NodePath"{}};}
\DoxyCodeLine{00566\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00567\ \ \ \ \ out\ <<\ get\_num\_paths()\ <<\ \textcolor{stringliteral}{"{}\ NodePaths"{}};}
\DoxyCodeLine{00568\ \ \ \}}
\DoxyCodeLine{00569\ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00575\ \textcolor{keywordtype}{void}\ NodePathCollection::}
\DoxyCodeLine{00576\ write(std::ostream\ \&out,\ \textcolor{keywordtype}{int}\ indent\_level)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00577\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_paths();\ i++)\ \{}
\DoxyCodeLine{00578\ \ \ \ \ \mbox{\hyperlink{indent_8cxx_a20c026b79ac844b38fcd02e70a7497d1}{indent}}(out,\ indent\_level)\ <<\ get\_path(i)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00579\ \ \ \}}
\DoxyCodeLine{00580\ \}}

\end{DoxyCode}

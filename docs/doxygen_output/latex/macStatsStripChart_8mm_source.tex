\doxysection{mac\+Stats\+Strip\+Chart.\+mm}
\hypertarget{macStatsStripChart_8mm_source}{}\label{macStatsStripChart_8mm_source}\index{pandatool/src/mac-\/stats/macStatsStripChart.mm@{pandatool/src/mac-\/stats/macStatsStripChart.mm}}
\mbox{\hyperlink{macStatsStripChart_8mm}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsStripChart_8h}{macStatsStripChart.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsMonitor_8h}{macStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macStatsScaleArea_8h}{macStatsScaleArea.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cocoa__compat_8h}{cocoa\_compat.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{@interface\ }\mbox{\hyperlink{interfaceMacStatsStripChartViewController}{MacStatsStripChartViewController}}\ :\ \mbox{\hyperlink{interfaceMacStatsGraphViewController}{MacStatsGraphViewController}}}
\DoxyCodeLine{00021\ \textcolor{keyword}{@end}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_strip\_chart\_width\ =\ 400;}
\DoxyCodeLine{00024\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_strip\_chart\_height\ =\ 200;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ minimum\_strip\_chart\_sidebar\_width\ =\ 116;}
\DoxyCodeLine{00027\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_strip\_chart\_sidebar\_width\ =\ 116;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00032\ MacStatsStripChart::}
\DoxyCodeLine{00033\ MacStatsStripChart(\mbox{\hyperlink{classMacStatsMonitor}{MacStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index,}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level)\ :}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}(monitor,\ thread\_index,\ collector\_index,\ show\_level,\ 0,\ 0),}
\DoxyCodeLine{00036\ \ \ \mbox{\hyperlink{classMacStatsGraph}{MacStatsGraph}}(monitor,\ [\mbox{\hyperlink{interfaceMacStatsStripChartViewController}{MacStatsStripChartViewController}}\ alloc])}
\DoxyCodeLine{00037\ \{}
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ Used\ for\ popup\ menus.}}
\DoxyCodeLine{00039\ \ \ \_menu\_delegate\ =\ [[\mbox{\hyperlink{interfaceMacStatsChartMenuDelegate}{MacStatsChartMenuDelegate}}\ alloc]\ initWithMonitor:monitor\ threadIndex:thread\_index];}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ Set\ the\ initial\ size\ of\ the\ graph.}}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{int}\ height\ =\ default\_strip\_chart\_height\ +\ \_window.frame.size.height\ -\/\ \_window.contentLayoutRect.size.height;}
\DoxyCodeLine{00043\ \ \ \_graph\_view.frame\ =\ NSMakeRect(0,\ 0,\ default\_strip\_chart\_width,\ height);}
\DoxyCodeLine{00044\ \ \ \_graph\_view\_controller.view.frame\ =\ NSMakeRect(0,\ 0,\ default\_strip\_chart\_width,\ height);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{comment}{//\ It's\ put\ inside\ a\ scroll\ view\ that\ tracks\ the\ main\ scroll\ view.}}
\DoxyCodeLine{00047\ \ \ NSScrollView\ *scroll\_view\ =\ [[NSScrollView\ alloc]\ initWithFrame:NSMakeRect(0,\ 0,\ default\_strip\_chart\_sidebar\_width,\ 0)];}
\DoxyCodeLine{00048\ \ \ scroll\_view.documentView\ =\ \_label\_stack.get\_view();}
\DoxyCodeLine{00049\ \ \ scroll\_view.drawsBackground\ =\ NO;}
\DoxyCodeLine{00050\ \ \ scroll\_view.automaticallyAdjustsContentInsets\ =\ YES;}
\DoxyCodeLine{00051\ \ \ scroll\_view.hasHorizontalScroller\ =\ NO;}
\DoxyCodeLine{00052\ \ \ scroll\_view.hasVerticalScroller\ =\ NO;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ NSViewController\ *sidebar\_controller\ =\ [[NSViewController\ alloc]\ init];}
\DoxyCodeLine{00055\ \ \ sidebar\_controller.view\ =\ scroll\_view;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \textcolor{comment}{//\ Add\ a\ view\ to\ the\ right\ of\ the\ graph,\ to\ display\ all\ of\ the\ scale\ units.}}
\DoxyCodeLine{00058\ \ \ \textcolor{comment}{//\ Calculate\ how\ wide\ it\ should\ be\ to\ display\ a\ typical\ label.}}
\DoxyCodeLine{00059\ \ \ CGFloat\ width\ =\ [NSTextField\ labelWithString:@"{}999\ ms"{}].frame.size.width\ +\ 8;}
\DoxyCodeLine{00060\ \ \ \_scale\_area\ =\ [[\mbox{\hyperlink{interfaceMacStatsScaleArea}{MacStatsScaleArea}}\ alloc]\ initWithGraph:this\ frame:NSMakeRect(0,\ 0,\ width,\ 0)];}
\DoxyCodeLine{00061\ \ \ \_scale\_area.autoresizingMask\ =\ NSViewHeightSizable;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ NSViewController\ *scale\_area\_controller\ =\ [[NSViewController\ alloc]\ init];}
\DoxyCodeLine{00064\ \ \ scale\_area\_controller.view\ =\ \_scale\_area;}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ NSSplitViewController\ *svc\ =\ [[NSSplitViewController\ alloc]\ init];}
\DoxyCodeLine{00067\ \ \ [svc\ addSplitViewItem:[NSSplitViewItem\ sidebarWithViewController:sidebar\_controller]];}
\DoxyCodeLine{00068\ \ \ [svc\ addSplitViewItem:[NSSplitViewItem\ splitViewItemWithViewController:\_graph\_view\_controller]];}
\DoxyCodeLine{00069\ \ \ [svc\ addSplitViewItem:[NSSplitViewItem\ splitViewItemWithViewController:scale\_area\_controller]];}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ svc.splitViewItems[0].minimumThickness\ =\ minimum\_strip\_chart\_sidebar\_width;}
\DoxyCodeLine{00072\ \ \ svc.splitViewItems[2].minimumThickness\ =\ width;}
\DoxyCodeLine{00073\ \ \ svc.splitViewItems[2].maximumThickness\ =\ width;}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ NSSplitView\ *split\_view\ =\ svc.splitView;}
\DoxyCodeLine{00076\ \ \ split\_view.vertical\ =\ YES;}
\DoxyCodeLine{00077\ \ \ split\_view.dividerStyle\ =\ NSSplitViewDividerStyleThin;}
\DoxyCodeLine{00078\ \ \ split\_view.autoresizingMask\ =\ NSViewWidthSizable\ |\ NSViewHeightSizable;}
\DoxyCodeLine{00079\ \ \ \_split\_view\ =\ split\_view;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{comment}{//\ When\ sidebar\ collapses,\ show\ a\ sidebar\ icon\ in\ the\ menu\ bar}}
\DoxyCodeLine{00082\ \ \ NSNotificationCenter\ *center\ =\ [NSNotificationCenter\ defaultCenter];}
\DoxyCodeLine{00083\ \ \ [center\ addObserver:\_graph\_view\_controller}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ selector:@selector(handleSplitViewResize:)}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name:NSSplitViewDidResizeSubviewsNotification}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ object:split\_view];}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \_window.contentViewController\ =\ svc;}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \_graph\_view\_controller.backToolbarItemVisible\ =\ NO;}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ [svc\ release];}
\DoxyCodeLine{00093\ \ \ [sidebar\_controller\ release];}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \_total\_item\ =\ nil;}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 11.0,\ *))\ \{}
\DoxyCodeLine{00097\ \ \ \ \ NSToolbar\ *toolbar\ =\ [[NSToolbar\ alloc]\ initWithIdentifier:@"{}"{}];}
\DoxyCodeLine{00098\ \ \ \ \ toolbar.delegate\ =\ \_graph\_view\_controller;}
\DoxyCodeLine{00099\ \ \ \ \ toolbar.displayMode\ =\ NSToolbarDisplayModeIconOnly;}
\DoxyCodeLine{00100\ \ \ \ \ \_window.toolbar\ =\ toolbar;}
\DoxyCodeLine{00101\ \ \ \ \ [\_window\ setToolbarStyle:NSWindowToolbarStyleUnifiedCompact];}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{for}\ (NSToolbarItem\ *item\ in\ toolbar.items)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ([item.itemIdentifier\ isEqual:\textcolor{stringliteral}{@"{}total"{}}])\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \_total\_item\ =\ item;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ \ \ \ \ [toolbar\ release];}
\DoxyCodeLine{00110\ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{/*\{}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \_smooth\_checkbox\ =\ [NSButton\ checkboxWithTitle:@"{}Smooth"{}}}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target:\_graph\_view\_controller}}
\DoxyCodeLine{00115\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ action:@selector(handleToggleAverageMode:)];}}
\DoxyCodeLine{00116\ \textcolor{comment}{}}
\DoxyCodeLine{00117\ \textcolor{comment}{\ \ \ \ NSStackView\ *stack\_view\ =\ [NSStackView\ stackViewWithViews:@[\_smooth\_checkbox]];}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ stack\_view.translatesAutoresizingMaskIntoConstraints\ =\ NO;}}
\DoxyCodeLine{00119\ \textcolor{comment}{}}
\DoxyCodeLine{00120\ \textcolor{comment}{\ \ \ \ NSTitlebarAccessoryViewController\ *accessory\_controller\ =\ [[NSTitlebarAccessoryViewController\ alloc]\ init];}}
\DoxyCodeLine{00121\ \textcolor{comment}{\ \ \ \ //accessory\_controller.layoutAttribute\ =\ NSLayoutAttributeLeft;}}
\DoxyCodeLine{00122\ \textcolor{comment}{\ \ \ \ [accessory\_controller.view\ addSubview:stack\_view];}}
\DoxyCodeLine{00123\ \textcolor{comment}{\ \ \ \ //accessory\_controller.automaticallyAdjustsSize\ =\ NO;}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ \ \ \ [\_window\ addTitlebarAccessoryViewController:accessory\_controller];}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ \ \ \ [accessory\_controller\ release];}}
\DoxyCodeLine{00126\ \textcolor{comment}{}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ \ \ \ [stack\_view.leftAnchor\ constraintEqualToAnchor:\_graph\_view.leftAnchor\ constant:8].active\ =\ YES;}}
\DoxyCodeLine{00128\ \textcolor{comment}{\ \ \ \ [stack\_view.bottomAnchor\ constraintEqualToAnchor:((NSLayoutGuide\ *)\_window.contentLayoutGuide).topAnchor\ constant:-\/8].active\ =\ YES;}}
\DoxyCodeLine{00129\ \textcolor{comment}{\ \ \ \ //[stack\_view.topAnchor\ constraintEqualToAnchor:svc.view.topAnchor\ constant:-\/8].active\ =\ YES;}}
\DoxyCodeLine{00130\ \textcolor{comment}{\ \ \}*/}}
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{/*\{}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ \_total\_label\ =\ [NSTextField\ labelWithString:@"{}"{}];}}
\DoxyCodeLine{00133\ \textcolor{comment}{}}
\DoxyCodeLine{00134\ \textcolor{comment}{\ \ \ \ NSStackView\ *stack\_view\ =\ [NSStackView\ stackViewWithViews:@[\_total\_label]];}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ stack\_view.translatesAutoresizingMaskIntoConstraints\ =\ NO;}}
\DoxyCodeLine{00136\ \textcolor{comment}{}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ NSTitlebarAccessoryViewController\ *accessory\_controller\ =\ [[NSTitlebarAccessoryViewController\ alloc]\ init];}}
\DoxyCodeLine{00138\ \textcolor{comment}{\ \ \ \ accessory\_controller.layoutAttribute\ =\ NSLayoutAttributeRight;}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ [accessory\_controller.view\ addSubview:stack\_view];}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ //accessory\_controller.automaticallyAdjustsSize\ =\ NO;}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ \ \ \ [\_window\ addTitlebarAccessoryViewController:accessory\_controller];}}
\DoxyCodeLine{00142\ \textcolor{comment}{\ \ \ \ [accessory\_controller\ release];}}
\DoxyCodeLine{00143\ \textcolor{comment}{}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ \ \ [stack\_view.rightAnchor\ constraintEqualToAnchor:\_graph\_view.rightAnchor].active\ =\ YES;}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ \ \ \ [stack\_view.bottomAnchor\ constraintEqualToAnchor:((NSLayoutGuide\ *)\_window.contentLayoutGuide).topAnchor].active\ =\ YES;}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ [stack\_view.topAnchor\ constraintEqualToAnchor:svc.view.topAnchor].active\ =\ YES;}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \}*/}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \textcolor{keywordflow}{if}\ (show\_level)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ a\ level-\/type\ graph,\ show\ the\ appropriate\ units.}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_unit\_name.empty())\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ set\_guide\_bar\_units(GBU\_named);}
\DoxyCodeLine{00153\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ set\_guide\_bar\_units(GBU\_named\ |\ GBU\_show\_units);}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ a\ time-\/type\ graph,\ show\ the\ ms\ /\ Hz\ units.}}
\DoxyCodeLine{00158\ \ \ \ \ set\_guide\_bar\_units(get\_guide\_bar\_units()\ |\ GBU\_show\_units);}
\DoxyCodeLine{00159\ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ [\_label\_stack.get\_view().widthAnchor\ constraintEqualToAnchor:scroll\_view.widthAnchor].active\ =\ YES;}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ Update\ window\ title\ and\ total\ label.}}
\DoxyCodeLine{00164\ \ \ new\_data(0,\ 0);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ [\_window\ makeKeyAndOrderFront:nil];}
\DoxyCodeLine{00167\ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00172\ MacStatsStripChart::}
\DoxyCodeLine{00173\ \string~MacStatsStripChart()\ \{}
\DoxyCodeLine{00174\ \ \ [\_menu\_delegate\ release];}
\DoxyCodeLine{00175\ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00180\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a15c3494bfaadb0bc4e0f15ea20476076}{MacStatsStripChart::}}}
\DoxyCodeLine{00181\ \mbox{\hyperlink{classMacStatsStripChart_a15c3494bfaadb0bc4e0f15ea20476076}{new\_collector}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00182\ \ \ \mbox{\hyperlink{classMacStatsGraph_a7d2d70b5ae3435b56c1d61492d912d3e}{MacStatsGraph::new\_collector}}(collector\_index);}
\DoxyCodeLine{00183\ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00191\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ad1057f186906500502ca5ee8f5c3d862}{MacStatsStripChart::}}}
\DoxyCodeLine{00192\ \mbox{\hyperlink{classMacStatsStripChart_ad1057f186906500502ca5ee8f5c3d862}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordflow}{if}\ (is\_title\_unknown())\ \{}
\DoxyCodeLine{00194\ \ \ \ \ std::string\ window\_title\ =\ get\_title\_text();}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_title\_unknown())\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \_window.title\ =\ [NSString\ stringWithUTF8String:window\_title.c\_str()];}
\DoxyCodeLine{00197\ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{if}\ (!\_pause)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ update();}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 10.15,\ *))\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ std::string\ text\ =\ get\_total\_text();}
\DoxyCodeLine{00205\ \ \ \ \ \ \ [\_total\_item\ setTitle:[NSString\ stringWithUTF8String:text.c\_str()]];}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \}}
\DoxyCodeLine{00208\ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00213\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ae54b0d5e57cf977fed6f3ebdb8388c87}{MacStatsStripChart::}}}
\DoxyCodeLine{00214\ \mbox{\hyperlink{classMacStatsStripChart_ae54b0d5e57cf977fed6f3ebdb8388c87}{force\_redraw}}()\ \{}
\DoxyCodeLine{00215\ \ \ \textcolor{keywordflow}{if}\ (\_ctx)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{classPStatStripChart_a765485a6699c435b0dd774c760e21c09}{PStatStripChart::force\_redraw}}();}
\DoxyCodeLine{00217\ \ \ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00220\ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00225\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a48e8b1f97e71a718fd9b386130990854}{MacStatsStripChart::}}}
\DoxyCodeLine{00226\ \mbox{\hyperlink{classMacStatsStripChart_a48e8b1f97e71a718fd9b386130990854}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00227\ \ \ \mbox{\hyperlink{classPStatStripChart_a26a5e6062591d9b8ff6545528e02fa31}{PStatStripChart::changed\_size}}(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00235\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a6cdc6e12b37a0d53deeb4dbb101b3b6d}{MacStatsStripChart::}}}
\DoxyCodeLine{00236\ \mbox{\hyperlink{classMacStatsStripChart_a6cdc6e12b37a0d53deeb4dbb101b3b6d}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordtype}{int}\ old\_unit\_mask\ =\ get\_guide\_bar\_units();}
\DoxyCodeLine{00238\ \ \ \textcolor{keywordflow}{if}\ ((old\_unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms))\ !=\ 0)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ unit\_mask\ =\ unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms);}
\DoxyCodeLine{00240\ \ \ \ \ unit\_mask\ |=\ (old\_unit\_mask\ \&\ GBU\_show\_units);}
\DoxyCodeLine{00241\ \ \ \ \ set\_guide\_bar\_units(unit\_mask);}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 10.15,\ *))\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ std::string\ text\ =\ get\_total\_text();}
\DoxyCodeLine{00245\ \ \ \ \ \ \ [\_total\_item\ setTitle:[NSString\ stringWithUTF8String:text.c\_str()]];}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00256\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_aaa19ea092babd10c38491d32d0e0ef46}{MacStatsStripChart::}}}
\DoxyCodeLine{00257\ \mbox{\hyperlink{classMacStatsStripChart_aaa19ea092babd10c38491d32d0e0ef46}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ The\ speed\ factor\ indicates\ chart\ widths\ per\ minute.}}
\DoxyCodeLine{00259\ \ \ \textcolor{keywordflow}{if}\ (scroll\_speed\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00260\ \ \ \ \ set\_horizontal\_scale(60.0f\ /\ scroll\_speed);}
\DoxyCodeLine{00261\ \ \ \}}
\DoxyCodeLine{00262\ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00267\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a2e761fdb1d516889e68b70cc4e3b9b53}{MacStatsStripChart::}}}
\DoxyCodeLine{00268\ \mbox{\hyperlink{classMacStatsStripChart_a2e761fdb1d516889e68b70cc4e3b9b53}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ <\ 0)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ whitespace\ in\ the\ graph\ is\ the\ same\ as\ clicking\ on\ the\ top}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{comment}{//\ label.}}
\DoxyCodeLine{00272\ \ \ \ \ collector\_index\ =\ get\_collector\_index();}
\DoxyCodeLine{00273\ \ \ \}}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ ==\ get\_collector\_index())\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ the\ top\ label\ means\ to\ go\ up\ to\ the\ parent\ level.}}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ MacStatsGraph::\_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector\_index))\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}}\ \&def\ =}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a24e17a5885214596815115a8bb768e2a}{get\_collector\_def}}(collector\_index);}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (def.\_parent\_index\ ==\ 0\ \&\&\ get\_view().get\_show\_level())\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Unless\ the\ parent\ is\ "{}Frame"{},\ and\ we're\ not\ a\ time\ collector.}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (def.\_parent\_index\ !=\ get\_collector\_index())\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ were\ previously\ at\ the\ parent,\ pop\ it\ from\ the\ stack.}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_back\_stack.empty()\ \&\&\ \_back\_stack.back()\ ==\ def.\_parent\_index)\ \{}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \_back\_stack.pop\_back();}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_back\_stack.empty())\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_graph\_view\_controller.backToolbarItemVisible\ =\ NO;}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_back\_stack.empty())\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_graph\_view\_controller.backToolbarItemVisible\ =\ YES;}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \_back\_stack.push\_back(get\_collector\_index());}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ set\_collector\_index(def.\_parent\_index);}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \}}
\DoxyCodeLine{00304\ \ \ \}}
\DoxyCodeLine{00305\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_back\_stack.empty())\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \_graph\_view\_controller.backToolbarItemVisible\ =\ YES;}
\DoxyCodeLine{00308\ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \_back\_stack.push\_back(get\_collector\_index());}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ any\ other\ label\ means\ to\ focus\ on\ that.}}
\DoxyCodeLine{00312\ \ \ \ \ set\_collector\_index(collector\_index);}
\DoxyCodeLine{00313\ \ \ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \textcolor{comment}{//\ Update\ window\ title\ and\ total\ label.}}
\DoxyCodeLine{00316\ \ \ new\_data(0,\ 0);}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00319\ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00325\ NSMenu\ *\mbox{\hyperlink{classMacStatsStripChart_a6a1415c676e043eb608daa90ef0f4bfc}{MacStatsStripChart::}}}
\DoxyCodeLine{00326\ \mbox{\hyperlink{classMacStatsStripChart_a6a1415c676e043eb608daa90ef0f4bfc}{get\_label\_menu}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00327\ \ \ NSMenu\ *menu\ =\ [[[NSMenu\ alloc]\ init]\ autorelease];}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ std::string\ label\ =\ get\_label\_tooltip(collector\_index);}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{if}\ (!label.empty())\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 14.0,\ *))\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ [menu\ addItem:[NSMenuItem\ sectionHeaderWithTitle:[NSString\ stringWithUTF8String:label.c\_str()]]];}
\DoxyCodeLine{00333\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:[NSString\ stringWithUTF8String:label.c\_str()]\ action:nil\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00335\ \ \ \ \ \ \ item.enabled\ =\ NO;}
\DoxyCodeLine{00336\ \ \ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00337\ \ \ \ \ \ \ [item\ release];}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \{}
\DoxyCodeLine{00342\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Set\ as\ Focus"{}\ action:@selector(handleSetAsFocus:)\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00343\ \ \ \ \ item.target\ =\ \_graph\_view\_controller;}
\DoxyCodeLine{00344\ \ \ \ \ item.tag\ =\ collector\_index;}
\DoxyCodeLine{00345\ \ \ \ \ item.enabled\ =\ (collector\_index\ !=\ 0\ ||\ get\_collector\_index()\ !=\ 0);}
\DoxyCodeLine{00346\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00347\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00348\ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \{}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{SEL}\ action\ =\ get\_view().get\_show\_level()\ ?\ \textcolor{keyword}{@selector}(handleOpenStripChartLevel:)\ :\ \textcolor{keyword}{@selector}(handleOpenStripChart:);}
\DoxyCodeLine{00352\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Open\ Strip\ Chart"{}\ action:action\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00353\ \ \ \ \ item.target\ =\ \_menu\_delegate;}
\DoxyCodeLine{00354\ \ \ \ \ item.tag\ =\ collector\_index;}
\DoxyCodeLine{00355\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00356\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00357\ \ \ \}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \textcolor{keywordflow}{if}\ (!get\_view().get\_show\_level())\ \{}
\DoxyCodeLine{00360\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Open\ Flame\ Graph"{}\ action:@selector(handleOpenFlameGraph:)\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00361\ \ \ \ \ item.target\ =\ \_menu\_delegate;}
\DoxyCodeLine{00362\ \ \ \ \ item.tag\ =\ collector\_index;}
\DoxyCodeLine{00363\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00364\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00365\ \ \ \}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ [menu\ addItem:[NSMenuItem\ separatorItem]];}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \{}
\DoxyCodeLine{00370\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Change\ Color\(\backslash\)u2026"{}\ action:@selector(handleChangeColor:)\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00371\ \ \ \ \ item.target\ =\ \_graph\_view\_controller;}
\DoxyCodeLine{00372\ \ \ \ \ item.tag\ =\ collector\_index;}
\DoxyCodeLine{00373\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00374\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00375\ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \{}
\DoxyCodeLine{00378\ \ \ \ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Reset\ Color"{}\ action:@selector(handleResetColor:)\ keyEquivalent:@"{}"{}];}
\DoxyCodeLine{00379\ \ \ \ \ item.target\ =\ \_graph\_view\_controller;}
\DoxyCodeLine{00380\ \ \ \ \ item.tag\ =\ collector\_index;}
\DoxyCodeLine{00381\ \ \ \ \ [menu\ addItem:item];}
\DoxyCodeLine{00382\ \ \ \ \ [item\ release];}
\DoxyCodeLine{00383\ \ \ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \textcolor{keywordflow}{return}\ menu;}
\DoxyCodeLine{00386\ \}}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00392\ std::string\ \mbox{\hyperlink{classMacStatsStripChart_abab535b877adbd0f0ae743b26a083586}{MacStatsStripChart::}}}
\DoxyCodeLine{00393\ \mbox{\hyperlink{classMacStatsStripChart_abab535b877adbd0f0ae743b26a083586}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00394\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatStripChart_a40bffaef86f537a63f6c7fe6c8a4195d}{PStatStripChart::get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00395\ \}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00401\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a9ad7f2dc3f97b1591a07bc65ffbb5480}{MacStatsStripChart::}}}
\DoxyCodeLine{00402\ \mbox{\hyperlink{classMacStatsStripChart_a9ad7f2dc3f97b1591a07bc65ffbb5480}{set\_vertical\_scale}}(\textcolor{keywordtype}{double}\ value\_height)\ \{}
\DoxyCodeLine{00403\ \ \ PStatStripChart::set\_vertical\_scale(value\_height);}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \_graph\_view.needsDisplay\ =\ YES;}
\DoxyCodeLine{00406\ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00407\ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00412\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_affacee48e79fe6619d994f9606573270}{MacStatsStripChart::}}}
\DoxyCodeLine{00413\ \mbox{\hyperlink{classMacStatsStripChart_affacee48e79fe6619d994f9606573270}{set\_auto\_vertical\_scale}}()\ \{}
\DoxyCodeLine{00414\ \ \ \mbox{\hyperlink{classPStatStripChart_a625250133592581ff2a0eb3d131e9405}{PStatStripChart::set\_auto\_vertical\_scale}}();}
\DoxyCodeLine{00415\ \ \ set\_vertical\_scale(get\_vertical\_scale()\ *\ 1.5);}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \_graph\_view.needsDisplay\ =\ YES;}
\DoxyCodeLine{00418\ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00419\ \}}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00424\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ae879ab13a1cea00b06b3cc14eb0568cf}{MacStatsStripChart::}}}
\DoxyCodeLine{00425\ \mbox{\hyperlink{classMacStatsStripChart_ae879ab13a1cea00b06b3cc14eb0568cf}{update\_labels}}()\ \{}
\DoxyCodeLine{00426\ \ \ \mbox{\hyperlink{classPStatStripChart_a813aa0118c3899168606f35fec5669bd}{PStatStripChart::update\_labels}}();}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00428\ \ \ \_label\_stack.clear\_labels();}
\DoxyCodeLine{00429\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ get\_num\_labels();\ i++)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \_label\_stack.add\_label(MacStatsGraph::\_monitor,\ \textcolor{keyword}{this},\ \_thread\_index,}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ get\_label\_collector(i),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00432\ \ \ \}}
\DoxyCodeLine{00433\ \ \ \_labels\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00434\ \}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00439\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a95a60ce396f287b1182cd95ba772b8df}{MacStatsStripChart::}}}
\DoxyCodeLine{00440\ \mbox{\hyperlink{classMacStatsStripChart_a95a60ce396f287b1182cd95ba772b8df}{clear\_region}}()\ \{}
\DoxyCodeLine{00441\ \ \ \textcolor{keywordflow}{if}\ (\_ctx)\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{comment}{//CGContextSetFillColorWithColor(\_ctx,\ \_background\_color);}}
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{comment}{//CGContextFillRect(\_ctx,\ CGRectMake(0,\ 0,\ get\_xsize(),\ get\_ysize()));}}
\DoxyCodeLine{00444\ \ \ \}}
\DoxyCodeLine{00445\ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00451\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a86f2f2b9f23a89fe2a77f1230442255b}{MacStatsStripChart::}}}
\DoxyCodeLine{00452\ \mbox{\hyperlink{classMacStatsStripChart_a86f2f2b9f23a89fe2a77f1230442255b}{draw\_slice}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatStripChart_1_1FrameData}{PStatStripChart::FrameData}}\ \&fdata)\ \{}
\DoxyCodeLine{00453\ \ \ \textcolor{keywordflow}{if}\ (!\_ctx)\ \{}
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00455\ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \textcolor{comment}{//\ Start\ by\ clearing\ the\ band\ first.}}
\DoxyCodeLine{00458\ \ \ CGContextSetFillColorWithColor(\_ctx,\ \_background\_color);}
\DoxyCodeLine{00459\ \ \ CGContextFillRect(\_ctx,\ CGRectMake(x,\ 0,\ w,\ get\_ysize()));}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \textcolor{keywordtype}{double}\ overall\_time\ =\ 0.0;}
\DoxyCodeLine{00462\ \ \ \textcolor{keywordtype}{int}\ y\ =\ get\_ysize();}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ FrameData::const\_iterator\ fi;}
\DoxyCodeLine{00465\ \ \ \textcolor{keywordflow}{for}\ (fi\ =\ fdata.begin();\ fi\ !=\ fdata.end();\ ++fi)\ \{}
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatStripChart_1_1ColorData}{ColorData}}\ \&cd\ =\ (*fi);}
\DoxyCodeLine{00467\ \ \ \ \ overall\_time\ +=\ cd.\_net\_value;}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_highlighted\ =\ cd.\_collector\_index\ ==\ \_highlighted\_index;}
\DoxyCodeLine{00470\ \ \ \ \ CGContextSetFillColorWithColor(\_ctx,}
\DoxyCodeLine{00471\ \ \ \ \ \ \ MacStatsGraph::\_monitor-\/>get\_collector\_color(cd.\_collector\_index,\ is\_highlighted));}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{if}\ (overall\_time\ >\ get\_vertical\_scale())\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \textcolor{comment}{//\ Off\ the\ top.\ \ Go\ ahead\ and\ clamp\ it\ by\ hand,\ in\ case\ it's\ so\ far\ off}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \textcolor{comment}{//\ the\ top\ we'd\ overflow\ the\ 16-\/bit\ pixel\ value.}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ CGContextFillRect(\_ctx,\ CGRectMake(x,\ 0,\ w,\ y));}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \textcolor{comment}{//\ And\ we\ can\ consider\ ourselves\ done\ now.}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00479\ \ \ \ \ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{keywordtype}{int}\ top\_y\ =\ height\_to\_pixel(overall\_time);}
\DoxyCodeLine{00482\ \ \ \ \ CGContextFillRect(\_ctx,\ CGRectMake(x,\ top\_y,\ w,\ y\ -\/\ top\_y));}
\DoxyCodeLine{00483\ \ \ \ \ y\ =\ top\_y;}
\DoxyCodeLine{00484\ \ \ \}}
\DoxyCodeLine{00485\ \}}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00490\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ab6f29ed6d433aec4557fe0a3f4d34792}{MacStatsStripChart::}}}
\DoxyCodeLine{00491\ \mbox{\hyperlink{classMacStatsStripChart_ab6f29ed6d433aec4557fe0a3f4d34792}{draw\_empty}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ w)\ \{}
\DoxyCodeLine{00492\ \ \ \textcolor{keywordflow}{if}\ (!\_ctx)\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00494\ \ \ \}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ CGContextSetFillColorWithColor(\_ctx,\ \_background\_color);}
\DoxyCodeLine{00497\ \ \ CGContextFillRect(\_ctx,\ CGRectMake(x,\ 0,\ w,\ get\_ysize()));}
\DoxyCodeLine{00498\ \}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00503\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a6b8c3d8d0abe59a4e6a61d2eb12d7ba6}{MacStatsStripChart::}}}
\DoxyCodeLine{00504\ \mbox{\hyperlink{classMacStatsStripChart_a6b8c3d8d0abe59a4e6a61d2eb12d7ba6}{draw\_cursor}}(\textcolor{keywordtype}{int}\ x)\ \{}
\DoxyCodeLine{00505\ \ \ \textcolor{keywordflow}{if}\ (!\_ctx)\ \{}
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00507\ \ \ \}}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ CGContextBeginPath(\_ctx);}
\DoxyCodeLine{00510\ \ \ CGContextMoveToPoint(\_ctx,\ x,\ 0);}
\DoxyCodeLine{00511\ \ \ CGContextAddLineToPoint(\_ctx,\ x,\ get\_ysize());}
\DoxyCodeLine{00512\ \ \ CGContextStrokePath(\_ctx);}
\DoxyCodeLine{00513\ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00520\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_aba0f9d254cdf5cea469c2d7d9b810d9b}{MacStatsStripChart::}}}
\DoxyCodeLine{00521\ \mbox{\hyperlink{classMacStatsStripChart_aba0f9d254cdf5cea469c2d7d9b810d9b}{end\_draw}}(\textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x)\ \{}
\DoxyCodeLine{00522\ \ \ \_graph\_view.needsDisplay\ =\ YES;}
\DoxyCodeLine{00523\ \}}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00528\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMacStatsStripChart_a4d91da859a8ef6f577e57c2ff47f93a1}{MacStatsStripChart::}}}
\DoxyCodeLine{00529\ \mbox{\hyperlink{classMacStatsStripChart_a4d91da859a8ef6f577e57c2ff47f93a1}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00531\ \ \ \mbox{\hyperlink{classMacStatsGraph_a524e8aa33f266e1e46227339bb7ac226}{MacStatsGraph::get\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00532\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00533\ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00538\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a25faa99ea92081f083dad4073d2a873f}{MacStatsStripChart::}}}
\DoxyCodeLine{00539\ \mbox{\hyperlink{classMacStatsStripChart_a25faa99ea92081f083dad4073d2a873f}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00541\ \ \ \mbox{\hyperlink{classMacStatsGraph_ae85ef8048bce18ca67658bb5e871f445}{MacStatsGraph::set\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00542\ \}}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00548\ NSMenu\ *\mbox{\hyperlink{classMacStatsStripChart_ac8f93a7f2978c581173b1bc3bd3098fe}{MacStatsStripChart::}}}
\DoxyCodeLine{00549\ \mbox{\hyperlink{classMacStatsStripChart_ac8f93a7f2978c581173b1bc3bd3098fe}{get\_graph\_menu}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00550\ \ \ NSMenu\ *menu\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00551\ \ \ \textcolor{keywordflow}{if}\ (\_highlighted\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00552\ \ \ \ \ menu\ =\ get\_label\_menu(\_highlighted\_index);}
\DoxyCodeLine{00553\ \ \ \}}
\DoxyCodeLine{00554\ \textcolor{comment}{/*}}
\DoxyCodeLine{00555\ \textcolor{comment}{\ \ if\ (menu\ !=\ nullptr)\ \{}}
\DoxyCodeLine{00556\ \textcolor{comment}{\ \ \ \ [menu\ addItem:[NSMenuItem\ separatorItem]];}}
\DoxyCodeLine{00557\ \textcolor{comment}{\ \ \}\ else\ \{}}
\DoxyCodeLine{00558\ \textcolor{comment}{\ \ \ \ menu\ =\ [[[NSMenu\ alloc]\ init]\ autorelease];}}
\DoxyCodeLine{00559\ \textcolor{comment}{\ \ \}}}
\DoxyCodeLine{00560\ \textcolor{comment}{}}
\DoxyCodeLine{00561\ \textcolor{comment}{\ \ NSMenuItem\ *item\ =\ [[NSMenuItem\ alloc]\ initWithTitle:@"{}Smooth"{}\ action:@selector(handleToggleStripChartAverage:)\ keyEquivalent:@"{}"{}];}}
\DoxyCodeLine{00562\ \textcolor{comment}{\ \ item.target\ =\ \_graph\_view\_controller;}}
\DoxyCodeLine{00563\ \textcolor{comment}{\ \ item.state\ =\ get\_average\_mode()\ ?\ NSOnState\ :\ NSOffState;}}
\DoxyCodeLine{00564\ \textcolor{comment}{\ \ [menu\ addItem:item];}}
\DoxyCodeLine{00565\ \textcolor{comment}{\ \ [item\ release];*/}}
\DoxyCodeLine{00566\ \ \ \textcolor{keywordflow}{return}\ menu;}
\DoxyCodeLine{00567\ \}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00573\ std::string\ \mbox{\hyperlink{classMacStatsStripChart_aeb9e9a01a284cc2107c11b17fce88492}{MacStatsStripChart::}}}
\DoxyCodeLine{00574\ \mbox{\hyperlink{classMacStatsStripChart_aeb9e9a01a284cc2107c11b17fce88492}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00575\ \ \ \textcolor{keywordflow}{if}\ (\_highlighted\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keywordflow}{return}\ get\_label\_tooltip(\_highlighted\_index);}
\DoxyCodeLine{00577\ \ \ \}}
\DoxyCodeLine{00578\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00579\ \}}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00586\ MacStatsGraph::DragMode\ \mbox{\hyperlink{classMacStatsStripChart_aa50b1c67b40fa1dc0a9ea7c61270c4e6}{MacStatsStripChart::}}}
\DoxyCodeLine{00587\ \mbox{\hyperlink{classMacStatsStripChart_aa50b1c67b40fa1dc0a9ea7c61270c4e6}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00588\ \ \ \textcolor{comment}{//\ See\ if\ the\ mouse\ is\ over\ a\ user-\/defined\ guide\ bar.}}
\DoxyCodeLine{00589\ \ \ \textcolor{keywordtype}{int}\ y\ =\ graph\_y;}
\DoxyCodeLine{00590\ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(y\ +\ 2);}
\DoxyCodeLine{00591\ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(y\ -\/\ 2);}
\DoxyCodeLine{00592\ \ \ \_drag\_guide\_bar\ =\ find\_user\_guide\_bar(from\_height,\ to\_height);}
\DoxyCodeLine{00593\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_guide\_bar;}
\DoxyCodeLine{00595\ \ \ \}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMacStatsGraph_aa537e931eb258abdaa4134c05f96ec82}{MacStatsGraph::consider\_drag\_start}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00598\ \}}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00604\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a359e2da28613b5f76a7d985ceeba0bd1}{MacStatsStripChart::}}}
\DoxyCodeLine{00605\ \mbox{\hyperlink{classMacStatsStripChart_a359e2da28613b5f76a7d985ceeba0bd1}{set\_drag\_mode}}(MacStatsGraph::DragMode\ drag\_mode)\ \{}
\DoxyCodeLine{00606\ \ \ \mbox{\hyperlink{classMacStatsGraph_ae1afe8a971ae7386cdb1f7532044806f}{MacStatsGraph::set\_drag\_mode}}(drag\_mode);}
\DoxyCodeLine{00607\ \}}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00612\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_add5d7c39963e5f0e700cdba652174fac}{MacStatsStripChart::}}}
\DoxyCodeLine{00613\ \mbox{\hyperlink{classMacStatsStripChart_add5d7c39963e5f0e700cdba652174fac}{handle\_button\_press}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{bool}\ double\_click,\ \textcolor{keywordtype}{int}\ button)\ \{}
\DoxyCodeLine{00614\ \ \ \textcolor{keywordflow}{if}\ (graph\_x\ >=\ 0\ \&\&\ graph\_y\ >=\ 0\ \&\&\ graph\_x\ <\ get\_xsize()\ \&\&\ graph\_y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00615\ \ \ \ \ \textcolor{keywordflow}{if}\ (double\_click\ \&\&\ button\ ==\ 0)\ \{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \textcolor{comment}{//\ Double-\/clicking\ on\ a\ color\ bar\ in\ the\ graph\ is\ the\ same\ as\ double-\/}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \textcolor{comment}{//\ clicking\ on\ the\ corresponding\ label.}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ on\_click\_label(get\_collector\_under\_pixel(graph\_x,\ graph\_y));}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00620\ \ \ \ \ \}}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \ \ set\_drag\_mode(DM\_scale);}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \_drag\_scale\_start\ =\ pixel\_to\_height(graph\_y);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \textcolor{comment}{//\ SetCapture(\_graph\_window);}}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00627\ \ \ \ \ \}}
\DoxyCodeLine{00628\ \ \ \}}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_guide\_bar\ \&\&\ \_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00631\ \ \ \ \ set\_drag\_mode(DM\_guide\_bar);}
\DoxyCodeLine{00632\ \ \ \ \ \_drag\_start\_y\ =\ graph\_y;}
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{comment}{//\ SetCapture(\_graph\_window);}}
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00635\ \ \ \}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMacStatsGraph_a85679d6f09f08fbb700a91944568b4d5}{MacStatsGraph::handle\_button\_press}}(graph\_x,\ graph\_y,}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ double\_click,\ button);}
\DoxyCodeLine{00639\ \}}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00644\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ae23e15cb5f192cfbdcac0ec9236222fa}{MacStatsStripChart::}}}
\DoxyCodeLine{00645\ \mbox{\hyperlink{classMacStatsStripChart_ae23e15cb5f192cfbdcac0ec9236222fa}{handle\_button\_release}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00646\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00647\ \ \ \ \ set\_drag\_mode(DM\_none);}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{comment}{//\ ReleaseCapture();}}
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keywordflow}{return}\ handle\_motion(graph\_x,\ graph\_y);}
\DoxyCodeLine{00650\ \ \ \}}
\DoxyCodeLine{00651\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\_y\ <\ 0\ ||\ graph\_y\ >=\ get\_ysize())\ \{}
\DoxyCodeLine{00653\ \ \ \ \ \ \ remove\_user\_guide\_bar(\_drag\_guide\_bar);}
\DoxyCodeLine{00654\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00655\ \ \ \ \ \ \ move\_user\_guide\_bar(\_drag\_guide\_bar,\ pixel\_to\_height(graph\_y));}
\DoxyCodeLine{00656\ \ \ \ \ \}}
\DoxyCodeLine{00657\ \ \ \ \ set\_drag\_mode(DM\_none);}
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{comment}{//\ ReleaseCapture();}}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keywordflow}{return}\ handle\_motion(graph\_x,\ graph\_y);}
\DoxyCodeLine{00660\ \ \ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMacStatsGraph_a0dd05ee8e330022b32393b3354f880a2}{MacStatsGraph::handle\_button\_release}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00663\ \}}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00668\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_aa44d19d31dbf7468c773f7ce54c8ec4c}{MacStatsStripChart::}}}
\DoxyCodeLine{00669\ \mbox{\hyperlink{classMacStatsStripChart_aa44d19d31dbf7468c773f7ce54c8ec4c}{handle\_motion}}(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y)\ \{}
\DoxyCodeLine{00670\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_none\ \&\&\ \_potential\_drag\_mode\ ==\ DM\_none\ \&\&}
\DoxyCodeLine{00671\ \ \ \ \ \ \ graph\_x\ >=\ 0\ \&\&\ graph\_y\ >=\ 0\ \&\&\ graph\_x\ <\ get\_xsize()\ \&\&\ graph\_y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00672\ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ is\ over\ a\ color\ bar,\ highlight\ it.}}
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ get\_collector\_under\_pixel(graph\_x,\ graph\_y);}
\DoxyCodeLine{00674\ \ \ \ \ \_label\_stack.highlight\_label(collector\_index);}
\DoxyCodeLine{00675\ \ \ \ \ on\_enter\_label(collector\_index);}
\DoxyCodeLine{00676\ \ \ \}}
\DoxyCodeLine{00677\ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00678\ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ in\ some\ drag\ mode,\ stop\ highlighting.}}
\DoxyCodeLine{00679\ \ \ \ \ \_label\_stack.highlight\_label(-\/1);}
\DoxyCodeLine{00680\ \ \ \ \ on\_leave\_label(\_highlighted\_index);}
\DoxyCodeLine{00681\ \ \ \}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \textcolor{keywordtype}{double}\ ratio\ =\ 1.0\ -\/\ ((double)graph\_y\ /\ (\textcolor{keywordtype}{double})get\_ysize());}
\DoxyCodeLine{00685\ \ \ \ \ \textcolor{keywordflow}{if}\ (ratio\ >\ 0.0)\ \{}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ new\_scale\ =\ \_drag\_scale\_start\ /\ ratio;}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(get\_vertical\_scale(),\ new\_scale))\ \{}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Disable\ smoothing\ while\ we\ do\ this\ expensive\ operation.}}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ set\_vertical\_scale(\_drag\_scale\_start\ /\ ratio);}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00691\ \ \ \ \ \}}
\DoxyCodeLine{00692\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00693\ \ \ \}}
\DoxyCodeLine{00694\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{comment}{//\ We\ haven't\ created\ the\ new\ guide\ bar\ yet;\ we\ won't\ until\ the\ mouse}}
\DoxyCodeLine{00696\ \ \ \ \ \textcolor{comment}{//\ comes\ within\ the\ graph's\ region.}}
\DoxyCodeLine{00697\ \ \ \ \ \textcolor{keywordflow}{if}\ (graph\_y\ >=\ 0\ \&\&\ graph\_y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00698\ \ \ \ \ \ \ set\_drag\_mode(DM\_guide\_bar);}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ add\_user\_guide\_bar(pixel\_to\_height(graph\_y));}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00701\ \ \ \ \ \}}
\DoxyCodeLine{00702\ \ \ \}}
\DoxyCodeLine{00703\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00704\ \ \ \ \ move\_user\_guide\_bar(\_drag\_guide\_bar,\ pixel\_to\_height(graph\_y));}
\DoxyCodeLine{00705\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00706\ \ \ \}}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ \mbox{\hyperlink{classMacStatsGraph_a45e4a7c922f1a1cc97c413af0c9d3bfb}{MacStatsGraph::handle\_motion}}(graph\_x,\ graph\_y);}
\DoxyCodeLine{00709\ \}}
\DoxyCodeLine{00710\ }
\DoxyCodeLine{00714\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_ab140acd64e9388c13bfc01cc5878a6fc}{MacStatsStripChart::}}}
\DoxyCodeLine{00715\ \mbox{\hyperlink{classMacStatsStripChart_ab140acd64e9388c13bfc01cc5878a6fc}{handle\_leave}}()\ \{}
\DoxyCodeLine{00716\ \ \ \_label\_stack.highlight\_label(-\/1);}
\DoxyCodeLine{00717\ \ \ on\_leave\_label(\_highlighted\_index);}
\DoxyCodeLine{00718\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00719\ \}}
\DoxyCodeLine{00720\ }
\DoxyCodeLine{00724\ \textcolor{keywordtype}{void}\ MacStatsStripChart::}
\DoxyCodeLine{00725\ handle\_magnify(\textcolor{keywordtype}{int}\ graph\_x,\ \textcolor{keywordtype}{int}\ graph\_y,\ \textcolor{keywordtype}{double}\ scale)\ \{}
\DoxyCodeLine{00726\ \ \ set\_vertical\_scale(get\_vertical\_scale()\ *\ (1.0\ -\/\ scale));}
\DoxyCodeLine{00727\ \}}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00732\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a33e19e89b014bf9f8adb2787a3a1d004}{MacStatsStripChart::}}}
\DoxyCodeLine{00733\ \mbox{\hyperlink{classMacStatsStripChart_a33e19e89b014bf9f8adb2787a3a1d004}{handle\_draw\_graph}}(CGContextRef\ ctx,\ NSRect\ rect)\ \{}
\DoxyCodeLine{00734\ \ \ \mbox{\hyperlink{classMacStatsGraph_aee19588a72b714ef1d04fae9da4967a9}{MacStatsGraph::handle\_draw\_graph}}(ctx,\ rect);}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \textcolor{keywordtype}{int}\ width\ =\ get\_xsize();}
\DoxyCodeLine{00737\ }
\DoxyCodeLine{00738\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ guide\ bars.}}
\DoxyCodeLine{00739\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ get\_num\_guide\_bars();}
\DoxyCodeLine{00740\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00741\ \ \ \ \ draw\_guide\_bar(ctx,\ 0,\ width,\ get\_guide\_bar(i));}
\DoxyCodeLine{00742\ \ \ \}}
\DoxyCodeLine{00743\ }
\DoxyCodeLine{00744\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ get\_num\_user\_guide\_bars();}
\DoxyCodeLine{00745\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00746\ \ \ \ \ draw\_guide\_bar(ctx,\ 0,\ width,\ get\_user\_guide\_bar(i));}
\DoxyCodeLine{00747\ \ \ \}}
\DoxyCodeLine{00748\ \}}
\DoxyCodeLine{00749\ }
\DoxyCodeLine{00753\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_aab0571302c61f056520d6fae0be0a998}{MacStatsStripChart::}}}
\DoxyCodeLine{00754\ \mbox{\hyperlink{classMacStatsStripChart_aab0571302c61f056520d6fae0be0a998}{handle\_draw\_scale\_area}}(CGContextRef\ ctx,\ NSRect\ rect)\ \{}
\DoxyCodeLine{00755\ \ \ \mbox{\hyperlink{classMacStatsGraph_aa94fc746dc83dcb53d851444151a0ae8}{MacStatsGraph::handle\_draw\_scale\_area}}(ctx,\ rect);}
\DoxyCodeLine{00756\ \ \ draw\_guide\_labels(ctx);}
\DoxyCodeLine{00757\ \}}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00762\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMacStatsStripChart_a53a370a108cd614a32fa189e4b66c26f}{MacStatsStripChart::}}}
\DoxyCodeLine{00763\ \mbox{\hyperlink{classMacStatsStripChart_a53a370a108cd614a32fa189e4b66c26f}{handle\_back}}()\ \{}
\DoxyCodeLine{00764\ \ \ \textcolor{keywordflow}{if}\ (!\_back\_stack.empty())\ \{}
\DoxyCodeLine{00765\ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ \_back\_stack.back();}
\DoxyCodeLine{00766\ \ \ \ \ \_back\_stack.pop\_back();}
\DoxyCodeLine{00767\ \ \ \ \ set\_collector\_index(collector\_index);}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \ \ \textcolor{comment}{//\ Update\ window\ title\ and\ total\ label.}}
\DoxyCodeLine{00770\ \ \ \ \ new\_data(0,\ 0);}
\DoxyCodeLine{00771\ \ \ \ \ \_scale\_area.needsDisplay\ =\ YES;}
\DoxyCodeLine{00772\ \ \ \}}
\DoxyCodeLine{00773\ }
\DoxyCodeLine{00774\ \ \ \textcolor{keywordflow}{if}\ (\_back\_stack.empty())\ \{}
\DoxyCodeLine{00775\ \ \ \ \ \_graph\_view\_controller.backToolbarItemVisible\ =\ NO;}
\DoxyCodeLine{00776\ \ \ \}}
\DoxyCodeLine{00777\ \}}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00782\ \textcolor{keywordtype}{void}\ MacStatsStripChart::}
\DoxyCodeLine{00783\ draw\_guide\_bar(CGContextRef\ ctx,\ \textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x,}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00785\ \ \ \textcolor{keywordtype}{int}\ y\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \textcolor{keywordflow}{if}\ (y\ >\ 1)\ \{}
\DoxyCodeLine{00788\ \ \ \ \ \textcolor{comment}{//\ Only\ draw\ it\ if\ it's\ not\ too\ close\ to\ the\ top.}}
\DoxyCodeLine{00789\ \ \ \ \ \textcolor{comment}{/*switch\ (bar.\_style)\ \{}}
\DoxyCodeLine{00790\ \textcolor{comment}{\ \ \ \ case\ GBS\_target:}}
\DoxyCodeLine{00791\ \textcolor{comment}{\ \ \ \ \ \ CGContextSetRGBStrokeColor(ctx,\ rgb\_light\_gray[0],\ rgb\_light\_gray[1],\ rgb\_light\_gray[2],\ 1.0);}}
\DoxyCodeLine{00792\ \textcolor{comment}{\ \ \ \ \ \ break;}}
\DoxyCodeLine{00793\ \textcolor{comment}{}}
\DoxyCodeLine{00794\ \textcolor{comment}{\ \ \ \ case\ GBS\_user:}}
\DoxyCodeLine{00795\ \textcolor{comment}{\ \ \ \ \ \ CGContextSetRGBStrokeColor(ctx,\ rgb\_user\_guide\_bar[0],\ rgb\_user\_guide\_bar[1],\ rgb\_user\_guide\_bar[2],\ 1.0);}}
\DoxyCodeLine{00796\ \textcolor{comment}{\ \ \ \ \ \ break;}}
\DoxyCodeLine{00797\ \textcolor{comment}{}}
\DoxyCodeLine{00798\ \textcolor{comment}{\ \ \ \ default:}}
\DoxyCodeLine{00799\ \textcolor{comment}{\ \ \ \ \ \ CGContextSetRGBStrokeColor(ctx,\ rgb\_dark\_gray[0],\ rgb\_dark\_gray[1],\ rgb\_dark\_gray[2],\ 1.0);}}
\DoxyCodeLine{00800\ \textcolor{comment}{\ \ \ \ \ \ break;}}
\DoxyCodeLine{00801\ \textcolor{comment}{\ \ \ \ \}*/}}
\DoxyCodeLine{00802\ \ \ \ \ CGContextSetStrokeColorWithColor(ctx,\ [NSColor\ gridColor].CGColor);}
\DoxyCodeLine{00803\ \ \ \ \ CGContextBeginPath(ctx);}
\DoxyCodeLine{00804\ \ \ \ \ CGContextMoveToPoint(ctx,\ from\_x,\ y);}
\DoxyCodeLine{00805\ \ \ \ \ CGContextAddLineToPoint(ctx,\ to\_x,\ y);}
\DoxyCodeLine{00806\ \ \ \ \ CGContextStrokePath(ctx);}
\DoxyCodeLine{00807\ \ \ \}}
\DoxyCodeLine{00808\ \}}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00813\ \textcolor{keywordtype}{void}\ MacStatsStripChart::}
\DoxyCodeLine{00814\ draw\_guide\_labels(CGContextRef\ ctx)\ \{}
\DoxyCodeLine{00815\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ labels\ for\ the\ guide\ bars.}}
\DoxyCodeLine{00816\ \ \ \textcolor{keywordtype}{int}\ last\_y\ =\ 0;}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00819\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ get\_num\_guide\_bars();}
\DoxyCodeLine{00820\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00821\ \ \ \ \ last\_y\ =\ draw\_guide\_label(ctx,\ get\_guide\_bar(i),\ last\_y);}
\DoxyCodeLine{00822\ \ \ \}}
\DoxyCodeLine{00823\ }
\DoxyCodeLine{00824\ \ \ GuideBar\ top\_value\ =\ make\_guide\_bar(get\_vertical\_scale());}
\DoxyCodeLine{00825\ \ \ draw\_guide\_label(ctx,\ top\_value,\ last\_y);}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ last\_y\ =\ 0;}
\DoxyCodeLine{00828\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ get\_num\_user\_guide\_bars();}
\DoxyCodeLine{00829\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00830\ \ \ \ \ last\_y\ =\ draw\_guide\_label(ctx,\ get\_user\_guide\_bar(i),\ last\_y);}
\DoxyCodeLine{00831\ \ \ \}}
\DoxyCodeLine{00832\ \}}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00839\ \textcolor{keywordtype}{int}\ MacStatsStripChart::}
\DoxyCodeLine{00840\ draw\_guide\_label(CGContextRef\ ctx,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar,\ \textcolor{keywordtype}{int}\ last\_y)\ \{}
\DoxyCodeLine{00841\ \ \ NSColor\ *\mbox{\hyperlink{structcolor}{color}};}
\DoxyCodeLine{00842\ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00843\ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00844\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}\ =\ [NSColor\ secondaryLabelColor];}
\DoxyCodeLine{00845\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00848\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}\ =\ [NSColor\ tertiaryLabelColor];}
\DoxyCodeLine{00849\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00852\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}}\ =\ [NSColor\ labelColor];}
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00854\ \ \ \}}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \ \ \textcolor{keywordtype}{int}\ y\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00857\ \ \ \textcolor{keyword}{const}\ std::string\ \&label\ =\ bar.\_label;}
\DoxyCodeLine{00858\ }
\DoxyCodeLine{00859\ \ \ \textcolor{keyword}{const}\ CFStringRef\ keys[]\ =\ \{}
\DoxyCodeLine{00860\ \ \ \ \ (\_\_bridge\ CFStringRef)NSForegroundColorAttributeName,}
\DoxyCodeLine{00861\ \ \ \ \ (\_\_bridge\ CFStringRef)NSFontAttributeName,}
\DoxyCodeLine{00862\ \ \ \};}
\DoxyCodeLine{00863\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *values[]\ =\ \{}
\DoxyCodeLine{00864\ \ \ \ \ \mbox{\hyperlink{structcolor}{color}},}
\DoxyCodeLine{00865\ \ \ \ \ [NSFont\ systemFontOfSize:0.0],}
\DoxyCodeLine{00866\ \ \ \};}
\DoxyCodeLine{00867\ \ \ CFDictionaryRef\ attribs\ =\ CFDictionaryCreate(kCFAllocatorDefault,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ **)keys,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ **)values,\ 2,\ \&kCFTypeDictionaryKeyCallBacks,\ \&kCFTypeDictionaryValueCallBacks);}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ CFStringRef\ str\ =\ CFStringCreateWithCString(kCFAllocatorDefault,\ label.c\_str(),\ kCFStringEncodingUTF8);}
\DoxyCodeLine{00870\ \ \ CFAttributedStringRef\ astr\ =\ CFAttributedStringCreate(kCFAllocatorDefault,\ str,\ attribs);}
\DoxyCodeLine{00871\ \ \ CFRelease(attribs);}
\DoxyCodeLine{00872\ \ \ CFRelease(str);}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ \ \ CTLineRef\ line\ =\ CTLineCreateWithAttributedString(astr);}
\DoxyCodeLine{00875\ \ \ CFRelease(astr);}
\DoxyCodeLine{00876\ \ \ CGRect\ bounds\ =\ CTLineGetImageBounds(line,\ ctx);}
\DoxyCodeLine{00877\ \ \ \textcolor{keywordtype}{int}\ height\ =\ bounds.size.height;}
\DoxyCodeLine{00878\ }
\DoxyCodeLine{00879\ \ \ \textcolor{keywordflow}{if}\ (bar.\_style\ !=\ GBS\_user)\ \{}
\DoxyCodeLine{00880\ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(y\ +\ height);}
\DoxyCodeLine{00881\ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(y\ -\/\ height);}
\DoxyCodeLine{00882\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height)\ >=\ 0)\ \{}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \textcolor{comment}{//\ Omit\ the\ label:\ there's\ a\ user-\/defined\ guide\ bar\ in\ the\ same\ space.}}
\DoxyCodeLine{00884\ \ \ \ \ \ \ CFRelease(line);}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ last\_y;}
\DoxyCodeLine{00886\ \ \ \ \ \}}
\DoxyCodeLine{00887\ \ \ \}}
\DoxyCodeLine{00888\ }
\DoxyCodeLine{00889\ \ \ \textcolor{keywordflow}{if}\ (y\ >\ height\ \&\&\ y\ <\ get\_ysize()\ -\/\ height)\ \{}
\DoxyCodeLine{00890\ \ \ \ \ \textcolor{comment}{//\ Now\ convert\ our\ y\ to\ a\ coordinate\ within\ our\ drawing\ area.}}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \ \ \ \ \textcolor{keywordtype}{int}\ this\_y\ =\ y\ -\/\ height\ /\ 2;}
\DoxyCodeLine{00893\ \ \ \ \ \textcolor{keywordflow}{if}\ (last\_y\ <\ this\_y\ ||\ last\_y\ >\ this\_y\ +\ height)\ \{}
\DoxyCodeLine{00894\ \ \ \ \ \ \ CGContextSetTextPosition(ctx,\ 4,\ get\_ysize()\ -\/\ this\_y\ -\/\ height);}
\DoxyCodeLine{00895\ \ \ \ \ \ \ CTLineDraw(line,\ ctx);}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \ \ \ \ \ \ last\_y\ =\ this\_y;}
\DoxyCodeLine{00898\ \ \ \ \ \}}
\DoxyCodeLine{00899\ \ \ \}}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \ \ CFRelease(line);}
\DoxyCodeLine{00902\ \ \ \textcolor{keywordflow}{return}\ last\_y;}
\DoxyCodeLine{00903\ \}}
\DoxyCodeLine{00904\ }
\DoxyCodeLine{00905\ \textcolor{keyword}{@implementation\ }\mbox{\hyperlink{interfaceMacStatsStripChartViewController}{MacStatsStripChartViewController}}}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ -\/\ (NSArray\ *)toolbarAllowedItemIdentifiers:(NSToolbar\ *)toolbar\ \{}
\DoxyCodeLine{00908\ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 10.15,\ *))\ \{}
\DoxyCodeLine{00909\ \ \ \ \ \textcolor{keywordflow}{return}\ @[@"{}smooth"{},\ @"{}sep"{},\ @"{}total"{}];}
\DoxyCodeLine{00910\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00911\ \ \ \ \ \textcolor{keywordflow}{return}\ @[@"{}smooth"{},\ @"{}sep"{}];}
\DoxyCodeLine{00912\ \ \ \}}
\DoxyCodeLine{00913\ \}}
\DoxyCodeLine{00914\ }
\DoxyCodeLine{00915\ -\/\ (NSArray\ *)toolbarDefaultItemIdentifiers:(NSToolbar\ *)toolbar\ \{}
\DoxyCodeLine{00916\ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 10.15,\ *))\ \{}
\DoxyCodeLine{00917\ \ \ \ \ \textcolor{keywordflow}{return}\ @[@"{}smooth"{},\ @"{}sep"{},\ @"{}total"{}];}
\DoxyCodeLine{00918\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00919\ \ \ \ \ \textcolor{keywordflow}{return}\ @[@"{}smooth"{},\ @"{}sep"{}];}
\DoxyCodeLine{00920\ \ \ \}}
\DoxyCodeLine{00921\ \}}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ -\/\ (NSToolbarItem\ *)\ toolbar:(NSToolbar\ *)toolbar}
\DoxyCodeLine{00924\ \ \ \ \ \ \ itemForItemIdentifier:(NSString\ *)ident}
\DoxyCodeLine{00925\ \ \ willBeInsertedIntoToolbar:(BOOL)flag\ \{}
\DoxyCodeLine{00926\ }
\DoxyCodeLine{00927\ \ \ \textcolor{keywordflow}{if}\ (@available(macOS\ 11.0,\ *))\ \{}
\DoxyCodeLine{00928\ \ \ \ \ \textcolor{keywordflow}{if}\ ([ident\ isEqual:\textcolor{stringliteral}{@"{}smooth"{}}])\ \{}
\DoxyCodeLine{00929\ \ \ \ \ \ \ NSButton\ *button\ =\ [NSButton\ buttonWithTitle:@"{}Smooth"{}\ target:self\ action:@selector(handleToggleSmooth:)];}
\DoxyCodeLine{00930\ \ \ \ \ \ \ button.image\ =\ [NSImage\ imageWithSystemSymbolName:@"{}alternatingcurrent"{}\ accessibilityDescription:@"{}"{}];}
\DoxyCodeLine{00931\ \ \ \ \ \ \ button.bezelStyle\ =\ NSBezelStyleTexturedRounded;}
\DoxyCodeLine{00932\ \ \ \ \ \ \ button.buttonType\ =\ NSButtonTypePushOnPushOff;}
\DoxyCodeLine{00933\ \ \ \ \ \ \ button.bordered\ =\ YES;}
\DoxyCodeLine{00934\ \ \ \ \ \ \ button.toolTip\ =\ \textcolor{stringliteral}{@"{}Smooth"{}};}
\DoxyCodeLine{00935\ \ \ \ \ \ \ button.state\ =\ NSOffState;}
\DoxyCodeLine{00936\ \ \ \ \ \ \ NSToolbarItem\ *item\ =\ [[[NSToolbarItem\ alloc]\ initWithItemIdentifier:ident]\ autorelease];}
\DoxyCodeLine{00937\ \ \ \ \ \ \ item.label\ =\ \textcolor{stringliteral}{@"{}Smooth"{}};}
\DoxyCodeLine{00938\ \ \ \ \ \ \ item.view\ =\ button;}
\DoxyCodeLine{00939\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ item;}
\DoxyCodeLine{00940\ \ \ \ \ \}}
\DoxyCodeLine{00941\ \ \ \ \ \textcolor{keywordflow}{if}\ ([ident\ isEqual:\textcolor{stringliteral}{@"{}total"{}}])\ \{}
\DoxyCodeLine{00942\ \ \ \ \ \ \ NSToolbarItem\ *item\ =\ [[[NSToolbarItem\ alloc]\ initWithItemIdentifier:ident]\ autorelease];}
\DoxyCodeLine{00943\ \ \ \ \ \ \ item.label\ =\ \textcolor{stringliteral}{@"{}Total"{}};}
\DoxyCodeLine{00944\ \ \ \ \ \ \ item.action\ =\ \textcolor{keyword}{@selector}(handleClickTotal:);}
\DoxyCodeLine{00945\ \ \ \ \ \ \ item.target\ =\ self;}
\DoxyCodeLine{00946\ \ \ \ \ \ \ [item\ setBordered:YES];}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ item;}
\DoxyCodeLine{00948\ \ \ \ \ \}}
\DoxyCodeLine{00949\ \ \ \}}
\DoxyCodeLine{00950\ }
\DoxyCodeLine{00951\ \ \ \textcolor{keywordflow}{return}\ [\textcolor{keyword}{super}\ toolbar:toolbar\ itemForItemIdentifier:ident\ willBeInsertedIntoToolbar:flag];}
\DoxyCodeLine{00952\ \}}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ -\/\ (void)handleToggleSmooth:(NSMenuItem\ *)item\ \{}
\DoxyCodeLine{00955\ \ \ \mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}\ *graph\ =\ (\mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}\ *)\_graph;}
\DoxyCodeLine{00956\ \ \ graph-\/>set\_average\_mode(item.state\ ==\ NSOnState);}
\DoxyCodeLine{00957\ \}}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ -\/\ (void)handleClickTotal:(NSButton\ *)button\ \{}
\DoxyCodeLine{00960\ \ \ \mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}\ *graph\ =\ (\mbox{\hyperlink{classMacStatsStripChart}{MacStatsStripChart}}\ *)\_graph;}
\DoxyCodeLine{00961\ \ \ graph-\/>\mbox{\hyperlink{classMacStatsStripChart_affacee48e79fe6619d994f9606573270}{set\_auto\_vertical\_scale}}();}
\DoxyCodeLine{00962\ \}}
\DoxyCodeLine{00963\ }
\DoxyCodeLine{00964\ \textcolor{keyword}{@end}}

\end{DoxyCode}

\doxysection{name\+Uniquifier.\+cxx}
\hypertarget{nameUniquifier_8cxx_source}{}\label{nameUniquifier_8cxx_source}\index{panda/src/putil/nameUniquifier.cxx@{panda/src/putil/nameUniquifier.cxx}}
\mbox{\hyperlink{nameUniquifier_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{nameUniquifier_8h}{nameUniquifier.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pnotify_8h}{pnotify.h}}"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00032\ \mbox{\hyperlink{classNameUniquifier_a9f1ebdd1ed653f5cbff91fde59251f83}{NameUniquifier::}}}
\DoxyCodeLine{00033\ \mbox{\hyperlink{classNameUniquifier_a9f1ebdd1ed653f5cbff91fde59251f83}{NameUniquifier}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&separator,}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&empty)\ :}
\DoxyCodeLine{00035\ \ \ \_separator(separator),}
\DoxyCodeLine{00036\ \ \ \_empty(empty)}
\DoxyCodeLine{00037\ \{}
\DoxyCodeLine{00038\ \ \ \_counter\ =\ 0;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{if}\ (\_empty.empty())\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \_empty\ =\ \_separator;}
\DoxyCodeLine{00042\ \ \ \}}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00048\ NameUniquifier::}
\DoxyCodeLine{00049\ \string~NameUniquifier()\ \{}
\DoxyCodeLine{00050\ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00067\ \textcolor{keywordtype}{string}\ NameUniquifier::}
\DoxyCodeLine{00068\ add\_name\_body(\textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&name,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ \&prefix)\ \{}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordflow}{if}\ (!name.empty())\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_names.insert(name).second)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ name\ was\ successfully\ inserted\ into\ the\ set;\ therefore,\ it's}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{comment}{//\ unique.\ \ Return\ it.}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ name;}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ The\ name\ was\ not\ successfully\ inserted;\ there\ must\ be\ another\ one}}
\DoxyCodeLine{00078\ \ \ \textcolor{comment}{//\ already.\ \ Make\ up\ a\ new\ one.}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Keep\ trying\ to\ make\ up\ names\ until\ we\ make\ one\ that's\ unique.}}
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{string}\ temp\_name;}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_len\ =\ 16;}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{char}\ num\_str[max\_len];}
\DoxyCodeLine{00085\ \ \ \ \ sprintf(num\_str,\ \textcolor{stringliteral}{"{}\%d"{}},\ ++\_counter);}
\DoxyCodeLine{00086\ \ \ \ \ nassertr((\textcolor{keywordtype}{int})strlen(num\_str)\ <=\ max\_len,\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (prefix.empty())\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ temp\_name\ =\ \_empty\ +\ num\_str;}
\DoxyCodeLine{00090\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ temp\_name\ =\ prefix\ +\ \_separator\ +\ num\_str;}
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \}\ \textcolor{keywordflow}{while}\ (!\_names.insert(temp\_name).second);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{return}\ temp\_name;}
\DoxyCodeLine{00096\ \}}

\end{DoxyCode}

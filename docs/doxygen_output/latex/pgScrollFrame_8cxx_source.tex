\doxysection{pg\+Scroll\+Frame.\+cxx}
\hypertarget{pgScrollFrame_8cxx_source}{}\label{pgScrollFrame_8cxx_source}\index{panda/src/pgui/pgScrollFrame.cxx@{panda/src/pgui/pgScrollFrame.cxx}}
\mbox{\hyperlink{pgScrollFrame_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pgScrollFrame_8h}{pgScrollFrame.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ PGScrollFrame::\_type\_handle;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00021\ PGScrollFrame::}
\DoxyCodeLine{00022\ PGScrollFrame(\textcolor{keyword}{const}\ std::string\ \&name)\ :}
\DoxyCodeLine{00023\ \ \ \mbox{\hyperlink{classPGVirtualFrame}{PGVirtualFrame}}(name),}
\DoxyCodeLine{00024\ \ \ \_needs\_remanage(false),}
\DoxyCodeLine{00025\ \ \ \_needs\_recompute\_clip(false),}
\DoxyCodeLine{00026\ \ \ \_has\_virtual\_frame(false),}
\DoxyCodeLine{00027\ \ \ \_virtual\_frame(0.0f,\ 0.0f,\ 0.0f,\ 0.0f),}
\DoxyCodeLine{00028\ \ \ \_manage\_pieces(false),}
\DoxyCodeLine{00029\ \ \ \_auto\_hide(false)}
\DoxyCodeLine{00030\ \{}
\DoxyCodeLine{00031\ \ \ \_canvas\_computed.test\_and\_set();}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ set\_cull\_callback();}
\DoxyCodeLine{00034\ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00039\ PGScrollFrame::}
\DoxyCodeLine{00040\ \string~PGScrollFrame()\ \{}
\DoxyCodeLine{00041\ \ \ set\_horizontal\_slider(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00042\ \ \ set\_vertical\_slider(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00048\ PGScrollFrame::}
\DoxyCodeLine{00049\ PGScrollFrame(\textcolor{keyword}{const}\ \mbox{\hyperlink{classPGScrollFrame}{PGScrollFrame}}\ \&copy)\ :}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{classPGVirtualFrame}{PGVirtualFrame}}(copy),}
\DoxyCodeLine{00051\ \ \ \_has\_virtual\_frame(copy.\_has\_virtual\_frame),}
\DoxyCodeLine{00052\ \ \ \_virtual\_frame(copy.\_virtual\_frame),}
\DoxyCodeLine{00053\ \ \ \_manage\_pieces(copy.\_manage\_pieces),}
\DoxyCodeLine{00054\ \ \ \_auto\_hide(copy.\_auto\_hide)}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00057\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00058\ \ \ \_canvas\_computed.clear();}
\DoxyCodeLine{00059\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00066\ \mbox{\hyperlink{classPandaNode}{PandaNode}}\ *\mbox{\hyperlink{classPGScrollFrame_a392cb081de799fdd7afcc1f119cf3e9b}{PGScrollFrame::}}}
\DoxyCodeLine{00067\ \mbox{\hyperlink{classPGScrollFrame_a392cb081de799fdd7afcc1f119cf3e9b}{make\_copy}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPGScrollFrame}{PGScrollFrame}}(*\textcolor{keyword}{this});}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00090\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPGScrollFrame_ac819ddea60cb34155602bb2ab69d3e2b}{PGScrollFrame::}}}
\DoxyCodeLine{00091\ \mbox{\hyperlink{classPGScrollFrame_ac819ddea60cb34155602bb2ab69d3e2b}{cull\_callback}}(\mbox{\hyperlink{classCullTraverser}{CullTraverser}}\ *trav,\ \mbox{\hyperlink{classCullTraverserData}{CullTraverserData}}\ \&data)\ \{}
\DoxyCodeLine{00092\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{if}\ (\_manage\_pieces\ \&\&\ \_needs\_remanage)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{classPGScrollFrame_a807ff210d67b15992ea53360b7f519cf}{remanage}}();}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{if}\ (\_needs\_recompute\_clip)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ recompute\_clip();}
\DoxyCodeLine{00098\ \ \ \}}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{if}\ (!\_canvas\_computed.test\_and\_set())\ \{}
\DoxyCodeLine{00100\ \ \ \ \ recompute\_canvas();}
\DoxyCodeLine{00101\ \ \ \}}
\DoxyCodeLine{00102\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPGItem_a286e3deea366c6fac0080bef9b408500}{PGVirtualFrame::cull\_callback}}(trav,\ data);}
\DoxyCodeLine{00103\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a3a17c4dc34c2a8af3dd0003f059b109a}{PGScrollFrame::}}}
\DoxyCodeLine{00110\ \mbox{\hyperlink{classPGScrollFrame_a3a17c4dc34c2a8af3dd0003f059b109a}{xform}}(\textcolor{keyword}{const}\ LMatrix4\ \&mat)\ \{}
\DoxyCodeLine{00111\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00112\ \ \ \mbox{\hyperlink{classPandaNode_a84965804b720a9d5c7eef0f80ae75aff}{PGVirtualFrame::xform}}(mat);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00115\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{void}\ PGScrollFrame::}
\DoxyCodeLine{00123\ setup(PN\_stdfloat\ width,\ PN\_stdfloat\ height,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ PN\_stdfloat\ left,\ PN\_stdfloat\ right,\ PN\_stdfloat\ bottom,\ PN\_stdfloat\ top,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ PN\_stdfloat\ slider\_width,\ PN\_stdfloat\ bevel)\ \{}
\DoxyCodeLine{00126\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00127\ \ \ set\_state(0);}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{classPGItem_a3ac32433d1a73a1bc49eb21a38aceb04}{clear\_state\_def}}(0);}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ set\_frame(0,\ width,\ 0,\ height);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \mbox{\hyperlink{classPGFrameStyle}{PGFrameStyle}}\ style;}
\DoxyCodeLine{00133\ \ \ style.set\_width(bevel,\ bevel);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ style.set\_color(0.8f,\ 0.8f,\ 0.8f,\ 1.0f);}
\DoxyCodeLine{00136\ \ \ style.set\_type(PGFrameStyle::T\_ridge);}
\DoxyCodeLine{00137\ \ \ \mbox{\hyperlink{classPGItem_a228efe1ccf462b6ab50c4aa22057bf15}{set\_frame\_style}}(0,\ style);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ set\_clip\_frame(bevel,\ width\ -\/\ bevel,}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bevel,\ height\ -\/\ bevel);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ set\_virtual\_frame(left,\ right,\ bottom,\ top);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{comment}{//\ Remove\ the\ slider\ nodes\ created\ by\ a\ previous\ call\ to\ setup(),\ if\ any.}}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{if}\ (\_horizontal\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{classPandaNode_a716da168c3b4828a04dc65b7ebdb89e2}{remove\_child}}(\_horizontal\_slider);}
\DoxyCodeLine{00147\ \ \ \ \ set\_horizontal\_slider(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ \ \ \textcolor{keywordflow}{if}\ (\_vertical\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{classPandaNode_a716da168c3b4828a04dc65b7ebdb89e2}{remove\_child}}(\_vertical\_slider);}
\DoxyCodeLine{00151\ \ \ \ \ set\_vertical\_slider(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00152\ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{//\ Create\ new\ slider\ bars.}}
\DoxyCodeLine{00155\ \ \ PT(\mbox{\hyperlink{classPGSliderBar}{PGSliderBar}})\ horizontal\_slider\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPGSliderBar}{PGSliderBar}}(\textcolor{stringliteral}{"{}horizontal"{}});}
\DoxyCodeLine{00156\ \ \ horizontal\_slider-\/>setup\_scroll\_bar(\textcolor{keyword}{false},\ width\ -\/\ slider\_width\ -\/\ bevel\ *\ 2,\ slider\_width,\ bevel);}
\DoxyCodeLine{00157\ \ \ horizontal\_slider-\/>set\_transform(TransformState::make\_pos(LVector3::rfu(width\ /\ 2.0f\ -\/\ slider\_width\ /\ 2.0f,\ 0,\ slider\_width\ /\ 2.0f\ +\ bevel)));}
\DoxyCodeLine{00158\ \ \ add\_child(horizontal\_slider);}
\DoxyCodeLine{00159\ \ \ set\_horizontal\_slider(horizontal\_slider);}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ PT(\mbox{\hyperlink{classPGSliderBar}{PGSliderBar}})\ vertical\_slider\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classPGSliderBar}{PGSliderBar}}(\textcolor{stringliteral}{"{}vertical"{}});}
\DoxyCodeLine{00162\ \ \ vertical\_slider-\/>setup\_scroll\_bar(\textcolor{keyword}{true},\ width\ -\/\ slider\_width\ -\/\ bevel\ *\ 2,\ slider\_width,\ bevel);}
\DoxyCodeLine{00163\ \ \ add\_child(vertical\_slider);}
\DoxyCodeLine{00164\ \ \ vertical\_slider-\/>set\_transform(TransformState::make\_pos(LVector3::rfu(width\ -\/\ slider\_width\ /\ 2.0f\ -\/\ bevel,\ 0,\ width\ /\ 2.0f\ +\ slider\_width\ /\ 2.0f)));}
\DoxyCodeLine{00165\ \ \ set\_vertical\_slider(vertical\_slider);}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ set\_manage\_pieces(\textcolor{keyword}{true});}
\DoxyCodeLine{00168\ \ \ set\_auto\_hide(\textcolor{keyword}{true});}
\DoxyCodeLine{00169\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00175\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a807ff210d67b15992ea53360b7f519cf}{PGScrollFrame::}}}
\DoxyCodeLine{00176\ \mbox{\hyperlink{classPGScrollFrame_a807ff210d67b15992ea53360b7f519cf}{remanage}}()\ \{}
\DoxyCodeLine{00177\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00178\ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&frame\ =\ get\_frame();}
\DoxyCodeLine{00181\ \ \ LVecBase4\ clip\ =\ \mbox{\hyperlink{classPGItem_a7961beded61bffd70a8cc2c13f7e576b}{get\_frame\_style}}(get\_state()).get\_internal\_frame(frame);}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//\ Determine\ which\ scroll\ bars\ we\ have\ in\ the\ frame.}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{bool}\ got\_horizontal\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00186\ \ \ PN\_stdfloat\ horizontal\_width\ =\ 0.0f;}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{if}\ (\_horizontal\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00188\ \ \ \ \ got\_horizontal\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&slider\_frame\ =\ \_horizontal\_slider-\/>get\_frame();}
\DoxyCodeLine{00190\ \ \ \ \ horizontal\_width\ =\ slider\_frame[3]\ -\/\ slider\_frame[2];}
\DoxyCodeLine{00191\ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \textcolor{keywordtype}{bool}\ got\_vertical\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00194\ \ \ PN\_stdfloat\ vertical\_width\ =\ 0.0f;}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{if}\ (\_vertical\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00196\ \ \ \ \ got\_vertical\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&slider\_frame\ =\ \_vertical\_slider-\/>get\_frame();}
\DoxyCodeLine{00198\ \ \ \ \ vertical\_width\ =\ slider\_frame[1]\ -\/\ slider\_frame[0];}
\DoxyCodeLine{00199\ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \textcolor{keywordflow}{if}\ (\_auto\_hide)\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Should\ we\ hide\ or\ show\ either\ of\ the\ scroll\ bars?\ \ TODO.}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{comment}{//\ Start\ by\ figuring\ out\ what\ our\ maximum\ clipping\ area\ will\ be.}}
\DoxyCodeLine{00205\ \ \ \ \ PN\_stdfloat\ clip\_width\ =\ clip[1]\ -\/\ clip[0];}
\DoxyCodeLine{00206\ \ \ \ \ PN\_stdfloat\ clip\_height\ =\ clip[3]\ -\/\ clip[2];}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{comment}{//\ And\ our\ virtual\ frame\ too.}}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&virtual\_frame\ =\ get\_virtual\_frame();}
\DoxyCodeLine{00210\ \ \ \ \ PN\_stdfloat\ virtual\_width\ =\ virtual\_frame[1]\ -\/\ virtual\_frame[0];}
\DoxyCodeLine{00211\ \ \ \ \ PN\_stdfloat\ virtual\_height\ =\ virtual\_frame[3]\ -\/\ virtual\_frame[2];}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{if}\ (virtual\_width\ <=\ clip\_width\ \&\&}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ virtual\_height\ <=\ clip\_height)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \textcolor{comment}{//\ No\ need\ for\ either\ slider.}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ got\_horizontal\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00217\ \ \ \ \ \ \ got\_vertical\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (virtual\_width\ <=\ clip\_width\ -\/\ vertical\_width)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ need\ for\ the\ horizontal\ slider.}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ got\_horizontal\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (virtual\_height\ <=\ clip\_height\ -\/\ horizontal\_width)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ need\ for\ the\ vertical\ slider.}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ got\_vertical\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ reconsider\ the\ need\ for\ the\ horizontal\ slider.}}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (virtual\_width\ <=\ clip\_width)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ got\_horizontal\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{//\ Now\ show\ or\ hide\ the\ sliders\ appropriately.}}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_horizontal\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (got\_horizontal)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \_horizontal\_slider-\/>set\_overall\_hidden(\textcolor{keyword}{false});}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \_horizontal\_slider-\/>set\_overall\_hidden(\textcolor{keyword}{true});}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \_horizontal\_slider-\/>set\_ratio(0.0f);}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ horizontal\_width\ =\ 0.0f;}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_vertical\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (got\_vertical)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \_vertical\_slider-\/>set\_overall\_hidden(\textcolor{keyword}{false});}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \_vertical\_slider-\/>set\_overall\_hidden(\textcolor{keyword}{true});}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \_vertical\_slider-\/>set\_ratio(0.0f);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ vertical\_width\ =\ 0.0f;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Showing\ or\ hiding\ one\ of\ the\ scroll\ bars\ might\ have\ set\ this\ flag\ again}}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{comment}{//\ indirectly;\ we\ clear\ it\ again\ to\ avoid\ a\ feedback\ loop.}}
\DoxyCodeLine{00258\ \ \ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00259\ \ \ \}}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{//\ Are\ either\ or\ both\ of\ the\ scroll\ bars\ hidden?}}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{if}\ (got\_horizontal\ \&\&\ \_horizontal\_slider-\/>is\_overall\_hidden())\ \{}
\DoxyCodeLine{00263\ \ \ \ \ got\_horizontal\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00264\ \ \ \ \ horizontal\_width\ =\ 0.0f;}
\DoxyCodeLine{00265\ \ \ \}}
\DoxyCodeLine{00266\ \ \ \textcolor{keywordflow}{if}\ (got\_vertical\ \&\&\ \_vertical\_slider-\/>is\_overall\_hidden())\ \{}
\DoxyCodeLine{00267\ \ \ \ \ got\_vertical\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00268\ \ \ \ \ vertical\_width\ =\ 0.0f;}
\DoxyCodeLine{00269\ \ \ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{keywordflow}{if}\ (got\_horizontal)\ \{}
\DoxyCodeLine{00272\ \ \ \ \ \_horizontal\_slider-\/>set\_frame(clip[0],\ clip[1]\ -\/\ vertical\_width,}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clip[2],\ clip[2]\ +\ horizontal\_width);}
\DoxyCodeLine{00274\ \ \ \ \ \_horizontal\_slider-\/>clear\_transform();}
\DoxyCodeLine{00275\ \ \ \}}
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{if}\ (got\_vertical)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \_vertical\_slider-\/>set\_frame(clip[1]\ -\/\ vertical\_width,\ clip[1],}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clip[2]\ +\ horizontal\_width,\ clip[3]);}
\DoxyCodeLine{00279\ \ \ \ \ \_vertical\_slider-\/>clear\_transform();}
\DoxyCodeLine{00280\ \ \ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ recompute();}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00289\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a1672c557f30d10b5c382dff68ca242d7}{PGScrollFrame::}}}
\DoxyCodeLine{00290\ \mbox{\hyperlink{classPGScrollFrame_a1672c557f30d10b5c382dff68ca242d7}{frame\_changed}}()\ \{}
\DoxyCodeLine{00291\ \ \ \mbox{\hyperlink{classPGItem_a5bcebeb1c7a21f83978e99dac36e3d0a}{PGVirtualFrame::frame\_changed}}();}
\DoxyCodeLine{00292\ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00293\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00294\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00299\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_afbfe1104b86c5307145f0d6b267f4430}{PGScrollFrame::}}}
\DoxyCodeLine{00300\ \mbox{\hyperlink{classPGScrollFrame_afbfe1104b86c5307145f0d6b267f4430}{item\_transform\_changed}}(\mbox{\hyperlink{classPGItem}{PGItem}}\ *)\ \{}
\DoxyCodeLine{00301\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00302\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00303\ \}}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00308\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a94b4e222c626cde5e76655f2a73e5a44}{PGScrollFrame::}}}
\DoxyCodeLine{00309\ \mbox{\hyperlink{classPGScrollFrame_a94b4e222c626cde5e76655f2a73e5a44}{item\_frame\_changed}}(\mbox{\hyperlink{classPGItem}{PGItem}}\ *)\ \{}
\DoxyCodeLine{00310\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00311\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00312\ \}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00317\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a17c1ab870413eec70f6781461e4bbef0}{PGScrollFrame::}}}
\DoxyCodeLine{00318\ \mbox{\hyperlink{classPGScrollFrame_a17c1ab870413eec70f6781461e4bbef0}{item\_draw\_mask\_changed}}(\mbox{\hyperlink{classPGItem}{PGItem}}\ *)\ \{}
\DoxyCodeLine{00319\ \ \ \mbox{\hyperlink{classLightReMutexHolder}{LightReMutexHolder}}\ holder(\_lock);}
\DoxyCodeLine{00320\ \ \ \_needs\_remanage\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00321\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00322\ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00328\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPGScrollFrame_a761e299f62670cbf9c71f22ac4e85155}{PGScrollFrame::}}}
\DoxyCodeLine{00329\ \mbox{\hyperlink{classPGScrollFrame_a761e299f62670cbf9c71f22ac4e85155}{slider\_bar\_adjust}}(\mbox{\hyperlink{classPGSliderBar}{PGSliderBar}}\ *)\ \{}
\DoxyCodeLine{00330\ \ \ \textcolor{comment}{//\ Indicate\ that\ recompute\_canvas()\ needs\ to\ be\ called.}}
\DoxyCodeLine{00331\ \ \ \_canvas\_computed.clear();}
\DoxyCodeLine{00332\ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00340\ \textcolor{keywordtype}{void}\ PGScrollFrame::}
\DoxyCodeLine{00341\ recompute\_clip()\ \{}
\DoxyCodeLine{00342\ \ \ \_needs\_recompute\_clip\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00343\ \ \ \_canvas\_computed.clear();}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \textcolor{comment}{//\ Figure\ out\ how\ to\ remove\ the\ scroll\ bars\ from\ the\ clip\ region.}}
\DoxyCodeLine{00346\ \ \ LVecBase4\ clip\ =\ \mbox{\hyperlink{classPGItem_a7961beded61bffd70a8cc2c13f7e576b}{get\_frame\_style}}(get\_state()).get\_internal\_frame(get\_frame());}
\DoxyCodeLine{00347\ \ \ \mbox{\hyperlink{classPGItem_ab445242d964b0bebfececf965adc9d8b}{reduce\_region}}(clip,\ \_horizontal\_slider);}
\DoxyCodeLine{00348\ \ \ \mbox{\hyperlink{classPGItem_ab445242d964b0bebfececf965adc9d8b}{reduce\_region}}(clip,\ \_vertical\_slider);}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ set\_clip\_frame(clip);}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \textcolor{keywordflow}{if}\ (\_horizontal\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00353\ \ \ \ \ \_horizontal\_slider-\/>set\_page\_size((clip[1]\ -\/\ clip[0])\ /\ (\_virtual\_frame[1]\ -\/\ \_virtual\_frame[0]));}
\DoxyCodeLine{00354\ \ \ \}}
\DoxyCodeLine{00355\ \ \ \textcolor{keywordflow}{if}\ (\_vertical\_slider\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00356\ \ \ \ \ \_vertical\_slider-\/>set\_page\_size((clip[3]\ -\/\ clip[2])\ /\ (\_virtual\_frame[3]\ -\/\ \_virtual\_frame[2]));}
\DoxyCodeLine{00357\ \ \ \}}
\DoxyCodeLine{00358\ \}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00366\ \textcolor{keywordtype}{void}\ PGScrollFrame::}
\DoxyCodeLine{00367\ recompute\_canvas()\ \{}
\DoxyCodeLine{00368\ \ \ \textcolor{keyword}{const}\ LVecBase4\ \&clip\ =\ \_has\_clip\_frame\ ?\ \_clip\_frame\ :\ get\_frame();}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \textcolor{comment}{//\ Set\ this\ to\ true\ before\ we\ sample\ the\ slider\ bar\ ratios.}}
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ If\ slider\_bar\_adjust\ happens\ to\ get\ called\ while\ we\ do\ this,\ no\ big\ deal,}}
\DoxyCodeLine{00372\ \ \ \textcolor{comment}{//\ this\ method\ will\ just\ be\ called\ again\ next\ frame.}}
\DoxyCodeLine{00373\ \ \ \_canvas\_computed.test\_and\_set();}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ PN\_stdfloat\ cx,\ cy;}
\DoxyCodeLine{00376\ \ \ cx\ =\ interpolate\_canvas(clip[0],\ clip[1],}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_virtual\_frame[0],\ \_virtual\_frame[1],}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_horizontal\_slider);}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ cy\ =\ interpolate\_canvas(clip[3],\ clip[2],}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_virtual\_frame[3],\ \_virtual\_frame[2],}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_vertical\_slider);}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \_canvas\_node-\/>set\_transform(TransformState::make\_pos(LVector3::rfu(cx,\ 0,\ cy)));}
\DoxyCodeLine{00385\ \}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00393\ PN\_stdfloat\ PGScrollFrame::}
\DoxyCodeLine{00394\ interpolate\_canvas(PN\_stdfloat\ clip\_min,\ PN\_stdfloat\ clip\_max,}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PN\_stdfloat\ canvas\_min,\ PN\_stdfloat\ canvas\_max,}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPGSliderBar}{PGSliderBar}}\ *slider\_bar)\ \{}
\DoxyCodeLine{00397\ \ \ PN\_stdfloat\ t\ =\ 0.0f;}
\DoxyCodeLine{00398\ \ \ \textcolor{keywordflow}{if}\ (slider\_bar\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00399\ \ \ \ \ t\ =\ slider\_bar-\/>get\_ratio();}
\DoxyCodeLine{00400\ \ \ \}}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ PN\_stdfloat\ min\ =\ clip\_min\ -\/\ canvas\_min;}
\DoxyCodeLine{00403\ \ \ PN\_stdfloat\ max\ =\ clip\_max\ -\/\ canvas\_max;}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \textcolor{keywordflow}{return}\ min\ +\ t\ *\ (max\ -\/\ min);}
\DoxyCodeLine{00406\ \}}

\end{DoxyCode}

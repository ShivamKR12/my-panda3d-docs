\doxysection{p\+Stat\+Server.\+h}
\hypertarget{pStatServer_8h_source}{}\label{pStatServer_8h_source}\index{pandatool/src/pstatserver/pStatServer.h@{pandatool/src/pstatserver/pStatServer.h}}
\mbox{\hyperlink{pStatServer_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#ifndef\ PSTATSERVER\_H}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ PSTATSERVER\_H}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pandatoolbase_8h}{pandatoolbase.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatListener_8h}{pStatListener.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{connectionManager_8h}{connectionManager.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vector__stdfloat_8h}{vector\_stdfloat.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pmap_8h}{pmap.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pdeque_8h}{pdeque.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatReader}{PStatReader}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPStatServer}{PStatServer}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classConnectionManager}{ConnectionManager}}\ \{}
\DoxyCodeLine{00037\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{classPStatServer}{PStatServer}}();}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{classPStatServer}{\string~PStatServer}}();}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatServer_ad3f87babd63a32b193b96f90c3cad21e}{listen}}(\textcolor{keywordtype}{int}\ port\ =\ -\/1);}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a770f50f78edc517a443275ace6acf82a}{stop\_listening}}();}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a60f09e8f28c5f981e1e70e740244b16c}{poll}}();}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a5503b4d69f85e96e8d8f9fe485df671f}{main\_loop}}(\textcolor{keywordtype}{bool}\ *interrupt\_flag\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}\ *make\_monitor(\textcolor{keyword}{const}\ \mbox{\hyperlink{classNetAddress}{NetAddress}}\ \&address)=0;}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ lost\_connection(\mbox{\hyperlink{classPStatMonitor}{PStatMonitor}}\ *monitor)\ \{\}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_aaccda2895878613155168947e0a665eb}{add\_reader}}(\mbox{\hyperlink{classConnection}{Connection}}\ *connection,\ \mbox{\hyperlink{classPStatReader}{PStatReader}}\ *reader);}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a5eb8967e25a6656600a769a5520ce572}{remove\_reader}}(\mbox{\hyperlink{classConnection}{Connection}}\ *connection,\ \mbox{\hyperlink{classPStatReader}{PStatReader}}\ *reader);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatServer_af28583f7d22002e91c842351405da716}{get\_udp\_port}}();}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_adc8dead434aef51d77828742e0b7cb05}{release\_udp\_port}}(\textcolor{keywordtype}{int}\ port);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatServer_aac8ddae5a296162c18602afe6401bdf8}{get\_num\_user\_guide\_bars}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPStatServer_af4201e60610b97ef3d6572ebea1e06d8}{get\_user\_guide\_bar\_height}}(\textcolor{keywordtype}{int}\ n)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a5b181b5b2a4507837872722479c27644}{move\_user\_guide\_bar}}(\textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{double}\ height);}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatServer_a43b382ae71556301dda3685b90f855fe}{add\_user\_guide\_bar}}(\textcolor{keywordtype}{double}\ height);}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a09dde72050fdb32e81962b3e380c9904}{remove\_user\_guide\_bar}}(\textcolor{keywordtype}{int}\ n);}
\DoxyCodeLine{00061\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classPStatServer_afe5be7600ec8b7b61d7b726a145f8f39}{find\_user\_guide\_bar}}(\textcolor{keywordtype}{double}\ from\_height,\ \textcolor{keywordtype}{double}\ to\_height)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classPStatServer_a532251340de9804b2ff90bc84da790d3}{is\_thread\_safe}}();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00066\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPStatServer_a376f1b598496d87c39e41f335acbf266}{connection\_reset}}(\textcolor{keyword}{const}\ PT(\mbox{\hyperlink{classConnection}{Connection}})\ \&connection,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ okflag);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{void}\ user\_guide\_bars\_changed();}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \mbox{\hyperlink{classPStatListener}{PStatListener}}\ *\_listener;}
\DoxyCodeLine{00073\ \ \ PT(\mbox{\hyperlink{classConnection}{Connection}})\ \_rendezvous;}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpmap}{pmap}}<PT(\mbox{\hyperlink{classConnection}{Connection}}),\ \mbox{\hyperlink{classPStatReader}{PStatReader}}\ *>\ \mbox{\hyperlink{classpmap}{Readers}};}
\DoxyCodeLine{00076\ \ \ \mbox{\hyperlink{classpmap}{Readers}}\ \_readers;}
\DoxyCodeLine{00077\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpvector}{pvector<PStatReader\ *>}}\ \mbox{\hyperlink{classpvector}{LostReaders}};}
\DoxyCodeLine{00078\ \ \ \mbox{\hyperlink{classpvector}{LostReaders}}\ \_lost\_readers;}
\DoxyCodeLine{00079\ \ \ \mbox{\hyperlink{classpvector}{LostReaders}}\ \_removed\_readers;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classpdeque}{pdeque<int>}}\ \mbox{\hyperlink{classpdeque}{Ports}};}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{classpdeque}{Ports}}\ \_available\_udp\_ports;}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{int}\ \_next\_udp\_port;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keyword}{typedef}\ vector\_stdfloat\ GuideBars;}
\DoxyCodeLine{00086\ \ \ GuideBars\ \_user\_guide\_bars;}
\DoxyCodeLine{00087\ \};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

\doxysection{panda/src/glstuff/gl\+Shader\+Context\+\_\+src.cxx File Reference}
\hypertarget{glShaderContext__src_8cxx}{}\label{glShaderContext__src_8cxx}\index{panda/src/glstuff/glShaderContext\_src.cxx@{panda/src/glstuff/glShaderContext\_src.cxx}}
{\ttfamily \#include "{}p\+Stat\+GPUTimer.\+h"{}}\newline
{\ttfamily \#include "{}color\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}color\+Scale\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}material\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}shader\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}fog\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}light\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}clip\+Plane\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}render\+Mode\+Attrib.\+h"{}}\newline
{\ttfamily \#include "{}bam\+Cache.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTypeHandle}{Type\+Handle}} CLP(\mbox{\hyperlink{classShaderContext}{Shader\+Context}}) bool \mbox{\hyperlink{glShaderContext__src_8cxx_ae262c5e190457ca34bdaf2c4898a34fd}{CLP}} (\mbox{\hyperlink{classShaderContext}{Shader\+Context}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
PANDA 3D SOFTWARE Copyright (c) Carnegie Mellon University. All rights reserved.

All use of this software is subject to the terms of the revised BSD license. You should have received a copy of this license along with this source code in a file named "{}\+LICENSE."{}

\begin{DoxyAuthor}{Author}
jyelon 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2005-\/09-\/01 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
fperazzi, Panda\+SE 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2010-\/04-\/29 parameter types only supported under Cg) 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\Hypertarget{glShaderContext__src_8cxx_ae262c5e190457ca34bdaf2c4898a34fd}\label{glShaderContext__src_8cxx_ae262c5e190457ca34bdaf2c4898a34fd} 
\index{glShaderContext\_src.cxx@{glShaderContext\_src.cxx}!CLP@{CLP}}
\index{CLP@{CLP}!glShaderContext\_src.cxx@{glShaderContext\_src.cxx}}
\doxysubsubsection{\texorpdfstring{CLP()}{CLP()}}
{\footnotesize\ttfamily bool CLP (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classShaderContext}{Shader\+Context}}}]{ }\end{DoxyParamCaption})}

The Panda CG shader syntax defines a useful set of shorthand notations for setting nodepath properties as shaderinputs. For example, float4 mspos\+\_\+\+XXX refers to nodepath XXX\textquotesingle{}s position in model space. This function is a rough attempt to reimplement some of the shorthand notations for GLSL. The code is \texorpdfstring{$\sim$}{\string~}99\% composed of excerpts dealing with matrix shaderinputs from \doxylink{classShader_a67daab137387a5f59a264eb02fb15caa}{Shader\+::compile\+\_\+parameter}.

Given a uniform variable name queried from the compiled shader passed in via arg\+\_\+id, 1) parse the name 2a) if the name refers to a Panda shorthand notation push the appropriate matrix into shader.\+\_\+mat\+\_\+spec returns True 2b) If the name doesn\textquotesingle{}t refer to a Panda shorthand notation returns False

The boolean return is used to notify down-\/river processing whether the shader var/parm was actually picked up and the appropriate Shader\+Mat\+Spec pushed onto \+\_\+mat\+\_\+spec.

xyz

Analyzes the vertex attribute and stores the information it needs to remember.

Analyzes the uniform block and stores its format.

Analyzes a single uniform variable and considers how it should be handled and bound.

Returns the texture type required for the given GL sampler type. Returns false if unsupported.

Should deallocate all system resources (such as vertex program handles or Cg contexts).

Returns true if the shader is "{}valid"{}, ie, if the compilation was successful. The compilation could fail if there is a syntax error in the shader, or if the current video card isn\textquotesingle{}t shader-\/capable, or if no shader languages are compiled into panda.

This function is to be called to enable a new shader. It also initializes all of the shader\textquotesingle{}s input parameters.

This function disables a currently-\/bound shader.

This function gets called whenever the \doxylink{classRenderState}{Render\+State} or \doxylink{classTransformState}{Transform\+State} has changed, but the \doxylink{classShader}{Shader} itself has not changed. It loads new values into the shader\textquotesingle{}s parameters.

Changes the active transform table, used for hardware skinning.

Changes the active slider table, used for hardware skinning.

Disable all the vertex arrays used by this shader.

Disables all vertex arrays used by the previous shader, then enables all the vertex arrays needed by this shader. Extracts the relevant vertex array data from the gsg.

Disable all the texture bindings used by this shader.

Disables all texture bindings used by the previous shader, then enables all the texture bindings needed by this shader. Extracts the relevant vertex array data from the gsg. The current implementation is inefficient, because it may unnecessarily disable textures then immediately reenable them. We may optimize this someday.

Updates the shader buffer bindings for this shader.

Issues memory barriers for shader buffers, should be called before a draw.

This subroutine prints the infolog for a shader.

This subroutine prints the infolog for a program.

This subroutine compiles a GLSL shader. 
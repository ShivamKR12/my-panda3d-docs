\doxysection{text\+Glyph.\+cxx}
\hypertarget{textGlyph_8cxx_source}{}\label{textGlyph_8cxx_source}\index{panda/src/text/textGlyph.cxx@{panda/src/text/textGlyph.cxx}}
\mbox{\hyperlink{textGlyph_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{textGlyph_8h}{textGlyph.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomTextGlyph_8h}{geomTextGlyph.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomTriangles_8h}{geomTriangles.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomVertexReader_8h}{geomVertexReader.h}}"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{geomVertexWriter_8h}{geomVertexWriter.h}}"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{using\ }std::max;}
\DoxyCodeLine{00021\ \textcolor{keyword}{using\ }std::min;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ TextGlyph::\_type\_handle;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00028\ TextGlyph::}
\DoxyCodeLine{00029\ \string~TextGlyph()\ \{}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00036\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classTextGlyph_a5fc7d05d5aabaa136586b4a872023106}{TextGlyph::}}}
\DoxyCodeLine{00037\ \mbox{\hyperlink{classTextGlyph_a5fc7d05d5aabaa136586b4a872023106}{is\_whitespace}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ In\ a\ static\ font,\ there\ is\ no\ explicit\ glyph\ for\ whitespace,\ so\ all}}
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{//\ glyphs\ are\ non-\/whitespace.}}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00050\ PT(\mbox{\hyperlink{classGeom}{Geom}})\ TextGlyph::}
\DoxyCodeLine{00051\ get\_geom(Geom::UsageHint\ usage\_hint)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00052\ \ \ \textcolor{keywordflow}{if}\ (\_geom.is\_null())\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ Maybe\ we\ have\ yet\ to\ generate\ a\ suitable\ Geom.}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_has\_quad)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ ((\mbox{\hyperlink{classTextGlyph}{TextGlyph}}\ *)\textcolor{keyword}{this})-\/>make\_quad\_geom();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_geom.is\_null())\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \textcolor{comment}{//\ Nope.}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ We\ always\ return\ a\ copy\ of\ the\ geom.\ \ That\ will\ allow\ the\ caller\ to}}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ modify\ its\ vertices\ without\ fear\ of\ stomping\ on\ other\ copies.\ \ It\ is\ also}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ important\ that\ we\ store\ a\ reference\ to\ this\ glyph\ on\ the\ Geom,\ since\ the}}
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ DynamicTextFont\ relies\ on\ counting\ references\ to\ determine\ whether\ a}}
\DoxyCodeLine{00069\ \ \ \textcolor{comment}{//\ glyph\ is\ no\ longer\ used.}}
\DoxyCodeLine{00070\ \ \ PT(\mbox{\hyperlink{classGeom}{Geom}})\ new\_geom\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomTextGlyph}{GeomTextGlyph}}(*\_geom,\ \textcolor{keyword}{this});}
\DoxyCodeLine{00071\ \ \ new\_geom-\/>set\_usage\_hint(usage\_hint);}
\DoxyCodeLine{00072\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classGeomVertexData}{GeomVertexData}}\ *vdata\ =\ new\_geom-\/>get\_vertex\_data();}
\DoxyCodeLine{00073\ \ \ nassertr(vdata\ !=\ \textcolor{keyword}{nullptr},\ new\_geom);}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordflow}{if}\ (vdata-\/>get\_usage\_hint()\ !=\ usage\_hint)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ new\_geom-\/>modify\_vertex\_data()-\/>set\_usage\_hint(usage\_hint);}
\DoxyCodeLine{00076\ \ \ \}}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{return}\ new\_geom;}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00086\ \textcolor{keywordtype}{void}\ TextGlyph::}
\DoxyCodeLine{00087\ calc\_tight\_bounds(LPoint3\ \&min\_point,\ LPoint3\ \&max\_point,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&found\_any,\ \mbox{\hyperlink{classThread}{Thread}}\ *current\_thread)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordflow}{if}\ (\_has\_quad)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ found\_any\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00091\ \ \ \ \ min\_point.set(\_quad\_dimensions[0],\ 0,\ \_quad\_dimensions[1]);}
\DoxyCodeLine{00092\ \ \ \ \ max\_point.set(\_quad\_dimensions[2],\ 0,\ \_quad\_dimensions[3]);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!\_geom.is\_null())\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \_geom-\/>calc\_tight\_bounds(min\_point,\ max\_point,\ found\_any,\ current\_thread);}
\DoxyCodeLine{00096\ \ \ \}}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00103\ \textcolor{keywordtype}{void}\ TextGlyph::}
\DoxyCodeLine{00104\ set\_quad(\textcolor{keyword}{const}\ LVecBase4\ \&dimensions,\ \textcolor{keyword}{const}\ LVecBase4\ \&texcoords,}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state)\ \{}
\DoxyCodeLine{00106\ \ \ \_geom.clear();}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \_quad\_dimensions\ =\ dimensions;}
\DoxyCodeLine{00109\ \ \ \_quad\_texcoords\ =\ texcoords;}
\DoxyCodeLine{00110\ \ \ \_has\_quad\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00111\ \ \ \_state\ =\ state;}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00118\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classTextGlyph_a17cfbec52e27c5c2cf5c9cba8a4d0565}{TextGlyph::}}}
\DoxyCodeLine{00119\ \mbox{\hyperlink{classTextGlyph_a17cfbec52e27c5c2cf5c9cba8a4d0565}{set\_geom}}(\mbox{\hyperlink{classGeomVertexData}{GeomVertexData}}\ *vdata,\ \mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}}\ *prim,}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRenderState}{RenderState}}\ *state)\ \{}
\DoxyCodeLine{00121\ \ \ PT(\mbox{\hyperlink{classGeom}{Geom}})\ geom\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomTextGlyph}{GeomTextGlyph}}(\textcolor{keyword}{this},\ vdata);}
\DoxyCodeLine{00122\ \ \ geom-\/>add\_primitive(prim);}
\DoxyCodeLine{00123\ \ \ \_geom\ =\ geom;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \_has\_quad\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00126\ \ \ \_state\ =\ state;}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{void}\ TextGlyph::}
\DoxyCodeLine{00137\ check\_quad\_geom()\ \{}
\DoxyCodeLine{00138\ \ \ \textcolor{comment}{//\ Currently\ it\ looks\ for\ rather\ specific\ signs\ that\ this\ glyph\ has\ been}}
\DoxyCodeLine{00139\ \ \ \textcolor{comment}{//\ generated\ using\ egg-\/mkfont.\ \ For\ now,\ this\ is\ fine.}}
\DoxyCodeLine{00140\ \ \ CPT(\mbox{\hyperlink{classGeomVertexData}{GeomVertexData}})\ vdata\ =\ \_geom-\/>get\_vertex\_data();}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{if}\ (vdata-\/>get\_num\_rows()\ !=\ 4)\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00143\ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \textcolor{comment}{//\ Does\ it\ appear\ to\ have\ a\ single\ primitive\ with\ two\ triangles?}}
\DoxyCodeLine{00146\ \ \ \textcolor{keywordflow}{if}\ (\_geom-\/>get\_num\_primitives()\ !=\ 1)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ \ \ CPT(\mbox{\hyperlink{classGeomPrimitive}{GeomPrimitive}})\ prim\ =\ \_geom-\/>get\_primitive(0);}
\DoxyCodeLine{00150\ \ \ \textcolor{keywordflow}{if}\ (!prim-\/>is\_indexed()\ ||}
\DoxyCodeLine{00151\ \ \ \ \ \ \ prim-\/>get\_primitive\_type()\ !=\ GeomPrimitive::PT\_polygons)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00153\ \ \ \}}
\DoxyCodeLine{00154\ \ \ \textcolor{keywordflow}{if}\ (!prim-\/>is\_of\_type(GeomTriangles::get\_class\_type()))\ \{}
\DoxyCodeLine{00155\ \ \ \ \ prim\ =\ prim-\/>decompose();}
\DoxyCodeLine{00156\ \ \ \}}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{if}\ (prim-\/>get\_num\_vertices()\ !=\ 6)\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00159\ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{comment}{//\ Check\ that\ it\ has\ a\ vertex\ column\ and\ optionally\ a\ texcoord\ column.}}
\DoxyCodeLine{00162\ \ \ CPT(\mbox{\hyperlink{classGeomVertexFormat}{GeomVertexFormat}})\ format\ =\ vdata-\/>get\_format();}
\DoxyCodeLine{00163\ \ \ \textcolor{keywordflow}{if}\ (format-\/>get\_num\_columns()\ >\ 2\ ||}
\DoxyCodeLine{00164\ \ \ \ \ \ \ !format-\/>has\_column(InternalName::get\_vertex()))\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00166\ \ \ \}}
\DoxyCodeLine{00167\ \ \ \textcolor{keywordflow}{if}\ (format-\/>has\_column(InternalName::get\_texcoord())\ !=\ (format-\/>get\_num\_columns()\ ==\ 2))\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ The\ second\ column,\ if\ there\ is\ one,\ is\ not\ a\ texcoord.}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{comment}{//\ Check\ that\ the\ vertices\ are\ arranged\ in\ a\ square.}}
\DoxyCodeLine{00173\ \ \ \mbox{\hyperlink{classGeomVertexReader}{GeomVertexReader}}\ vertex(vdata,\ InternalName::get\_vertex());}
\DoxyCodeLine{00174\ \ \ \mbox{\hyperlink{classGeomVertexReader}{GeomVertexReader}}\ texcoord(vdata,\ InternalName::get\_texcoord());}
\DoxyCodeLine{00175\ \ \ LVecBase3\ v\ =\ vertex.get\_data3();}
\DoxyCodeLine{00176\ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_ZERO(v[1]))\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00178\ \ \ \}}
\DoxyCodeLine{00179\ \ \ LTexCoord\ uv(0);}
\DoxyCodeLine{00180\ \ \ \textcolor{keywordflow}{if}\ (texcoord.has\_column())\ \{}
\DoxyCodeLine{00181\ \ \ \ \ uv\ =\ texcoord.get\_data2();}
\DoxyCodeLine{00182\ \ \ \}}
\DoxyCodeLine{00183\ \ \ PN\_stdfloat\ minx\ =\ v[0];}
\DoxyCodeLine{00184\ \ \ PN\_stdfloat\ maxx\ =\ v[0];}
\DoxyCodeLine{00185\ \ \ PN\_stdfloat\ miny\ =\ v[2];}
\DoxyCodeLine{00186\ \ \ PN\_stdfloat\ maxy\ =\ v[2];}
\DoxyCodeLine{00187\ \ \ PN\_stdfloat\ minu\ =\ uv[0];}
\DoxyCodeLine{00188\ \ \ PN\_stdfloat\ maxu\ =\ uv[0];}
\DoxyCodeLine{00189\ \ \ PN\_stdfloat\ minv\ =\ uv[1];}
\DoxyCodeLine{00190\ \ \ PN\_stdfloat\ maxv\ =\ uv[1];}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ 4;\ ++i)\ \{}
\DoxyCodeLine{00193\ \ \ \ \ v\ =\ vertex.get\_data3();}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_ZERO(v[1]))\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{if}\ (texcoord.has\_column())\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ uv\ =\ texcoord.get\_data2();}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(v[0],\ minx)\ \&\&\ !IS\_NEARLY\_EQUAL(v[0],\ maxx))\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(minx,\ maxx))\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v[0]\ <\ minx)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ minx\ =\ v[0];}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ minu\ =\ uv[0];}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v[0]\ >\ maxx)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ maxx\ =\ v[0];}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ maxu\ =\ uv[0];}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(v[2],\ miny)\ \&\&\ !IS\_NEARLY\_EQUAL(v[2],\ maxy))\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(miny,\ maxy))\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v[2]\ <\ miny)\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ miny\ =\ v[2];}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ minv\ =\ uv[1];}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (v[2]\ >\ maxy)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ maxy\ =\ v[2];}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ maxv\ =\ uv[1];}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(uv[0],\ minu)\ \&\&\ !IS\_NEARLY\_EQUAL(uv[0],\ maxu))\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(uv[1],\ minv)\ \&\&\ !IS\_NEARLY\_EQUAL(uv[1],\ maxv))\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \_quad\_dimensions.set(minx,\ miny,\ maxx,\ maxy);}
\DoxyCodeLine{00235\ \ \ \_quad\_texcoords.set(minu,\ minv,\ maxu,\ maxv);}
\DoxyCodeLine{00236\ \ \ \_has\_quad\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00242\ \textcolor{keywordtype}{void}\ TextGlyph::}
\DoxyCodeLine{00243\ make\_quad\_geom()\ \{}
\DoxyCodeLine{00244\ \ \ \textcolor{comment}{//\ The\ default\ implementation\ is\ to\ generate\ a\ Geom\ based\ on\ the\ get\_quad()}}
\DoxyCodeLine{00245\ \ \ \textcolor{comment}{//\ implementation,\ if\ any.}}
\DoxyCodeLine{00246\ \ \ LVecBase4\ dimensions,\ uvs;}
\DoxyCodeLine{00247\ \ \ \textcolor{keywordflow}{if}\ (!get\_quad(dimensions,\ uvs))\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \textcolor{comment}{//\ Create\ a\ corresponding\ triangle\ pair.\ \ We\ use\ a\ pair\ of\ indexed\ triangles}}
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ rather\ than\ a\ single\ triangle\ strip,\ to\ avoid\ the\ bad\ vertex\ duplication}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ behavior\ with\ lots\ of\ two-\/triangle\ strips.}}
\DoxyCodeLine{00254\ \ \ PT(\mbox{\hyperlink{classGeomVertexData}{GeomVertexData}})\ vdata\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomVertexData}{GeomVertexData}}}
\DoxyCodeLine{00255\ \ \ \ \ (std::string(),\ GeomVertexFormat::get\_v3t2(),\ Geom::UH\_static);}
\DoxyCodeLine{00256\ \ \ vdata-\/>unclean\_set\_num\_rows(4);}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ PT(\mbox{\hyperlink{classGeomTriangles}{GeomTriangles}})\ tris\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeomTriangles}{GeomTriangles}}(Geom::UH\_static);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \{}
\DoxyCodeLine{00261\ \ \ \ \ \mbox{\hyperlink{classGeomVertexWriter}{GeomVertexWriter}}\ vertex(vdata,\ InternalName::get\_vertex());}
\DoxyCodeLine{00262\ \ \ \ \ \mbox{\hyperlink{classGeomVertexWriter}{GeomVertexWriter}}\ texcoord(vdata,\ InternalName::get\_texcoord());}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ PT(\mbox{\hyperlink{classGeomVertexArrayData}{GeomVertexArrayData}})\ indices\ =\ tris-\/>modify\_vertices();}
\DoxyCodeLine{00265\ \ \ \ \ indices-\/>unclean\_set\_num\_rows(6);}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \mbox{\hyperlink{classGeomVertexWriter}{GeomVertexWriter}}\ index(indices,\ 0);}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ vertex.set\_data3(dimensions[0],\ 0,\ dimensions[3]);}
\DoxyCodeLine{00270\ \ \ \ \ vertex.set\_data3(dimensions[0],\ 0,\ dimensions[1]);}
\DoxyCodeLine{00271\ \ \ \ \ vertex.set\_data3(dimensions[2],\ 0,\ dimensions[3]);}
\DoxyCodeLine{00272\ \ \ \ \ vertex.set\_data3(dimensions[2],\ 0,\ dimensions[1]);}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ texcoord.set\_data2(uvs[0],\ uvs[3]);}
\DoxyCodeLine{00275\ \ \ \ \ texcoord.set\_data2(uvs[0],\ uvs[1]);}
\DoxyCodeLine{00276\ \ \ \ \ texcoord.set\_data2(uvs[2],\ uvs[3]);}
\DoxyCodeLine{00277\ \ \ \ \ texcoord.set\_data2(uvs[2],\ uvs[1]);}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ index.set\_data1i(0);}
\DoxyCodeLine{00280\ \ \ \ \ index.set\_data1i(1);}
\DoxyCodeLine{00281\ \ \ \ \ index.set\_data1i(2);}
\DoxyCodeLine{00282\ \ \ \ \ index.set\_data1i(2);}
\DoxyCodeLine{00283\ \ \ \ \ index.set\_data1i(1);}
\DoxyCodeLine{00284\ \ \ \ \ index.set\_data1i(3);}
\DoxyCodeLine{00285\ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{//\ We\ create\ a\ regular\ Geom\ here,\ not\ a\ GeomTextGlyph,\ since\ doing\ so\ would}}
\DoxyCodeLine{00288\ \ \ \textcolor{comment}{//\ create\ a\ circular\ reference.\ \ When\ the\ get\_geom\ method\ makes\ a\ copy,\ it}}
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{//\ will\ add\ in\ a\ pointer\ to\ this\ text\ glyph.}}
\DoxyCodeLine{00290\ \ \ PT(\mbox{\hyperlink{classGeom}{Geom}})\ geom\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGeom}{Geom}}(vdata);}
\DoxyCodeLine{00291\ \ \ geom-\/>add\_primitive(tris);}
\DoxyCodeLine{00292\ \ \ \_geom\ =\ geom;}
\DoxyCodeLine{00293\ \}}

\end{DoxyCode}

\doxysection{win\+Stats\+Strip\+Chart.\+cxx}
\hypertarget{winStatsStripChart_8cxx_source}{}\label{winStatsStripChart_8cxx_source}\index{pandatool/src/win-\/stats/winStatsStripChart.cxx@{pandatool/src/win-\/stats/winStatsStripChart.cxx}}
\mbox{\hyperlink{winStatsStripChart_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsStripChart_8h}{winStatsStripChart.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{winStatsMonitor_8h}{winStatsMonitor.h}}"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pStatCollectorDef_8h}{pStatCollectorDef.h}}"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{numeric__types_8h}{numeric\_types.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <commctrl.h>}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_strip\_chart\_width\ =\ 400;}
\DoxyCodeLine{00022\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ default\_strip\_chart\_height\ =\ 100;}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keywordtype}{bool}\ WinStatsStripChart::\_window\_class\_registered\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00025\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\ \textcolor{keyword}{const}\ WinStatsStripChart::\_window\_class\_name\ =\ \textcolor{stringliteral}{"{}strip"{}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00030\ WinStatsStripChart::}
\DoxyCodeLine{00031\ WinStatsStripChart(\mbox{\hyperlink{classWinStatsMonitor}{WinStatsMonitor}}\ *monitor,\ \textcolor{keywordtype}{int}\ thread\_index,}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index,\ \textcolor{keywordtype}{bool}\ show\_level)\ :}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{classPStatStripChart}{PStatStripChart}}(monitor,}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ thread\_index,\ collector\_index,\ show\_level,}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ monitor-\/>get\_pixel\_scale()\ *\ default\_strip\_chart\_width\ /\ 4,}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ monitor-\/>get\_pixel\_scale()\ *\ default\_strip\_chart\_height\ /\ 4),}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{classWinStatsGraph}{WinStatsGraph}}(monitor)}
\DoxyCodeLine{00038\ \{}
\DoxyCodeLine{00039\ \ \ \_brush\_origin\ =\ 0;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \_left\_margin\ =\ \_pixel\_scale\ *\ 24;}
\DoxyCodeLine{00042\ \ \ \_right\_margin\ =\ \_pixel\_scale\ *\ 12;}
\DoxyCodeLine{00043\ \ \ \_top\_margin\ =\ \_pixel\_scale\ *\ 6;}
\DoxyCodeLine{00044\ \ \ \_bottom\_margin\ =\ \_pixel\_scale\ *\ 2;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \textcolor{keywordflow}{if}\ (show\_level)\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ a\ level-\/type\ graph,\ show\ the\ appropriate\ units.}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_unit\_name.empty())\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ set\_guide\_bar\_units(GBU\_named);}
\DoxyCodeLine{00050\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ set\_guide\_bar\_units(GBU\_named\ |\ GBU\_show\_units);}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ If\ it's\ a\ time-\/type\ graph,\ show\ the\ msHz\ units.}}
\DoxyCodeLine{00056\ \ \ \ \ set\_guide\_bar\_units(get\_guide\_bar\_units()\ |\ GBU\_show\_units);}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \_smooth\_check\_box\ =\ 0;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ create\_window();}
\DoxyCodeLine{00062\ \ \ clear\_region();}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ update();}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00070\ WinStatsStripChart::}
\DoxyCodeLine{00071\ \string~WinStatsStripChart()\ \{}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00077\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a76434b811bd9896d28c2eb606d7db679}{WinStatsStripChart::}}}
\DoxyCodeLine{00078\ \mbox{\hyperlink{classWinStatsStripChart_a76434b811bd9896d28c2eb606d7db679}{new\_collector}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00079\ \ \ \mbox{\hyperlink{classWinStatsGraph_a647e6ac8b4a69314d42f7f7b0cabab35}{WinStatsGraph::new\_collector}}(collector\_index);}
\DoxyCodeLine{00080\ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00088\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a21872c116352c00895fbc840b44a9a5c}{WinStatsStripChart::}}}
\DoxyCodeLine{00089\ \mbox{\hyperlink{classWinStatsStripChart_a21872c116352c00895fbc840b44a9a5c}{new\_data}}(\textcolor{keywordtype}{int}\ thread\_index,\ \textcolor{keywordtype}{int}\ frame\_number)\ \{}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordflow}{if}\ (is\_title\_unknown())\ \{}
\DoxyCodeLine{00091\ \ \ \ \ std::string\ window\_title\ =\ \mbox{\hyperlink{classPStatStripChart_a0a82fe4c239622dacc00324ddfd8a82f}{get\_title\_text}}();}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_title\_unknown())\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ SetWindowText(\_window,\ window\_title.c\_str());}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordflow}{if}\ (!\_pause)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{classPStatStripChart_a87afb99523c7cdd69b7e789d6f0d90f1}{update}}();}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ std::string\ text\ =\ \mbox{\hyperlink{classPStatStripChart_a8f58e934d36b58008f68bc3c71cb785a}{get\_total\_text}}();}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_net\_value\_text\ !=\ text)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \_net\_value\_text\ =\ text;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00104\ \ \ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00105\ \ \ \ \ \ \ rect.bottom\ =\ \_top\_margin;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00114\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a5a51d1c067837f0c0db5d38bf23ac2f7}{WinStatsStripChart::}}}
\DoxyCodeLine{00115\ \mbox{\hyperlink{classWinStatsStripChart_a5a51d1c067837f0c0db5d38bf23ac2f7}{force\_redraw}}()\ \{}
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{classPStatStripChart_a765485a6699c435b0dd774c760e21c09}{PStatStripChart::force\_redraw}}();}
\DoxyCodeLine{00117\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00122\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a4a3e33182d7bb4c60e0069b6393f22a3}{WinStatsStripChart::}}}
\DoxyCodeLine{00123\ \mbox{\hyperlink{classWinStatsStripChart_a4a3e33182d7bb4c60e0069b6393f22a3}{changed\_graph\_size}}(\textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{classPStatStripChart_a26a5e6062591d9b8ff6545528e02fa31}{PStatStripChart::changed\_size}}(graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00132\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_ae51114ddb75791de39f7f151cae2f7ab}{WinStatsStripChart::}}}
\DoxyCodeLine{00133\ \mbox{\hyperlink{classWinStatsStripChart_ae51114ddb75791de39f7f151cae2f7ab}{set\_time\_units}}(\textcolor{keywordtype}{int}\ unit\_mask)\ \{}
\DoxyCodeLine{00134\ \ \ \textcolor{keywordtype}{int}\ old\_unit\_mask\ =\ get\_guide\_bar\_units();}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{if}\ ((old\_unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms))\ !=\ 0)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ unit\_mask\ =\ unit\_mask\ \&\ (GBU\_hz\ |\ GBU\_ms);}
\DoxyCodeLine{00137\ \ \ \ \ unit\_mask\ |=\ (old\_unit\_mask\ \&\ GBU\_show\_units);}
\DoxyCodeLine{00138\ \ \ \ \ set\_guide\_bar\_units(unit\_mask);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00141\ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00142\ \ \ \ \ rect.left\ =\ \_right\_margin;}
\DoxyCodeLine{00143\ \ \ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00146\ \ \ \ \ rect.bottom\ =\ \_top\_margin;}
\DoxyCodeLine{00147\ \ \ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00155\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_abcb740f37b92e11274fc26584359dcfd}{WinStatsStripChart::}}}
\DoxyCodeLine{00156\ \mbox{\hyperlink{classWinStatsStripChart_abcb740f37b92e11274fc26584359dcfd}{set\_scroll\_speed}}(\textcolor{keywordtype}{double}\ scroll\_speed)\ \{}
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ The\ speed\ factor\ indicates\ chart\ widths\ per\ minute.}}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordflow}{if}\ (scroll\_speed\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ set\_horizontal\_scale(60.0f\ /\ scroll\_speed);}
\DoxyCodeLine{00160\ \ \ \}}
\DoxyCodeLine{00161\ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00166\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a1fd4644a758f62ac527e72fa7b18d636}{WinStatsStripChart::}}}
\DoxyCodeLine{00167\ \mbox{\hyperlink{classWinStatsStripChart_a1fd4644a758f62ac527e72fa7b18d636}{on\_click\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ <\ 0)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ whitespace\ in\ the\ graph\ is\ the\ same\ as\ clicking\ on\ the\ top}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ label.}}
\DoxyCodeLine{00171\ \ \ \ \ collector\_index\ =\ get\_collector\_index();}
\DoxyCodeLine{00172\ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ ==\ get\_collector\_index()\ \&\&\ collector\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ the\ top\ label\ means\ to\ go\ up\ to\ the\ parent\ level.}}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatClientData}{PStatClientData}}\ *client\_data\ =}
\DoxyCodeLine{00177\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>get\_client\_data();}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{if}\ (client\_data-\/>\mbox{\hyperlink{classPStatClientData_aa9e2c591cab46b192ff3aa9409e1f681}{has\_collector}}(collector\_index))\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatCollectorDef}{PStatCollectorDef}}\ \&def\ =}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ client\_data-\/>\mbox{\hyperlink{classPStatClientData_a24e17a5885214596815115a8bb768e2a}{get\_collector\_def}}(collector\_index);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (def.\_parent\_index\ ==\ 0\ \&\&\ get\_view().get\_show\_level())\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Unless\ the\ parent\ is\ "{}Frame"{},\ and\ we're\ not\ a\ time\ collector.}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_aa715175d8100af473159a15e0da68f76}{set\_collector\_index}}(def.\_parent\_index);}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ Clicking\ on\ any\ other\ label\ means\ to\ focus\ on\ that.}}
\DoxyCodeLine{00190\ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_aa715175d8100af473159a15e0da68f76}{set\_collector\_index}}(collector\_index);}
\DoxyCodeLine{00191\ \ \ \}}
\DoxyCodeLine{00192\ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00197\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a6cae171f7d9a208868a71add74843102}{WinStatsStripChart::}}}
\DoxyCodeLine{00198\ \mbox{\hyperlink{classWinStatsStripChart_a6cae171f7d9a208868a71add74843102}{on\_popup\_label}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00199\ \ \ POINT\ point;}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0\ \&\&\ GetCursorPos(\&point))\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \_popup\_index\ =\ collector\_index;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ HMENU\ popup\ =\ CreatePopupMenu();}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ std::string\ label\ =\ \mbox{\hyperlink{classWinStatsStripChart_aa6dcf5b62b7f211cbb812223134b0e55}{get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordflow}{if}\ (!label.empty())\ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_DISABLED,\ 0,\ label.c\_str());}
\DoxyCodeLine{00208\ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ ==\ 0\ \&\&\ get\_collector\_index()\ ==\ 0)\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_DISABLED,\ 101,\ \textcolor{stringliteral}{"{}Set\ as\ Focus"{}});}
\DoxyCodeLine{00211\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 101,\ \textcolor{stringliteral}{"{}Set\ as\ Focus"{}});}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 102,\ \textcolor{stringliteral}{"{}Open\ Strip\ Chart"{}});}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_view().get\_show\_level())\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_DISABLED,\ 103,\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}});}
\DoxyCodeLine{00217\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 103,\ \textcolor{stringliteral}{"{}Open\ Flame\ Graph"{}});}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \ \ AppendMenu(popup,\ MF\_STRING\ |\ MF\_SEPARATOR,\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00221\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 104,\ \textcolor{stringliteral}{"{}Change\ Color..."{}});}
\DoxyCodeLine{00222\ \ \ \ \ AppendMenu(popup,\ MF\_STRING,\ 105,\ \textcolor{stringliteral}{"{}Reset\ Color"{}});}
\DoxyCodeLine{00223\ \ \ \ \ TrackPopupMenu(popup,\ TPM\_LEFTBUTTON,\ point.x,\ point.y,\ 0,\ \_window,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00224\ \ \ \}}
\DoxyCodeLine{00225\ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00231\ std::string\ \mbox{\hyperlink{classWinStatsStripChart_aa6dcf5b62b7f211cbb812223134b0e55}{WinStatsStripChart::}}}
\DoxyCodeLine{00232\ \mbox{\hyperlink{classWinStatsStripChart_aa6dcf5b62b7f211cbb812223134b0e55}{get\_label\_tooltip}}(\textcolor{keywordtype}{int}\ collector\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00233\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classPStatStripChart_a40bffaef86f537a63f6c7fe6c8a4195d}{PStatStripChart::get\_label\_tooltip}}(collector\_index);}
\DoxyCodeLine{00234\ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00240\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_aa715175d8100af473159a15e0da68f76}{WinStatsStripChart::}}}
\DoxyCodeLine{00241\ \mbox{\hyperlink{classWinStatsStripChart_aa715175d8100af473159a15e0da68f76}{set\_collector\_index}}(\textcolor{keywordtype}{int}\ collector\_index)\ \{}
\DoxyCodeLine{00242\ \ \ \textcolor{keywordflow}{if}\ (get\_collector\_index()\ !=\ collector\_index)\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \mbox{\hyperlink{classPStatStripChart_a8f7aad19132463ef4a375ec5e8005c1f}{PStatStripChart::set\_collector\_index}}(collector\_index);}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_title\_unknown())\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ std::string\ window\_title\ =\ \mbox{\hyperlink{classPStatStripChart_a0a82fe4c239622dacc00324ddfd8a82f}{get\_title\_text}}();}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_title\_unknown())\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ SetWindowText(\_window,\ window\_title.c\_str());}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{comment}{//\ Redraw\ the\ scale\ labels.}}
\DoxyCodeLine{00253\ \ \ \ \ RECT\ rect;}
\DoxyCodeLine{00254\ \ \ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00255\ \ \ \ \ rect.left\ =\ \_right\_margin;}
\DoxyCodeLine{00256\ \ \ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00257\ \ \ \}}
\DoxyCodeLine{00258\ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00264\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a9fd3c39dc75e93e5f1c27cc66b45cf42}{WinStatsStripChart::}}}
\DoxyCodeLine{00265\ \mbox{\hyperlink{classWinStatsStripChart_a9fd3c39dc75e93e5f1c27cc66b45cf42}{set\_vertical\_scale}}(\textcolor{keywordtype}{double}\ value\_height)\ \{}
\DoxyCodeLine{00266\ \ \ PStatStripChart::set\_vertical\_scale(value\_height);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ RECT\ rect;}
\DoxyCodeLine{00269\ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00270\ \ \ rect.left\ =\ \_right\_margin;}
\DoxyCodeLine{00271\ \ \ InvalidateRect(\_window,\ \&rect,\ TRUE);}
\DoxyCodeLine{00272\ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00277\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_ace114c0bae328c565f24bd0bdda2e3c2}{WinStatsStripChart::}}}
\DoxyCodeLine{00278\ \mbox{\hyperlink{classWinStatsStripChart_ace114c0bae328c565f24bd0bdda2e3c2}{update\_labels}}()\ \{}
\DoxyCodeLine{00279\ \ \ \mbox{\hyperlink{classPStatStripChart_a813aa0118c3899168606f35fec5669bd}{PStatStripChart::update\_labels}}();}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a5d313cea056b162fb5501c2f3fa408fe}{replace\_labels}}(WinStatsGraph::\_monitor,\ \textcolor{keyword}{this},}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_thread\_index,\ \_labels,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00283\ \ \ \_labels\_changed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00289\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_ae5f65a9153f700de4ec21b84d9e5f963}{WinStatsStripChart::}}}
\DoxyCodeLine{00290\ \mbox{\hyperlink{classWinStatsStripChart_ae5f65a9153f700de4ec21b84d9e5f963}{clear\_region}}()\ \{}
\DoxyCodeLine{00291\ \ \ RECT\ rect\ =\ \{\ 0,\ 0,\ get\_xsize(),\ get\_ysize()\ \};}
\DoxyCodeLine{00292\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(WHITE\_BRUSH));}
\DoxyCodeLine{00293\ \}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00299\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_afb10b0940461fc590cca2878f0ed5310}{WinStatsStripChart::}}}
\DoxyCodeLine{00300\ \mbox{\hyperlink{classWinStatsStripChart_afb10b0940461fc590cca2878f0ed5310}{copy\_region}}(\textcolor{keywordtype}{int}\ start\_x,\ \textcolor{keywordtype}{int}\ end\_x,\ \textcolor{keywordtype}{int}\ dest\_x)\ \{}
\DoxyCodeLine{00301\ \ \ BitBlt(\_bitmap\_dc,\ dest\_x,\ 0,}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ end\_x\ -\/\ start\_x,\ get\_ysize(),}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \_bitmap\_dc,\ start\_x,\ 0,}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ SRCCOPY);}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{//\ Also\ shift\ the\ brush\ origin\ over,\ so\ we\ still\ get\ proper\ dithering.}}
\DoxyCodeLine{00307\ \ \ \_brush\_origin\ +=\ (dest\_x\ -\/\ start\_x);}
\DoxyCodeLine{00308\ \ \ SetBrushOrgEx(\_bitmap\_dc,\ \_brush\_origin,\ 0,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ RECT\ rect\ =\ \{}
\DoxyCodeLine{00311\ \ \ \ \ dest\_x,\ 0,\ dest\_x\ +\ end\_x\ -\/\ start\_x,\ get\_ysize()}
\DoxyCodeLine{00312\ \ \ \};}
\DoxyCodeLine{00313\ \ \ InvalidateRect(\_graph\_window,\ \&rect,\ FALSE);}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00320\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a3f781046fd01d49bc448cdb3c45164f7}{WinStatsStripChart::}}}
\DoxyCodeLine{00321\ \mbox{\hyperlink{classWinStatsStripChart_a3f781046fd01d49bc448cdb3c45164f7}{draw\_slice}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ w,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatStripChart_1_1FrameData}{PStatStripChart::FrameData}}\ \&fdata)\ \{}
\DoxyCodeLine{00322\ \ \ \textcolor{comment}{//\ Start\ by\ clearing\ the\ band\ first.}}
\DoxyCodeLine{00323\ \ \ RECT\ rect\ =\ \{\ x,\ 0,\ x\ +\ w,\ get\_ysize()\ \};}
\DoxyCodeLine{00324\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(WHITE\_BRUSH));}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{keywordtype}{double}\ overall\_time\ =\ 0.0;}
\DoxyCodeLine{00327\ \ \ \textcolor{keywordtype}{int}\ y\ =\ get\_ysize();}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ FrameData::const\_iterator\ fi;}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordflow}{for}\ (fi\ =\ fdata.begin();\ fi\ !=\ fdata.end();\ ++fi)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatStripChart_1_1ColorData}{ColorData}}\ \&cd\ =\ (*fi);}
\DoxyCodeLine{00332\ \ \ \ \ overall\_time\ +=\ cd.\_net\_value;}
\DoxyCodeLine{00333\ \ \ \ \ HBRUSH\ brush\ =\ \mbox{\hyperlink{classWinStatsGraph_a6c23dc88d8af5cc9e790ff31a8f74f09}{get\_collector\_brush}}(cd.\_collector\_index,\ cd.\_collector\_index\ ==\ \_highlighted\_index);}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordflow}{if}\ (overall\_time\ >\ get\_vertical\_scale())\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{comment}{//\ Off\ the\ top.\ \ Go\ ahead\ and\ clamp\ it\ by\ hand,\ in\ case\ it's\ so\ far\ off}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \textcolor{comment}{//\ the\ top\ we'd\ overflow\ the\ 16-\/bit\ pixel\ value.}}
\DoxyCodeLine{00338\ \ \ \ \ \ \ rect.top\ =\ 0;}
\DoxyCodeLine{00339\ \ \ \ \ \ \ rect.bottom\ =\ y;}
\DoxyCodeLine{00340\ \ \ \ \ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ brush);}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \textcolor{comment}{//\ And\ we\ can\ consider\ ourselves\ done\ now.}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00343\ \ \ \ \ \}}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordtype}{int}\ top\_y\ =\ height\_to\_pixel(overall\_time);}
\DoxyCodeLine{00346\ \ \ \ \ rect.top\ =\ top\_y;}
\DoxyCodeLine{00347\ \ \ \ \ rect.bottom\ =\ y;}
\DoxyCodeLine{00348\ \ \ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ brush);}
\DoxyCodeLine{00349\ \ \ \ \ y\ =\ top\_y;}
\DoxyCodeLine{00350\ \ \ \}}
\DoxyCodeLine{00351\ \}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00356\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a27ec1d167335d1f76a3c78049f50e610}{WinStatsStripChart::}}}
\DoxyCodeLine{00357\ \mbox{\hyperlink{classWinStatsStripChart_a27ec1d167335d1f76a3c78049f50e610}{draw\_empty}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ w)\ \{}
\DoxyCodeLine{00358\ \ \ RECT\ rect\ =\ \{\ x,\ 0,\ x\ +\ w,\ get\_ysize()\ \};}
\DoxyCodeLine{00359\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(WHITE\_BRUSH));}
\DoxyCodeLine{00360\ \}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00365\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_ab2c840d87db1df68d4f88f0db123c70f}{WinStatsStripChart::}}}
\DoxyCodeLine{00366\ \mbox{\hyperlink{classWinStatsStripChart_ab2c840d87db1df68d4f88f0db123c70f}{draw\_cursor}}(\textcolor{keywordtype}{int}\ x)\ \{}
\DoxyCodeLine{00367\ \ \ RECT\ rect\ =\ \{\ x,\ 0,\ x\ +\ 1,\ get\_ysize()\ \};}
\DoxyCodeLine{00368\ \ \ FillRect(\_bitmap\_dc,\ \&rect,\ (HBRUSH)GetStockObject(BLACK\_BRUSH));}
\DoxyCodeLine{00369\ \}}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00376\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a0f7cff7dcd40566e6832fdff0affec00}{WinStatsStripChart::}}}
\DoxyCodeLine{00377\ \mbox{\hyperlink{classWinStatsStripChart_a0f7cff7dcd40566e6832fdff0affec00}{end\_draw}}(\textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x)\ \{}
\DoxyCodeLine{00378\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ guide\ bars.}}
\DoxyCodeLine{00379\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00380\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00381\ \ \ \ \ draw\_guide\_bar(\_bitmap\_dc,\ from\_x,\ to\_x,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i));}
\DoxyCodeLine{00382\ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ RECT\ rect\ =\ \{}
\DoxyCodeLine{00385\ \ \ \ \ from\_x,\ 0,\ to\_x\ +\ 1,\ get\_ysize()}
\DoxyCodeLine{00386\ \ \ \};}
\DoxyCodeLine{00387\ \ \ InvalidateRect(\_graph\_window,\ \&rect,\ FALSE);}
\DoxyCodeLine{00388\ \}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00393\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classWinStatsStripChart_ac0b6b903f9b927c76969ccc19a17393e}{WinStatsStripChart::}}}
\DoxyCodeLine{00394\ \mbox{\hyperlink{classWinStatsStripChart_ac0b6b903f9b927c76969ccc19a17393e}{get\_window\_state}}(\textcolor{keywordtype}{int}\ \&x,\ \textcolor{keywordtype}{int}\ \&y,\ \textcolor{keywordtype}{int}\ \&width,\ \textcolor{keywordtype}{int}\ \&height,}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \&maximized,\ \textcolor{keywordtype}{bool}\ \&minimized)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00396\ \ \ \mbox{\hyperlink{classWinStatsGraph_a09816c5e652ee201e9e4d82b442fffdf}{WinStatsGraph::get\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00397\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00398\ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00403\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_adeda81cc01671f5043d10210e2ba42d7}{WinStatsStripChart::}}}
\DoxyCodeLine{00404\ \mbox{\hyperlink{classWinStatsStripChart_adeda81cc01671f5043d10210e2ba42d7}{set\_window\_state}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height,}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ maximized,\ \textcolor{keywordtype}{bool}\ minimized)\ \{}
\DoxyCodeLine{00406\ \ \ \mbox{\hyperlink{classWinStatsGraph_ac5e136b133729a00045771eb9a1085fe}{WinStatsGraph::set\_window\_state}}(x,\ y,\ width,\ height,\ maximized,\ minimized);}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \textcolor{comment}{//\ Set\ the\ state\ of\ the\ checkbox.}}
\DoxyCodeLine{00409\ \ \ SendMessage(\_smooth\_check\_box,\ BM\_SETCHECK,\ get\_average\_mode()\ ?\ BST\_CHECKED\ :\ BST\_UNCHECKED,\ 0);}
\DoxyCodeLine{00410\ \}}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00415\ LONG\ WinStatsStripChart::}
\DoxyCodeLine{00416\ window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00417\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00418\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_new\_guide\_bar);}
\DoxyCodeLine{00421\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00423\ \ \ \ \ \}}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \textcolor{keywordflow}{case}\ WM\_COMMAND:}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordflow}{switch}\ (LOWORD(wparam))\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keywordflow}{case}\ BN\_CLICKED:}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((HWND)lparam\ ==\ \_smooth\_check\_box)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ result\ =\ SendMessage(\_smooth\_check\_box,\ BM\_GETCHECK,\ 0,\ 0);}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ set\_average\_mode(result\ ==\ BST\_CHECKED);}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{keywordflow}{case}\ 101:}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_aa715175d8100af473159a15e0da68f76}{set\_collector\_index}}(\_popup\_index);}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordflow}{case}\ 102:}
\DoxyCodeLine{00441\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a2310299c3cc181f2d4f75210c6406747}{open\_strip\_chart}}(get\_thread\_index(),\ \_popup\_index,}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ get\_view().get\_show\_level());}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{keywordflow}{case}\ 103:}
\DoxyCodeLine{00446\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a19a5f72039f430ce2b33a559c183f5b0}{open\_flame\_graph}}(get\_thread\_index(),\ \_popup\_index);}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{case}\ 104:}
\DoxyCodeLine{00450\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_aa0bc0a0c7e4117e72da204b54debe60f}{choose\_collector\_color}}(\_popup\_index);}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{case}\ 105:}
\DoxyCodeLine{00454\ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a7d1d9acd32503d2aebd77c86c5ad42b5}{reset\_collector\_color}}(\_popup\_index);}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00456\ \ \ \ \ \}}
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00461\ \ \ \}}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsGraph_a9c3aa3051d400418232bea75f31872b5}{WinStatsGraph::window\_proc}}(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00464\ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00469\ LONG\ WinStatsStripChart::}
\DoxyCodeLine{00470\ graph\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00471\ \ \ \textcolor{keywordflow}{switch}\ (msg)\ \{}
\DoxyCodeLine{00472\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDOWN:}
\DoxyCodeLine{00473\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_scale);}
\DoxyCodeLine{00475\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \_drag\_scale\_start\ =\ pixel\_to\_height(y);}
\DoxyCodeLine{00477\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_potential\_drag\_mode\ ==\ DM\_guide\_bar\ \&\&\ \_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00482\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \_drag\_start\_y\ =\ y;}
\DoxyCodeLine{00484\ \ \ \ \ \ \ SetCapture(\_graph\_window);}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00486\ \ \ \ \ \}}
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{case}\ WM\_MOUSEMOVE:}
\DoxyCodeLine{00490\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_none\ \&\&\ \_potential\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ is\ over\ a\ color\ bar,\ highlight\ it.}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00493\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ \mbox{\hyperlink{classPStatStripChart_a8cbc8c0eaa367792d80e44e46c2f5adf}{get\_collector\_under\_pixel}}(x,\ y);}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(collector\_index);}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_ab41c5cb94385c9056550b6770718f373}{on\_enter\_label}}(collector\_index);}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ we\ want\ to\ get\ a\ WM\_MOUSELEAVE\ when\ the\ mouse\ leaves\ the\ graph}}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \textcolor{comment}{//\ window.}}
\DoxyCodeLine{00501\ \ \ \ \ \ \ TRACKMOUSEEVENT\ tme\ =\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(TRACKMOUSEEVENT),}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ TME\_LEAVE,}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \_graph\_window,}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ 0}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00507\ \ \ \ \ \ \ TrackMouseEvent(\&tme);}
\DoxyCodeLine{00508\ \ \ \ \ \}}
\DoxyCodeLine{00509\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ mouse\ is\ in\ some\ drag\ mode,\ stop\ highlighting.}}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00513\ \ \ \ \ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00516\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ ratio\ =\ 1.0\ -\/\ ((double)y\ /\ (\textcolor{keywordtype}{double})get\_ysize());}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ratio\ >\ 0.0)\ \{}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ new\_scale\ =\ \_drag\_scale\_start\ /\ ratio;}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!IS\_NEARLY\_EQUAL(get\_vertical\_scale(),\ new\_scale))\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Disable\ smoothing\ while\ we\ do\ this\ expensive\ operation.}}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ set\_average\_mode(\textcolor{keyword}{false});}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_a9fd3c39dc75e93e5f1c27cc66b45cf42}{set\_vertical\_scale}}(\_drag\_scale\_start\ /\ ratio);}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_new\_guide\_bar)\ \{}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ haven't\ created\ the\ new\ guide\ bar\ yet;\ we\ won't\ until\ the\ mouse}}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \textcolor{comment}{//\ comes\ within\ the\ graph's\ region.}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (y\ >=\ 0\ \&\&\ y\ <\ get\_ysize())\ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_guide\_bar);}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a3a7fc8b8eb05e7ff7a6f044ebee7035a}{add\_user\_guide\_bar}}(pixel\_to\_height(y));}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(y));}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00542\ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \textcolor{keywordflow}{case}\ WM\_MOUSELEAVE:}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{comment}{//\ When\ the\ mouse\ leaves\ the\ graph,\ stop\ highlighting.}}
\DoxyCodeLine{00547\ \ \ \ \ \_label\_stack.\mbox{\hyperlink{classWinStatsLabelStack_a37404e3940a2a3195979832b918216cc}{highlight\_label}}(-\/1);}
\DoxyCodeLine{00548\ \ \ \ \ \mbox{\hyperlink{classWinStatsGraph_a79e68ee93295dc80330a4bf0ccf8269b}{on\_leave\_label}}(\_highlighted\_index);}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONUP:}
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_scale)\ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00554\ \ \ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00556\ }
\DoxyCodeLine{00557\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_guide\_bar)\ \{}
\DoxyCodeLine{00558\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (y\ <\ 0\ ||\ y\ >=\ get\_ysize())\ \{}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a7627d5e29b88196713f4ba3cea78ea17}{remove\_user\_guide\_bar}}(\_drag\_guide\_bar);}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPStatGraph_a45ecee227793ee5f2059e58f8d844ad8}{move\_user\_guide\_bar}}(\_drag\_guide\_bar,\ pixel\_to\_height(y));}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(DM\_none);}
\DoxyCodeLine{00565\ \ \ \ \ \ \ ReleaseCapture();}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00567\ \ \ \ \ \}}
\DoxyCodeLine{00568\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00569\ }
\DoxyCodeLine{00570\ \ \ \textcolor{keywordflow}{case}\ WM\_LBUTTONDBLCLK:}
\DoxyCodeLine{00571\ \ \ \ \ \{}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \textcolor{comment}{//\ Double-\/clicking\ on\ a\ color\ bar\ in\ the\ graph\ is\ the\ same\ as\ double-\/}}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \textcolor{comment}{//\ clicking\ on\ the\ corresponding\ label.}}
\DoxyCodeLine{00574\ \ \ \ \ \ \ int16\_t\ x\ =\ LOWORD(lparam);}
\DoxyCodeLine{00575\ \ \ \ \ \ \ int16\_t\ y\ =\ HIWORD(lparam);}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_a1fd4644a758f62ac527e72fa7b18d636}{on\_click\_label}}(\mbox{\hyperlink{classPStatStripChart_a8cbc8c0eaa367792d80e44e46c2f5adf}{get\_collector\_under\_pixel}}(x,\ y));}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00578\ \ \ \ \ \}}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \textcolor{keywordflow}{case}\ WM\_CONTEXTMENU:}
\DoxyCodeLine{00582\ \ \ \ \ \{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ POINT\ point;}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (GetCursorPos(\&point)\ \&\&\ ScreenToClient(\_graph\_window,\ \&point))\ \{}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ collector\_index\ =\ \mbox{\hyperlink{classPStatStripChart_a8cbc8c0eaa367792d80e44e46c2f5adf}{get\_collector\_under\_pixel}}(point.x,\ point.y);}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (collector\_index\ >=\ 0)\ \{}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classWinStatsStripChart_a6cae171f7d9a208868a71add74843102}{on\_popup\_label}}(collector\_index);}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00591\ \ \ \ \ \}}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00596\ \ \ \}}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \ \ \textcolor{keywordflow}{return}\ WinStatsGraph::graph\_window\_proc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00599\ \}}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00606\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_af9c183917b870ab280785935468d2375}{WinStatsStripChart::}}}
\DoxyCodeLine{00607\ \mbox{\hyperlink{classWinStatsStripChart_af9c183917b870ab280785935468d2375}{additional\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00608\ \ \ \textcolor{comment}{//\ Draw\ in\ the\ labels\ for\ the\ guide\ bars.}}
\DoxyCodeLine{00609\ \ \ SelectObject(hdc,\ WinStatsGraph::\_monitor-\/>get\_font());}
\DoxyCodeLine{00610\ \ \ SetTextAlign(hdc,\ TA\_LEFT\ |\ TA\_TOP);}
\DoxyCodeLine{00611\ \ \ SetBkMode(hdc,\ TRANSPARENT);}
\DoxyCodeLine{00612\ }
\DoxyCodeLine{00613\ \ \ RECT\ rect;}
\DoxyCodeLine{00614\ \ \ GetClientRect(\_window,\ \&rect);}
\DoxyCodeLine{00615\ \ \ \textcolor{keywordtype}{int}\ x\ =\ rect.right\ -\/\ \_right\_margin\ +\ \_pixel\_scale;}
\DoxyCodeLine{00616\ \ \ \textcolor{keywordtype}{int}\ last\_y\ =\ -\/100;}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00619\ \ \ \textcolor{keywordtype}{int}\ num\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a96e40e4ab86f48d9c72c36067b9e5be2}{get\_num\_guide\_bars}}();}
\DoxyCodeLine{00620\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00621\ \ \ \ \ last\_y\ =\ draw\_guide\_label(hdc,\ x,\ \mbox{\hyperlink{classPStatGraph_ae15abb62d95fe941e8bfa2c42a38b284}{get\_guide\_bar}}(i),\ last\_y);}
\DoxyCodeLine{00622\ \ \ \}}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \ \ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{GuideBar}}\ top\_value\ =\ \mbox{\hyperlink{classPStatGraph_a3361dd9894e280326e4831f2d575e19a}{make\_guide\_bar}}(get\_vertical\_scale());}
\DoxyCodeLine{00625\ \ \ draw\_guide\_label(hdc,\ x,\ top\_value,\ last\_y);}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ last\_y\ =\ -\/100;}
\DoxyCodeLine{00628\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00629\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00630\ \ \ \ \ last\_y\ =\ draw\_guide\_label(hdc,\ x,\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i),\ last\_y);}
\DoxyCodeLine{00631\ \ \ \}}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \textcolor{comment}{//\ Now\ draw\ the\ "{}net\ value"{}\ label\ at\ the\ top.}}
\DoxyCodeLine{00634\ \ \ SetTextAlign(hdc,\ TA\_RIGHT\ |\ TA\_BOTTOM);}
\DoxyCodeLine{00635\ \ \ SetTextColor(hdc,\ RGB(0,\ 0,\ 0));}
\DoxyCodeLine{00636\ \ \ TextOut(hdc,\ rect.right\ -\/\ \_right\_margin\ -\/\ \_pixel\_scale,\ \_top\_margin\ -\/\ \_pixel\_scale\ /\ 2,}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \_net\_value\_text.data(),\ \_net\_value\_text.length());}
\DoxyCodeLine{00638\ \}}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00645\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a53ca92b6623c85ef21ad9d115470376c}{WinStatsStripChart::}}}
\DoxyCodeLine{00646\ \mbox{\hyperlink{classWinStatsStripChart_a53ca92b6623c85ef21ad9d115470376c}{additional\_graph\_window\_paint}}(HDC\ hdc)\ \{}
\DoxyCodeLine{00647\ \ \ \textcolor{keywordtype}{int}\ num\_user\_guide\_bars\ =\ \mbox{\hyperlink{classPStatGraph_a2817d0202ae60465812dfff807245561}{get\_num\_user\_guide\_bars}}();}
\DoxyCodeLine{00648\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_user\_guide\_bars;\ i++)\ \{}
\DoxyCodeLine{00649\ \ \ \ \ draw\_guide\_bar(hdc,\ 0,\ get\_xsize(),\ \mbox{\hyperlink{classPStatGraph_a065acd03e0e9d4da1b575fe8feb77909}{get\_user\_guide\_bar}}(i));}
\DoxyCodeLine{00650\ \ \ \}}
\DoxyCodeLine{00651\ \}}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00657\ std::string\ \mbox{\hyperlink{classWinStatsStripChart_a424899a84b9c5b2660aa4bd4b7ed762b}{WinStatsStripChart::}}}
\DoxyCodeLine{00658\ \mbox{\hyperlink{classWinStatsStripChart_a424899a84b9c5b2660aa4bd4b7ed762b}{get\_graph\_tooltip}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00659\ \ \ \textcolor{keywordflow}{if}\ (\_highlighted\_index\ !=\ -\/1)\ \{}
\DoxyCodeLine{00660\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsStripChart_aa6dcf5b62b7f211cbb812223134b0e55}{get\_label\_tooltip}}(\_highlighted\_index);}
\DoxyCodeLine{00661\ \ \ \}}
\DoxyCodeLine{00662\ \ \ \textcolor{keywordflow}{return}\ std::string();}
\DoxyCodeLine{00663\ \}}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00670\ WinStatsGraph::DragMode\ \mbox{\hyperlink{classWinStatsStripChart_a5a9e99b87825b584502a308f6c964303}{WinStatsStripChart::}}}
\DoxyCodeLine{00671\ \mbox{\hyperlink{classWinStatsStripChart_a5a9e99b87825b584502a308f6c964303}{consider\_drag\_start}}(\textcolor{keywordtype}{int}\ mouse\_x,\ \textcolor{keywordtype}{int}\ mouse\_y,\ \textcolor{keywordtype}{int}\ width,\ \textcolor{keywordtype}{int}\ height)\ \{}
\DoxyCodeLine{00672\ \ \ \textcolor{keywordflow}{if}\ (mouse\_x\ >=\ \_graph\_left\ \&\&\ mouse\_x\ <\ \_graph\_left\ +\ get\_xsize())\ \{}
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{keywordflow}{if}\ (mouse\_y\ >=\ \_graph\_top\ \&\&\ mouse\_y\ <\ \_graph\_top\ +\ get\_ysize())\ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \textcolor{comment}{//\ See\ if\ the\ mouse\ is\ over\ a\ user-\/defined\ guide\ bar.}}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ mouse\_y\ -\/\ \_graph\_top;}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(y\ +\ 2);}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(y\ -\/\ 2);}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \_drag\_guide\_bar\ =\ \mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height);}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_drag\_guide\_bar\ >=\ 0)\ \{}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_guide\_bar;}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ mouse\ is\ above\ or\ below\ the\ graph;\ maybe\ create\ a\ new\ guide\ bar.}}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DM\_new\_guide\_bar;}
\DoxyCodeLine{00686\ \ \ \ \ \}}
\DoxyCodeLine{00687\ \ \ \}}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classWinStatsGraph_a6e217fc14d67434560f235087055ccd4}{WinStatsGraph::consider\_drag\_start}}(mouse\_x,\ mouse\_y,\ width,\ height);}
\DoxyCodeLine{00690\ \}}
\DoxyCodeLine{00691\ }
\DoxyCodeLine{00696\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{WinStatsStripChart::}}}
\DoxyCodeLine{00697\ \mbox{\hyperlink{classWinStatsStripChart_ada8cff19c98d7460bed029aa2f517e57}{set\_drag\_mode}}(WinStatsGraph::DragMode\ drag\_mode)\ \{}
\DoxyCodeLine{00698\ \ \ \mbox{\hyperlink{classWinStatsGraph_abfaa9f4c7cc277cf347ada58c7db2183}{WinStatsGraph::set\_drag\_mode}}(drag\_mode);}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \ \ \textcolor{keywordflow}{if}\ (\_drag\_mode\ ==\ DM\_none)\ \{}
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{comment}{//\ Restore\ smoothing\ according\ to\ the\ current\ setting\ of\ the\ check\ box.}}
\DoxyCodeLine{00702\ \ \ \ \ \textcolor{keywordtype}{int}\ result\ =\ SendMessage(\_smooth\_check\_box,\ BM\_GETCHECK,\ 0,\ 0);}
\DoxyCodeLine{00703\ \ \ \ \ set\_average\_mode(result\ ==\ BST\_CHECKED);}
\DoxyCodeLine{00704\ \ \ \}}
\DoxyCodeLine{00705\ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00711\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classWinStatsStripChart_a2e9232c4a29d16ec39cd246fcb675518}{WinStatsStripChart::}}}
\DoxyCodeLine{00712\ \mbox{\hyperlink{classWinStatsStripChart_a2e9232c4a29d16ec39cd246fcb675518}{move\_graph\_window}}(\textcolor{keywordtype}{int}\ graph\_left,\ \textcolor{keywordtype}{int}\ graph\_top,\ \textcolor{keywordtype}{int}\ graph\_xsize,\ \textcolor{keywordtype}{int}\ graph\_ysize)\ \{}
\DoxyCodeLine{00713\ \ \ \mbox{\hyperlink{classWinStatsGraph_a4afd9c0b5f7e8e40e754b51db3e9c4d1}{WinStatsGraph::move\_graph\_window}}(graph\_left,\ graph\_top,\ graph\_xsize,\ graph\_ysize);}
\DoxyCodeLine{00714\ \ \ \textcolor{keywordflow}{if}\ (\_smooth\_check\_box\ !=\ 0)\ \{}
\DoxyCodeLine{00715\ \ \ \ \ SIZE\ size;}
\DoxyCodeLine{00716\ \ \ \ \ SendMessage(\_smooth\_check\_box,\ BCM\_GETIDEALSIZE,\ 0,\ (LPARAM)\&size);}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \ \ \ \ SetWindowPos(\_smooth\_check\_box,\ 0,}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_left\_margin,\ \_top\_margin\ -\/\ size.cy\ -\/\ \_pixel\_scale\ /\ 2,}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size.cx,\ size.cy,}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SWP\_NOZORDER\ |\ SWP\_SHOWWINDOW);}
\DoxyCodeLine{00722\ \ \ \ \ InvalidateRect(\_smooth\_check\_box,\ \textcolor{keyword}{nullptr},\ TRUE);}
\DoxyCodeLine{00723\ \ \ \}}
\DoxyCodeLine{00724\ \}}
\DoxyCodeLine{00725\ }
\DoxyCodeLine{00729\ \textcolor{keywordtype}{void}\ WinStatsStripChart::}
\DoxyCodeLine{00730\ draw\_guide\_bar(HDC\ hdc,\ \textcolor{keywordtype}{int}\ from\_x,\ \textcolor{keywordtype}{int}\ to\_x,}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar)\ \{}
\DoxyCodeLine{00732\ \ \ \textcolor{keywordtype}{int}\ y\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \ \ \textcolor{keywordflow}{if}\ (y\ >\ 0)\ \{}
\DoxyCodeLine{00735\ \ \ \ \ \textcolor{comment}{//\ Only\ draw\ it\ if\ it's\ not\ too\ close\ to\ the\ top.}}
\DoxyCodeLine{00736\ \ \ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00738\ \ \ \ \ \ \ SelectObject(hdc,\ \_light\_pen);}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00742\ \ \ \ \ \ \ SelectObject(hdc,\ \_user\_guide\_bar\_pen);}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \textcolor{keywordflow}{case}\ GBS\_normal:}
\DoxyCodeLine{00746\ \ \ \ \ \ \ SelectObject(hdc,\ \_dark\_pen);}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00748\ \ \ \ \ \}}
\DoxyCodeLine{00749\ \ \ \ \ MoveToEx(hdc,\ from\_x,\ y,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00750\ \ \ \ \ LineTo(hdc,\ to\_x\ +\ 1,\ y);}
\DoxyCodeLine{00751\ \ \ \}}
\DoxyCodeLine{00752\ \}}
\DoxyCodeLine{00753\ }
\DoxyCodeLine{00759\ \textcolor{keywordtype}{int}\ WinStatsStripChart::}
\DoxyCodeLine{00760\ draw\_guide\_label(HDC\ hdc,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPStatGraph_1_1GuideBar}{PStatGraph::GuideBar}}\ \&bar,\ \textcolor{keywordtype}{int}\ last\_y)\ \{}
\DoxyCodeLine{00761\ \ \ \textcolor{keywordflow}{switch}\ (bar.\_style)\ \{}
\DoxyCodeLine{00762\ \ \ \textcolor{keywordflow}{case}\ GBS\_target:}
\DoxyCodeLine{00763\ \ \ \ \ SetTextColor(hdc,\ \_light\_color);}
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \textcolor{keywordflow}{case}\ GBS\_user:}
\DoxyCodeLine{00767\ \ \ \ \ SetTextColor(hdc,\ \_user\_guide\_bar\_color);}
\DoxyCodeLine{00768\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \ \ \textcolor{keywordflow}{case}\ GBS\_normal:}
\DoxyCodeLine{00771\ \ \ \ \ SetTextColor(hdc,\ \_dark\_color);}
\DoxyCodeLine{00772\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00773\ \ \ \}}
\DoxyCodeLine{00774\ }
\DoxyCodeLine{00775\ \ \ \textcolor{keywordtype}{int}\ y\ =\ height\_to\_pixel(bar.\_height);}
\DoxyCodeLine{00776\ \ \ \textcolor{keyword}{const}\ std::string\ \&label\ =\ bar.\_label;}
\DoxyCodeLine{00777\ \ \ SIZE\ size;}
\DoxyCodeLine{00778\ \ \ GetTextExtentPoint32(hdc,\ label.data(),\ label.length(),\ \&size);}
\DoxyCodeLine{00779\ }
\DoxyCodeLine{00780\ \ \ \textcolor{keywordflow}{if}\ (bar.\_style\ !=\ GBS\_user)\ \{}
\DoxyCodeLine{00781\ \ \ \ \ \textcolor{keywordtype}{double}\ from\_height\ =\ pixel\_to\_height(y\ +\ size.cy);}
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{keywordtype}{double}\ to\_height\ =\ pixel\_to\_height(y\ -\/\ size.cy);}
\DoxyCodeLine{00783\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classPStatGraph_a27bac34846a7622cab2d7aa247fc570e}{find\_user\_guide\_bar}}(from\_height,\ to\_height)\ >=\ 0)\ \{}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \textcolor{comment}{//\ Omit\ the\ label:\ there's\ a\ user-\/defined\ guide\ bar\ in\ the\ same\ space.}}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ last\_y;}
\DoxyCodeLine{00786\ \ \ \ \ \}}
\DoxyCodeLine{00787\ \ \ \}}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \textcolor{keywordtype}{int}\ this\_y\ =\ \_graph\_top\ +\ y\ -\/\ size.cy\ /\ 2;}
\DoxyCodeLine{00790\ \ \ \textcolor{keywordflow}{if}\ (y\ >=\ 0\ \&\&\ y\ <\ get\_ysize()\ \&\&}
\DoxyCodeLine{00791\ \ \ \ \ \ \ (last\_y\ <\ this\_y\ ||\ last\_y\ >\ this\_y\ +\ size.cy))\ \{}
\DoxyCodeLine{00792\ \ \ \ \ TextOut(hdc,\ x,\ this\_y,}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ label.data(),\ label.length());}
\DoxyCodeLine{00794\ \ \ \ \ last\_y\ =\ this\_y;}
\DoxyCodeLine{00795\ \ \ \}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00797\ \ \ \textcolor{keywordflow}{return}\ last\_y;}
\DoxyCodeLine{00798\ \}}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00804\ \textcolor{keywordtype}{void}\ WinStatsStripChart::}
\DoxyCodeLine{00805\ create\_window()\ \{}
\DoxyCodeLine{00806\ \ \ \textcolor{keywordflow}{if}\ (\_window)\ \{}
\DoxyCodeLine{00807\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00808\ \ \ \}}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00810\ \ \ HINSTANCE\ application\ =\ GetModuleHandle(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00811\ \ \ register\_window\_class(application);}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \ \ std::string\ window\_title\ =\ \mbox{\hyperlink{classPStatStripChart_a0a82fe4c239622dacc00324ddfd8a82f}{get\_title\_text}}();}
\DoxyCodeLine{00814\ \ \ POINT\ window\_pos\ =\ WinStatsGraph::\_monitor-\/>\mbox{\hyperlink{classWinStatsMonitor_a2f0a1a79cadac41d2e0d9722c80ca0dd}{get\_new\_window\_pos}}();}
\DoxyCodeLine{00815\ }
\DoxyCodeLine{00816\ \ \ RECT\ win\_rect\ =\ \{}
\DoxyCodeLine{00817\ \ \ \ \ 0,\ 0,}
\DoxyCodeLine{00818\ \ \ \ \ \_left\_margin\ +\ get\_xsize()\ +\ \_right\_margin,}
\DoxyCodeLine{00819\ \ \ \ \ \_top\_margin\ +\ get\_ysize()\ +\ \_bottom\_margin}
\DoxyCodeLine{00820\ \ \ \};}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \textcolor{comment}{//\ compute\ window\ size\ based\ on\ desired\ client\ area\ size}}
\DoxyCodeLine{00823\ \ \ AdjustWindowRect(\&win\_rect,\ graph\_window\_style,\ FALSE);}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \_window\ =}
\DoxyCodeLine{00826\ \ \ \ \ CreateWindowEx(WS\_EX\_DLGMODALFRAME,\ \_window\_class\_name,}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ window\_title.c\_str(),\ graph\_window\_style,}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ window\_pos.x,\ window\_pos.y,}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ win\_rect.right\ -\/\ win\_rect.left,}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ win\_rect.bottom\ -\/\ win\_rect.top,}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WinStatsGraph::\_monitor-\/>get\_window(),}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},\ application,\ 0);}
\DoxyCodeLine{00833\ \ \ \textcolor{keywordflow}{if}\ (!\_window)\ \{}
\DoxyCodeLine{00834\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Could\ not\ create\ StripChart\ window!\(\backslash\)n"{}};}
\DoxyCodeLine{00835\ \ \ \ \ exit(1);}
\DoxyCodeLine{00836\ \ \ \}}
\DoxyCodeLine{00837\ }
\DoxyCodeLine{00838\ \ \ SetWindowLongPtr(\_window,\ 0,\ (LONG\_PTR)\textcolor{keyword}{this});}
\DoxyCodeLine{00839\ \ \ \mbox{\hyperlink{classWinStatsGraph_ae4264dd0c02b3f91b5300f523b1aa5c6}{setup\_label\_stack}}();}
\DoxyCodeLine{00840\ }
\DoxyCodeLine{00841\ \ \ \_smooth\_check\_box\ =}
\DoxyCodeLine{00842\ \ \ \ \ CreateWindow(WC\_BUTTON,\ \textcolor{stringliteral}{"{}Smooth"{}},\ WS\_CHILD\ |\ BS\_AUTOCHECKBOX,}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 0,\ 0,\ 0,}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_window,\ \textcolor{keyword}{nullptr},\ application,\ 0);}
\DoxyCodeLine{00845\ \ \ SendMessage(\_smooth\_check\_box,\ WM\_SETFONT,}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (WPARAM)WinStatsGraph::\_monitor-\/>get\_font(),\ TRUE);}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00848\ \ \ \textcolor{keywordflow}{if}\ (get\_average\_mode())\ \{}
\DoxyCodeLine{00849\ \ \ \ \ SendMessage(\_smooth\_check\_box,\ BM\_SETCHECK,\ BST\_CHECKED,\ 0);}
\DoxyCodeLine{00850\ \ \ \}}
\DoxyCodeLine{00851\ }
\DoxyCodeLine{00852\ \ \ \textcolor{comment}{//\ Ensure\ that\ the\ window\ is\ on\ top\ of\ the\ stack.}}
\DoxyCodeLine{00853\ \ \ SetWindowPos(\_window,\ HWND\_TOP,\ 0,\ 0,\ 0,\ 0,}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SWP\_NOMOVE\ |\ SWP\_NOSIZE\ |\ SWP\_SHOWWINDOW);}
\DoxyCodeLine{00855\ \}}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00861\ \textcolor{keywordtype}{void}\ WinStatsStripChart::}
\DoxyCodeLine{00862\ register\_window\_class(HINSTANCE\ application)\ \{}
\DoxyCodeLine{00863\ \ \ \textcolor{keywordflow}{if}\ (\_window\_class\_registered)\ \{}
\DoxyCodeLine{00864\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00865\ \ \ \}}
\DoxyCodeLine{00866\ }
\DoxyCodeLine{00867\ \ \ WNDCLASS\ wc;}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ ZeroMemory(\&wc,\ \textcolor{keyword}{sizeof}(WNDCLASS));}
\DoxyCodeLine{00870\ \ \ wc.style\ =\ 0;}
\DoxyCodeLine{00871\ \ \ wc.lpfnWndProc\ =\ (WNDPROC)static\_window\_proc;}
\DoxyCodeLine{00872\ \ \ wc.hInstance\ =\ application;}
\DoxyCodeLine{00873\ \ \ wc.hCursor\ =\ LoadCursor(\textcolor{keyword}{nullptr},\ IDC\_ARROW);}
\DoxyCodeLine{00874\ \ \ wc.hbrBackground\ =\ (HBRUSH)COLOR\_WINDOW;}
\DoxyCodeLine{00875\ \ \ wc.lpszMenuName\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00876\ \ \ wc.lpszClassName\ =\ \_window\_class\_name;}
\DoxyCodeLine{00877\ }
\DoxyCodeLine{00878\ \ \ \textcolor{comment}{//\ Reserve\ space\ to\ associate\ the\ this\ pointer\ with\ the\ window.}}
\DoxyCodeLine{00879\ \ \ wc.cbWndExtra\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classWinStatsStripChart}{WinStatsStripChart}}\ *);}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \ \ \textcolor{keywordflow}{if}\ (!RegisterClass(\&wc))\ \{}
\DoxyCodeLine{00882\ \ \ \ \ nout\ <<\ \textcolor{stringliteral}{"{}Could\ not\ register\ StripChart\ window\ class!\(\backslash\)n"{}};}
\DoxyCodeLine{00883\ \ \ \ \ exit(1);}
\DoxyCodeLine{00884\ \ \ \}}
\DoxyCodeLine{00885\ }
\DoxyCodeLine{00886\ \ \ \_window\_class\_registered\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00887\ \}}
\DoxyCodeLine{00888\ }
\DoxyCodeLine{00892\ LONG\ WINAPI\ WinStatsStripChart::}
\DoxyCodeLine{00893\ static\_window\_proc(HWND\ hwnd,\ UINT\ msg,\ WPARAM\ wparam,\ LPARAM\ lparam)\ \{}
\DoxyCodeLine{00894\ \ \ \mbox{\hyperlink{classWinStatsStripChart}{WinStatsStripChart}}\ *self\ =\ (\mbox{\hyperlink{classWinStatsStripChart}{WinStatsStripChart}}\ *)GetWindowLongPtr(hwnd,\ 0);}
\DoxyCodeLine{00895\ \ \ \textcolor{keywordflow}{if}\ (self\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ self-\/>\_window\ ==\ hwnd)\ \{}
\DoxyCodeLine{00896\ \ \ \ \ \textcolor{keywordflow}{return}\ self-\/>window\_proc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00897\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \textcolor{keywordflow}{return}\ DefWindowProc(hwnd,\ msg,\ wparam,\ lparam);}
\DoxyCodeLine{00899\ \ \ \}}
\DoxyCodeLine{00900\ \}}

\end{DoxyCode}

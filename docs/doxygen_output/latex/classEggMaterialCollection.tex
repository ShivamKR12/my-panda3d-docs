\doxysection{Egg\+Material\+Collection Class Reference}
\hypertarget{classEggMaterialCollection}{}\label{classEggMaterialCollection}\index{EggMaterialCollection@{EggMaterialCollection}}


{\ttfamily \#include $<$egg\+Material\+Collection.\+h$>$}

\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classEggMaterialCollection_a0d2a4c78ca4db93c10c63e40cb69143c}\label{classEggMaterialCollection_a0d2a4c78ca4db93c10c63e40cb69143c} 
typedef Ordered\+Materials\+::const\+\_\+iterator {\bfseries iterator}
\item 
\Hypertarget{classEggMaterialCollection_ab653f125c4740ef983b250338a6f510d}\label{classEggMaterialCollection_ab653f125c4740ef983b250338a6f510d} 
typedef iterator {\bfseries const\+\_\+iterator}
\item 
\Hypertarget{classEggMaterialCollection_afa507fee14c690bba367c2cc93f03f04}\label{classEggMaterialCollection_afa507fee14c690bba367c2cc93f03f04} 
typedef Ordered\+Materials\+::size\+\_\+type {\bfseries size\+\_\+type}
\item 
\Hypertarget{classEggMaterialCollection_a857405d7fb94284c5eb6d627e4116b48}\label{classEggMaterialCollection_a857405d7fb94284c5eb6d627e4116b48} 
typedef \mbox{\hyperlink{classpmap}{pmap}}$<$ \mbox{\hyperlink{pt__EggMaterial_8h_af0e4f3dc834f3126e6b9503c8ccb255f}{PT\+\_\+\+Egg\+Material}}, \mbox{\hyperlink{pt__EggMaterial_8h_af0e4f3dc834f3126e6b9503c8ccb255f}{PT\+\_\+\+Egg\+Material}} $>$ {\bfseries Material\+Replacement}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classEggMaterialCollection_acc6f234d5ffdfe858cc4feeaa46eb6a0}\label{classEggMaterialCollection_acc6f234d5ffdfe858cc4feeaa46eb6a0} 
{\bfseries Egg\+Material\+Collection} (const \mbox{\hyperlink{classEggMaterialCollection}{Egg\+Material\+Collection}} \&copy)
\item 
\Hypertarget{classEggMaterialCollection_a76187d1fe621103a5d739fb285094539}\label{classEggMaterialCollection_a76187d1fe621103a5d739fb285094539} 
\mbox{\hyperlink{classEggMaterialCollection}{Egg\+Material\+Collection}} \& {\bfseries operator=} (const \mbox{\hyperlink{classEggMaterialCollection}{Egg\+Material\+Collection}} \&copy)
\item 
void \mbox{\hyperlink{classEggMaterialCollection_ab3b380f1d5da27d0cf72925827b4f26f}{clear}} ()
\item 
int \mbox{\hyperlink{classEggMaterialCollection_a43f0f822c1c9d2b5934ade6f026600b6}{extract\+\_\+materials}} (\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}node)
\item 
Egg\+Group\+Node\+::iterator \mbox{\hyperlink{classEggMaterialCollection_a70831f130c9f507b9be0714781529fa1}{insert\+\_\+materials}} (\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}node)
\item 
Egg\+Group\+Node\+::iterator \mbox{\hyperlink{classEggMaterialCollection_a30e696cb54a7feeb165bc3207c6eaf2c}{insert\+\_\+materials}} (\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}node, Egg\+Group\+Node\+::iterator position)
\item 
void \mbox{\hyperlink{classEggMaterialCollection_af20b2a091f8db0b04d3e15167bdf48e9}{remove\+\_\+unused\+\_\+materials}} (\mbox{\hyperlink{classEggNode}{Egg\+Node}} \texorpdfstring{$\ast$}{*}node)
\item 
int \mbox{\hyperlink{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6}{collapse\+\_\+equivalent\+\_\+materials}} (int eq, \mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}node)
\item 
int \mbox{\hyperlink{classEggMaterialCollection_aa6a29791448603ade3df406b8cef791d}{collapse\+\_\+equivalent\+\_\+materials}} (int eq, \mbox{\hyperlink{classpmap}{Material\+Replacement}} \&removed)
\item 
void \mbox{\hyperlink{classEggMaterialCollection_a24dc53f5831dd2fcb5806bb069b7039e}{uniquify\+\_\+mrefs}} ()
\item 
void \mbox{\hyperlink{classEggMaterialCollection_aaf879ef0ead581cc372d1c7454241d86}{sort\+\_\+by\+\_\+mref}} ()
\item 
\Hypertarget{classEggMaterialCollection_ad9e015819740a27952b7ca51064bf673}\label{classEggMaterialCollection_ad9e015819740a27952b7ca51064bf673} 
INLINE iterator {\bfseries begin} () const
\item 
\Hypertarget{classEggMaterialCollection_acc8dc3b4b2b44efbbc9f361a4cbb1f72}\label{classEggMaterialCollection_acc8dc3b4b2b44efbbc9f361a4cbb1f72} 
INLINE iterator {\bfseries end} () const
\item 
\Hypertarget{classEggMaterialCollection_acf8939c70faef43120183378c10bad99}\label{classEggMaterialCollection_acf8939c70faef43120183378c10bad99} 
INLINE bool {\bfseries empty} () const
\item 
\Hypertarget{classEggMaterialCollection_aa598c7b2febf25d60b82e0cfe297e04d}\label{classEggMaterialCollection_aa598c7b2febf25d60b82e0cfe297e04d} 
INLINE size\+\_\+type {\bfseries size} () const
\item 
bool \mbox{\hyperlink{classEggMaterialCollection_a83789e0162169bc7a76d66297dc23234}{remove\+\_\+material}} (\mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*}material)
\item 
\mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classEggMaterialCollection_ab2404b70f3d266a7a5194164ea16654c}{create\+\_\+unique\+\_\+material}} (const \mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \&copy, int eq)
\item 
\mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classEggMaterialCollection_aec8a03fca8f1bd8acf652a4c4c4beace}{find\+\_\+mref}} (const std\+::string \&mref\+\_\+name) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classEggMaterialCollection_a2006698762a1e44d4a1dd88dfa5464bc}{replace\+\_\+materials}} (\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}node, const \mbox{\hyperlink{classpmap}{Material\+Replacement}} \&replace)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classEggMaterialCollection_aaec359cadfe6eae9905ecef652d38594}\label{classEggMaterialCollection_aaec359cadfe6eae9905ecef652d38594} 
PUBLISHED \+: \mbox{\hyperlink{classEggMaterialCollection}{Egg\+Material\+Collection}}()
\item 
\Hypertarget{classEggMaterialCollection_aaba3889138de73320c2ff4e49654020a}\label{classEggMaterialCollection_aaba3889138de73320c2ff4e49654020a} 
PUBLISHED \+: int find\+\_\+used\+\_\+materials(\mbox{\hyperlink{classEggNode}{Egg\+Node}} \texorpdfstring{$\ast$}{*}node)
\item 
\Hypertarget{classEggMaterialCollection_a8ff105191f402d0f584b1a1092b1f2f6}\label{classEggMaterialCollection_a8ff105191f402d0f584b1a1092b1f2f6} 
PUBLISHED \+: bool add\+\_\+material(\mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*}material)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is a collection of materials by MRef name. It can extract the materials from an egg file and sort them all together; it can also manage the creation of unique materials and the assignment of unique MRef names. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classEggMaterialCollection_ab3b380f1d5da27d0cf72925827b4f26f}\label{classEggMaterialCollection_ab3b380f1d5da27d0cf72925827b4f26f} 
\index{EggMaterialCollection@{EggMaterialCollection}!clear@{clear}}
\index{clear@{clear}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void Egg\+Material\+Collection\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Removes all materials from the collection. \Hypertarget{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6}\label{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6} 
\index{EggMaterialCollection@{EggMaterialCollection}!collapse\_equivalent\_materials@{collapse\_equivalent\_materials}}
\index{collapse\_equivalent\_materials@{collapse\_equivalent\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{collapse\_equivalent\_materials()}{collapse\_equivalent\_materials()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int Egg\+Material\+Collection\+::collapse\+\_\+equivalent\+\_\+materials (\begin{DoxyParamCaption}\item[{int}]{eq,  }\item[{\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}}]{node }\end{DoxyParamCaption})}

Walks through the collection and collapses together any separate materials that are equivalent according to the indicated equivalence factor, eq (see Egg\+Material\+::is\+\_\+equivalent\+\_\+to()). The return value is the number of materials removed.

This flavor of \doxylink{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6}{collapse\+\_\+equivalent\+\_\+materials()} automatically adjusts all the primitives in the egg hierarchy to refer to the new material pointers. \Hypertarget{classEggMaterialCollection_aa6a29791448603ade3df406b8cef791d}\label{classEggMaterialCollection_aa6a29791448603ade3df406b8cef791d} 
\index{EggMaterialCollection@{EggMaterialCollection}!collapse\_equivalent\_materials@{collapse\_equivalent\_materials}}
\index{collapse\_equivalent\_materials@{collapse\_equivalent\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{collapse\_equivalent\_materials()}{collapse\_equivalent\_materials()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int Egg\+Material\+Collection\+::collapse\+\_\+equivalent\+\_\+materials (\begin{DoxyParamCaption}\item[{int}]{eq,  }\item[{\mbox{\hyperlink{classpmap}{Egg\+Material\+Collection\+::\+Material\+Replacement}} \&}]{removed }\end{DoxyParamCaption})}

Walks through the collection and collapses together any separate materials that are equivalent according to the indicated equivalence factor, eq (see Egg\+Material\+::is\+\_\+equivalent\+\_\+to()). The return value is the number of materials removed.

This flavor of \doxylink{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6}{collapse\+\_\+equivalent\+\_\+materials()} does not adjust any primitives in the egg hierarchy; instead, it fills up the \textquotesingle{}removed\textquotesingle{} map with an entry for each removed material, mapping it back to the equivalent retained material. It\textquotesingle{}s up to the user to then call \doxylink{classEggMaterialCollection_a2006698762a1e44d4a1dd88dfa5464bc}{replace\+\_\+materials()} with this map, if desired, to apply these changes to the egg hierarchy. \Hypertarget{classEggMaterialCollection_ab2404b70f3d266a7a5194164ea16654c}\label{classEggMaterialCollection_ab2404b70f3d266a7a5194164ea16654c} 
\index{EggMaterialCollection@{EggMaterialCollection}!create\_unique\_material@{create\_unique\_material}}
\index{create\_unique\_material@{create\_unique\_material}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{create\_unique\_material()}{create\_unique\_material()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*} Egg\+Material\+Collection\+::create\+\_\+unique\+\_\+material (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \&}]{copy,  }\item[{int}]{eq }\end{DoxyParamCaption})}

Creates a new material if there is not already one equivalent (according to eq, see Egg\+Material\+::is\+\_\+equivalent\+\_\+to()) to the indicated material, or returns the existing one if there is. \Hypertarget{classEggMaterialCollection_a43f0f822c1c9d2b5934ade6f026600b6}\label{classEggMaterialCollection_a43f0f822c1c9d2b5934ade6f026600b6} 
\index{EggMaterialCollection@{EggMaterialCollection}!extract\_materials@{extract\_materials}}
\index{extract\_materials@{extract\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{extract\_materials()}{extract\_materials()}}
{\footnotesize\ttfamily int Egg\+Material\+Collection\+::extract\+\_\+materials (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}}]{node }\end{DoxyParamCaption})}

Walks the egg hierarchy beginning at the indicated node, and removes any Egg\+Materials encountered in the hierarchy, adding them to the collection. Returns the number of Egg\+Materials encountered. \Hypertarget{classEggMaterialCollection_aec8a03fca8f1bd8acf652a4c4c4beace}\label{classEggMaterialCollection_aec8a03fca8f1bd8acf652a4c4c4beace} 
\index{EggMaterialCollection@{EggMaterialCollection}!find\_mref@{find\_mref}}
\index{find\_mref@{find\_mref}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{find\_mref()}{find\_mref()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*} Egg\+Material\+Collection\+::find\+\_\+mref (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{mref\+\_\+name }\end{DoxyParamCaption}) const}

Returns the material with the indicated MRef name, or NULL if no material matches. \Hypertarget{classEggMaterialCollection_a70831f130c9f507b9be0714781529fa1}\label{classEggMaterialCollection_a70831f130c9f507b9be0714781529fa1} 
\index{EggMaterialCollection@{EggMaterialCollection}!insert\_materials@{insert\_materials}}
\index{insert\_materials@{insert\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{insert\_materials()}{insert\_materials()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Egg\+Group\+Node\+::iterator Egg\+Material\+Collection\+::insert\+\_\+materials (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}}]{node }\end{DoxyParamCaption})}

Adds a series of \doxylink{classEggMaterial}{Egg\+Material} nodes to the beginning of the indicated node to reflect each of the materials in the collection. Returns an iterator representing the first position after the newly inserted materials. \Hypertarget{classEggMaterialCollection_a30e696cb54a7feeb165bc3207c6eaf2c}\label{classEggMaterialCollection_a30e696cb54a7feeb165bc3207c6eaf2c} 
\index{EggMaterialCollection@{EggMaterialCollection}!insert\_materials@{insert\_materials}}
\index{insert\_materials@{insert\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{insert\_materials()}{insert\_materials()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Egg\+Group\+Node\+::iterator Egg\+Material\+Collection\+::insert\+\_\+materials (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}}]{node,  }\item[{Egg\+Group\+Node\+::iterator}]{position }\end{DoxyParamCaption})}

Adds a series of \doxylink{classEggMaterial}{Egg\+Material} nodes to the beginning of the indicated node to reflect each of the materials in the collection. Returns an iterator representing the first position after the newly inserted materials. \Hypertarget{classEggMaterialCollection_a83789e0162169bc7a76d66297dc23234}\label{classEggMaterialCollection_a83789e0162169bc7a76d66297dc23234} 
\index{EggMaterialCollection@{EggMaterialCollection}!remove\_material@{remove\_material}}
\index{remove\_material@{remove\_material}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{remove\_material()}{remove\_material()}}
{\footnotesize\ttfamily bool Egg\+Material\+Collection\+::remove\+\_\+material (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggMaterial}{Egg\+Material}} \texorpdfstring{$\ast$}{*}}]{material }\end{DoxyParamCaption})}

Explicitly removes a material from the collection. Returns true if the material was removed, false if it wasn\textquotesingle{}t there or if there was some error. \Hypertarget{classEggMaterialCollection_af20b2a091f8db0b04d3e15167bdf48e9}\label{classEggMaterialCollection_af20b2a091f8db0b04d3e15167bdf48e9} 
\index{EggMaterialCollection@{EggMaterialCollection}!remove\_unused\_materials@{remove\_unused\_materials}}
\index{remove\_unused\_materials@{remove\_unused\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{remove\_unused\_materials()}{remove\_unused\_materials()}}
{\footnotesize\ttfamily void Egg\+Material\+Collection\+::remove\+\_\+unused\+\_\+materials (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggNode}{Egg\+Node}} \texorpdfstring{$\ast$}{*}}]{node }\end{DoxyParamCaption})}

Removes any materials from the collection that aren\textquotesingle{}t referenced by any primitives in the indicated egg hierarchy. This also, incidentally, adds materials to the collection that had been referenced by primitives but had not previously appeared in the collection. \Hypertarget{classEggMaterialCollection_a2006698762a1e44d4a1dd88dfa5464bc}\label{classEggMaterialCollection_a2006698762a1e44d4a1dd88dfa5464bc} 
\index{EggMaterialCollection@{EggMaterialCollection}!replace\_materials@{replace\_materials}}
\index{replace\_materials@{replace\_materials}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{replace\_materials()}{replace\_materials()}}
{\footnotesize\ttfamily void Egg\+Material\+Collection\+::replace\+\_\+materials (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classEggGroupNode}{Egg\+Group\+Node}} \texorpdfstring{$\ast$}{*}}]{node,  }\item[{const \mbox{\hyperlink{classpmap}{Material\+Replacement}} \&}]{replace }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Walks the egg hierarchy, changing out any reference to a material appearing on the left side of the map with its corresponding material on the right side. This is most often done following a call to \doxylink{classEggMaterialCollection_a36d708ff7669e850fd44b0debc90c5c6}{collapse\+\_\+equivalent\+\_\+materials()}. It does not directly affect the Collection. \Hypertarget{classEggMaterialCollection_aaf879ef0ead581cc372d1c7454241d86}\label{classEggMaterialCollection_aaf879ef0ead581cc372d1c7454241d86} 
\index{EggMaterialCollection@{EggMaterialCollection}!sort\_by\_mref@{sort\_by\_mref}}
\index{sort\_by\_mref@{sort\_by\_mref}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{sort\_by\_mref()}{sort\_by\_mref()}}
{\footnotesize\ttfamily void Egg\+Material\+Collection\+::sort\+\_\+by\+\_\+mref (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Sorts all the materials into alphabetical order by MRef name. Subsequent operations using begin()/end() will traverse in this sorted order. \Hypertarget{classEggMaterialCollection_a24dc53f5831dd2fcb5806bb069b7039e}\label{classEggMaterialCollection_a24dc53f5831dd2fcb5806bb069b7039e} 
\index{EggMaterialCollection@{EggMaterialCollection}!uniquify\_mrefs@{uniquify\_mrefs}}
\index{uniquify\_mrefs@{uniquify\_mrefs}!EggMaterialCollection@{EggMaterialCollection}}
\doxysubsubsection{\texorpdfstring{uniquify\_mrefs()}{uniquify\_mrefs()}}
{\footnotesize\ttfamily void Egg\+Material\+Collection\+::uniquify\+\_\+mrefs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Guarantees that each material in the collection has a unique MRef name. This is essential before writing an egg file. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/egg/\mbox{\hyperlink{eggMaterialCollection_8h}{egg\+Material\+Collection.\+h}}\item 
panda/src/egg/\mbox{\hyperlink{eggMaterialCollection_8cxx}{egg\+Material\+Collection.\+cxx}}\end{DoxyCompactItemize}

\doxysection{Subprocess\+Window\+Buffer Class Reference}
\hypertarget{classSubprocessWindowBuffer}{}\label{classSubprocessWindowBuffer}\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}}


{\ttfamily \#include $<$subprocess\+Window\+Buffer.\+h$>$}

\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classSubprocessWindowBuffer_1_1Event}{Event}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classSubprocessWindowBuffer_a64fbcc5fcfa57b3770aa4d64a4d2a261}\label{classSubprocessWindowBuffer_a64fbcc5fcfa57b3770aa4d64a4d2a261} 
enum {\bfseries Event\+Source} \{ {\bfseries ES\+\_\+none}
, {\bfseries ES\+\_\+mouse}
, {\bfseries ES\+\_\+keyboard}
 \}
\item 
\Hypertarget{classSubprocessWindowBuffer_aeef8fb87c3876281221c4b46fa5a0602}\label{classSubprocessWindowBuffer_aeef8fb87c3876281221c4b46fa5a0602} 
enum {\bfseries Event\+Type} \{ {\bfseries ET\+\_\+none}
, {\bfseries ET\+\_\+button\+\_\+down}
, {\bfseries ET\+\_\+button\+\_\+up}
, {\bfseries ET\+\_\+button\+\_\+again}
 \}
\item 
\Hypertarget{classSubprocessWindowBuffer_a9be28b6008d75754061ce2dcbf45dcc7}\label{classSubprocessWindowBuffer_a9be28b6008d75754061ce2dcbf45dcc7} 
enum {\bfseries Event\+Flags} \{ \newline
{\bfseries EF\+\_\+has\+\_\+mouse} = 0x0001
, {\bfseries EF\+\_\+mouse\+\_\+position} = 0x0002
, {\bfseries EF\+\_\+shift\+\_\+held} = 0x0004
, {\bfseries EF\+\_\+control\+\_\+held} = 0x0008
, \newline
{\bfseries EF\+\_\+alt\+\_\+held} = 0x0010
, {\bfseries EF\+\_\+meta\+\_\+held} = 0x0020
, {\bfseries EF\+\_\+caps\+\_\+lock} = 0x0040
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classSubprocessWindowBuffer_a96afcf598a9fdf85ef7c2f0c3bf97cf2}{verify\+\_\+magic\+\_\+number}} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_aa41e4856439f8d35a94d306513022613}\label{classSubprocessWindowBuffer_aa41e4856439f8d35a94d306513022613} 
int {\bfseries get\+\_\+x\+\_\+size} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_a69e23c9759bfa0099db791ce4956d3e8}\label{classSubprocessWindowBuffer_a69e23c9759bfa0099db791ce4956d3e8} 
int {\bfseries get\+\_\+y\+\_\+size} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_afe9c4b0e8c2a4d9c8cc89d1341739e44}\label{classSubprocessWindowBuffer_afe9c4b0e8c2a4d9c8cc89d1341739e44} 
size\+\_\+t {\bfseries get\+\_\+row\+\_\+size} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_a068939d96e9db8ec335459a02d8c0da4}\label{classSubprocessWindowBuffer_a068939d96e9db8ec335459a02d8c0da4} 
size\+\_\+t {\bfseries get\+\_\+framebuffer\+\_\+size} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_aaf175e9316ee4d0fbb3381ffd4a97a8b}\label{classSubprocessWindowBuffer_aaf175e9316ee4d0fbb3381ffd4a97a8b} 
bool {\bfseries ready\+\_\+for\+\_\+read} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_a6d63616401870742b3ef5eb09947f29c}\label{classSubprocessWindowBuffer_a6d63616401870742b3ef5eb09947f29c} 
bool {\bfseries ready\+\_\+for\+\_\+write} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_a7be4a9a6d120184f60c0be39f5a4f12c}\label{classSubprocessWindowBuffer_a7be4a9a6d120184f60c0be39f5a4f12c} 
const void \texorpdfstring{$\ast$}{*} {\bfseries open\+\_\+read\+\_\+framebuffer} ()
\item 
\Hypertarget{classSubprocessWindowBuffer_ae05bd3cdd1815057455f484260bfdb7d}\label{classSubprocessWindowBuffer_ae05bd3cdd1815057455f484260bfdb7d} 
void {\bfseries close\+\_\+read\+\_\+framebuffer} ()
\item 
\Hypertarget{classSubprocessWindowBuffer_acd72785f6873e31660ba1baec12e23f5}\label{classSubprocessWindowBuffer_acd72785f6873e31660ba1baec12e23f5} 
void \texorpdfstring{$\ast$}{*} {\bfseries open\+\_\+write\+\_\+framebuffer} ()
\item 
\Hypertarget{classSubprocessWindowBuffer_acf2ae43bc2de7868df82f490b299c775}\label{classSubprocessWindowBuffer_acf2ae43bc2de7868df82f490b299c775} 
void {\bfseries close\+\_\+write\+\_\+framebuffer} ()
\item 
\Hypertarget{classSubprocessWindowBuffer_ad690d20a1b8250df31ad6d97497158dc}\label{classSubprocessWindowBuffer_ad690d20a1b8250df31ad6d97497158dc} 
bool {\bfseries add\+\_\+event} (const \mbox{\hyperlink{classSubprocessWindowBuffer_1_1Event}{Event}} \&event)
\item 
\Hypertarget{classSubprocessWindowBuffer_a270b03ed0a4ac531f016b67877df47dd}\label{classSubprocessWindowBuffer_a270b03ed0a4ac531f016b67877df47dd} 
bool {\bfseries has\+\_\+event} () const
\item 
\Hypertarget{classSubprocessWindowBuffer_a75a45bc2392dea69b8e880efc0967d70}\label{classSubprocessWindowBuffer_a75a45bc2392dea69b8e880efc0967d70} 
bool {\bfseries get\+\_\+event} (\mbox{\hyperlink{classSubprocessWindowBuffer_1_1Event}{Event}} \&event)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classSubprocessWindowBuffer_a2bc19f70df517c660d58a19cd965e564}{new\+\_\+buffer}} (int \&fd, size\+\_\+t \&mmap\+\_\+size, std\+::string \&filename, int x\+\_\+size, int y\+\_\+size)
\item 
static void \mbox{\hyperlink{classSubprocessWindowBuffer_a006bf53e1e24641a89a61aa2c0221db1}{destroy\+\_\+buffer}} (int fd, size\+\_\+t mmap\+\_\+size, const std\+::string \&filename, \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*}buffer)
\item 
static \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classSubprocessWindowBuffer_af5652c8e9e244d8c6394151f4360ef7d}{open\+\_\+buffer}} (int \&fd, size\+\_\+t \&mmap\+\_\+size, const std\+::string \&filename)
\item 
static void \mbox{\hyperlink{classSubprocessWindowBuffer_aa4aa0474d26960a22d7cd2769f506acd}{close\+\_\+buffer}} (int fd, size\+\_\+t mmap\+\_\+size, const std\+::string \&filename, \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*}buffer)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is a special class that is designed to faciliate Subprocess\+Window. It\textquotesingle{}s intended to be allocated within a shared memory buffer, and it contains space for a framebuffer image to be stored for transferring between processes, as well as appropriate synchronization primitives.

It\textquotesingle{}s designed to be compiled outside of Panda, so that code that doesn\textquotesingle{}t link with Panda may still link with this and use it.

At the moment, and maybe indefinitely, it is only compiled on OSX, and only when we are building support for the plugin; because it is only needed then. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classSubprocessWindowBuffer_aa4aa0474d26960a22d7cd2769f506acd}\label{classSubprocessWindowBuffer_aa4aa0474d26960a22d7cd2769f506acd} 
\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}!close\_buffer@{close\_buffer}}
\index{close\_buffer@{close\_buffer}!SubprocessWindowBuffer@{SubprocessWindowBuffer}}
\doxysubsubsection{\texorpdfstring{close\_buffer()}{close\_buffer()}}
{\footnotesize\ttfamily void Subprocess\+Window\+Buffer\+::close\+\_\+buffer (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{size\+\_\+t}]{mmap\+\_\+size,  }\item[{const std\+::string \&}]{filename,  }\item[{\mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Closes a buffer object created via a previous call to \doxylink{classSubprocessWindowBuffer_af5652c8e9e244d8c6394151f4360ef7d}{open\+\_\+buffer()}. This unmaps the shared memory and closes the file descriptor, but does not molest the shared buffer itself. \Hypertarget{classSubprocessWindowBuffer_a006bf53e1e24641a89a61aa2c0221db1}\label{classSubprocessWindowBuffer_a006bf53e1e24641a89a61aa2c0221db1} 
\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}!destroy\_buffer@{destroy\_buffer}}
\index{destroy\_buffer@{destroy\_buffer}!SubprocessWindowBuffer@{SubprocessWindowBuffer}}
\doxysubsubsection{\texorpdfstring{destroy\_buffer()}{destroy\_buffer()}}
{\footnotesize\ttfamily void Subprocess\+Window\+Buffer\+::destroy\+\_\+buffer (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{size\+\_\+t}]{mmap\+\_\+size,  }\item[{const std\+::string \&}]{filename,  }\item[{\mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Destroys a buffer object created via a previous call to \doxylink{classSubprocessWindowBuffer_a2bc19f70df517c660d58a19cd965e564}{new\+\_\+buffer()}. This destructs objects within the buffer, unmaps the shared memory, and closes the file descriptor. \Hypertarget{classSubprocessWindowBuffer_a2bc19f70df517c660d58a19cd965e564}\label{classSubprocessWindowBuffer_a2bc19f70df517c660d58a19cd965e564} 
\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}!new\_buffer@{new\_buffer}}
\index{new\_buffer@{new\_buffer}!SubprocessWindowBuffer@{SubprocessWindowBuffer}}
\doxysubsubsection{\texorpdfstring{new\_buffer()}{new\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*} Subprocess\+Window\+Buffer\+::new\+\_\+buffer (\begin{DoxyParamCaption}\item[{int \&}]{fd,  }\item[{size\+\_\+t \&}]{mmap\+\_\+size,  }\item[{std\+::string \&}]{filename,  }\item[{int}]{x\+\_\+size,  }\item[{int}]{y\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Call this method to create a new buffer in shared memory space. Supply the desired size of the window.

This method will create the required shared-\/memory buffer and return a \doxylink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer} allocated within that shared memory, or NULL if there is a failure allocating sufficient shared memory.

It also creates a temporary file on disk and returns fd, mmap\+\_\+size, and filename, which the caller must retain and eventually pass to \doxylink{classSubprocessWindowBuffer_a006bf53e1e24641a89a61aa2c0221db1}{destroy\+\_\+buffer()}. The filename should be passed to the child process to open with \doxylink{classSubprocessWindowBuffer_af5652c8e9e244d8c6394151f4360ef7d}{open\+\_\+buffer()}. \Hypertarget{classSubprocessWindowBuffer_af5652c8e9e244d8c6394151f4360ef7d}\label{classSubprocessWindowBuffer_af5652c8e9e244d8c6394151f4360ef7d} 
\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}!open\_buffer@{open\_buffer}}
\index{open\_buffer@{open\_buffer}!SubprocessWindowBuffer@{SubprocessWindowBuffer}}
\doxysubsubsection{\texorpdfstring{open\_buffer()}{open\_buffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer}} \texorpdfstring{$\ast$}{*} Subprocess\+Window\+Buffer\+::open\+\_\+buffer (\begin{DoxyParamCaption}\item[{int \&}]{fd,  }\item[{size\+\_\+t \&}]{mmap\+\_\+size,  }\item[{const std\+::string \&}]{filename }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Call this method to open a reference to an existing buffer in shared memory space. Supply the temporary filename returned by \doxylink{classSubprocessWindowBuffer_a2bc19f70df517c660d58a19cd965e564}{new\+\_\+buffer()}, above (presumably from the parent process).

This method will mmap the required shared-\/memory buffer and return a \doxylink{classSubprocessWindowBuffer}{Subprocess\+Window\+Buffer} allocated within that shared memory, or NULL if there is some failure. The caller must retain fd, mmap\+\_\+size, and filename and eventually pass all three to \doxylink{classSubprocessWindowBuffer_aa4aa0474d26960a22d7cd2769f506acd}{close\+\_\+buffer()}. \Hypertarget{classSubprocessWindowBuffer_a96afcf598a9fdf85ef7c2f0c3bf97cf2}\label{classSubprocessWindowBuffer_a96afcf598a9fdf85ef7c2f0c3bf97cf2} 
\index{SubprocessWindowBuffer@{SubprocessWindowBuffer}!verify\_magic\_number@{verify\_magic\_number}}
\index{verify\_magic\_number@{verify\_magic\_number}!SubprocessWindowBuffer@{SubprocessWindowBuffer}}
\doxysubsubsection{\texorpdfstring{verify\_magic\_number()}{verify\_magic\_number()}}
{\footnotesize\ttfamily bool Subprocess\+Window\+Buffer\+::verify\+\_\+magic\+\_\+number (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Returns true if the buffer\textquotesingle{}s magic number matches, false otherwise. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
panda/src/display/\mbox{\hyperlink{subprocessWindowBuffer_8h}{subprocess\+Window\+Buffer.\+h}}\item 
panda/src/display/\mbox{\hyperlink{subprocessWindowBuffer_8cxx}{subprocess\+Window\+Buffer.\+cxx}}\end{DoxyCompactItemize}

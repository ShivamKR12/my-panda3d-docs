\doxysection{egg\+\_\+parametrics.\+cxx}
\hypertarget{egg__parametrics_8cxx_source}{}\label{egg__parametrics_8cxx_source}\index{panda/src/egg2pg/egg\_parametrics.cxx@{panda/src/egg2pg/egg\_parametrics.cxx}}
\mbox{\hyperlink{egg__parametrics_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{egg__parametrics_8h}{egg\_parametrics.h}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config__egg2pg_8h}{config\_egg2pg.h}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00023\ PT(\mbox{\hyperlink{classNurbsSurfaceEvaluator}{NurbsSurfaceEvaluator}})}
\DoxyCodeLine{00024\ \mbox{\hyperlink{egg__parametrics_8cxx_a0677e05fdd8a4e70756783404eabda0a}{make\_nurbs\_surface}}(\mbox{\hyperlink{classEggNurbsSurface}{EggNurbsSurface}}\ *egg\_surface,\ const\ LMatrix4d\ \&mat)\ \{}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{if}\ (egg\_surface-\/>get\_u\_order()\ <\ 1\ ||\ egg\_surface-\/>get\_u\_order()\ >\ 4)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00027\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSSurface\ U\ order\ for\ "{}}\ <<\ egg\_surface-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ "{}}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ <<\ egg\_surface-\/>get\_u\_order()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00030\ \ \ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \textcolor{keywordflow}{if}\ (egg\_surface-\/>get\_v\_order()\ <\ 1\ ||\ egg\_surface-\/>get\_v\_order()\ >\ 4)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00034\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSSurface\ V\ order\ for\ "{}}\ <<\ egg\_surface-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ "{}}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ <<\ egg\_surface-\/>get\_v\_order()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00037\ \ \ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ PT(\mbox{\hyperlink{classNurbsSurfaceEvaluator}{NurbsSurfaceEvaluator}})\ nurbs\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsSurfaceEvaluator}{NurbsSurfaceEvaluator}};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ nurbs-\/>set\_u\_order(egg\_surface-\/>get\_u\_order());}
\DoxyCodeLine{00042\ \ \ nurbs-\/>set\_v\_order(egg\_surface-\/>get\_v\_order());}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \textcolor{keywordtype}{int}\ num\_u\_vertices\ =\ egg\_surface-\/>get\_num\_u\_cvs();}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{int}\ num\_v\_vertices\ =\ egg\_surface-\/>get\_num\_v\_cvs();}
\DoxyCodeLine{00046\ \ \ nurbs-\/>reset(num\_u\_vertices,\ num\_v\_vertices);}
\DoxyCodeLine{00047\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ ui\ =\ 0;\ ui\ <\ num\_u\_vertices;\ ui++)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ vi\ =\ 0;\ vi\ <\ num\_v\_vertices;\ vi++)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ egg\_surface-\/>get\_vertex\_index(ui,\ vi);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ *egg\_vertex\ =\ egg\_surface-\/>get\_vertex(i);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ nurbs-\/>set\_vertex(ui,\ vi,\ LCAST(PN\_stdfloat,\ egg\_vertex-\/>get\_pos4()\ *\ mat));}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ LColor\ \mbox{\hyperlink{structcolor}{color}}\ =\ egg\_vertex-\/>get\_color();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ nurbs-\/>set\_extended\_vertices(ui,\ vi,\ 0,\ \mbox{\hyperlink{structcolor}{color}}.get\_data(),\ 4);}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \textcolor{keywordtype}{int}\ num\_u\_knots\ =\ egg\_surface-\/>get\_num\_u\_knots();}
\DoxyCodeLine{00059\ \ \ \textcolor{keywordflow}{if}\ (num\_u\_knots\ !=\ nurbs-\/>get\_num\_u\_knots())\ \{}
\DoxyCodeLine{00060\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00061\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSSurface\ number\ of\ U\ knots\ for\ "{}}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ <<\ egg\_surface-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ got\ "{}}\ <<\ num\_u\_knots}
\DoxyCodeLine{00063\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ knots,\ expected\ "{}}\ <<\ nurbs-\/>get\_num\_u\_knots()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{int}\ num\_v\_knots\ =\ egg\_surface-\/>get\_num\_v\_knots();}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordflow}{if}\ (num\_v\_knots\ !=\ nurbs-\/>get\_num\_v\_knots())\ \{}
\DoxyCodeLine{00069\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00070\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSSurface\ number\ of\ U\ knots\ for\ "{}}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ <<\ egg\_surface-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ got\ "{}}\ <<\ num\_v\_knots}
\DoxyCodeLine{00072\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ knots,\ expected\ "{}}\ <<\ nurbs-\/>get\_num\_v\_knots()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00074\ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_u\_knots;\ i++)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ nurbs-\/>set\_u\_knot(i,\ egg\_surface-\/>get\_u\_knot(i));}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_v\_knots;\ i++)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ nurbs-\/>set\_v\_knot(i,\ egg\_surface-\/>get\_v\_knot(i));}
\DoxyCodeLine{00082\ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keywordflow}{return}\ nurbs;}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00093\ PT(\mbox{\hyperlink{classNurbsCurveEvaluator}{NurbsCurveEvaluator}})}
\DoxyCodeLine{00094\ \mbox{\hyperlink{egg__parametrics_8cxx_a78bb7dbd9766c4e3284de6dfec13b08d}{make\_nurbs\_curve}}(\mbox{\hyperlink{classEggNurbsCurve}{EggNurbsCurve}}\ *egg\_curve,\ const\ LMatrix4d\ \&mat)\ \{}
\DoxyCodeLine{00095\ \ \ \textcolor{keywordflow}{if}\ (egg\_curve-\/>get\_order()\ <\ 1\ ||\ egg\_curve-\/>get\_order()\ >\ 4)\ \{}
\DoxyCodeLine{00096\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00097\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSCurve\ order\ for\ "{}}\ <<\ egg\_curve-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ "{}}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ <<\ egg\_curve-\/>get\_order()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00100\ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ PT(\mbox{\hyperlink{classNurbsCurveEvaluator}{NurbsCurveEvaluator}})\ nurbs\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classNurbsCurveEvaluator}{NurbsCurveEvaluator}};}
\DoxyCodeLine{00103\ \ \ nurbs-\/>set\_order(egg\_curve-\/>get\_order());}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ nurbs-\/>reset(egg\_curve-\/>size());}
\DoxyCodeLine{00106\ \ \ EggPrimitive::const\_iterator\ pi;}
\DoxyCodeLine{00107\ \ \ \textcolor{keywordtype}{int}\ vi\ =\ 0;}
\DoxyCodeLine{00108\ \ \ \textcolor{keywordflow}{for}\ (pi\ =\ egg\_curve-\/>begin();\ pi\ !=\ egg\_curve-\/>end();\ ++pi)\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \mbox{\hyperlink{classEggVertex}{EggVertex}}\ *egg\_vertex\ =\ (*pi);}
\DoxyCodeLine{00110\ \ \ \ \ nurbs-\/>set\_vertex(vi,\ LCAST(PN\_stdfloat,\ egg\_vertex-\/>get\_pos4()\ *\ mat));}
\DoxyCodeLine{00111\ \ \ \ \ LColor\ \mbox{\hyperlink{structcolor}{color}}\ =\ egg\_vertex-\/>get\_color();}
\DoxyCodeLine{00112\ \ \ \ \ nurbs-\/>set\_extended\_vertices(vi,\ 0,\ \mbox{\hyperlink{structcolor}{color}}.get\_data(),\ 4);}
\DoxyCodeLine{00113\ \ \ \ \ vi++;}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{int}\ num\_knots\ =\ egg\_curve-\/>get\_num\_knots();}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{if}\ (num\_knots\ !=\ nurbs-\/>get\_num\_knots())\ \{}
\DoxyCodeLine{00118\ \ \ \ \ egg2pg\_cat.error()}
\DoxyCodeLine{00119\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}Invalid\ NURBSCurve\ number\ of\ knots\ for\ "{}}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ <<\ egg\_curve-\/>get\_name()\ <<\ \textcolor{stringliteral}{"{}:\ got\ "{}}\ <<\ num\_knots}
\DoxyCodeLine{00121\ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ knots,\ expected\ "{}}\ <<\ nurbs-\/>get\_num\_knots()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_knots;\ i++)\ \{}
\DoxyCodeLine{00126\ \ \ \ \ nurbs-\/>set\_knot(i,\ egg\_curve-\/>get\_knot(i));}
\DoxyCodeLine{00127\ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{keywordflow}{return}\ nurbs;}
\DoxyCodeLine{00130\ \}}

\end{DoxyCode}

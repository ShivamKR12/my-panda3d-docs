\doxysection{webcam\+Video\+V4\+L.\+cxx}
\hypertarget{webcamVideoV4L_8cxx_source}{}\label{webcamVideoV4L_8cxx_source}\index{panda/src/vision/webcamVideoV4L.cxx@{panda/src/vision/webcamVideoV4L.cxx}}
\mbox{\hyperlink{webcamVideoV4L_8cxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{webcamVideoV4L_8h}{webcamVideoV4L.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#if\ defined(HAVE\_VIDEO4LINUX)\ \&\&\ !defined(CPPPARSER)}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{webcamVideoCursorV4L_8h}{webcamVideoCursorV4L.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dcast_8h}{dcast.h}}"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <fcntl.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <sys/ioctl.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <linux/videodev2.h>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#ifndef\ CPPPARSER}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#ifndef\ VIDIOC\_ENUM\_FRAMESIZES}}
\DoxyCodeLine{00027\ \textcolor{keyword}{enum}\ v4l2\_frmsizetypes\ \{}
\DoxyCodeLine{00028\ \ \ V4L2\_FRMSIZE\_TYPE\_DISCRETE\ =\ 1,}
\DoxyCodeLine{00029\ \ \ V4L2\_FRMSIZE\_TYPE\_CONTINUOUS\ =\ 2,}
\DoxyCodeLine{00030\ \ \ V4L2\_FRMSIZE\_TYPE\_STEPWISE\ =\ 3,}
\DoxyCodeLine{00031\ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{struct\ }v4l2\_frmsize\_discrete\ \{}
\DoxyCodeLine{00034\ \ \ \_\_u32\ width;}
\DoxyCodeLine{00035\ \ \ \_\_u32\ height;}
\DoxyCodeLine{00036\ \};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{struct\ }v4l2\_frmsize\_stepwise\ \{}
\DoxyCodeLine{00039\ \ \ \_\_u32\ min\_width;}
\DoxyCodeLine{00040\ \ \ \_\_u32\ max\_width;}
\DoxyCodeLine{00041\ \ \ \_\_u32\ step\_width;}
\DoxyCodeLine{00042\ \ \ \_\_u32\ min\_height;}
\DoxyCodeLine{00043\ \ \ \_\_u32\ max\_height;}
\DoxyCodeLine{00044\ \ \ \_\_u32\ step\_height;}
\DoxyCodeLine{00045\ \};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{struct\ }v4l2\_frmsizeenum\ \{}
\DoxyCodeLine{00048\ \ \ \_\_u32\ index;}
\DoxyCodeLine{00049\ \ \ \_\_u32\ pixel\_format;}
\DoxyCodeLine{00050\ \ \ \_\_u32\ type;}
\DoxyCodeLine{00051\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_frmsize\_discrete\ discrete;}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_frmsize\_stepwise\ stepwise;}
\DoxyCodeLine{00054\ \ \ \};}
\DoxyCodeLine{00055\ \ \ \_\_u32\ reserved[2];}
\DoxyCodeLine{00056\ \};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#define\ VIDIOC\_ENUM\_FRAMESIZES\ \_IOWR('V',\ 74,\ struct\ v4l2\_frmsizeenum)}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#ifndef\ VIDIOC\_ENUM\_FRAMEINTERVALS}}
\DoxyCodeLine{00062\ \textcolor{keyword}{enum}\ v4l2\_frmivaltypes\ \{}
\DoxyCodeLine{00063\ \ \ V4L2\_FRMIVAL\_TYPE\_DISCRETE\ =\ 1,}
\DoxyCodeLine{00064\ \ \ V4L2\_FRMIVAL\_TYPE\_CONTINUOUS\ =\ 2,}
\DoxyCodeLine{00065\ \ \ V4L2\_FRMIVAL\_TYPE\_STEPWISE\ =\ 3,}
\DoxyCodeLine{00066\ \};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{struct\ }v4l2\_frmival\_stepwise\ \{}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{struct\ }v4l2\_fract\ min;}
\DoxyCodeLine{00070\ \ \ \textcolor{keyword}{struct\ }v4l2\_fract\ max;}
\DoxyCodeLine{00071\ \ \ \textcolor{keyword}{struct\ }v4l2\_fract\ step;}
\DoxyCodeLine{00072\ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{keyword}{struct\ }v4l2\_frmivalenum\ \{}
\DoxyCodeLine{00075\ \ \ \_\_u32\ index;}
\DoxyCodeLine{00076\ \ \ \_\_u32\ pixel\_format;}
\DoxyCodeLine{00077\ \ \ \_\_u32\ width;}
\DoxyCodeLine{00078\ \ \ \_\_u32\ height;}
\DoxyCodeLine{00079\ \ \ \_\_u32\ type;}
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{union\ }\{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_fract\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ discrete;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_frmival\_stepwise\ \ \ \ stepwise;}
\DoxyCodeLine{00083\ \ \ \};}
\DoxyCodeLine{00084\ \ \ \_\_u32\ reserved[2];}
\DoxyCodeLine{00085\ \};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#define\ VIDIOC\_ENUM\_FRAMEINTERVALS\ \_IOWR('V',\ 75,\ struct\ v4l2\_frmivalenum)}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \mbox{\hyperlink{classTypeHandle}{TypeHandle}}\ WebcamVideoV4L::\_type\_handle;}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00096\ \textcolor{keywordtype}{void}\ WebcamVideoV4L::}
\DoxyCodeLine{00097\ add\_options\_for\_size(\textcolor{keywordtype}{int}\ fd,\ \textcolor{keyword}{const}\ std::string\ \&dev,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name,\ \textcolor{keywordtype}{unsigned}\ width,\ \textcolor{keywordtype}{unsigned}\ height,\ \textcolor{keywordtype}{unsigned}\ pixelformat)\ \{}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{struct\ }v4l2\_frmivalenum\ frmivalenum;}
\DoxyCodeLine{00099\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ k\ =\ 0;;\ k++)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ memset(\&frmivalenum,\ 0,\ \textcolor{keyword}{sizeof}\ frmivalenum);}
\DoxyCodeLine{00101\ \ \ \ \ frmivalenum.index\ =\ k;}
\DoxyCodeLine{00102\ \ \ \ \ frmivalenum.pixel\_format\ =\ pixelformat;}
\DoxyCodeLine{00103\ \ \ \ \ frmivalenum.width\ =\ width;}
\DoxyCodeLine{00104\ \ \ \ \ frmivalenum.height\ =\ height;}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{if}\ (ioctl(fd,\ VIDIOC\_ENUM\_FRAMEINTERVALS,\ \&frmivalenum)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{double}\ fps\ =\ 0.0;}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordflow}{switch}\ (frmivalenum.type)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMIVAL\_TYPE\_DISCRETE:}
\DoxyCodeLine{00111\ \ \ \ \ \ \ fps\ =\ ((double)\ frmivalenum.discrete.denominator)\ /\ ((double)\ frmivalenum.discrete.numerator);}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMIVAL\_TYPE\_CONTINUOUS:}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMIVAL\_TYPE\_STEPWISE:}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Select\ the\ maximum\ framerate.}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ max\_fps\ =\ \ ((double)\ frmivalenum.stepwise.max.denominator)\ /\ ((double)\ frmivalenum.stepwise.max.numerator);}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ fps\ =\ max\_fps;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Create\ a\ new\ webcam\ video\ object}}
\DoxyCodeLine{00128\ \ \ \ \ PT(WebcamVideoV4L)\ wc\ =\ \textcolor{keyword}{new}\ WebcamVideoV4L;}
\DoxyCodeLine{00129\ \ \ \ \ wc-\/>set\_name(name);}
\DoxyCodeLine{00130\ \ \ \ \ wc-\/>\_device\ =\ dev;}
\DoxyCodeLine{00131\ \ \ \ \ wc-\/>\_size\_x\ =\ width;}
\DoxyCodeLine{00132\ \ \ \ \ wc-\/>\_size\_y\ =\ height;}
\DoxyCodeLine{00133\ \ \ \ \ wc-\/>\_fps\ =\ fps;}
\DoxyCodeLine{00134\ \ \ \ \ wc-\/>\_pformat\ =\ pixelformat;}
\DoxyCodeLine{00135\ \ \ \ \ wc-\/>\_pixel\_format\ =\ std::string((\textcolor{keywordtype}{char}*)\ \&pixelformat,\ 4);}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ WebcamVideoV4L::\_all\_webcams.push\_back(DCAST(\mbox{\hyperlink{classWebcamVideo}{WebcamVideo}},\ wc));}
\DoxyCodeLine{00138\ \ \ \}}
\DoxyCodeLine{00139\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00145\ \textcolor{keywordtype}{void}\ find\_all\_webcams\_v4l()\ \{}
\DoxyCodeLine{00146\ \ \ \textcolor{keyword}{struct\ }v4l2\_capability\ cap2;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ vector\_string\ devs;}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{classGlobPattern}{GlobPattern}}\ pattern\ (\textcolor{stringliteral}{"{}/dev/video*"{}});}
\DoxyCodeLine{00150\ \ \ pattern.match\_files(devs);}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordflow}{for}\ (vector\_string::iterator\ it\ =\ devs.begin();\ it\ !=\ devs.end();\ ++it)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{int}\ fd\ =\ open(it-\/>c\_str(),\ O\_RDWR);}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{if}\ (fd\ !=\ -\/1)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ Video4Linux2\ capabilities}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioctl(fd,\ VIDIOC\_QUERYCAP,\ \&cap2)\ !=\ -\/1)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((cap2.capabilities\ \&\ V4L2\_CAP\_VIDEO\_CAPTURE)\ \&\&}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ (cap2.capabilities\ \&\ V4L2\_CAP\_STREAMING))\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_fmtdesc\ fmt;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;;\ i++)\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ memset(\&fmt,\ 0,\ \textcolor{keyword}{sizeof}\ fmt);}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ fmt.index\ =\ i;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ fmt.type\ =\ V4L2\_BUF\_TYPE\_VIDEO\_CAPTURE;}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioctl(fd,\ VIDIOC\_ENUM\_FMT,\ \&fmt)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ accept\ supported\ formats.}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (fmt.pixelformat)\ \{}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#ifdef\ HAVE\_JPEG}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_MJPEG:}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_YUYV:}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_BGR24:}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_BGR32:}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_RGB24:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_RGB32:}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_PIX\_FMT\_GREY:}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }v4l2\_frmsizeenum\ frmsizeenum;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;;\ j++)\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memset(\&frmsizeenum,\ 0,\ \textcolor{keyword}{sizeof}\ frmsizeenum);}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frmsizeenum.index\ =\ j;}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frmsizeenum.pixel\_format\ =\ fmt.pixelformat;}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioctl(fd,\ VIDIOC\_ENUM\_FRAMESIZES,\ \&frmsizeenum)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (frmsizeenum.type)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMSIZE\_TYPE\_DISCRETE:}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Easy,\ add\ the\ options\ with\ this\ discrete\ size.}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WebcamVideoV4L::}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ add\_options\_for\_size(fd,\ *it,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)cap2.card,}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frmsizeenum.discrete.width,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frmsizeenum.discrete.height,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fmt.pixelformat);}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMSIZE\_TYPE\_CONTINUOUS:}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Okay,\ er,\ we\ don't\ have\ a\ proper\ handling\ of\ this,\ so}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ let's\ add\ all\ powers\ of\ two\ in\ this\ range.}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_u32\ width\ =\ \mbox{\hyperlink{classTexture_a9277f24691a5281de91579f1d7751391}{Texture::up\_to\_power\_2}}(frmsizeenum.stepwise.min\_width);}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ width\ <=\ frmsizeenum.stepwise.max\_width;\ width\ *=\ 2)\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_u32\ height\ =\ \mbox{\hyperlink{classTexture_a9277f24691a5281de91579f1d7751391}{Texture::up\_to\_power\_2}}(frmsizeenum.stepwise.min\_height);}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ height\ <=\ frmsizeenum.stepwise.max\_height;\ height\ *=\ 2)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WebcamVideoV4L::}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ add\_options\_for\_size(fd,\ *it,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)cap2.card,\ width,\ height,\ fmt.pixelformat);}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ V4L2\_FRMSIZE\_TYPE\_STEPWISE:}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_u32\ width\ =\ \mbox{\hyperlink{classTexture_a9277f24691a5281de91579f1d7751391}{Texture::up\_to\_power\_2}}(frmsizeenum.stepwise.min\_width);}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ width\ <=\ frmsizeenum.stepwise.max\_width;\ width\ *=\ 2)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_u32\ height\ =\ \mbox{\hyperlink{classTexture_a9277f24691a5281de91579f1d7751391}{Texture::up\_to\_power\_2}}(frmsizeenum.stepwise.min\_height);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ height\ <=\ frmsizeenum.stepwise.max\_height;\ height\ *=\ 2)\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((width\ -\/\ frmsizeenum.stepwise.min\_width)\ \%\ frmsizeenum.stepwise.step\_width\ ==\ 0\ \&\&}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (height\ -\/\ frmsizeenum.stepwise.min\_height)\ \%\ frmsizeenum.stepwise.step\_height\ ==\ 0)\ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WebcamVideoV4L::}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ add\_options\_for\_size(fd,\ *it,\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *)cap2.card,\ width,\ height,\ fmt.pixelformat);}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \}}
\DoxyCodeLine{00241\ \ \ \ \ close(fd);}
\DoxyCodeLine{00242\ \ \ \}}
\DoxyCodeLine{00243\ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00248\ PT(\mbox{\hyperlink{classMovieVideoCursor}{MovieVideoCursor}})\ WebcamVideoV4L::}
\DoxyCodeLine{00249\ open()\ \{}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ WebcamVideoCursorV4L(\textcolor{keyword}{this});}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Panda3D C++ Architecture: DatagramQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Panda3D C++ Architecture
   </div>
   <div id="projectbrief">API reference for Panda3D&#39;s C++ codebase.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classDatagramQueue-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DatagramQueue Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="datagramQueue_8h_source.html">datagramQueue.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9bb0adc82b7a4cc74666eb8539c1f94b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#a9bb0adc82b7a4cc74666eb8539c1f94b">shutdown</a> ()</td></tr>
<tr class="separator:a9bb0adc82b7a4cc74666eb8539c1f94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae83a40bf8d0f785620cef13734d98d3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#ae83a40bf8d0f785620cef13734d98d3a">insert</a> (const <a class="el" href="classNetDatagram.html">NetDatagram</a> &amp;data, bool block=false)</td></tr>
<tr class="separator:ae83a40bf8d0f785620cef13734d98d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc27e2c7773fa497c486b94723a83393"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#adc27e2c7773fa497c486b94723a83393">extract</a> (<a class="el" href="classNetDatagram.html">NetDatagram</a> &amp;result)</td></tr>
<tr class="separator:adc27e2c7773fa497c486b94723a83393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a760d662a908f6a7f413156af691d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#ab7a760d662a908f6a7f413156af691d2">set_max_queue_size</a> (int max_size)</td></tr>
<tr class="separator:ab7a760d662a908f6a7f413156af691d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed1eed10cb995c1e679975a04413171"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#a7ed1eed10cb995c1e679975a04413171">get_max_queue_size</a> () const</td></tr>
<tr class="separator:a7ed1eed10cb995c1e679975a04413171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86cdbb3b1bc838be0d79b78cf45f377"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatagramQueue.html#af86cdbb3b1bc838be0d79b78cf45f377">get_current_queue_size</a> () const</td></tr>
<tr class="separator:af86cdbb3b1bc838be0d79b78cf45f377"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A thread-safe, FIFO queue of NetDatagrams. This is used by <a class="el" href="classConnectionWriter.html">ConnectionWriter</a> for queuing up datagrams for its various threads to write to sockets. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="adc27e2c7773fa497c486b94723a83393" name="adc27e2c7773fa497c486b94723a83393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc27e2c7773fa497c486b94723a83393">&#9670;&#160;</a></span>extract()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DatagramQueue::extract </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNetDatagram.html">NetDatagram</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extracts a datagram from the head of the queue, if one is available. If a datagram is available, this will immediately return; otherwise, it will block until a datagram becomes available. Multiple threads may simultaneously block on extract(); when a datagram is subsequently inserted into the queue, one of the threads will return from extract() with the datagram.</p>
<p>The return value is true if the datagram is successfully extracted, or false if the queue was destroyed while waiting. (In the case of a false return, the thread should not attempt to operate on the queue again.) </p>

</div>
</div>
<a id="af86cdbb3b1bc838be0d79b78cf45f377" name="af86cdbb3b1bc838be0d79b78cf45f377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86cdbb3b1bc838be0d79b78cf45f377">&#9670;&#160;</a></span>get_current_queue_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DatagramQueue::get_current_queue_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current number of things in the queue. </p>

</div>
</div>
<a id="a7ed1eed10cb995c1e679975a04413171" name="a7ed1eed10cb995c1e679975a04413171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed1eed10cb995c1e679975a04413171">&#9670;&#160;</a></span>get_max_queue_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DatagramQueue::get_max_queue_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the maximum size the queue is allowed to grow to. See <a class="el" href="classDatagramQueue.html#ab7a760d662a908f6a7f413156af691d2">set_max_queue_size()</a>. </p>

</div>
</div>
<a id="ae83a40bf8d0f785620cef13734d98d3a" name="ae83a40bf8d0f785620cef13734d98d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae83a40bf8d0f785620cef13734d98d3a">&#9670;&#160;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DatagramQueue::insert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNetDatagram.html">NetDatagram</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>block</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts the indicated datagram onto the end of the queue, and returns. If the queue is empty and any threads are waiting on the queue, this will wake one of them up. Returns true if successful, false if the queue was full.</p>
<p>If block is true, this will not return until successful, waiting until the queue has space available if necessary. </p>

</div>
</div>
<a id="ab7a760d662a908f6a7f413156af691d2" name="ab7a760d662a908f6a7f413156af691d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a760d662a908f6a7f413156af691d2">&#9670;&#160;</a></span>set_max_queue_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DatagramQueue::set_max_queue_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the maximum size the queue is allowed to grow to. This is primarily for a sanity check; this is a limit beyond which we can assume something bad has happened.</p>
<p>It's also a crude check against unfortunate seg faults due to the queue filling up and quietly consuming all available memory. </p>

</div>
</div>
<a id="a9bb0adc82b7a4cc74666eb8539c1f94b" name="a9bb0adc82b7a4cc74666eb8539c1f94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bb0adc82b7a4cc74666eb8539c1f94b">&#9670;&#160;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DatagramQueue::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks the queue as shutting down, which will eventually cause all threads blocking on extract() to return false. The normal way to delete a <a class="el" href="classDatagramQueue.html">DatagramQueue</a> will be to call first <a class="el" href="classDatagramQueue.html#a9bb0adc82b7a4cc74666eb8539c1f94b">shutdown()</a> and then wait for all known threads to terminate. Then it is safe to delete the queue. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>panda/src/net/<a class="el" href="datagramQueue_8h_source.html">datagramQueue.h</a></li>
<li>panda/src/net/<a class="el" href="datagramQueue_8cxx_source.html">datagramQueue.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>

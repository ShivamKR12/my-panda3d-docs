<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Panda3D C++ Architecture: GlobalPointerRegistry Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Panda3D C++ Architecture
   </div>
   <div id="projectbrief">API reference for Panda3D&#39;s C++ codebase.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classGlobalPointerRegistry-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">GlobalPointerRegistry Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="globalPointerRegistry_8h_source.html">globalPointerRegistry.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7c365e5bfaad675bcbf1ab4e88c60282"><td class="memItemLeft" align="right" valign="top"><a id="a7c365e5bfaad675bcbf1ab4e88c60282" name="a7c365e5bfaad675bcbf1ab4e88c60282"></a>
static INLINE void *&#160;</td><td class="memItemRight" valign="bottom"><b>get_pointer</b> (<a class="el" href="classTypeHandle.html">TypeHandle</a> type)</td></tr>
<tr class="separator:a7c365e5bfaad675bcbf1ab4e88c60282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa230acc88aef8acdd3a5ce8da31f92ca"><td class="memItemLeft" align="right" valign="top"><a id="aa230acc88aef8acdd3a5ce8da31f92ca" name="aa230acc88aef8acdd3a5ce8da31f92ca"></a>
static INLINE void&#160;</td><td class="memItemRight" valign="bottom"><b>store_pointer</b> (<a class="el" href="classTypeHandle.html">TypeHandle</a> type, void *ptr)</td></tr>
<tr class="separator:aa230acc88aef8acdd3a5ce8da31f92ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956fecf8cde0b0078795940d200de958"><td class="memItemLeft" align="right" valign="top"><a id="a956fecf8cde0b0078795940d200de958" name="a956fecf8cde0b0078795940d200de958"></a>
static INLINE void&#160;</td><td class="memItemRight" valign="bottom"><b>clear_pointer</b> (<a class="el" href="classTypeHandle.html">TypeHandle</a> type)</td></tr>
<tr class="separator:a956fecf8cde0b0078795940d200de958"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class maintains a one-to-one mapping from <a class="el" href="classTypeHandle.html">TypeHandle</a> to a void * pointer. Its purpose is to store a pointer to some class data for a given class.</p>
<p>Normally, one would simply use a static data member to store class data. However, when the static data is associated with a template class, the dynamic loader may have difficulty in properly resolving the statics.</p>
<p>Consider: class foo&lt;int&gt; defines a static member, _a. There should be only one instance of _a shared between all instances of foo&lt;int&gt;, and there will be a different instance of _a shared between all instances of foo&lt;float&gt;.</p>
<p>Now suppose that two different shared libraries instantiate foo&lt;int&gt;. In each .so, there exists a different foo&lt;int&gt;::_a. It is the loader's job to recognize this and collapse them together when both libraries are loaded. This usually works, but sometimes it doesn't, and you end up with two different instances of foo&lt;int&gt;::_a; some functions see one instance, while others see the other. We have particularly seen this problem occur under Linux with gcc.</p>
<p>This class attempts to circumvent the problem by managing pointers to data based on <a class="el" href="classTypeHandle.html">TypeHandle</a>. Since the <a class="el" href="classTypeHandle.html">TypeHandle</a> will already be unique based on the string name supplied to the init_type() function, it can be used to differentiate foo&lt;int&gt; from foo&lt;float&gt;, while allowing different instances of foo&lt;int&gt; to guarantee that they share the same static data. </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>panda/src/putil/<a class="el" href="globalPointerRegistry_8h_source.html">globalPointerRegistry.h</a></li>
<li>panda/src/putil/<a class="el" href="globalPointerRegistry_8cxx_source.html">globalPointerRegistry.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
